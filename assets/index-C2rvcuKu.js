var aC=Object.defineProperty;var Pw=r=>{throw TypeError(r)};var lC=(r,e,t)=>e in r?aC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var or=(r,e,t)=>lC(r,typeof e!="symbol"?e+"":e,t),xm=(r,e,t)=>e.has(r)||Pw("Cannot "+t);var L=(r,e,t)=>(xm(r,e,"read from private field"),t?t.call(r):e.get(r)),nt=(r,e,t)=>e.has(r)?Pw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Be=(r,e,t,n)=>(xm(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),qe=(r,e,t)=>(xm(r,e,"access private method"),t);var fa=(r,e,t,n)=>({set _(s){Be(r,e,s,t)},get _(){return L(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function uC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Am={exports:{}},ec={},Im={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function cC(){if(Nw)return kt;Nw=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function T(B,ue,G){this.props=B,this.context=ue,this.refs=S,this.updater=G||_}T.prototype.isReactComponent={},T.prototype.setState=function(B,ue){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ue,"setState")},T.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function N(){}N.prototype=T.prototype;function x(B,ue,G){this.props=B,this.context=ue,this.refs=S,this.updater=G||_}var k=x.prototype=new N;k.constructor=x,b(k,T.prototype),k.isPureReactComponent=!0;var q=Array.isArray,H=Object.prototype.hasOwnProperty,$={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(B,ue,G){var we,De={},oe=null,Ge=null;if(ue!=null)for(we in ue.ref!==void 0&&(Ge=ue.ref),ue.key!==void 0&&(oe=""+ue.key),ue)H.call(ue,we)&&!P.hasOwnProperty(we)&&(De[we]=ue[we]);var ce=arguments.length-2;if(ce===1)De.children=G;else if(1<ce){for(var ee=Array(ce),xe=0;xe<ce;xe++)ee[xe]=arguments[xe+2];De.children=ee}if(B&&B.defaultProps)for(we in ce=B.defaultProps,ce)De[we]===void 0&&(De[we]=ce[we]);return{$$typeof:r,type:B,key:oe,ref:Ge,props:De,_owner:$.current}}function V(B,ue){return{$$typeof:r,type:B.type,key:ue,ref:B.ref,props:B.props,_owner:B._owner}}function M(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function W(B){var ue={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(G){return ue[G]})}var O=/\/+/g;function F(B,ue){return typeof B=="object"&&B!==null&&B.key!=null?W(""+B.key):ue.toString(36)}function ye(B,ue,G,we,De){var oe=typeof B;(oe==="undefined"||oe==="boolean")&&(B=null);var Ge=!1;if(B===null)Ge=!0;else switch(oe){case"string":case"number":Ge=!0;break;case"object":switch(B.$$typeof){case r:case e:Ge=!0}}if(Ge)return Ge=B,De=De(Ge),B=we===""?"."+F(Ge,0):we,q(De)?(G="",B!=null&&(G=B.replace(O,"$&/")+"/"),ye(De,ue,G,"",function(xe){return xe})):De!=null&&(M(De)&&(De=V(De,G+(!De.key||Ge&&Ge.key===De.key?"":(""+De.key).replace(O,"$&/")+"/")+B)),ue.push(De)),1;if(Ge=0,we=we===""?".":we+":",q(B))for(var ce=0;ce<B.length;ce++){oe=B[ce];var ee=we+F(oe,ce);Ge+=ye(oe,ue,G,ee,De)}else if(ee=y(B),typeof ee=="function")for(B=ee.call(B),ce=0;!(oe=B.next()).done;)oe=oe.value,ee=we+F(oe,ce++),Ge+=ye(oe,ue,G,ee,De);else if(oe==="object")throw ue=String(B),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return Ge}function se(B,ue,G){if(B==null)return B;var we=[],De=0;return ye(B,we,"","",function(oe){return ue.call(G,oe,De++)}),we}function Ne(B){if(B._status===-1){var ue=B._result;ue=ue(),ue.then(function(G){(B._status===0||B._status===-1)&&(B._status=1,B._result=G)},function(G){(B._status===0||B._status===-1)&&(B._status=2,B._result=G)}),B._status===-1&&(B._status=0,B._result=ue)}if(B._status===1)return B._result.default;throw B._result}var Ie={current:null},he={transition:null},Re={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:he,ReactCurrentOwner:$};return kt.Children={map:se,forEach:function(B,ue,G){se(B,function(){ue.apply(this,arguments)},G)},count:function(B){var ue=0;return se(B,function(){ue++}),ue},toArray:function(B){return se(B,function(ue){return ue})||[]},only:function(B){if(!M(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},kt.Component=T,kt.Fragment=t,kt.Profiler=s,kt.PureComponent=x,kt.StrictMode=n,kt.Suspense=c,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,kt.cloneElement=function(B,ue,G){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var we=b({},B.props),De=B.key,oe=B.ref,Ge=B._owner;if(ue!=null){if(ue.ref!==void 0&&(oe=ue.ref,Ge=$.current),ue.key!==void 0&&(De=""+ue.key),B.type&&B.type.defaultProps)var ce=B.type.defaultProps;for(ee in ue)H.call(ue,ee)&&!P.hasOwnProperty(ee)&&(we[ee]=ue[ee]===void 0&&ce!==void 0?ce[ee]:ue[ee])}var ee=arguments.length-2;if(ee===1)we.children=G;else if(1<ee){ce=Array(ee);for(var xe=0;xe<ee;xe++)ce[xe]=arguments[xe+2];we.children=ce}return{$$typeof:r,type:B.type,key:De,ref:oe,props:we,_owner:Ge}},kt.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},kt.createElement=R,kt.createFactory=function(B){var ue=R.bind(null,B);return ue.type=B,ue},kt.createRef=function(){return{current:null}},kt.forwardRef=function(B){return{$$typeof:u,render:B}},kt.isValidElement=M,kt.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:Ne}},kt.memo=function(B,ue){return{$$typeof:h,type:B,compare:ue===void 0?null:ue}},kt.startTransition=function(B){var ue=he.transition;he.transition={};try{B()}finally{he.transition=ue}},kt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},kt.useCallback=function(B,ue){return Ie.current.useCallback(B,ue)},kt.useContext=function(B){return Ie.current.useContext(B)},kt.useDebugValue=function(){},kt.useDeferredValue=function(B){return Ie.current.useDeferredValue(B)},kt.useEffect=function(B,ue){return Ie.current.useEffect(B,ue)},kt.useId=function(){return Ie.current.useId()},kt.useImperativeHandle=function(B,ue,G){return Ie.current.useImperativeHandle(B,ue,G)},kt.useInsertionEffect=function(B,ue){return Ie.current.useInsertionEffect(B,ue)},kt.useLayoutEffect=function(B,ue){return Ie.current.useLayoutEffect(B,ue)},kt.useMemo=function(B,ue){return Ie.current.useMemo(B,ue)},kt.useReducer=function(B,ue,G){return Ie.current.useReducer(B,ue,G)},kt.useRef=function(B){return Ie.current.useRef(B)},kt.useState=function(B){return Ie.current.useState(B)},kt.useSyncExternalStore=function(B,ue,G){return Ie.current.useSyncExternalStore(B,ue,G)},kt.useTransition=function(){return Ie.current.useTransition()},kt.version="18.2.0",kt}var Ow;function gv(){return Ow||(Ow=1,Im.exports=cC()),Im.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function hC(){if(Dw)return ec;Dw=1;var r=gv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,h){var d,m={},y=null,_=null;h!==void 0&&(y=""+h),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(_=c.ref);for(d in c)n.call(c,d)&&!o.hasOwnProperty(d)&&(m[d]=c[d]);if(u&&u.defaultProps)for(d in c=u.defaultProps,c)m[d]===void 0&&(m[d]=c[d]);return{$$typeof:e,type:u,key:y,ref:_,props:m,_owner:s.current}}return ec.Fragment=t,ec.jsx=l,ec.jsxs=l,ec}var Lw;function fC(){return Lw||(Lw=1,Am.exports=hC()),Am.exports}var T1=fC();const z=T1.jsx,be=T1.jsxs;var pe=gv();const Pt=uC(pe);var df={},Cm={exports:{}},Ln={},Rm={exports:{}},km={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function dC(){return Mw||(Mw=1,function(r){function e(he,Re){var B=he.length;he.push(Re);e:for(;0<B;){var ue=B-1>>>1,G=he[ue];if(0<s(G,Re))he[ue]=Re,he[B]=G,B=ue;else break e}}function t(he){return he.length===0?null:he[0]}function n(he){if(he.length===0)return null;var Re=he[0],B=he.pop();if(B!==Re){he[0]=B;e:for(var ue=0,G=he.length,we=G>>>1;ue<we;){var De=2*(ue+1)-1,oe=he[De],Ge=De+1,ce=he[Ge];if(0>s(oe,B))Ge<G&&0>s(ce,oe)?(he[ue]=ce,he[Ge]=B,ue=Ge):(he[ue]=oe,he[De]=B,ue=De);else if(Ge<G&&0>s(ce,B))he[ue]=ce,he[Ge]=B,ue=Ge;else break e}}return Re}function s(he,Re){var B=he.sortIndex-Re.sortIndex;return B!==0?B:he.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var c=[],h=[],d=1,m=null,y=3,_=!1,b=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(he){for(var Re=t(h);Re!==null;){if(Re.callback===null)n(h);else if(Re.startTime<=he)n(h),Re.sortIndex=Re.expirationTime,e(c,Re);else break;Re=t(h)}}function q(he){if(S=!1,k(he),!b)if(t(c)!==null)b=!0,Ne(H);else{var Re=t(h);Re!==null&&Ie(q,Re.startTime-he)}}function H(he,Re){b=!1,S&&(S=!1,N(R),R=-1),_=!0;var B=y;try{for(k(Re),m=t(c);m!==null&&(!(m.expirationTime>Re)||he&&!W());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,y=m.priorityLevel;var G=ue(m.expirationTime<=Re);Re=r.unstable_now(),typeof G=="function"?m.callback=G:m===t(c)&&n(c),k(Re)}else n(c);m=t(c)}if(m!==null)var we=!0;else{var De=t(h);De!==null&&Ie(q,De.startTime-Re),we=!1}return we}finally{m=null,y=B,_=!1}}var $=!1,P=null,R=-1,V=5,M=-1;function W(){return!(r.unstable_now()-M<V)}function O(){if(P!==null){var he=r.unstable_now();M=he;var Re=!0;try{Re=P(!0,he)}finally{Re?F():($=!1,P=null)}}else $=!1}var F;if(typeof x=="function")F=function(){x(O)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,se=ye.port2;ye.port1.onmessage=O,F=function(){se.postMessage(null)}}else F=function(){T(O,0)};function Ne(he){P=he,$||($=!0,F())}function Ie(he,Re){R=T(function(){he(r.unstable_now())},Re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(he){he.callback=null},r.unstable_continueExecution=function(){b||_||(b=!0,Ne(H))},r.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<he?Math.floor(1e3/he):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(he){switch(y){case 1:case 2:case 3:var Re=3;break;default:Re=y}var B=y;y=Re;try{return he()}finally{y=B}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(he,Re){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var B=y;y=he;try{return Re()}finally{y=B}},r.unstable_scheduleCallback=function(he,Re,B){var ue=r.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ue+B:ue):B=ue,he){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,he={id:d++,callback:Re,priorityLevel:he,startTime:B,expirationTime:G,sortIndex:-1},B>ue?(he.sortIndex=B,e(h,he),t(c)===null&&he===t(h)&&(S?(N(R),R=-1):S=!0,Ie(q,B-ue))):(he.sortIndex=G,e(c,he),b||_||(b=!0,Ne(H))),he},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(he){var Re=y;return function(){var B=y;y=Re;try{return he.apply(this,arguments)}finally{y=B}}}}(km)),km}var Fw;function pC(){return Fw||(Fw=1,Rm.exports=dC()),Rm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function mC(){if(Vw)return Ln;Vw=1;var r=gv(),e=pC();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,f=1;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)n.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function y(i){return c.call(m,i)?!0:c.call(d,i)?!1:h.test(i)?m[i]=!0:(d[i]=!0,!1)}function _(i,a,f,g){if(f!==null&&f.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,a,f,g){if(a===null||typeof a>"u"||_(i,a,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(i,a,f,g,E,C,j){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=E,this.mustUseProperty=f,this.propertyName=i,this.type=a,this.sanitizeURL=C,this.removeEmptyString=j}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){T[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];T[a]=new S(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){T[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){T[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){T[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){T[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){T[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){T[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){T[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function x(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(N,x);T[a]=new S(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(N,x);T[a]=new S(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(N,x);T[a]=new S(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function k(i,a,f,g){var E=T.hasOwnProperty(a)?T[a]:null;(E!==null?E.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,f,E,g)&&(f=null),g||E===null?y(a)&&(f===null?i.removeAttribute(a):i.setAttribute(a,""+f)):E.mustUseProperty?i[E.propertyName]=f===null?E.type===3?!1:"":f:(a=E.attributeName,g=E.attributeNamespace,f===null?i.removeAttribute(a):(E=E.type,f=E===3||E===4&&f===!0?"":""+f,g?i.setAttributeNS(g,a,f):i.setAttribute(a,f))))}var q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),$=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),W=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),he=Symbol.iterator;function Re(i){return i===null||typeof i!="object"?null:(i=he&&i[he]||i["@@iterator"],typeof i=="function"?i:null)}var B=Object.assign,ue;function G(i){if(ue===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);ue=a&&a[1]||""}return`
`+ue+i}var we=!1;function De(i,a){if(!i||we)return"";we=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Ce){var g=Ce}Reflect.construct(i,[],a)}else{try{a.call()}catch(Ce){g=Ce}i.call(a.prototype)}else{try{throw Error()}catch(Ce){g=Ce}i()}}catch(Ce){if(Ce&&g&&typeof Ce.stack=="string"){for(var E=Ce.stack.split(`
`),C=g.stack.split(`
`),j=E.length-1,te=C.length-1;1<=j&&0<=te&&E[j]!==C[te];)te--;for(;1<=j&&0<=te;j--,te--)if(E[j]!==C[te]){if(j!==1||te!==1)do if(j--,te--,0>te||E[j]!==C[te]){var fe=`
`+E[j].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=j&&0<=te);break}}}finally{we=!1,Error.prepareStackTrace=f}return(i=i?i.displayName||i.name:"")?G(i):""}function oe(i){switch(i.tag){case 5:return G(i.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return i=De(i.type,!1),i;case 11:return i=De(i.type.render,!1),i;case 1:return i=De(i.type,!0),i;default:return""}}function Ge(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case $:return"Portal";case V:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case ye:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case W:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case O:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case se:return a=i.displayName||null,a!==null?a:Ge(i.type)||"Memo";case Ne:a=i._payload,i=i._init;try{return Ge(i(a))}catch{}}return null}function ce(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ge(a);case 8:return a===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ee(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function me(i){var a=xe(i)?"checked":"value",f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),g=""+i[a];if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var E=f.get,C=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return E.call(this)},set:function(j){g=""+j,C.call(this,j)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(j){g=""+j},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function de(i){i._valueTracker||(i._valueTracker=me(i))}function ve(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var f=a.getValue(),g="";return i&&(g=xe(i)?i.checked?"true":"false":i.value),i=g,i!==f?(a.setValue(i),!0):!1}function Fe(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Oe(i,a){var f=a.checked;return B({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??i._wrapperState.initialChecked})}function ne(i,a){var f=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;f=ee(a.value!=null?a.value:f),i._wrapperState={initialChecked:g,initialValue:f,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function le(i,a){a=a.checked,a!=null&&k(i,"checked",a,!1)}function Ee(i,a){le(i,a);var f=ee(a.value),g=a.type;if(f!=null)g==="number"?(f===0&&i.value===""||i.value!=f)&&(i.value=""+f):i.value!==""+f&&(i.value=""+f);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?ke(i,a.type,f):a.hasOwnProperty("defaultValue")&&ke(i,a.type,ee(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Me(i,a,f){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,f||a===i.value||(i.value=a),i.defaultValue=a}f=i.name,f!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,f!==""&&(i.name=f)}function ke(i,a,f){(a!=="number"||Fe(i.ownerDocument)!==i)&&(f==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+f&&(i.defaultValue=""+f))}var Ve=Array.isArray;function ae(i,a,f,g){if(i=i.options,a){a={};for(var E=0;E<f.length;E++)a["$"+f[E]]=!0;for(f=0;f<i.length;f++)E=a.hasOwnProperty("$"+i[f].value),i[f].selected!==E&&(i[f].selected=E),E&&g&&(i[f].defaultSelected=!0)}else{for(f=""+ee(f),a=null,E=0;E<i.length;E++){if(i[E].value===f){i[E].selected=!0,g&&(i[E].defaultSelected=!0);return}a!==null||i[E].disabled||(a=i[E])}a!==null&&(a.selected=!0)}}function Q(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return B({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function re(i,a){var f=a.value;if(f==null){if(f=a.children,a=a.defaultValue,f!=null){if(a!=null)throw Error(t(92));if(Ve(f)){if(1<f.length)throw Error(t(93));f=f[0]}a=f}a==null&&(a=""),f=a}i._wrapperState={initialValue:ee(f)}}function Z(i,a){var f=ee(a.value),g=ee(a.defaultValue);f!=null&&(f=""+f,f!==i.value&&(i.value=f),a.defaultValue==null&&i.defaultValue!==f&&(i.defaultValue=f)),g!=null&&(i.defaultValue=""+g)}function Ue(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function v(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?v(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var A,U=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,f,g,E){MSApp.execUnsafeLocalFunction(function(){return i(a,f,g,E)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(A=A||document.createElement("div"),A.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=A.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function J(i,a){if(a){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=a;return}}i.textContent=a}var ie={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];Object.keys(ie).forEach(function(i){_e.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),ie[a]=ie[i]})});function Ze(i,a,f){return a==null||typeof a=="boolean"||a===""?"":f||typeof a!="number"||a===0||ie.hasOwnProperty(i)&&ie[i]?(""+a).trim():a+"px"}function et(i,a){i=i.style;for(var f in a)if(a.hasOwnProperty(f)){var g=f.indexOf("--")===0,E=Ze(f,a[f],g);f==="float"&&(f="cssFloat"),g?i.setProperty(f,E):i[f]=E}}var ft=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(i,a){if(a){if(ft[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function mt(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _r=null;function wr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xr=null,Ct=null,Wt=null;function gt(i){if(i=Uu(i)){if(typeof xr!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Ih(a),xr(i.stateNode,i.type,a))}}function Rt(i){Ct?Wt?Wt.push(i):Wt=[i]:Ct=i}function mr(){if(Ct){var i=Ct,a=Wt;if(Wt=Ct=null,gt(i),a)for(i=0;i<a.length;i++)gt(a[i])}}function Gt(i,a){return i(a)}function br(){}var jr=!1;function Y(i,a,f){if(jr)return i(a,f);jr=!0;try{return Gt(i,a,f)}finally{jr=!1,(Ct!==null||Wt!==null)&&(br(),mr())}}function X(i,a){var f=i.stateNode;if(f===null)return null;var g=Ih(f);if(g===null)return null;f=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(t(231,a,typeof f));return f}var Ye=!1;if(u)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Ye=!1}function st(i,a,f,g,E,C,j,te,fe){var Ce=Array.prototype.slice.call(arguments,3);try{a.apply(f,Ce)}catch(Qe){this.onError(Qe)}}var nr=!1,Pr=null,Nr=!1,zs=null,wu={onError:function(i){nr=!0,Pr=i}};function os(i,a,f,g,E,C,j,te,fe){nr=!1,Pr=null,st.apply(wu,arguments)}function qo(i,a,f,g,E,C,j,te,fe){if(os.apply(this,arguments),nr){if(nr){var Ce=Pr;nr=!1,Pr=null}else throw Error(t(198));Nr||(Nr=!0,zs=Ce)}}function mn(i){var a=i,f=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(f=a.return),i=a.return;while(i)}return a.tag===3?f:null}function hi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function gn(i){if(mn(i)!==i)throw Error(t(188))}function Mi(i){var a=i.alternate;if(!a){if(a=mn(i),a===null)throw Error(t(188));return a!==i?null:i}for(var f=i,g=a;;){var E=f.return;if(E===null)break;var C=E.alternate;if(C===null){if(g=E.return,g!==null){f=g;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===f)return gn(E),i;if(C===g)return gn(E),a;C=C.sibling}throw Error(t(188))}if(f.return!==g.return)f=E,g=C;else{for(var j=!1,te=E.child;te;){if(te===f){j=!0,f=E,g=C;break}if(te===g){j=!0,g=E,f=C;break}te=te.sibling}if(!j){for(te=C.child;te;){if(te===f){j=!0,f=C,g=E;break}if(te===g){j=!0,g=C,f=E;break}te=te.sibling}if(!j)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?i:a}function jn(i){return i=Mi(i),i!==null?rn(i):null}function rn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=rn(i);if(a!==null)return a;i=i.sibling}return null}var Ya=e.unstable_scheduleCallback,bu=e.unstable_cancelCallback,eh=e.unstable_shouldYield,ep=e.unstable_requestPaint,Jt=e.unstable_now,th=e.unstable_getCurrentPriorityLevel,Ho=e.unstable_ImmediatePriority,Ws=e.unstable_UserBlockingPriority,Jn=e.unstable_NormalPriority,Eu=e.unstable_LowPriority,rh=e.unstable_IdlePriority,Qo=null,$n=null;function nh(i){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Qo,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:sh,Su=Math.log,ih=Math.LN2;function sh(i){return i>>>=0,i===0?32:31-(Su(i)/ih|0)|0}var Ja=64,Xa=4194304;function qs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ko(i,a){var f=i.pendingLanes;if(f===0)return 0;var g=0,E=i.suspendedLanes,C=i.pingedLanes,j=f&268435455;if(j!==0){var te=j&~E;te!==0?g=qs(te):(C&=j,C!==0&&(g=qs(C)))}else j=f&~E,j!==0?g=qs(j):C!==0&&(g=qs(C));if(g===0)return 0;if(a!==0&&a!==g&&(a&E)===0&&(E=g&-g,C=a&-a,E>=C||E===16&&(C&4194240)!==0))return a;if((g&4)!==0&&(g|=f&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=g;0<a;)f=31-yn(a),E=1<<f,g|=i[f],a&=~E;return g}function tp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function as(i,a){for(var f=i.suspendedLanes,g=i.pingedLanes,E=i.expirationTimes,C=i.pendingLanes;0<C;){var j=31-yn(C),te=1<<j,fe=E[j];fe===-1?((te&f)===0||(te&g)!==0)&&(E[j]=tp(te,a)):fe<=a&&(i.expiredLanes|=te),C&=~te}}function zn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Go(){var i=Ja;return Ja<<=1,(Ja&4194240)===0&&(Ja=64),i}function Hs(i){for(var a=[],f=0;31>f;f++)a.push(i);return a}function Qs(i,a,f){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-yn(a),i[a]=f}function Yt(i,a){var f=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<f;){var E=31-yn(f),C=1<<E;a[E]=0,g[E]=-1,i[E]=-1,f&=~C}}function Ks(i,a){var f=i.entangledLanes|=a;for(i=i.entanglements;f;){var g=31-yn(f),E=1<<g;E&a|i[g]&a&&(i[g]|=a),f&=~E}}var Ot=0;function Gs(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var oh,Za,ah,lh,uh,Tu=!1,Fi=[],Gr=null,fi=null,di=null,Ys=new Map,Xn=new Map,Vi=[],rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ch(i,a){switch(i){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Ys.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(a.pointerId)}}function Cn(i,a,f,g,E,C){return i===null||i.nativeEvent!==C?(i={blockedOn:a,domEventName:f,eventSystemFlags:g,nativeEvent:C,targetContainers:[E]},a!==null&&(a=Uu(a),a!==null&&Za(a)),i):(i.eventSystemFlags|=g,a=i.targetContainers,E!==null&&a.indexOf(E)===-1&&a.push(E),i)}function np(i,a,f,g,E){switch(a){case"focusin":return Gr=Cn(Gr,i,a,f,g,E),!0;case"dragenter":return fi=Cn(fi,i,a,f,g,E),!0;case"mouseover":return di=Cn(di,i,a,f,g,E),!0;case"pointerover":var C=E.pointerId;return Ys.set(C,Cn(Ys.get(C)||null,i,a,f,g,E)),!0;case"gotpointercapture":return C=E.pointerId,Xn.set(C,Cn(Xn.get(C)||null,i,a,f,g,E)),!0}return!1}function hh(i){var a=ea(i.target);if(a!==null){var f=mn(a);if(f!==null){if(a=f.tag,a===13){if(a=hi(f),a!==null){i.blockedOn=a,uh(i.priority,function(){ah(f)});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ls(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var f=el(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(f===null){f=i.nativeEvent;var g=new f.constructor(f.type,f);_r=g,f.target.dispatchEvent(g),_r=null}else return a=Uu(f),a!==null&&Za(a),i.blockedOn=f,!1;a.shift()}return!0}function Yo(i,a,f){ls(i)&&f.delete(a)}function fh(){Tu=!1,Gr!==null&&ls(Gr)&&(Gr=null),fi!==null&&ls(fi)&&(fi=null),di!==null&&ls(di)&&(di=null),Ys.forEach(Yo),Xn.forEach(Yo)}function pi(i,a){i.blockedOn===a&&(i.blockedOn=null,Tu||(Tu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fh)))}function mi(i){function a(E){return pi(E,i)}if(0<Fi.length){pi(Fi[0],i);for(var f=1;f<Fi.length;f++){var g=Fi[f];g.blockedOn===i&&(g.blockedOn=null)}}for(Gr!==null&&pi(Gr,i),fi!==null&&pi(fi,i),di!==null&&pi(di,i),Ys.forEach(a),Xn.forEach(a),f=0;f<Vi.length;f++)g=Vi[f],g.blockedOn===i&&(g.blockedOn=null);for(;0<Vi.length&&(f=Vi[0],f.blockedOn===null);)hh(f),f.blockedOn===null&&Vi.shift()}var us=q.ReactCurrentBatchConfig,Js=!0;function ir(i,a,f,g){var E=Ot,C=us.transition;us.transition=null;try{Ot=1,xu(i,a,f,g)}finally{Ot=E,us.transition=C}}function ip(i,a,f,g){var E=Ot,C=us.transition;us.transition=null;try{Ot=4,xu(i,a,f,g)}finally{Ot=E,us.transition=C}}function xu(i,a,f,g){if(Js){var E=el(i,a,f,g);if(E===null)mp(i,a,g,Jo,f),ch(i,g);else if(np(E,i,a,f,g))g.stopPropagation();else if(ch(i,g),a&4&&-1<rp.indexOf(i)){for(;E!==null;){var C=Uu(E);if(C!==null&&oh(C),C=el(i,a,f,g),C===null&&mp(i,a,g,Jo,f),C===E)break;E=C}E!==null&&g.stopPropagation()}else mp(i,a,g,null,f)}}var Jo=null;function el(i,a,f,g){if(Jo=null,i=wr(g),i=ea(i),i!==null)if(a=mn(i),a===null)i=null;else if(f=a.tag,f===13){if(i=hi(a),i!==null)return i;i=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Jo=i,null}function Au(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(th()){case Ho:return 1;case Ws:return 4;case Jn:case Eu:return 16;case rh:return 536870912;default:return 16}default:return 16}}var Wn=null,tl=null,Rn=null;function Iu(){if(Rn)return Rn;var i,a=tl,f=a.length,g,E="value"in Wn?Wn.value:Wn.textContent,C=E.length;for(i=0;i<f&&a[i]===E[i];i++);var j=f-i;for(g=1;g<=j&&a[f-g]===E[C-g];g++);return Rn=E.slice(i,1<g?1-g:void 0)}function rl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Ui(){return!0}function Cu(){return!1}function Yr(i){function a(f,g,E,C,j){this._reactName=f,this._targetInst=E,this.type=g,this.nativeEvent=C,this.target=j,this.currentTarget=null;for(var te in i)i.hasOwnProperty(te)&&(f=i[te],this[te]=f?f(C):C[te]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ui:Cu,this.isPropagationStopped=Cu,this}return B(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),a}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=Yr(gi),Bi=B({},gi,{view:0,detail:0}),sp=Yr(Bi),il,cs,Xs,Xo=B({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xs&&(Xs&&i.type==="mousemove"?(il=i.screenX-Xs.screenX,cs=i.screenY-Xs.screenY):cs=il=0,Xs=i),il)},movementY:function(i){return"movementY"in i?i.movementY:cs}}),sl=Yr(Xo),Ru=B({},Xo,{dataTransfer:0}),dh=Yr(Ru),ol=B({},Bi,{relatedTarget:0}),al=Yr(ol),ph=B({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),hs=Yr(ph),mh=B({},gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gh=Yr(mh),yh=B({},gi,{data:0}),ku=Yr(yh),ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _h(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=vh[i])?!!a[i]:!1}function ji(){return _h}var p=B({},Bi,{key:function(i){if(i.key){var a=ll[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=rl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(i){return i.type==="keypress"?rl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?rl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),I=Yr(p),D=B({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=Yr(D),Se=B({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),Pe=Yr(Se),it=B({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qt=Yr(it),Or=B({},Xo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Lt=Yr(Or),$r=[9,13,27,32],Ar=u&&"CompositionEvent"in window,Zn=null;u&&"documentMode"in document&&(Zn=document.documentMode);var qn=u&&"TextEvent"in window&&!Zn,Zo=u&&(!Ar||Zn&&8<Zn&&11>=Zn),ul=" ",T0=!1;function x0(i,a){switch(i){case"keyup":return $r.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cl=!1;function iI(i,a){switch(i){case"compositionend":return A0(a);case"keypress":return a.which!==32?null:(T0=!0,ul);case"textInput":return i=a.data,i===ul&&T0?null:i;default:return null}}function sI(i,a){if(cl)return i==="compositionend"||!Ar&&x0(i,a)?(i=Iu(),Rn=tl=Wn=null,cl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Zo&&a.locale!=="ko"?null:a.data;default:return null}}var oI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!oI[i.type]:a==="textarea"}function C0(i,a,f,g){Rt(g),a=Th(a,"onChange"),0<a.length&&(f=new nl("onChange","change",null,f,g),i.push({event:f,listeners:a}))}var Pu=null,Nu=null;function aI(i){H0(i,0)}function wh(i){var a=ml(i);if(ve(a))return i}function lI(i,a){if(i==="change")return a}var R0=!1;if(u){var op;if(u){var ap="oninput"in document;if(!ap){var k0=document.createElement("div");k0.setAttribute("oninput","return;"),ap=typeof k0.oninput=="function"}op=ap}else op=!1;R0=op&&(!document.documentMode||9<document.documentMode)}function P0(){Pu&&(Pu.detachEvent("onpropertychange",N0),Nu=Pu=null)}function N0(i){if(i.propertyName==="value"&&wh(Nu)){var a=[];C0(a,Nu,i,wr(i)),Y(aI,a)}}function uI(i,a,f){i==="focusin"?(P0(),Pu=a,Nu=f,Pu.attachEvent("onpropertychange",N0)):i==="focusout"&&P0()}function cI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return wh(Nu)}function hI(i,a){if(i==="click")return wh(a)}function fI(i,a){if(i==="input"||i==="change")return wh(a)}function dI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var yi=typeof Object.is=="function"?Object.is:dI;function Ou(i,a){if(yi(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var f=Object.keys(i),g=Object.keys(a);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var E=f[g];if(!c.call(a,E)||!yi(i[E],a[E]))return!1}return!0}function O0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function D0(i,a){var f=O0(i);i=0;for(var g;f;){if(f.nodeType===3){if(g=i+f.textContent.length,i<=a&&g>=a)return{node:f,offset:a-i};i=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=O0(f)}}function L0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?L0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function M0(){for(var i=window,a=Fe();a instanceof i.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)i=a.contentWindow;else break;a=Fe(i.document)}return a}function lp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function pI(i){var a=M0(),f=i.focusedElem,g=i.selectionRange;if(a!==f&&f&&f.ownerDocument&&L0(f.ownerDocument.documentElement,f)){if(g!==null&&lp(f)){if(a=g.start,i=g.end,i===void 0&&(i=a),"selectionStart"in f)f.selectionStart=a,f.selectionEnd=Math.min(i,f.value.length);else if(i=(a=f.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var E=f.textContent.length,C=Math.min(g.start,E);g=g.end===void 0?C:Math.min(g.end,E),!i.extend&&C>g&&(E=g,g=C,C=E),E=D0(f,C);var j=D0(f,g);E&&j&&(i.rangeCount!==1||i.anchorNode!==E.node||i.anchorOffset!==E.offset||i.focusNode!==j.node||i.focusOffset!==j.offset)&&(a=a.createRange(),a.setStart(E.node,E.offset),i.removeAllRanges(),C>g?(i.addRange(a),i.extend(j.node,j.offset)):(a.setEnd(j.node,j.offset),i.addRange(a)))}}for(a=[],i=f;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<a.length;f++)i=a[f],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var mI=u&&"documentMode"in document&&11>=document.documentMode,hl=null,up=null,Du=null,cp=!1;function F0(i,a,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;cp||hl==null||hl!==Fe(g)||(g=hl,"selectionStart"in g&&lp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Du&&Ou(Du,g)||(Du=g,g=Th(up,"onSelect"),0<g.length&&(a=new nl("onSelect","select",null,a,f),i.push({event:a,listeners:g}),a.target=hl)))}function bh(i,a){var f={};return f[i.toLowerCase()]=a.toLowerCase(),f["Webkit"+i]="webkit"+a,f["Moz"+i]="moz"+a,f}var fl={animationend:bh("Animation","AnimationEnd"),animationiteration:bh("Animation","AnimationIteration"),animationstart:bh("Animation","AnimationStart"),transitionend:bh("Transition","TransitionEnd")},hp={},V0={};u&&(V0=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Eh(i){if(hp[i])return hp[i];if(!fl[i])return i;var a=fl[i],f;for(f in a)if(a.hasOwnProperty(f)&&f in V0)return hp[i]=a[f];return i}var U0=Eh("animationend"),B0=Eh("animationiteration"),j0=Eh("animationstart"),$0=Eh("transitionend"),z0=new Map,W0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(i,a){z0.set(i,a),o(a,[i])}for(var fp=0;fp<W0.length;fp++){var dp=W0[fp],gI=dp.toLowerCase(),yI=dp[0].toUpperCase()+dp.slice(1);Zs(gI,"on"+yI)}Zs(U0,"onAnimationEnd"),Zs(B0,"onAnimationIteration"),Zs(j0,"onAnimationStart"),Zs("dblclick","onDoubleClick"),Zs("focusin","onFocus"),Zs("focusout","onBlur"),Zs($0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lu));function q0(i,a,f){var g=i.type||"unknown-event";i.currentTarget=f,qo(g,a,void 0,i),i.currentTarget=null}function H0(i,a){a=(a&4)!==0;for(var f=0;f<i.length;f++){var g=i[f],E=g.event;g=g.listeners;e:{var C=void 0;if(a)for(var j=g.length-1;0<=j;j--){var te=g[j],fe=te.instance,Ce=te.currentTarget;if(te=te.listener,fe!==C&&E.isPropagationStopped())break e;q0(E,te,Ce),C=fe}else for(j=0;j<g.length;j++){if(te=g[j],fe=te.instance,Ce=te.currentTarget,te=te.listener,fe!==C&&E.isPropagationStopped())break e;q0(E,te,Ce),C=fe}}}if(Nr)throw i=zs,Nr=!1,zs=null,i}function Zt(i,a){var f=a[bp];f===void 0&&(f=a[bp]=new Set);var g=i+"__bubble";f.has(g)||(Q0(a,i,2,!1),f.add(g))}function pp(i,a,f){var g=0;a&&(g|=4),Q0(f,i,g,a)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function Mu(i){if(!i[Sh]){i[Sh]=!0,n.forEach(function(f){f!=="selectionchange"&&(vI.has(f)||pp(f,!1,i),pp(f,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Sh]||(a[Sh]=!0,pp("selectionchange",!1,a))}}function Q0(i,a,f,g){switch(Au(a)){case 1:var E=ir;break;case 4:E=ip;break;default:E=xu}f=E.bind(null,a,f,i),E=void 0,!Ye||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(E=!0),g?E!==void 0?i.addEventListener(a,f,{capture:!0,passive:E}):i.addEventListener(a,f,!0):E!==void 0?i.addEventListener(a,f,{passive:E}):i.addEventListener(a,f,!1)}function mp(i,a,f,g,E){var C=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var j=g.tag;if(j===3||j===4){var te=g.stateNode.containerInfo;if(te===E||te.nodeType===8&&te.parentNode===E)break;if(j===4)for(j=g.return;j!==null;){var fe=j.tag;if((fe===3||fe===4)&&(fe=j.stateNode.containerInfo,fe===E||fe.nodeType===8&&fe.parentNode===E))return;j=j.return}for(;te!==null;){if(j=ea(te),j===null)return;if(fe=j.tag,fe===5||fe===6){g=C=j;continue e}te=te.parentNode}}g=g.return}Y(function(){var Ce=C,Qe=wr(f),Xe=[];e:{var He=z0.get(i);if(He!==void 0){var ot=nl,ut=i;switch(i){case"keypress":if(rl(f)===0)break e;case"keydown":case"keyup":ot=I;break;case"focusin":ut="focus",ot=al;break;case"focusout":ut="blur",ot=al;break;case"beforeblur":case"afterblur":ot=al;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Pe;break;case U0:case B0:case j0:ot=hs;break;case $0:ot=qt;break;case"scroll":ot=sp;break;case"wheel":ot=Lt;break;case"copy":case"cut":case"paste":ot=gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=K}var ct=(a&4)!==0,Er=!ct&&i==="scroll",Te=ct?He!==null?He+"Capture":null:He;ct=[];for(var ge=Ce,Ae;ge!==null;){Ae=ge;var tt=Ae.stateNode;if(Ae.tag===5&&tt!==null&&(Ae=tt,Te!==null&&(tt=X(ge,Te),tt!=null&&ct.push(Fu(ge,tt,Ae)))),Er)break;ge=ge.return}0<ct.length&&(He=new ot(He,ut,null,f,Qe),Xe.push({event:He,listeners:ct}))}}if((a&7)===0){e:{if(He=i==="mouseover"||i==="pointerover",ot=i==="mouseout"||i==="pointerout",He&&f!==_r&&(ut=f.relatedTarget||f.fromElement)&&(ea(ut)||ut[fs]))break e;if((ot||He)&&(He=Qe.window===Qe?Qe:(He=Qe.ownerDocument)?He.defaultView||He.parentWindow:window,ot?(ut=f.relatedTarget||f.toElement,ot=Ce,ut=ut?ea(ut):null,ut!==null&&(Er=mn(ut),ut!==Er||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(ot=null,ut=Ce),ot!==ut)){if(ct=sl,tt="onMouseLeave",Te="onMouseEnter",ge="mouse",(i==="pointerout"||i==="pointerover")&&(ct=K,tt="onPointerLeave",Te="onPointerEnter",ge="pointer"),Er=ot==null?He:ml(ot),Ae=ut==null?He:ml(ut),He=new ct(tt,ge+"leave",ot,f,Qe),He.target=Er,He.relatedTarget=Ae,tt=null,ea(Qe)===Ce&&(ct=new ct(Te,ge+"enter",ut,f,Qe),ct.target=Ae,ct.relatedTarget=Er,tt=ct),Er=tt,ot&&ut)t:{for(ct=ot,Te=ut,ge=0,Ae=ct;Ae;Ae=dl(Ae))ge++;for(Ae=0,tt=Te;tt;tt=dl(tt))Ae++;for(;0<ge-Ae;)ct=dl(ct),ge--;for(;0<Ae-ge;)Te=dl(Te),Ae--;for(;ge--;){if(ct===Te||Te!==null&&ct===Te.alternate)break t;ct=dl(ct),Te=dl(Te)}ct=null}else ct=null;ot!==null&&K0(Xe,He,ot,ct,!1),ut!==null&&Er!==null&&K0(Xe,Er,ut,ct,!0)}}e:{if(He=Ce?ml(Ce):window,ot=He.nodeName&&He.nodeName.toLowerCase(),ot==="select"||ot==="input"&&He.type==="file")var dt=lI;else if(I0(He))if(R0)dt=fI;else{dt=cI;var vt=uI}else(ot=He.nodeName)&&ot.toLowerCase()==="input"&&(He.type==="checkbox"||He.type==="radio")&&(dt=hI);if(dt&&(dt=dt(i,Ce))){C0(Xe,dt,f,Qe);break e}vt&&vt(i,He,Ce),i==="focusout"&&(vt=He._wrapperState)&&vt.controlled&&He.type==="number"&&ke(He,"number",He.value)}switch(vt=Ce?ml(Ce):window,i){case"focusin":(I0(vt)||vt.contentEditable==="true")&&(hl=vt,up=Ce,Du=null);break;case"focusout":Du=up=hl=null;break;case"mousedown":cp=!0;break;case"contextmenu":case"mouseup":case"dragend":cp=!1,F0(Xe,f,Qe);break;case"selectionchange":if(mI)break;case"keydown":case"keyup":F0(Xe,f,Qe)}var _t;if(Ar)e:{switch(i){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else cl?x0(i,f)&&(St="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(St="onCompositionStart");St&&(Zo&&f.locale!=="ko"&&(cl||St!=="onCompositionStart"?St==="onCompositionEnd"&&cl&&(_t=Iu()):(Wn=Qe,tl="value"in Wn?Wn.value:Wn.textContent,cl=!0)),vt=Th(Ce,St),0<vt.length&&(St=new ku(St,i,null,f,Qe),Xe.push({event:St,listeners:vt}),_t?St.data=_t:(_t=A0(f),_t!==null&&(St.data=_t)))),(_t=qn?iI(i,f):sI(i,f))&&(Ce=Th(Ce,"onBeforeInput"),0<Ce.length&&(Qe=new ku("onBeforeInput","beforeinput",null,f,Qe),Xe.push({event:Qe,listeners:Ce}),Qe.data=_t))}H0(Xe,a)})}function Fu(i,a,f){return{instance:i,listener:a,currentTarget:f}}function Th(i,a){for(var f=a+"Capture",g=[];i!==null;){var E=i,C=E.stateNode;E.tag===5&&C!==null&&(E=C,C=X(i,f),C!=null&&g.unshift(Fu(i,C,E)),C=X(i,a),C!=null&&g.push(Fu(i,C,E))),i=i.return}return g}function dl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function K0(i,a,f,g,E){for(var C=a._reactName,j=[];f!==null&&f!==g;){var te=f,fe=te.alternate,Ce=te.stateNode;if(fe!==null&&fe===g)break;te.tag===5&&Ce!==null&&(te=Ce,E?(fe=X(f,C),fe!=null&&j.unshift(Fu(f,fe,te))):E||(fe=X(f,C),fe!=null&&j.push(Fu(f,fe,te)))),f=f.return}j.length!==0&&i.push({event:a,listeners:j})}var _I=/\r\n?/g,wI=/\u0000|\uFFFD/g;function G0(i){return(typeof i=="string"?i:""+i).replace(_I,`
`).replace(wI,"")}function xh(i,a,f){if(a=G0(a),G0(i)!==a&&f)throw Error(t(425))}function Ah(){}var gp=null,yp=null;function vp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _p=typeof setTimeout=="function"?setTimeout:void 0,bI=typeof clearTimeout=="function"?clearTimeout:void 0,Y0=typeof Promise=="function"?Promise:void 0,EI=typeof queueMicrotask=="function"?queueMicrotask:typeof Y0<"u"?function(i){return Y0.resolve(null).then(i).catch(SI)}:_p;function SI(i){setTimeout(function(){throw i})}function wp(i,a){var f=a,g=0;do{var E=f.nextSibling;if(i.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(g===0){i.removeChild(E),mi(a);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=E}while(f);mi(a)}function eo(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function J0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return i;a--}else f==="/$"&&a++}i=i.previousSibling}return null}var pl=Math.random().toString(36).slice(2),$i="__reactFiber$"+pl,Vu="__reactProps$"+pl,fs="__reactContainer$"+pl,bp="__reactEvents$"+pl,TI="__reactListeners$"+pl,xI="__reactHandles$"+pl;function ea(i){var a=i[$i];if(a)return a;for(var f=i.parentNode;f;){if(a=f[fs]||f[$i]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(i=J0(i);i!==null;){if(f=i[$i])return f;i=J0(i)}return a}i=f,f=i.parentNode}return null}function Uu(i){return i=i[$i]||i[fs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ml(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Ih(i){return i[Vu]||null}var Ep=[],gl=-1;function to(i){return{current:i}}function er(i){0>gl||(i.current=Ep[gl],Ep[gl]=null,gl--)}function Xt(i,a){gl++,Ep[gl]=i.current,i.current=a}var ro={},nn=to(ro),kn=to(!1),ta=ro;function yl(i,a){var f=i.type.contextTypes;if(!f)return ro;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var E={},C;for(C in f)E[C]=a[C];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=E),E}function Pn(i){return i=i.childContextTypes,i!=null}function Ch(){er(kn),er(nn)}function X0(i,a,f){if(nn.current!==ro)throw Error(t(168));Xt(nn,a),Xt(kn,f)}function Z0(i,a,f){var g=i.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var E in g)if(!(E in a))throw Error(t(108,ce(i)||"Unknown",E));return B({},f,g)}function Rh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ro,ta=nn.current,Xt(nn,i),Xt(kn,kn.current),!0}function e_(i,a,f){var g=i.stateNode;if(!g)throw Error(t(169));f?(i=Z0(i,a,ta),g.__reactInternalMemoizedMergedChildContext=i,er(kn),er(nn),Xt(nn,i)):er(kn),Xt(kn,f)}var ds=null,kh=!1,Sp=!1;function t_(i){ds===null?ds=[i]:ds.push(i)}function AI(i){kh=!0,t_(i)}function no(){if(!Sp&&ds!==null){Sp=!0;var i=0,a=Ot;try{var f=ds;for(Ot=1;i<f.length;i++){var g=f[i];do g=g(!0);while(g!==null)}ds=null,kh=!1}catch(E){throw ds!==null&&(ds=ds.slice(i+1)),Ya(Ho,no),E}finally{Ot=a,Sp=!1}}return null}var vl=[],_l=0,Ph=null,Nh=0,ei=[],ti=0,ra=null,ps=1,ms="";function na(i,a){vl[_l++]=Nh,vl[_l++]=Ph,Ph=i,Nh=a}function r_(i,a,f){ei[ti++]=ps,ei[ti++]=ms,ei[ti++]=ra,ra=i;var g=ps;i=ms;var E=32-yn(g)-1;g&=~(1<<E),f+=1;var C=32-yn(a)+E;if(30<C){var j=E-E%5;C=(g&(1<<j)-1).toString(32),g>>=j,E-=j,ps=1<<32-yn(a)+E|f<<E|g,ms=C+i}else ps=1<<C|f<<E|g,ms=i}function Tp(i){i.return!==null&&(na(i,1),r_(i,1,0))}function xp(i){for(;i===Ph;)Ph=vl[--_l],vl[_l]=null,Nh=vl[--_l],vl[_l]=null;for(;i===ra;)ra=ei[--ti],ei[ti]=null,ms=ei[--ti],ei[ti]=null,ps=ei[--ti],ei[ti]=null}var Hn=null,Qn=null,sr=!1,vi=null;function n_(i,a){var f=si(5,null,null,0);f.elementType="DELETED",f.stateNode=a,f.return=i,a=i.deletions,a===null?(i.deletions=[f],i.flags|=16):a.push(f)}function i_(i,a){switch(i.tag){case 5:var f=i.type;return a=a.nodeType!==1||f.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Hn=i,Qn=eo(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Hn=i,Qn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(f=ra!==null?{id:ps,overflow:ms}:null,i.memoizedState={dehydrated:a,treeContext:f,retryLane:1073741824},f=si(18,null,null,0),f.stateNode=a,f.return=i,i.child=f,Hn=i,Qn=null,!0):!1;default:return!1}}function Ap(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ip(i){if(sr){var a=Qn;if(a){var f=a;if(!i_(i,a)){if(Ap(i))throw Error(t(418));a=eo(f.nextSibling);var g=Hn;a&&i_(i,a)?n_(g,f):(i.flags=i.flags&-4097|2,sr=!1,Hn=i)}}else{if(Ap(i))throw Error(t(418));i.flags=i.flags&-4097|2,sr=!1,Hn=i}}}function s_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Hn=i}function Oh(i){if(i!==Hn)return!1;if(!sr)return s_(i),sr=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!vp(i.type,i.memoizedProps)),a&&(a=Qn)){if(Ap(i))throw o_(),Error(t(418));for(;a;)n_(i,a),a=eo(a.nextSibling)}if(s_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"){if(a===0){Qn=eo(i.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++}i=i.nextSibling}Qn=null}}else Qn=Hn?eo(i.stateNode.nextSibling):null;return!0}function o_(){for(var i=Qn;i;)i=eo(i.nextSibling)}function wl(){Qn=Hn=null,sr=!1}function Cp(i){vi===null?vi=[i]:vi.push(i)}var II=q.ReactCurrentBatchConfig;function _i(i,a){if(i&&i.defaultProps){a=B({},a),i=i.defaultProps;for(var f in i)a[f]===void 0&&(a[f]=i[f]);return a}return a}var Dh=to(null),Lh=null,bl=null,Rp=null;function kp(){Rp=bl=Lh=null}function Pp(i){var a=Dh.current;er(Dh),i._currentValue=a}function Np(i,a,f){for(;i!==null;){var g=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),i===f)break;i=i.return}}function El(i,a){Lh=i,Rp=bl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Nn=!0),i.firstContext=null)}function ri(i){var a=i._currentValue;if(Rp!==i)if(i={context:i,memoizedValue:a,next:null},bl===null){if(Lh===null)throw Error(t(308));bl=i,Lh.dependencies={lanes:0,firstContext:i}}else bl=bl.next=i;return a}var ia=null;function Op(i){ia===null?ia=[i]:ia.push(i)}function a_(i,a,f,g){var E=a.interleaved;return E===null?(f.next=f,Op(a)):(f.next=E.next,E.next=f),a.interleaved=f,gs(i,g)}function gs(i,a){i.lanes|=a;var f=i.alternate;for(f!==null&&(f.lanes|=a),f=i,i=i.return;i!==null;)i.childLanes|=a,f=i.alternate,f!==null&&(f.childLanes|=a),f=i,i=i.return;return f.tag===3?f.stateNode:null}var io=!1;function Dp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ys(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function so(i,a,f){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Vt&2)!==0){var E=g.pending;return E===null?a.next=a:(a.next=E.next,E.next=a),g.pending=a,gs(i,f)}return E=g.interleaved,E===null?(a.next=a,Op(g)):(a.next=E.next,E.next=a),g.interleaved=a,gs(i,f)}function Mh(i,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194240)!==0)){var g=a.lanes;g&=i.pendingLanes,f|=g,a.lanes=f,Ks(i,f)}}function u_(i,a){var f=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var E=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var j={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};C===null?E=C=j:C=C.next=j,f=f.next}while(f!==null);C===null?E=C=a:C=C.next=a}else E=C=a;f={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:g.shared,effects:g.effects},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=a:i.next=a,f.lastBaseUpdate=a}function Fh(i,a,f,g){var E=i.updateQueue;io=!1;var C=E.firstBaseUpdate,j=E.lastBaseUpdate,te=E.shared.pending;if(te!==null){E.shared.pending=null;var fe=te,Ce=fe.next;fe.next=null,j===null?C=Ce:j.next=Ce,j=fe;var Qe=i.alternate;Qe!==null&&(Qe=Qe.updateQueue,te=Qe.lastBaseUpdate,te!==j&&(te===null?Qe.firstBaseUpdate=Ce:te.next=Ce,Qe.lastBaseUpdate=fe))}if(C!==null){var Xe=E.baseState;j=0,Qe=Ce=fe=null,te=C;do{var He=te.lane,ot=te.eventTime;if((g&He)===He){Qe!==null&&(Qe=Qe.next={eventTime:ot,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var ut=i,ct=te;switch(He=a,ot=f,ct.tag){case 1:if(ut=ct.payload,typeof ut=="function"){Xe=ut.call(ot,Xe,He);break e}Xe=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ct.payload,He=typeof ut=="function"?ut.call(ot,Xe,He):ut,He==null)break e;Xe=B({},Xe,He);break e;case 2:io=!0}}te.callback!==null&&te.lane!==0&&(i.flags|=64,He=E.effects,He===null?E.effects=[te]:He.push(te))}else ot={eventTime:ot,lane:He,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Qe===null?(Ce=Qe=ot,fe=Xe):Qe=Qe.next=ot,j|=He;if(te=te.next,te===null){if(te=E.shared.pending,te===null)break;He=te,te=He.next,He.next=null,E.lastBaseUpdate=He,E.shared.pending=null}}while(!0);if(Qe===null&&(fe=Xe),E.baseState=fe,E.firstBaseUpdate=Ce,E.lastBaseUpdate=Qe,a=E.shared.interleaved,a!==null){E=a;do j|=E.lane,E=E.next;while(E!==a)}else C===null&&(E.shared.lanes=0);aa|=j,i.lanes=j,i.memoizedState=Xe}}function c_(i,a,f){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var g=i[a],E=g.callback;if(E!==null){if(g.callback=null,g=f,typeof E!="function")throw Error(t(191,E));E.call(g)}}}var h_=new r.Component().refs;function Lp(i,a,f,g){a=i.memoizedState,f=f(g,a),f=f==null?a:B({},a,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var Vh={isMounted:function(i){return(i=i._reactInternals)?mn(i)===i:!1},enqueueSetState:function(i,a,f){i=i._reactInternals;var g=wn(),E=uo(i),C=ys(g,E);C.payload=a,f!=null&&(C.callback=f),a=so(i,C,E),a!==null&&(Ei(a,i,E,g),Mh(a,i,E))},enqueueReplaceState:function(i,a,f){i=i._reactInternals;var g=wn(),E=uo(i),C=ys(g,E);C.tag=1,C.payload=a,f!=null&&(C.callback=f),a=so(i,C,E),a!==null&&(Ei(a,i,E,g),Mh(a,i,E))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var f=wn(),g=uo(i),E=ys(f,g);E.tag=2,a!=null&&(E.callback=a),a=so(i,E,g),a!==null&&(Ei(a,i,g,f),Mh(a,i,g))}};function f_(i,a,f,g,E,C,j){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,C,j):a.prototype&&a.prototype.isPureReactComponent?!Ou(f,g)||!Ou(E,C):!0}function d_(i,a,f){var g=!1,E=ro,C=a.contextType;return typeof C=="object"&&C!==null?C=ri(C):(E=Pn(a)?ta:nn.current,g=a.contextTypes,C=(g=g!=null)?yl(i,E):ro),a=new a(f,C),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Vh,i.stateNode=a,a._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=E,i.__reactInternalMemoizedMaskedChildContext=C),a}function p_(i,a,f,g){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,g),a.state!==i&&Vh.enqueueReplaceState(a,a.state,null)}function Mp(i,a,f,g){var E=i.stateNode;E.props=f,E.state=i.memoizedState,E.refs=h_,Dp(i);var C=a.contextType;typeof C=="object"&&C!==null?E.context=ri(C):(C=Pn(a)?ta:nn.current,E.context=yl(i,C)),E.state=i.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(Lp(i,a,C,f),E.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(a=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),a!==E.state&&Vh.enqueueReplaceState(E,E.state,null),Fh(i,f,E,g),E.state=i.memoizedState),typeof E.componentDidMount=="function"&&(i.flags|=4194308)}function Bu(i,a,f){if(i=f.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,i));var E=g,C=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===C?a.ref:(a=function(j){var te=E.refs;te===h_&&(te=E.refs={}),j===null?delete te[C]:te[C]=j},a._stringRef=C,a)}if(typeof i!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,i))}return i}function Uh(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function m_(i){var a=i._init;return a(i._payload)}function g_(i){function a(Te,ge){if(i){var Ae=Te.deletions;Ae===null?(Te.deletions=[ge],Te.flags|=16):Ae.push(ge)}}function f(Te,ge){if(!i)return null;for(;ge!==null;)a(Te,ge),ge=ge.sibling;return null}function g(Te,ge){for(Te=new Map;ge!==null;)ge.key!==null?Te.set(ge.key,ge):Te.set(ge.index,ge),ge=ge.sibling;return Te}function E(Te,ge){return Te=ho(Te,ge),Te.index=0,Te.sibling=null,Te}function C(Te,ge,Ae){return Te.index=Ae,i?(Ae=Te.alternate,Ae!==null?(Ae=Ae.index,Ae<ge?(Te.flags|=2,ge):Ae):(Te.flags|=2,ge)):(Te.flags|=1048576,ge)}function j(Te){return i&&Te.alternate===null&&(Te.flags|=2),Te}function te(Te,ge,Ae,tt){return ge===null||ge.tag!==6?(ge=_m(Ae,Te.mode,tt),ge.return=Te,ge):(ge=E(ge,Ae),ge.return=Te,ge)}function fe(Te,ge,Ae,tt){var dt=Ae.type;return dt===P?Qe(Te,ge,Ae.props.children,tt,Ae.key):ge!==null&&(ge.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Ne&&m_(dt)===ge.type)?(tt=E(ge,Ae.props),tt.ref=Bu(Te,ge,Ae),tt.return=Te,tt):(tt=sf(Ae.type,Ae.key,Ae.props,null,Te.mode,tt),tt.ref=Bu(Te,ge,Ae),tt.return=Te,tt)}function Ce(Te,ge,Ae,tt){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ae.containerInfo||ge.stateNode.implementation!==Ae.implementation?(ge=wm(Ae,Te.mode,tt),ge.return=Te,ge):(ge=E(ge,Ae.children||[]),ge.return=Te,ge)}function Qe(Te,ge,Ae,tt,dt){return ge===null||ge.tag!==7?(ge=ha(Ae,Te.mode,tt,dt),ge.return=Te,ge):(ge=E(ge,Ae),ge.return=Te,ge)}function Xe(Te,ge,Ae){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=_m(""+ge,Te.mode,Ae),ge.return=Te,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case H:return Ae=sf(ge.type,ge.key,ge.props,null,Te.mode,Ae),Ae.ref=Bu(Te,null,ge),Ae.return=Te,Ae;case $:return ge=wm(ge,Te.mode,Ae),ge.return=Te,ge;case Ne:var tt=ge._init;return Xe(Te,tt(ge._payload),Ae)}if(Ve(ge)||Re(ge))return ge=ha(ge,Te.mode,Ae,null),ge.return=Te,ge;Uh(Te,ge)}return null}function He(Te,ge,Ae,tt){var dt=ge!==null?ge.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return dt!==null?null:te(Te,ge,""+Ae,tt);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case H:return Ae.key===dt?fe(Te,ge,Ae,tt):null;case $:return Ae.key===dt?Ce(Te,ge,Ae,tt):null;case Ne:return dt=Ae._init,He(Te,ge,dt(Ae._payload),tt)}if(Ve(Ae)||Re(Ae))return dt!==null?null:Qe(Te,ge,Ae,tt,null);Uh(Te,Ae)}return null}function ot(Te,ge,Ae,tt,dt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Te=Te.get(Ae)||null,te(ge,Te,""+tt,dt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case H:return Te=Te.get(tt.key===null?Ae:tt.key)||null,fe(ge,Te,tt,dt);case $:return Te=Te.get(tt.key===null?Ae:tt.key)||null,Ce(ge,Te,tt,dt);case Ne:var vt=tt._init;return ot(Te,ge,Ae,vt(tt._payload),dt)}if(Ve(tt)||Re(tt))return Te=Te.get(Ae)||null,Qe(ge,Te,tt,dt,null);Uh(ge,tt)}return null}function ut(Te,ge,Ae,tt){for(var dt=null,vt=null,_t=ge,St=ge=0,qr=null;_t!==null&&St<Ae.length;St++){_t.index>St?(qr=_t,_t=null):qr=_t.sibling;var Ut=He(Te,_t,Ae[St],tt);if(Ut===null){_t===null&&(_t=qr);break}i&&_t&&Ut.alternate===null&&a(Te,_t),ge=C(Ut,ge,St),vt===null?dt=Ut:vt.sibling=Ut,vt=Ut,_t=qr}if(St===Ae.length)return f(Te,_t),sr&&na(Te,St),dt;if(_t===null){for(;St<Ae.length;St++)_t=Xe(Te,Ae[St],tt),_t!==null&&(ge=C(_t,ge,St),vt===null?dt=_t:vt.sibling=_t,vt=_t);return sr&&na(Te,St),dt}for(_t=g(Te,_t);St<Ae.length;St++)qr=ot(_t,Te,St,Ae[St],tt),qr!==null&&(i&&qr.alternate!==null&&_t.delete(qr.key===null?St:qr.key),ge=C(qr,ge,St),vt===null?dt=qr:vt.sibling=qr,vt=qr);return i&&_t.forEach(function(fo){return a(Te,fo)}),sr&&na(Te,St),dt}function ct(Te,ge,Ae,tt){var dt=Re(Ae);if(typeof dt!="function")throw Error(t(150));if(Ae=dt.call(Ae),Ae==null)throw Error(t(151));for(var vt=dt=null,_t=ge,St=ge=0,qr=null,Ut=Ae.next();_t!==null&&!Ut.done;St++,Ut=Ae.next()){_t.index>St?(qr=_t,_t=null):qr=_t.sibling;var fo=He(Te,_t,Ut.value,tt);if(fo===null){_t===null&&(_t=qr);break}i&&_t&&fo.alternate===null&&a(Te,_t),ge=C(fo,ge,St),vt===null?dt=fo:vt.sibling=fo,vt=fo,_t=qr}if(Ut.done)return f(Te,_t),sr&&na(Te,St),dt;if(_t===null){for(;!Ut.done;St++,Ut=Ae.next())Ut=Xe(Te,Ut.value,tt),Ut!==null&&(ge=C(Ut,ge,St),vt===null?dt=Ut:vt.sibling=Ut,vt=Ut);return sr&&na(Te,St),dt}for(_t=g(Te,_t);!Ut.done;St++,Ut=Ae.next())Ut=ot(_t,Te,St,Ut.value,tt),Ut!==null&&(i&&Ut.alternate!==null&&_t.delete(Ut.key===null?St:Ut.key),ge=C(Ut,ge,St),vt===null?dt=Ut:vt.sibling=Ut,vt=Ut);return i&&_t.forEach(function(oC){return a(Te,oC)}),sr&&na(Te,St),dt}function Er(Te,ge,Ae,tt){if(typeof Ae=="object"&&Ae!==null&&Ae.type===P&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case H:e:{for(var dt=Ae.key,vt=ge;vt!==null;){if(vt.key===dt){if(dt=Ae.type,dt===P){if(vt.tag===7){f(Te,vt.sibling),ge=E(vt,Ae.props.children),ge.return=Te,Te=ge;break e}}else if(vt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Ne&&m_(dt)===vt.type){f(Te,vt.sibling),ge=E(vt,Ae.props),ge.ref=Bu(Te,vt,Ae),ge.return=Te,Te=ge;break e}f(Te,vt);break}else a(Te,vt);vt=vt.sibling}Ae.type===P?(ge=ha(Ae.props.children,Te.mode,tt,Ae.key),ge.return=Te,Te=ge):(tt=sf(Ae.type,Ae.key,Ae.props,null,Te.mode,tt),tt.ref=Bu(Te,ge,Ae),tt.return=Te,Te=tt)}return j(Te);case $:e:{for(vt=Ae.key;ge!==null;){if(ge.key===vt)if(ge.tag===4&&ge.stateNode.containerInfo===Ae.containerInfo&&ge.stateNode.implementation===Ae.implementation){f(Te,ge.sibling),ge=E(ge,Ae.children||[]),ge.return=Te,Te=ge;break e}else{f(Te,ge);break}else a(Te,ge);ge=ge.sibling}ge=wm(Ae,Te.mode,tt),ge.return=Te,Te=ge}return j(Te);case Ne:return vt=Ae._init,Er(Te,ge,vt(Ae._payload),tt)}if(Ve(Ae))return ut(Te,ge,Ae,tt);if(Re(Ae))return ct(Te,ge,Ae,tt);Uh(Te,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,ge!==null&&ge.tag===6?(f(Te,ge.sibling),ge=E(ge,Ae),ge.return=Te,Te=ge):(f(Te,ge),ge=_m(Ae,Te.mode,tt),ge.return=Te,Te=ge),j(Te)):f(Te,ge)}return Er}var Sl=g_(!0),y_=g_(!1),ju={},zi=to(ju),$u=to(ju),zu=to(ju);function sa(i){if(i===ju)throw Error(t(174));return i}function Fp(i,a){switch(Xt(zu,a),Xt($u,i),Xt(zi,ju),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:w(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=w(a,i)}er(zi),Xt(zi,a)}function Tl(){er(zi),er($u),er(zu)}function v_(i){sa(zu.current);var a=sa(zi.current),f=w(a,i.type);a!==f&&(Xt($u,i),Xt(zi,f))}function Vp(i){$u.current===i&&(er(zi),er($u))}var cr=to(0);function Bh(i){for(var a=i;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Up=[];function Bp(){for(var i=0;i<Up.length;i++)Up[i]._workInProgressVersionPrimary=null;Up.length=0}var jh=q.ReactCurrentDispatcher,jp=q.ReactCurrentBatchConfig,oa=0,hr=null,Dr=null,zr=null,$h=!1,Wu=!1,qu=0,CI=0;function sn(){throw Error(t(321))}function $p(i,a){if(a===null)return!1;for(var f=0;f<a.length&&f<i.length;f++)if(!yi(i[f],a[f]))return!1;return!0}function zp(i,a,f,g,E,C){if(oa=C,hr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,jh.current=i===null||i.memoizedState===null?NI:OI,i=f(g,E),Wu){C=0;do{if(Wu=!1,qu=0,25<=C)throw Error(t(301));C+=1,zr=Dr=null,a.updateQueue=null,jh.current=DI,i=f(g,E)}while(Wu)}if(jh.current=qh,a=Dr!==null&&Dr.next!==null,oa=0,zr=Dr=hr=null,$h=!1,a)throw Error(t(300));return i}function Wp(){var i=qu!==0;return qu=0,i}function Wi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?hr.memoizedState=zr=i:zr=zr.next=i,zr}function ni(){if(Dr===null){var i=hr.alternate;i=i!==null?i.memoizedState:null}else i=Dr.next;var a=zr===null?hr.memoizedState:zr.next;if(a!==null)zr=a,Dr=i;else{if(i===null)throw Error(t(310));Dr=i,i={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},zr===null?hr.memoizedState=zr=i:zr=zr.next=i}return zr}function Hu(i,a){return typeof a=="function"?a(i):a}function qp(i){var a=ni(),f=a.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=i;var g=Dr,E=g.baseQueue,C=f.pending;if(C!==null){if(E!==null){var j=E.next;E.next=C.next,C.next=j}g.baseQueue=E=C,f.pending=null}if(E!==null){C=E.next,g=g.baseState;var te=j=null,fe=null,Ce=C;do{var Qe=Ce.lane;if((oa&Qe)===Qe)fe!==null&&(fe=fe.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),g=Ce.hasEagerState?Ce.eagerState:i(g,Ce.action);else{var Xe={lane:Qe,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};fe===null?(te=fe=Xe,j=g):fe=fe.next=Xe,hr.lanes|=Qe,aa|=Qe}Ce=Ce.next}while(Ce!==null&&Ce!==C);fe===null?j=g:fe.next=te,yi(g,a.memoizedState)||(Nn=!0),a.memoizedState=g,a.baseState=j,a.baseQueue=fe,f.lastRenderedState=g}if(i=f.interleaved,i!==null){E=i;do C=E.lane,hr.lanes|=C,aa|=C,E=E.next;while(E!==i)}else E===null&&(f.lanes=0);return[a.memoizedState,f.dispatch]}function Hp(i){var a=ni(),f=a.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=i;var g=f.dispatch,E=f.pending,C=a.memoizedState;if(E!==null){f.pending=null;var j=E=E.next;do C=i(C,j.action),j=j.next;while(j!==E);yi(C,a.memoizedState)||(Nn=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),f.lastRenderedState=C}return[C,g]}function __(){}function w_(i,a){var f=hr,g=ni(),E=a(),C=!yi(g.memoizedState,E);if(C&&(g.memoizedState=E,Nn=!0),g=g.queue,Qp(S_.bind(null,f,g,i),[i]),g.getSnapshot!==a||C||zr!==null&&zr.memoizedState.tag&1){if(f.flags|=2048,Qu(9,E_.bind(null,f,g,E,a),void 0,null),Wr===null)throw Error(t(349));(oa&30)!==0||b_(f,a,E)}return E}function b_(i,a,f){i.flags|=16384,i={getSnapshot:a,value:f},a=hr.updateQueue,a===null?(a={lastEffect:null,stores:null},hr.updateQueue=a,a.stores=[i]):(f=a.stores,f===null?a.stores=[i]:f.push(i))}function E_(i,a,f,g){a.value=f,a.getSnapshot=g,T_(a)&&x_(i)}function S_(i,a,f){return f(function(){T_(a)&&x_(i)})}function T_(i){var a=i.getSnapshot;i=i.value;try{var f=a();return!yi(i,f)}catch{return!0}}function x_(i){var a=gs(i,1);a!==null&&Ei(a,i,1,-1)}function A_(i){var a=Wi();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:i},a.queue=i,i=i.dispatch=PI.bind(null,hr,i),[a.memoizedState,i]}function Qu(i,a,f,g){return i={tag:i,create:a,destroy:f,deps:g,next:null},a=hr.updateQueue,a===null?(a={lastEffect:null,stores:null},hr.updateQueue=a,a.lastEffect=i.next=i):(f=a.lastEffect,f===null?a.lastEffect=i.next=i:(g=f.next,f.next=i,i.next=g,a.lastEffect=i)),i}function I_(){return ni().memoizedState}function zh(i,a,f,g){var E=Wi();hr.flags|=i,E.memoizedState=Qu(1|a,f,void 0,g===void 0?null:g)}function Wh(i,a,f,g){var E=ni();g=g===void 0?null:g;var C=void 0;if(Dr!==null){var j=Dr.memoizedState;if(C=j.destroy,g!==null&&$p(g,j.deps)){E.memoizedState=Qu(a,f,C,g);return}}hr.flags|=i,E.memoizedState=Qu(1|a,f,C,g)}function C_(i,a){return zh(8390656,8,i,a)}function Qp(i,a){return Wh(2048,8,i,a)}function R_(i,a){return Wh(4,2,i,a)}function k_(i,a){return Wh(4,4,i,a)}function P_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function N_(i,a,f){return f=f!=null?f.concat([i]):null,Wh(4,4,P_.bind(null,a,i),f)}function Kp(){}function O_(i,a){var f=ni();a=a===void 0?null:a;var g=f.memoizedState;return g!==null&&a!==null&&$p(a,g[1])?g[0]:(f.memoizedState=[i,a],i)}function D_(i,a){var f=ni();a=a===void 0?null:a;var g=f.memoizedState;return g!==null&&a!==null&&$p(a,g[1])?g[0]:(i=i(),f.memoizedState=[i,a],i)}function L_(i,a,f){return(oa&21)===0?(i.baseState&&(i.baseState=!1,Nn=!0),i.memoizedState=f):(yi(f,a)||(f=Go(),hr.lanes|=f,aa|=f,i.baseState=!0),a)}function RI(i,a){var f=Ot;Ot=f!==0&&4>f?f:4,i(!0);var g=jp.transition;jp.transition={};try{i(!1),a()}finally{Ot=f,jp.transition=g}}function M_(){return ni().memoizedState}function kI(i,a,f){var g=uo(i);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},F_(i))V_(a,f);else if(f=a_(i,a,f,g),f!==null){var E=wn();Ei(f,i,g,E),U_(f,a,g)}}function PI(i,a,f){var g=uo(i),E={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(F_(i))V_(a,E);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var j=a.lastRenderedState,te=C(j,f);if(E.hasEagerState=!0,E.eagerState=te,yi(te,j)){var fe=a.interleaved;fe===null?(E.next=E,Op(a)):(E.next=fe.next,fe.next=E),a.interleaved=E;return}}catch{}finally{}f=a_(i,a,E,g),f!==null&&(E=wn(),Ei(f,i,g,E),U_(f,a,g))}}function F_(i){var a=i.alternate;return i===hr||a!==null&&a===hr}function V_(i,a){Wu=$h=!0;var f=i.pending;f===null?a.next=a:(a.next=f.next,f.next=a),i.pending=a}function U_(i,a,f){if((f&4194240)!==0){var g=a.lanes;g&=i.pendingLanes,f|=g,a.lanes=f,Ks(i,f)}}var qh={readContext:ri,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},NI={readContext:ri,useCallback:function(i,a){return Wi().memoizedState=[i,a===void 0?null:a],i},useContext:ri,useEffect:C_,useImperativeHandle:function(i,a,f){return f=f!=null?f.concat([i]):null,zh(4194308,4,P_.bind(null,a,i),f)},useLayoutEffect:function(i,a){return zh(4194308,4,i,a)},useInsertionEffect:function(i,a){return zh(4,2,i,a)},useMemo:function(i,a){var f=Wi();return a=a===void 0?null:a,i=i(),f.memoizedState=[i,a],i},useReducer:function(i,a,f){var g=Wi();return a=f!==void 0?f(a):a,g.memoizedState=g.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},g.queue=i,i=i.dispatch=kI.bind(null,hr,i),[g.memoizedState,i]},useRef:function(i){var a=Wi();return i={current:i},a.memoizedState=i},useState:A_,useDebugValue:Kp,useDeferredValue:function(i){return Wi().memoizedState=i},useTransition:function(){var i=A_(!1),a=i[0];return i=RI.bind(null,i[1]),Wi().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,f){var g=hr,E=Wi();if(sr){if(f===void 0)throw Error(t(407));f=f()}else{if(f=a(),Wr===null)throw Error(t(349));(oa&30)!==0||b_(g,a,f)}E.memoizedState=f;var C={value:f,getSnapshot:a};return E.queue=C,C_(S_.bind(null,g,C,i),[i]),g.flags|=2048,Qu(9,E_.bind(null,g,C,f,a),void 0,null),f},useId:function(){var i=Wi(),a=Wr.identifierPrefix;if(sr){var f=ms,g=ps;f=(g&~(1<<32-yn(g)-1)).toString(32)+f,a=":"+a+"R"+f,f=qu++,0<f&&(a+="H"+f.toString(32)),a+=":"}else f=CI++,a=":"+a+"r"+f.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},OI={readContext:ri,useCallback:O_,useContext:ri,useEffect:Qp,useImperativeHandle:N_,useInsertionEffect:R_,useLayoutEffect:k_,useMemo:D_,useReducer:qp,useRef:I_,useState:function(){return qp(Hu)},useDebugValue:Kp,useDeferredValue:function(i){var a=ni();return L_(a,Dr.memoizedState,i)},useTransition:function(){var i=qp(Hu)[0],a=ni().memoizedState;return[i,a]},useMutableSource:__,useSyncExternalStore:w_,useId:M_,unstable_isNewReconciler:!1},DI={readContext:ri,useCallback:O_,useContext:ri,useEffect:Qp,useImperativeHandle:N_,useInsertionEffect:R_,useLayoutEffect:k_,useMemo:D_,useReducer:Hp,useRef:I_,useState:function(){return Hp(Hu)},useDebugValue:Kp,useDeferredValue:function(i){var a=ni();return Dr===null?a.memoizedState=i:L_(a,Dr.memoizedState,i)},useTransition:function(){var i=Hp(Hu)[0],a=ni().memoizedState;return[i,a]},useMutableSource:__,useSyncExternalStore:w_,useId:M_,unstable_isNewReconciler:!1};function xl(i,a){try{var f="",g=a;do f+=oe(g),g=g.return;while(g);var E=f}catch(C){E=`
Error generating stack: `+C.message+`
`+C.stack}return{value:i,source:a,stack:E,digest:null}}function Gp(i,a,f){return{value:i,source:null,stack:f??null,digest:a??null}}function Yp(i,a){try{console.error(a.value)}catch(f){setTimeout(function(){throw f})}}var LI=typeof WeakMap=="function"?WeakMap:Map;function B_(i,a,f){f=ys(-1,f),f.tag=3,f.payload={element:null};var g=a.value;return f.callback=function(){Xh||(Xh=!0,hm=g),Yp(i,a)},f}function j_(i,a,f){f=ys(-1,f),f.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var E=a.value;f.payload=function(){return g(E)},f.callback=function(){Yp(i,a)}}var C=i.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(f.callback=function(){Yp(i,a),typeof g!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var j=a.stack;this.componentDidCatch(a.value,{componentStack:j!==null?j:""})}),f}function $_(i,a,f){var g=i.pingCache;if(g===null){g=i.pingCache=new LI;var E=new Set;g.set(a,E)}else E=g.get(a),E===void 0&&(E=new Set,g.set(a,E));E.has(f)||(E.add(f),i=GI.bind(null,i,a,f),a.then(i,i))}function z_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function W_(i,a,f,g,E){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(a=ys(-1,1),a.tag=2,so(f,a,1))),f.lanes|=1),i):(i.flags|=65536,i.lanes=E,i)}var MI=q.ReactCurrentOwner,Nn=!1;function _n(i,a,f,g){a.child=i===null?y_(a,null,f,g):Sl(a,i.child,f,g)}function q_(i,a,f,g,E){f=f.render;var C=a.ref;return El(a,E),g=zp(i,a,f,g,C,E),f=Wp(),i!==null&&!Nn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~E,vs(i,a,E)):(sr&&f&&Tp(a),a.flags|=1,_n(i,a,g,E),a.child)}function H_(i,a,f,g,E){if(i===null){var C=f.type;return typeof C=="function"&&!vm(C)&&C.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(a.tag=15,a.type=C,Q_(i,a,C,g,E)):(i=sf(f.type,null,g,a,a.mode,E),i.ref=a.ref,i.return=a,a.child=i)}if(C=i.child,(i.lanes&E)===0){var j=C.memoizedProps;if(f=f.compare,f=f!==null?f:Ou,f(j,g)&&i.ref===a.ref)return vs(i,a,E)}return a.flags|=1,i=ho(C,g),i.ref=a.ref,i.return=a,a.child=i}function Q_(i,a,f,g,E){if(i!==null){var C=i.memoizedProps;if(Ou(C,g)&&i.ref===a.ref)if(Nn=!1,a.pendingProps=g=C,(i.lanes&E)!==0)(i.flags&131072)!==0&&(Nn=!0);else return a.lanes=i.lanes,vs(i,a,E)}return Jp(i,a,f,g,E)}function K_(i,a,f){var g=a.pendingProps,E=g.children,C=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(Il,Kn),Kn|=f;else{if((f&1073741824)===0)return i=C!==null?C.baseLanes|f:f,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Xt(Il,Kn),Kn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=C!==null?C.baseLanes:f,Xt(Il,Kn),Kn|=g}else C!==null?(g=C.baseLanes|f,a.memoizedState=null):g=f,Xt(Il,Kn),Kn|=g;return _n(i,a,E,f),a.child}function G_(i,a){var f=a.ref;(i===null&&f!==null||i!==null&&i.ref!==f)&&(a.flags|=512,a.flags|=2097152)}function Jp(i,a,f,g,E){var C=Pn(f)?ta:nn.current;return C=yl(a,C),El(a,E),f=zp(i,a,f,g,C,E),g=Wp(),i!==null&&!Nn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~E,vs(i,a,E)):(sr&&g&&Tp(a),a.flags|=1,_n(i,a,f,E),a.child)}function Y_(i,a,f,g,E){if(Pn(f)){var C=!0;Rh(a)}else C=!1;if(El(a,E),a.stateNode===null)Qh(i,a),d_(a,f,g),Mp(a,f,g,E),g=!0;else if(i===null){var j=a.stateNode,te=a.memoizedProps;j.props=te;var fe=j.context,Ce=f.contextType;typeof Ce=="object"&&Ce!==null?Ce=ri(Ce):(Ce=Pn(f)?ta:nn.current,Ce=yl(a,Ce));var Qe=f.getDerivedStateFromProps,Xe=typeof Qe=="function"||typeof j.getSnapshotBeforeUpdate=="function";Xe||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==g||fe!==Ce)&&p_(a,j,g,Ce),io=!1;var He=a.memoizedState;j.state=He,Fh(a,g,j,E),fe=a.memoizedState,te!==g||He!==fe||kn.current||io?(typeof Qe=="function"&&(Lp(a,f,Qe,g),fe=a.memoizedState),(te=io||f_(a,f,te,g,He,fe,Ce))?(Xe||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(a.flags|=4194308)):(typeof j.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=fe),j.props=g,j.state=fe,j.context=Ce,g=te):(typeof j.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{j=a.stateNode,l_(i,a),te=a.memoizedProps,Ce=a.type===a.elementType?te:_i(a.type,te),j.props=Ce,Xe=a.pendingProps,He=j.context,fe=f.contextType,typeof fe=="object"&&fe!==null?fe=ri(fe):(fe=Pn(f)?ta:nn.current,fe=yl(a,fe));var ot=f.getDerivedStateFromProps;(Qe=typeof ot=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==Xe||He!==fe)&&p_(a,j,g,fe),io=!1,He=a.memoizedState,j.state=He,Fh(a,g,j,E);var ut=a.memoizedState;te!==Xe||He!==ut||kn.current||io?(typeof ot=="function"&&(Lp(a,f,ot,g),ut=a.memoizedState),(Ce=io||f_(a,f,Ce,g,He,ut,fe)||!1)?(Qe||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(g,ut,fe),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(g,ut,fe)),typeof j.componentDidUpdate=="function"&&(a.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof j.componentDidUpdate!="function"||te===i.memoizedProps&&He===i.memoizedState||(a.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===i.memoizedProps&&He===i.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=ut),j.props=g,j.state=ut,j.context=fe,g=Ce):(typeof j.componentDidUpdate!="function"||te===i.memoizedProps&&He===i.memoizedState||(a.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===i.memoizedProps&&He===i.memoizedState||(a.flags|=1024),g=!1)}return Xp(i,a,f,g,C,E)}function Xp(i,a,f,g,E,C){G_(i,a);var j=(a.flags&128)!==0;if(!g&&!j)return E&&e_(a,f,!1),vs(i,a,C);g=a.stateNode,MI.current=a;var te=j&&typeof f.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,i!==null&&j?(a.child=Sl(a,i.child,null,C),a.child=Sl(a,null,te,C)):_n(i,a,te,C),a.memoizedState=g.state,E&&e_(a,f,!0),a.child}function J_(i){var a=i.stateNode;a.pendingContext?X0(i,a.pendingContext,a.pendingContext!==a.context):a.context&&X0(i,a.context,!1),Fp(i,a.containerInfo)}function X_(i,a,f,g,E){return wl(),Cp(E),a.flags|=256,_n(i,a,f,g),a.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function em(i){return{baseLanes:i,cachePool:null,transitions:null}}function Z_(i,a,f){var g=a.pendingProps,E=cr.current,C=!1,j=(a.flags&128)!==0,te;if((te=j)||(te=i!==null&&i.memoizedState===null?!1:(E&2)!==0),te?(C=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(E|=1),Xt(cr,E&1),i===null)return Ip(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(j=g.children,i=g.fallback,C?(g=a.mode,C=a.child,j={mode:"hidden",children:j},(g&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=j):C=of(j,g,0,null),i=ha(i,g,f,null),C.return=a,i.return=a,C.sibling=i,a.child=C,a.child.memoizedState=em(f),a.memoizedState=Zp,i):tm(a,j));if(E=i.memoizedState,E!==null&&(te=E.dehydrated,te!==null))return FI(i,a,j,g,te,E,f);if(C){C=g.fallback,j=a.mode,E=i.child,te=E.sibling;var fe={mode:"hidden",children:g.children};return(j&1)===0&&a.child!==E?(g=a.child,g.childLanes=0,g.pendingProps=fe,a.deletions=null):(g=ho(E,fe),g.subtreeFlags=E.subtreeFlags&14680064),te!==null?C=ho(te,C):(C=ha(C,j,f,null),C.flags|=2),C.return=a,g.return=a,g.sibling=C,a.child=g,g=C,C=a.child,j=i.child.memoizedState,j=j===null?em(f):{baseLanes:j.baseLanes|f,cachePool:null,transitions:j.transitions},C.memoizedState=j,C.childLanes=i.childLanes&~f,a.memoizedState=Zp,g}return C=i.child,i=C.sibling,g=ho(C,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=f),g.return=a,g.sibling=null,i!==null&&(f=a.deletions,f===null?(a.deletions=[i],a.flags|=16):f.push(i)),a.child=g,a.memoizedState=null,g}function tm(i,a){return a=of({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Hh(i,a,f,g){return g!==null&&Cp(g),Sl(a,i.child,null,f),i=tm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function FI(i,a,f,g,E,C,j){if(f)return a.flags&256?(a.flags&=-257,g=Gp(Error(t(422))),Hh(i,a,j,g)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(C=g.fallback,E=a.mode,g=of({mode:"visible",children:g.children},E,0,null),C=ha(C,E,j,null),C.flags|=2,g.return=a,C.return=a,g.sibling=C,a.child=g,(a.mode&1)!==0&&Sl(a,i.child,null,j),a.child.memoizedState=em(j),a.memoizedState=Zp,C);if((a.mode&1)===0)return Hh(i,a,j,null);if(E.data==="$!"){if(g=E.nextSibling&&E.nextSibling.dataset,g)var te=g.dgst;return g=te,C=Error(t(419)),g=Gp(C,g,void 0),Hh(i,a,j,g)}if(te=(j&i.childLanes)!==0,Nn||te){if(g=Wr,g!==null){switch(j&-j){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(g.suspendedLanes|j))!==0?0:E,E!==0&&E!==C.retryLane&&(C.retryLane=E,gs(i,E),Ei(g,i,E,-1))}return ym(),g=Gp(Error(t(421))),Hh(i,a,j,g)}return E.data==="$?"?(a.flags|=128,a.child=i.child,a=YI.bind(null,i),E._reactRetry=a,null):(i=C.treeContext,Qn=eo(E.nextSibling),Hn=a,sr=!0,vi=null,i!==null&&(ei[ti++]=ps,ei[ti++]=ms,ei[ti++]=ra,ps=i.id,ms=i.overflow,ra=a),a=tm(a,g.children),a.flags|=4096,a)}function ew(i,a,f){i.lanes|=a;var g=i.alternate;g!==null&&(g.lanes|=a),Np(i.return,a,f)}function rm(i,a,f,g,E){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:E}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=f,C.tailMode=E)}function tw(i,a,f){var g=a.pendingProps,E=g.revealOrder,C=g.tail;if(_n(i,a,g.children,f),g=cr.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ew(i,f,a);else if(i.tag===19)ew(i,f,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Xt(cr,g),(a.mode&1)===0)a.memoizedState=null;else switch(E){case"forwards":for(f=a.child,E=null;f!==null;)i=f.alternate,i!==null&&Bh(i)===null&&(E=f),f=f.sibling;f=E,f===null?(E=a.child,a.child=null):(E=f.sibling,f.sibling=null),rm(a,!1,E,f,C);break;case"backwards":for(f=null,E=a.child,a.child=null;E!==null;){if(i=E.alternate,i!==null&&Bh(i)===null){a.child=E;break}i=E.sibling,E.sibling=f,f=E,E=i}rm(a,!0,f,null,C);break;case"together":rm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Qh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function vs(i,a,f){if(i!==null&&(a.dependencies=i.dependencies),aa|=a.lanes,(f&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,f=ho(i,i.pendingProps),a.child=f,f.return=a;i.sibling!==null;)i=i.sibling,f=f.sibling=ho(i,i.pendingProps),f.return=a;f.sibling=null}return a.child}function VI(i,a,f){switch(a.tag){case 3:J_(a),wl();break;case 5:v_(a);break;case 1:Pn(a.type)&&Rh(a);break;case 4:Fp(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,E=a.memoizedProps.value;Xt(Dh,g._currentValue),g._currentValue=E;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(Xt(cr,cr.current&1),a.flags|=128,null):(f&a.child.childLanes)!==0?Z_(i,a,f):(Xt(cr,cr.current&1),i=vs(i,a,f),i!==null?i.sibling:null);Xt(cr,cr.current&1);break;case 19:if(g=(f&a.childLanes)!==0,(i.flags&128)!==0){if(g)return tw(i,a,f);a.flags|=128}if(E=a.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Xt(cr,cr.current),g)break;return null;case 22:case 23:return a.lanes=0,K_(i,a,f)}return vs(i,a,f)}var rw,nm,nw,iw;rw=function(i,a){for(var f=a.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},nm=function(){},nw=function(i,a,f,g){var E=i.memoizedProps;if(E!==g){i=a.stateNode,sa(zi.current);var C=null;switch(f){case"input":E=Oe(i,E),g=Oe(i,g),C=[];break;case"select":E=B({},E,{value:void 0}),g=B({},g,{value:void 0}),C=[];break;case"textarea":E=Q(i,E),g=Q(i,g),C=[];break;default:typeof E.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Ah)}bt(f,g);var j;f=null;for(Ce in E)if(!g.hasOwnProperty(Ce)&&E.hasOwnProperty(Ce)&&E[Ce]!=null)if(Ce==="style"){var te=E[Ce];for(j in te)te.hasOwnProperty(j)&&(f||(f={}),f[j]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(s.hasOwnProperty(Ce)?C||(C=[]):(C=C||[]).push(Ce,null));for(Ce in g){var fe=g[Ce];if(te=E!=null?E[Ce]:void 0,g.hasOwnProperty(Ce)&&fe!==te&&(fe!=null||te!=null))if(Ce==="style")if(te){for(j in te)!te.hasOwnProperty(j)||fe&&fe.hasOwnProperty(j)||(f||(f={}),f[j]="");for(j in fe)fe.hasOwnProperty(j)&&te[j]!==fe[j]&&(f||(f={}),f[j]=fe[j])}else f||(C||(C=[]),C.push(Ce,f)),f=fe;else Ce==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,te=te?te.__html:void 0,fe!=null&&te!==fe&&(C=C||[]).push(Ce,fe)):Ce==="children"?typeof fe!="string"&&typeof fe!="number"||(C=C||[]).push(Ce,""+fe):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ce)?(fe!=null&&Ce==="onScroll"&&Zt("scroll",i),C||te===fe||(C=[])):(C=C||[]).push(Ce,fe))}f&&(C=C||[]).push("style",f);var Ce=C;(a.updateQueue=Ce)&&(a.flags|=4)}},iw=function(i,a,f,g){f!==g&&(a.flags|=4)};function Ku(i,a){if(!sr)switch(i.tailMode){case"hidden":a=i.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function on(i){var a=i.alternate!==null&&i.alternate.child===i.child,f=0,g=0;if(a)for(var E=i.child;E!==null;)f|=E.lanes|E.childLanes,g|=E.subtreeFlags&14680064,g|=E.flags&14680064,E.return=i,E=E.sibling;else for(E=i.child;E!==null;)f|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=i,E=E.sibling;return i.subtreeFlags|=g,i.childLanes=f,a}function UI(i,a,f){var g=a.pendingProps;switch(xp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(a),null;case 1:return Pn(a.type)&&Ch(),on(a),null;case 3:return g=a.stateNode,Tl(),er(kn),er(nn),Bp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Oh(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vi!==null&&(pm(vi),vi=null))),nm(i,a),on(a),null;case 5:Vp(a);var E=sa(zu.current);if(f=a.type,i!==null&&a.stateNode!=null)nw(i,a,f,g,E),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(t(166));return on(a),null}if(i=sa(zi.current),Oh(a)){g=a.stateNode,f=a.type;var C=a.memoizedProps;switch(g[$i]=a,g[Vu]=C,i=(a.mode&1)!==0,f){case"dialog":Zt("cancel",g),Zt("close",g);break;case"iframe":case"object":case"embed":Zt("load",g);break;case"video":case"audio":for(E=0;E<Lu.length;E++)Zt(Lu[E],g);break;case"source":Zt("error",g);break;case"img":case"image":case"link":Zt("error",g),Zt("load",g);break;case"details":Zt("toggle",g);break;case"input":ne(g,C),Zt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!C.multiple},Zt("invalid",g);break;case"textarea":re(g,C),Zt("invalid",g)}bt(f,C),E=null;for(var j in C)if(C.hasOwnProperty(j)){var te=C[j];j==="children"?typeof te=="string"?g.textContent!==te&&(C.suppressHydrationWarning!==!0&&xh(g.textContent,te,i),E=["children",te]):typeof te=="number"&&g.textContent!==""+te&&(C.suppressHydrationWarning!==!0&&xh(g.textContent,te,i),E=["children",""+te]):s.hasOwnProperty(j)&&te!=null&&j==="onScroll"&&Zt("scroll",g)}switch(f){case"input":de(g),Me(g,C,!0);break;case"textarea":de(g),Ue(g);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(g.onclick=Ah)}g=E,a.updateQueue=g,g!==null&&(a.flags|=4)}else{j=E.nodeType===9?E:E.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=v(f)),i==="http://www.w3.org/1999/xhtml"?f==="script"?(i=j.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=j.createElement(f,{is:g.is}):(i=j.createElement(f),f==="select"&&(j=i,g.multiple?j.multiple=!0:g.size&&(j.size=g.size))):i=j.createElementNS(i,f),i[$i]=a,i[Vu]=g,rw(i,a,!1,!1),a.stateNode=i;e:{switch(j=mt(f,g),f){case"dialog":Zt("cancel",i),Zt("close",i),E=g;break;case"iframe":case"object":case"embed":Zt("load",i),E=g;break;case"video":case"audio":for(E=0;E<Lu.length;E++)Zt(Lu[E],i);E=g;break;case"source":Zt("error",i),E=g;break;case"img":case"image":case"link":Zt("error",i),Zt("load",i),E=g;break;case"details":Zt("toggle",i),E=g;break;case"input":ne(i,g),E=Oe(i,g),Zt("invalid",i);break;case"option":E=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},E=B({},g,{value:void 0}),Zt("invalid",i);break;case"textarea":re(i,g),E=Q(i,g),Zt("invalid",i);break;default:E=g}bt(f,E),te=E;for(C in te)if(te.hasOwnProperty(C)){var fe=te[C];C==="style"?et(i,fe):C==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&U(i,fe)):C==="children"?typeof fe=="string"?(f!=="textarea"||fe!=="")&&J(i,fe):typeof fe=="number"&&J(i,""+fe):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?fe!=null&&C==="onScroll"&&Zt("scroll",i):fe!=null&&k(i,C,fe,j))}switch(f){case"input":de(i),Me(i,g,!1);break;case"textarea":de(i),Ue(i);break;case"option":g.value!=null&&i.setAttribute("value",""+ee(g.value));break;case"select":i.multiple=!!g.multiple,C=g.value,C!=null?ae(i,!!g.multiple,C,!1):g.defaultValue!=null&&ae(i,!!g.multiple,g.defaultValue,!0);break;default:typeof E.onClick=="function"&&(i.onclick=Ah)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return on(a),null;case 6:if(i&&a.stateNode!=null)iw(i,a,i.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(t(166));if(f=sa(zu.current),sa(zi.current),Oh(a)){if(g=a.stateNode,f=a.memoizedProps,g[$i]=a,(C=g.nodeValue!==f)&&(i=Hn,i!==null))switch(i.tag){case 3:xh(g.nodeValue,f,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&xh(g.nodeValue,f,(i.mode&1)!==0)}C&&(a.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[$i]=a,a.stateNode=g}return on(a),null;case 13:if(er(cr),g=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(sr&&Qn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)o_(),wl(),a.flags|=98560,C=!1;else if(C=Oh(a),g!==null&&g.dehydrated!==null){if(i===null){if(!C)throw Error(t(318));if(C=a.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(t(317));C[$i]=a}else wl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;on(a),C=!1}else vi!==null&&(pm(vi),vi=null),C=!0;if(!C)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=f,a):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(cr.current&1)!==0?Lr===0&&(Lr=3):ym())),a.updateQueue!==null&&(a.flags|=4),on(a),null);case 4:return Tl(),nm(i,a),i===null&&Mu(a.stateNode.containerInfo),on(a),null;case 10:return Pp(a.type._context),on(a),null;case 17:return Pn(a.type)&&Ch(),on(a),null;case 19:if(er(cr),C=a.memoizedState,C===null)return on(a),null;if(g=(a.flags&128)!==0,j=C.rendering,j===null)if(g)Ku(C,!1);else{if(Lr!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(j=Bh(i),j!==null){for(a.flags|=128,Ku(C,!1),g=j.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=f,f=a.child;f!==null;)C=f,i=g,C.flags&=14680066,j=C.alternate,j===null?(C.childLanes=0,C.lanes=i,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=j.childLanes,C.lanes=j.lanes,C.child=j.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=j.memoizedProps,C.memoizedState=j.memoizedState,C.updateQueue=j.updateQueue,C.type=j.type,i=j.dependencies,C.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),f=f.sibling;return Xt(cr,cr.current&1|2),a.child}i=i.sibling}C.tail!==null&&Jt()>Cl&&(a.flags|=128,g=!0,Ku(C,!1),a.lanes=4194304)}else{if(!g)if(i=Bh(j),i!==null){if(a.flags|=128,g=!0,f=i.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),Ku(C,!0),C.tail===null&&C.tailMode==="hidden"&&!j.alternate&&!sr)return on(a),null}else 2*Jt()-C.renderingStartTime>Cl&&f!==1073741824&&(a.flags|=128,g=!0,Ku(C,!1),a.lanes=4194304);C.isBackwards?(j.sibling=a.child,a.child=j):(f=C.last,f!==null?f.sibling=j:a.child=j,C.last=j)}return C.tail!==null?(a=C.tail,C.rendering=a,C.tail=a.sibling,C.renderingStartTime=Jt(),a.sibling=null,f=cr.current,Xt(cr,g?f&1|2:f&1),a):(on(a),null);case 22:case 23:return gm(),g=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(Kn&1073741824)!==0&&(on(a),a.subtreeFlags&6&&(a.flags|=8192)):on(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function BI(i,a){switch(xp(a),a.tag){case 1:return Pn(a.type)&&Ch(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Tl(),er(kn),er(nn),Bp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Vp(a),null;case 13:if(er(cr),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));wl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return er(cr),null;case 4:return Tl(),null;case 10:return Pp(a.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var Kh=!1,an=!1,jI=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Al(i,a){var f=i.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){gr(i,a,g)}else f.current=null}function im(i,a,f){try{f()}catch(g){gr(i,a,g)}}var sw=!1;function $I(i,a){if(gp=Js,i=M0(),lp(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var E=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var j=0,te=-1,fe=-1,Ce=0,Qe=0,Xe=i,He=null;t:for(;;){for(var ot;Xe!==f||E!==0&&Xe.nodeType!==3||(te=j+E),Xe!==C||g!==0&&Xe.nodeType!==3||(fe=j+g),Xe.nodeType===3&&(j+=Xe.nodeValue.length),(ot=Xe.firstChild)!==null;)He=Xe,Xe=ot;for(;;){if(Xe===i)break t;if(He===f&&++Ce===E&&(te=j),He===C&&++Qe===g&&(fe=j),(ot=Xe.nextSibling)!==null)break;Xe=He,He=Xe.parentNode}Xe=ot}f=te===-1||fe===-1?null:{start:te,end:fe}}else f=null}f=f||{start:0,end:0}}else f=null;for(yp={focusedElem:i,selectionRange:f},Js=!1,lt=a;lt!==null;)if(a=lt,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,lt=i;else for(;lt!==null;){a=lt;try{var ut=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ct=ut.memoizedProps,Er=ut.memoizedState,Te=a.stateNode,ge=Te.getSnapshotBeforeUpdate(a.elementType===a.type?ct:_i(a.type,ct),Er);Te.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:var Ae=a.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(tt){gr(a,a.return,tt)}if(i=a.sibling,i!==null){i.return=a.return,lt=i;break}lt=a.return}return ut=sw,sw=!1,ut}function Gu(i,a,f){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var E=g=g.next;do{if((E.tag&i)===i){var C=E.destroy;E.destroy=void 0,C!==void 0&&im(a,f,C)}E=E.next}while(E!==g)}}function Gh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&i)===i){var g=f.create;f.destroy=g()}f=f.next}while(f!==a)}}function sm(i){var a=i.ref;if(a!==null){var f=i.stateNode;switch(i.tag){case 5:i=f;break;default:i=f}typeof a=="function"?a(i):a.current=i}}function ow(i){var a=i.alternate;a!==null&&(i.alternate=null,ow(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[$i],delete a[Vu],delete a[bp],delete a[TI],delete a[xI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function aw(i){return i.tag===5||i.tag===3||i.tag===4}function lw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||aw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function om(i,a,f){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?f.nodeType===8?f.parentNode.insertBefore(i,a):f.insertBefore(i,a):(f.nodeType===8?(a=f.parentNode,a.insertBefore(i,f)):(a=f,a.appendChild(i)),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=Ah));else if(g!==4&&(i=i.child,i!==null))for(om(i,a,f),i=i.sibling;i!==null;)om(i,a,f),i=i.sibling}function am(i,a,f){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?f.insertBefore(i,a):f.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(am(i,a,f),i=i.sibling;i!==null;)am(i,a,f),i=i.sibling}var Jr=null,wi=!1;function oo(i,a,f){for(f=f.child;f!==null;)uw(i,a,f),f=f.sibling}function uw(i,a,f){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Qo,f)}catch{}switch(f.tag){case 5:an||Al(f,a);case 6:var g=Jr,E=wi;Jr=null,oo(i,a,f),Jr=g,wi=E,Jr!==null&&(wi?(i=Jr,f=f.stateNode,i.nodeType===8?i.parentNode.removeChild(f):i.removeChild(f)):Jr.removeChild(f.stateNode));break;case 18:Jr!==null&&(wi?(i=Jr,f=f.stateNode,i.nodeType===8?wp(i.parentNode,f):i.nodeType===1&&wp(i,f),mi(i)):wp(Jr,f.stateNode));break;case 4:g=Jr,E=wi,Jr=f.stateNode.containerInfo,wi=!0,oo(i,a,f),Jr=g,wi=E;break;case 0:case 11:case 14:case 15:if(!an&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){E=g=g.next;do{var C=E,j=C.destroy;C=C.tag,j!==void 0&&((C&2)!==0||(C&4)!==0)&&im(f,a,j),E=E.next}while(E!==g)}oo(i,a,f);break;case 1:if(!an&&(Al(f,a),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(te){gr(f,a,te)}oo(i,a,f);break;case 21:oo(i,a,f);break;case 22:f.mode&1?(an=(g=an)||f.memoizedState!==null,oo(i,a,f),an=g):oo(i,a,f);break;default:oo(i,a,f)}}function cw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var f=i.stateNode;f===null&&(f=i.stateNode=new jI),a.forEach(function(g){var E=JI.bind(null,i,g);f.has(g)||(f.add(g),g.then(E,E))})}}function bi(i,a){var f=a.deletions;if(f!==null)for(var g=0;g<f.length;g++){var E=f[g];try{var C=i,j=a,te=j;e:for(;te!==null;){switch(te.tag){case 5:Jr=te.stateNode,wi=!1;break e;case 3:Jr=te.stateNode.containerInfo,wi=!0;break e;case 4:Jr=te.stateNode.containerInfo,wi=!0;break e}te=te.return}if(Jr===null)throw Error(t(160));uw(C,j,E),Jr=null,wi=!1;var fe=E.alternate;fe!==null&&(fe.return=null),E.return=null}catch(Ce){gr(E,a,Ce)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)hw(a,i),a=a.sibling}function hw(i,a){var f=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(bi(a,i),qi(i),g&4){try{Gu(3,i,i.return),Gh(3,i)}catch(ct){gr(i,i.return,ct)}try{Gu(5,i,i.return)}catch(ct){gr(i,i.return,ct)}}break;case 1:bi(a,i),qi(i),g&512&&f!==null&&Al(f,f.return);break;case 5:if(bi(a,i),qi(i),g&512&&f!==null&&Al(f,f.return),i.flags&32){var E=i.stateNode;try{J(E,"")}catch(ct){gr(i,i.return,ct)}}if(g&4&&(E=i.stateNode,E!=null)){var C=i.memoizedProps,j=f!==null?f.memoizedProps:C,te=i.type,fe=i.updateQueue;if(i.updateQueue=null,fe!==null)try{te==="input"&&C.type==="radio"&&C.name!=null&&le(E,C),mt(te,j);var Ce=mt(te,C);for(j=0;j<fe.length;j+=2){var Qe=fe[j],Xe=fe[j+1];Qe==="style"?et(E,Xe):Qe==="dangerouslySetInnerHTML"?U(E,Xe):Qe==="children"?J(E,Xe):k(E,Qe,Xe,Ce)}switch(te){case"input":Ee(E,C);break;case"textarea":Z(E,C);break;case"select":var He=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!C.multiple;var ot=C.value;ot!=null?ae(E,!!C.multiple,ot,!1):He!==!!C.multiple&&(C.defaultValue!=null?ae(E,!!C.multiple,C.defaultValue,!0):ae(E,!!C.multiple,C.multiple?[]:"",!1))}E[Vu]=C}catch(ct){gr(i,i.return,ct)}}break;case 6:if(bi(a,i),qi(i),g&4){if(i.stateNode===null)throw Error(t(162));E=i.stateNode,C=i.memoizedProps;try{E.nodeValue=C}catch(ct){gr(i,i.return,ct)}}break;case 3:if(bi(a,i),qi(i),g&4&&f!==null&&f.memoizedState.isDehydrated)try{mi(a.containerInfo)}catch(ct){gr(i,i.return,ct)}break;case 4:bi(a,i),qi(i);break;case 13:bi(a,i),qi(i),E=i.child,E.flags&8192&&(C=E.memoizedState!==null,E.stateNode.isHidden=C,!C||E.alternate!==null&&E.alternate.memoizedState!==null||(cm=Jt())),g&4&&cw(i);break;case 22:if(Qe=f!==null&&f.memoizedState!==null,i.mode&1?(an=(Ce=an)||Qe,bi(a,i),an=Ce):bi(a,i),qi(i),g&8192){if(Ce=i.memoizedState!==null,(i.stateNode.isHidden=Ce)&&!Qe&&(i.mode&1)!==0)for(lt=i,Qe=i.child;Qe!==null;){for(Xe=lt=Qe;lt!==null;){switch(He=lt,ot=He.child,He.tag){case 0:case 11:case 14:case 15:Gu(4,He,He.return);break;case 1:Al(He,He.return);var ut=He.stateNode;if(typeof ut.componentWillUnmount=="function"){g=He,f=He.return;try{a=g,ut.props=a.memoizedProps,ut.state=a.memoizedState,ut.componentWillUnmount()}catch(ct){gr(g,f,ct)}}break;case 5:Al(He,He.return);break;case 22:if(He.memoizedState!==null){pw(Xe);continue}}ot!==null?(ot.return=He,lt=ot):pw(Xe)}Qe=Qe.sibling}e:for(Qe=null,Xe=i;;){if(Xe.tag===5){if(Qe===null){Qe=Xe;try{E=Xe.stateNode,Ce?(C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(te=Xe.stateNode,fe=Xe.memoizedProps.style,j=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,te.style.display=Ze("display",j))}catch(ct){gr(i,i.return,ct)}}}else if(Xe.tag===6){if(Qe===null)try{Xe.stateNode.nodeValue=Ce?"":Xe.memoizedProps}catch(ct){gr(i,i.return,ct)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===i)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===i)break e;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===i)break e;Qe===Xe&&(Qe=null),Xe=Xe.return}Qe===Xe&&(Qe=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}break;case 19:bi(a,i),qi(i),g&4&&cw(i);break;case 21:break;default:bi(a,i),qi(i)}}function qi(i){var a=i.flags;if(a&2){try{e:{for(var f=i.return;f!==null;){if(aw(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var E=g.stateNode;g.flags&32&&(J(E,""),g.flags&=-33);var C=lw(i);am(i,C,E);break;case 3:case 4:var j=g.stateNode.containerInfo,te=lw(i);om(i,te,j);break;default:throw Error(t(161))}}catch(fe){gr(i,i.return,fe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function zI(i,a,f){lt=i,fw(i)}function fw(i,a,f){for(var g=(i.mode&1)!==0;lt!==null;){var E=lt,C=E.child;if(E.tag===22&&g){var j=E.memoizedState!==null||Kh;if(!j){var te=E.alternate,fe=te!==null&&te.memoizedState!==null||an;te=Kh;var Ce=an;if(Kh=j,(an=fe)&&!Ce)for(lt=E;lt!==null;)j=lt,fe=j.child,j.tag===22&&j.memoizedState!==null?mw(E):fe!==null?(fe.return=j,lt=fe):mw(E);for(;C!==null;)lt=C,fw(C),C=C.sibling;lt=E,Kh=te,an=Ce}dw(i)}else(E.subtreeFlags&8772)!==0&&C!==null?(C.return=E,lt=C):dw(i)}}function dw(i){for(;lt!==null;){var a=lt;if((a.flags&8772)!==0){var f=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:an||Gh(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!an)if(f===null)g.componentDidMount();else{var E=a.elementType===a.type?f.memoizedProps:_i(a.type,f.memoizedProps);g.componentDidUpdate(E,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var C=a.updateQueue;C!==null&&c_(a,C,g);break;case 3:var j=a.updateQueue;if(j!==null){if(f=null,a.child!==null)switch(a.child.tag){case 5:f=a.child.stateNode;break;case 1:f=a.child.stateNode}c_(a,j,f)}break;case 5:var te=a.stateNode;if(f===null&&a.flags&4){f=te;var fe=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&f.focus();break;case"img":fe.src&&(f.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Ce=a.alternate;if(Ce!==null){var Qe=Ce.memoizedState;if(Qe!==null){var Xe=Qe.dehydrated;Xe!==null&&mi(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||a.flags&512&&sm(a)}catch(He){gr(a,a.return,He)}}if(a===i){lt=null;break}if(f=a.sibling,f!==null){f.return=a.return,lt=f;break}lt=a.return}}function pw(i){for(;lt!==null;){var a=lt;if(a===i){lt=null;break}var f=a.sibling;if(f!==null){f.return=a.return,lt=f;break}lt=a.return}}function mw(i){for(;lt!==null;){var a=lt;try{switch(a.tag){case 0:case 11:case 15:var f=a.return;try{Gh(4,a)}catch(fe){gr(a,f,fe)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var E=a.return;try{g.componentDidMount()}catch(fe){gr(a,E,fe)}}var C=a.return;try{sm(a)}catch(fe){gr(a,C,fe)}break;case 5:var j=a.return;try{sm(a)}catch(fe){gr(a,j,fe)}}}catch(fe){gr(a,a.return,fe)}if(a===i){lt=null;break}var te=a.sibling;if(te!==null){te.return=a.return,lt=te;break}lt=a.return}}var WI=Math.ceil,Yh=q.ReactCurrentDispatcher,lm=q.ReactCurrentOwner,ii=q.ReactCurrentBatchConfig,Vt=0,Wr=null,Ir=null,Xr=0,Kn=0,Il=to(0),Lr=0,Yu=null,aa=0,Jh=0,um=0,Ju=null,On=null,cm=0,Cl=1/0,_s=null,Xh=!1,hm=null,ao=null,Zh=!1,lo=null,ef=0,Xu=0,fm=null,tf=-1,rf=0;function wn(){return(Vt&6)!==0?Jt():tf!==-1?tf:tf=Jt()}function uo(i){return(i.mode&1)===0?1:(Vt&2)!==0&&Xr!==0?Xr&-Xr:II.transition!==null?(rf===0&&(rf=Go()),rf):(i=Ot,i!==0||(i=window.event,i=i===void 0?16:Au(i.type)),i)}function Ei(i,a,f,g){if(50<Xu)throw Xu=0,fm=null,Error(t(185));Qs(i,f,g),((Vt&2)===0||i!==Wr)&&(i===Wr&&((Vt&2)===0&&(Jh|=f),Lr===4&&co(i,Xr)),Dn(i,g),f===1&&Vt===0&&(a.mode&1)===0&&(Cl=Jt()+500,kh&&no()))}function Dn(i,a){var f=i.callbackNode;as(i,a);var g=Ko(i,i===Wr?Xr:0);if(g===0)f!==null&&bu(f),i.callbackNode=null,i.callbackPriority=0;else if(a=g&-g,i.callbackPriority!==a){if(f!=null&&bu(f),a===1)i.tag===0?AI(yw.bind(null,i)):t_(yw.bind(null,i)),EI(function(){(Vt&6)===0&&no()}),f=null;else{switch(Gs(g)){case 1:f=Ho;break;case 4:f=Ws;break;case 16:f=Jn;break;case 536870912:f=rh;break;default:f=Jn}f=xw(f,gw.bind(null,i))}i.callbackPriority=a,i.callbackNode=f}}function gw(i,a){if(tf=-1,rf=0,(Vt&6)!==0)throw Error(t(327));var f=i.callbackNode;if(Rl()&&i.callbackNode!==f)return null;var g=Ko(i,i===Wr?Xr:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||a)a=nf(i,g);else{a=g;var E=Vt;Vt|=2;var C=_w();(Wr!==i||Xr!==a)&&(_s=null,Cl=Jt()+500,ua(i,a));do try{QI();break}catch(te){vw(i,te)}while(!0);kp(),Yh.current=C,Vt=E,Ir!==null?a=0:(Wr=null,Xr=0,a=Lr)}if(a!==0){if(a===2&&(E=zn(i),E!==0&&(g=E,a=dm(i,E))),a===1)throw f=Yu,ua(i,0),co(i,g),Dn(i,Jt()),f;if(a===6)co(i,g);else{if(E=i.current.alternate,(g&30)===0&&!qI(E)&&(a=nf(i,g),a===2&&(C=zn(i),C!==0&&(g=C,a=dm(i,C))),a===1))throw f=Yu,ua(i,0),co(i,g),Dn(i,Jt()),f;switch(i.finishedWork=E,i.finishedLanes=g,a){case 0:case 1:throw Error(t(345));case 2:ca(i,On,_s);break;case 3:if(co(i,g),(g&130023424)===g&&(a=cm+500-Jt(),10<a)){if(Ko(i,0)!==0)break;if(E=i.suspendedLanes,(E&g)!==g){wn(),i.pingedLanes|=i.suspendedLanes&E;break}i.timeoutHandle=_p(ca.bind(null,i,On,_s),a);break}ca(i,On,_s);break;case 4:if(co(i,g),(g&4194240)===g)break;for(a=i.eventTimes,E=-1;0<g;){var j=31-yn(g);C=1<<j,j=a[j],j>E&&(E=j),g&=~C}if(g=E,g=Jt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*WI(g/1960))-g,10<g){i.timeoutHandle=_p(ca.bind(null,i,On,_s),g);break}ca(i,On,_s);break;case 5:ca(i,On,_s);break;default:throw Error(t(329))}}}return Dn(i,Jt()),i.callbackNode===f?gw.bind(null,i):null}function dm(i,a){var f=Ju;return i.current.memoizedState.isDehydrated&&(ua(i,a).flags|=256),i=nf(i,a),i!==2&&(a=On,On=f,a!==null&&pm(a)),i}function pm(i){On===null?On=i:On.push.apply(On,i)}function qI(i){for(var a=i;;){if(a.flags&16384){var f=a.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var E=f[g],C=E.getSnapshot;E=E.value;try{if(!yi(C(),E))return!1}catch{return!1}}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function co(i,a){for(a&=~um,a&=~Jh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var f=31-yn(a),g=1<<f;i[f]=-1,a&=~g}}function yw(i){if((Vt&6)!==0)throw Error(t(327));Rl();var a=Ko(i,0);if((a&1)===0)return Dn(i,Jt()),null;var f=nf(i,a);if(i.tag!==0&&f===2){var g=zn(i);g!==0&&(a=g,f=dm(i,g))}if(f===1)throw f=Yu,ua(i,0),co(i,a),Dn(i,Jt()),f;if(f===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,ca(i,On,_s),Dn(i,Jt()),null}function mm(i,a){var f=Vt;Vt|=1;try{return i(a)}finally{Vt=f,Vt===0&&(Cl=Jt()+500,kh&&no())}}function la(i){lo!==null&&lo.tag===0&&(Vt&6)===0&&Rl();var a=Vt;Vt|=1;var f=ii.transition,g=Ot;try{if(ii.transition=null,Ot=1,i)return i()}finally{Ot=g,ii.transition=f,Vt=a,(Vt&6)===0&&no()}}function gm(){Kn=Il.current,er(Il)}function ua(i,a){i.finishedWork=null,i.finishedLanes=0;var f=i.timeoutHandle;if(f!==-1&&(i.timeoutHandle=-1,bI(f)),Ir!==null)for(f=Ir.return;f!==null;){var g=f;switch(xp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Ch();break;case 3:Tl(),er(kn),er(nn),Bp();break;case 5:Vp(g);break;case 4:Tl();break;case 13:er(cr);break;case 19:er(cr);break;case 10:Pp(g.type._context);break;case 22:case 23:gm()}f=f.return}if(Wr=i,Ir=i=ho(i.current,null),Xr=Kn=a,Lr=0,Yu=null,um=Jh=aa=0,On=Ju=null,ia!==null){for(a=0;a<ia.length;a++)if(f=ia[a],g=f.interleaved,g!==null){f.interleaved=null;var E=g.next,C=f.pending;if(C!==null){var j=C.next;C.next=E,g.next=j}f.pending=g}ia=null}return i}function vw(i,a){do{var f=Ir;try{if(kp(),jh.current=qh,$h){for(var g=hr.memoizedState;g!==null;){var E=g.queue;E!==null&&(E.pending=null),g=g.next}$h=!1}if(oa=0,zr=Dr=hr=null,Wu=!1,qu=0,lm.current=null,f===null||f.return===null){Lr=1,Yu=a,Ir=null;break}e:{var C=i,j=f.return,te=f,fe=a;if(a=Xr,te.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ce=fe,Qe=te,Xe=Qe.tag;if((Qe.mode&1)===0&&(Xe===0||Xe===11||Xe===15)){var He=Qe.alternate;He?(Qe.updateQueue=He.updateQueue,Qe.memoizedState=He.memoizedState,Qe.lanes=He.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var ot=z_(j);if(ot!==null){ot.flags&=-257,W_(ot,j,te,C,a),ot.mode&1&&$_(C,Ce,a),a=ot,fe=Ce;var ut=a.updateQueue;if(ut===null){var ct=new Set;ct.add(fe),a.updateQueue=ct}else ut.add(fe);break e}else{if((a&1)===0){$_(C,Ce,a),ym();break e}fe=Error(t(426))}}else if(sr&&te.mode&1){var Er=z_(j);if(Er!==null){(Er.flags&65536)===0&&(Er.flags|=256),W_(Er,j,te,C,a),Cp(xl(fe,te));break e}}C=fe=xl(fe,te),Lr!==4&&(Lr=2),Ju===null?Ju=[C]:Ju.push(C),C=j;do{switch(C.tag){case 3:C.flags|=65536,a&=-a,C.lanes|=a;var Te=B_(C,fe,a);u_(C,Te);break e;case 1:te=fe;var ge=C.type,Ae=C.stateNode;if((C.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(ao===null||!ao.has(Ae)))){C.flags|=65536,a&=-a,C.lanes|=a;var tt=j_(C,te,a);u_(C,tt);break e}}C=C.return}while(C!==null)}bw(f)}catch(dt){a=dt,Ir===f&&f!==null&&(Ir=f=f.return);continue}break}while(!0)}function _w(){var i=Yh.current;return Yh.current=qh,i===null?qh:i}function ym(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),Wr===null||(aa&268435455)===0&&(Jh&268435455)===0||co(Wr,Xr)}function nf(i,a){var f=Vt;Vt|=2;var g=_w();(Wr!==i||Xr!==a)&&(_s=null,ua(i,a));do try{HI();break}catch(E){vw(i,E)}while(!0);if(kp(),Vt=f,Yh.current=g,Ir!==null)throw Error(t(261));return Wr=null,Xr=0,Lr}function HI(){for(;Ir!==null;)ww(Ir)}function QI(){for(;Ir!==null&&!eh();)ww(Ir)}function ww(i){var a=Tw(i.alternate,i,Kn);i.memoizedProps=i.pendingProps,a===null?bw(i):Ir=a,lm.current=null}function bw(i){var a=i;do{var f=a.alternate;if(i=a.return,(a.flags&32768)===0){if(f=UI(f,a,Kn),f!==null){Ir=f;return}}else{if(f=BI(f,a),f!==null){f.flags&=32767,Ir=f;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Lr=6,Ir=null;return}}if(a=a.sibling,a!==null){Ir=a;return}Ir=a=i}while(a!==null);Lr===0&&(Lr=5)}function ca(i,a,f){var g=Ot,E=ii.transition;try{ii.transition=null,Ot=1,KI(i,a,f,g)}finally{ii.transition=E,Ot=g}return null}function KI(i,a,f,g){do Rl();while(lo!==null);if((Vt&6)!==0)throw Error(t(327));f=i.finishedWork;var E=i.finishedLanes;if(f===null)return null;if(i.finishedWork=null,i.finishedLanes=0,f===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var C=f.lanes|f.childLanes;if(Yt(i,C),i===Wr&&(Ir=Wr=null,Xr=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Zh||(Zh=!0,xw(Jn,function(){return Rl(),null})),C=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||C){C=ii.transition,ii.transition=null;var j=Ot;Ot=1;var te=Vt;Vt|=4,lm.current=null,$I(i,f),hw(f,i),pI(yp),Js=!!gp,yp=gp=null,i.current=f,zI(f),ep(),Vt=te,Ot=j,ii.transition=C}else i.current=f;if(Zh&&(Zh=!1,lo=i,ef=E),C=i.pendingLanes,C===0&&(ao=null),nh(f.stateNode),Dn(i,Jt()),a!==null)for(g=i.onRecoverableError,f=0;f<a.length;f++)E=a[f],g(E.value,{componentStack:E.stack,digest:E.digest});if(Xh)throw Xh=!1,i=hm,hm=null,i;return(ef&1)!==0&&i.tag!==0&&Rl(),C=i.pendingLanes,(C&1)!==0?i===fm?Xu++:(Xu=0,fm=i):Xu=0,no(),null}function Rl(){if(lo!==null){var i=Gs(ef),a=ii.transition,f=Ot;try{if(ii.transition=null,Ot=16>i?16:i,lo===null)var g=!1;else{if(i=lo,lo=null,ef=0,(Vt&6)!==0)throw Error(t(331));var E=Vt;for(Vt|=4,lt=i.current;lt!==null;){var C=lt,j=C.child;if((lt.flags&16)!==0){var te=C.deletions;if(te!==null){for(var fe=0;fe<te.length;fe++){var Ce=te[fe];for(lt=Ce;lt!==null;){var Qe=lt;switch(Qe.tag){case 0:case 11:case 15:Gu(8,Qe,C)}var Xe=Qe.child;if(Xe!==null)Xe.return=Qe,lt=Xe;else for(;lt!==null;){Qe=lt;var He=Qe.sibling,ot=Qe.return;if(ow(Qe),Qe===Ce){lt=null;break}if(He!==null){He.return=ot,lt=He;break}lt=ot}}}var ut=C.alternate;if(ut!==null){var ct=ut.child;if(ct!==null){ut.child=null;do{var Er=ct.sibling;ct.sibling=null,ct=Er}while(ct!==null)}}lt=C}}if((C.subtreeFlags&2064)!==0&&j!==null)j.return=C,lt=j;else e:for(;lt!==null;){if(C=lt,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Gu(9,C,C.return)}var Te=C.sibling;if(Te!==null){Te.return=C.return,lt=Te;break e}lt=C.return}}var ge=i.current;for(lt=ge;lt!==null;){j=lt;var Ae=j.child;if((j.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=j,lt=Ae;else e:for(j=ge;lt!==null;){if(te=lt,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:Gh(9,te)}}catch(dt){gr(te,te.return,dt)}if(te===j){lt=null;break e}var tt=te.sibling;if(tt!==null){tt.return=te.return,lt=tt;break e}lt=te.return}}if(Vt=E,no(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Qo,i)}catch{}g=!0}return g}finally{Ot=f,ii.transition=a}}return!1}function Ew(i,a,f){a=xl(f,a),a=B_(i,a,1),i=so(i,a,1),a=wn(),i!==null&&(Qs(i,1,a),Dn(i,a))}function gr(i,a,f){if(i.tag===3)Ew(i,i,f);else for(;a!==null;){if(a.tag===3){Ew(a,i,f);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ao===null||!ao.has(g))){i=xl(f,i),i=j_(a,i,1),a=so(a,i,1),i=wn(),a!==null&&(Qs(a,1,i),Dn(a,i));break}}a=a.return}}function GI(i,a,f){var g=i.pingCache;g!==null&&g.delete(a),a=wn(),i.pingedLanes|=i.suspendedLanes&f,Wr===i&&(Xr&f)===f&&(Lr===4||Lr===3&&(Xr&130023424)===Xr&&500>Jt()-cm?ua(i,0):um|=f),Dn(i,a)}function Sw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Xa,Xa<<=1,(Xa&130023424)===0&&(Xa=4194304)));var f=wn();i=gs(i,a),i!==null&&(Qs(i,a,f),Dn(i,f))}function YI(i){var a=i.memoizedState,f=0;a!==null&&(f=a.retryLane),Sw(i,f)}function JI(i,a){var f=0;switch(i.tag){case 13:var g=i.stateNode,E=i.memoizedState;E!==null&&(f=E.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(a),Sw(i,f)}var Tw;Tw=function(i,a,f){if(i!==null)if(i.memoizedProps!==a.pendingProps||kn.current)Nn=!0;else{if((i.lanes&f)===0&&(a.flags&128)===0)return Nn=!1,VI(i,a,f);Nn=(i.flags&131072)!==0}else Nn=!1,sr&&(a.flags&1048576)!==0&&r_(a,Nh,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;Qh(i,a),i=a.pendingProps;var E=yl(a,nn.current);El(a,f),E=zp(null,a,g,i,E,f);var C=Wp();return a.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Pn(g)?(C=!0,Rh(a)):C=!1,a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Dp(a),E.updater=Vh,a.stateNode=E,E._reactInternals=a,Mp(a,g,i,f),a=Xp(null,a,g,!0,C,f)):(a.tag=0,sr&&C&&Tp(a),_n(null,a,E,f),a=a.child),a;case 16:g=a.elementType;e:{switch(Qh(i,a),i=a.pendingProps,E=g._init,g=E(g._payload),a.type=g,E=a.tag=ZI(g),i=_i(g,i),E){case 0:a=Jp(null,a,g,i,f);break e;case 1:a=Y_(null,a,g,i,f);break e;case 11:a=q_(null,a,g,i,f);break e;case 14:a=H_(null,a,g,_i(g.type,i),f);break e}throw Error(t(306,g,""))}return a;case 0:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:_i(g,E),Jp(i,a,g,E,f);case 1:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:_i(g,E),Y_(i,a,g,E,f);case 3:e:{if(J_(a),i===null)throw Error(t(387));g=a.pendingProps,C=a.memoizedState,E=C.element,l_(i,a),Fh(a,g,null,f);var j=a.memoizedState;if(g=j.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){E=xl(Error(t(423)),a),a=X_(i,a,g,f,E);break e}else if(g!==E){E=xl(Error(t(424)),a),a=X_(i,a,g,f,E);break e}else for(Qn=eo(a.stateNode.containerInfo.firstChild),Hn=a,sr=!0,vi=null,f=y_(a,null,g,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(wl(),g===E){a=vs(i,a,f);break e}_n(i,a,g,f)}a=a.child}return a;case 5:return v_(a),i===null&&Ip(a),g=a.type,E=a.pendingProps,C=i!==null?i.memoizedProps:null,j=E.children,vp(g,E)?j=null:C!==null&&vp(g,C)&&(a.flags|=32),G_(i,a),_n(i,a,j,f),a.child;case 6:return i===null&&Ip(a),null;case 13:return Z_(i,a,f);case 4:return Fp(a,a.stateNode.containerInfo),g=a.pendingProps,i===null?a.child=Sl(a,null,g,f):_n(i,a,g,f),a.child;case 11:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:_i(g,E),q_(i,a,g,E,f);case 7:return _n(i,a,a.pendingProps,f),a.child;case 8:return _n(i,a,a.pendingProps.children,f),a.child;case 12:return _n(i,a,a.pendingProps.children,f),a.child;case 10:e:{if(g=a.type._context,E=a.pendingProps,C=a.memoizedProps,j=E.value,Xt(Dh,g._currentValue),g._currentValue=j,C!==null)if(yi(C.value,j)){if(C.children===E.children&&!kn.current){a=vs(i,a,f);break e}}else for(C=a.child,C!==null&&(C.return=a);C!==null;){var te=C.dependencies;if(te!==null){j=C.child;for(var fe=te.firstContext;fe!==null;){if(fe.context===g){if(C.tag===1){fe=ys(-1,f&-f),fe.tag=2;var Ce=C.updateQueue;if(Ce!==null){Ce=Ce.shared;var Qe=Ce.pending;Qe===null?fe.next=fe:(fe.next=Qe.next,Qe.next=fe),Ce.pending=fe}}C.lanes|=f,fe=C.alternate,fe!==null&&(fe.lanes|=f),Np(C.return,f,a),te.lanes|=f;break}fe=fe.next}}else if(C.tag===10)j=C.type===a.type?null:C.child;else if(C.tag===18){if(j=C.return,j===null)throw Error(t(341));j.lanes|=f,te=j.alternate,te!==null&&(te.lanes|=f),Np(j,f,a),j=C.sibling}else j=C.child;if(j!==null)j.return=C;else for(j=C;j!==null;){if(j===a){j=null;break}if(C=j.sibling,C!==null){C.return=j.return,j=C;break}j=j.return}C=j}_n(i,a,E.children,f),a=a.child}return a;case 9:return E=a.type,g=a.pendingProps.children,El(a,f),E=ri(E),g=g(E),a.flags|=1,_n(i,a,g,f),a.child;case 14:return g=a.type,E=_i(g,a.pendingProps),E=_i(g.type,E),H_(i,a,g,E,f);case 15:return Q_(i,a,a.type,a.pendingProps,f);case 17:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:_i(g,E),Qh(i,a),a.tag=1,Pn(g)?(i=!0,Rh(a)):i=!1,El(a,f),d_(a,g,E),Mp(a,g,E,f),Xp(null,a,g,!0,i,f);case 19:return tw(i,a,f);case 22:return K_(i,a,f)}throw Error(t(156,a.tag))};function xw(i,a){return Ya(i,a)}function XI(i,a,f,g){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(i,a,f,g){return new XI(i,a,f,g)}function vm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ZI(i){if(typeof i=="function")return vm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===O)return 11;if(i===se)return 14}return 2}function ho(i,a){var f=i.alternate;return f===null?(f=si(i.tag,a,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=a,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&14680064,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,a=i.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f}function sf(i,a,f,g,E,C){var j=2;if(g=i,typeof i=="function")vm(i)&&(j=1);else if(typeof i=="string")j=5;else e:switch(i){case P:return ha(f.children,E,C,a);case R:j=8,E|=8;break;case V:return i=si(12,f,a,E|2),i.elementType=V,i.lanes=C,i;case F:return i=si(13,f,a,E),i.elementType=F,i.lanes=C,i;case ye:return i=si(19,f,a,E),i.elementType=ye,i.lanes=C,i;case Ie:return of(f,E,C,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:j=10;break e;case W:j=9;break e;case O:j=11;break e;case se:j=14;break e;case Ne:j=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=si(j,f,a,E),a.elementType=i,a.type=g,a.lanes=C,a}function ha(i,a,f,g){return i=si(7,i,g,a),i.lanes=f,i}function of(i,a,f,g){return i=si(22,i,g,a),i.elementType=Ie,i.lanes=f,i.stateNode={isHidden:!1},i}function _m(i,a,f){return i=si(6,i,null,a),i.lanes=f,i}function wm(i,a,f){return a=si(4,i.children!==null?i.children:[],i.key,a),a.lanes=f,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function eC(i,a,f,g,E){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hs(0),this.expirationTimes=Hs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.identifierPrefix=g,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function bm(i,a,f,g,E,C,j,te,fe){return i=new eC(i,a,f,te,fe),a===1?(a=1,C===!0&&(a|=8)):a=0,C=si(3,null,null,a),i.current=C,C.stateNode=i,C.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(C),i}function tC(i,a,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:g==null?null:""+g,children:i,containerInfo:a,implementation:f}}function Aw(i){if(!i)return ro;i=i._reactInternals;e:{if(mn(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Pn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var f=i.type;if(Pn(f))return Z0(i,f,a)}return a}function Iw(i,a,f,g,E,C,j,te,fe){return i=bm(f,g,!0,i,E,C,j,te,fe),i.context=Aw(null),f=i.current,g=wn(),E=uo(f),C=ys(g,E),C.callback=a??null,so(f,C,E),i.current.lanes=E,Qs(i,E,g),Dn(i,g),i}function af(i,a,f,g){var E=a.current,C=wn(),j=uo(E);return f=Aw(f),a.context===null?a.context=f:a.pendingContext=f,a=ys(C,j),a.payload={element:i},g=g===void 0?null:g,g!==null&&(a.callback=g),i=so(E,a,j),i!==null&&(Ei(i,E,j,C),Mh(i,E,j)),j}function lf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Cw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<a?f:a}}function Em(i,a){Cw(i,a),(i=i.alternate)&&Cw(i,a)}function rC(){return null}var Rw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Sm(i){this._internalRoot=i}uf.prototype.render=Sm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));af(i,a,null,null)},uf.prototype.unmount=Sm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;la(function(){af(null,i,null,null)}),a[fs]=null}};function uf(i){this._internalRoot=i}uf.prototype.unstable_scheduleHydration=function(i){if(i){var a=lh();i={blockedOn:null,target:i,priority:a};for(var f=0;f<Vi.length&&a!==0&&a<Vi[f].priority;f++);Vi.splice(f,0,i),f===0&&hh(i)}};function Tm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function cf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function kw(){}function nC(i,a,f,g,E){if(E){if(typeof g=="function"){var C=g;g=function(){var Ce=lf(j);C.call(Ce)}}var j=Iw(a,g,i,0,null,!1,!1,"",kw);return i._reactRootContainer=j,i[fs]=j.current,Mu(i.nodeType===8?i.parentNode:i),la(),j}for(;E=i.lastChild;)i.removeChild(E);if(typeof g=="function"){var te=g;g=function(){var Ce=lf(fe);te.call(Ce)}}var fe=bm(i,0,!1,null,null,!1,!1,"",kw);return i._reactRootContainer=fe,i[fs]=fe.current,Mu(i.nodeType===8?i.parentNode:i),la(function(){af(a,fe,f,g)}),fe}function hf(i,a,f,g,E){var C=f._reactRootContainer;if(C){var j=C;if(typeof E=="function"){var te=E;E=function(){var fe=lf(j);te.call(fe)}}af(a,j,i,E)}else j=nC(f,a,i,E,g);return lf(j)}oh=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var f=qs(a.pendingLanes);f!==0&&(Ks(a,f|1),Dn(a,Jt()),(Vt&6)===0&&(Cl=Jt()+500,no()))}break;case 13:la(function(){var g=gs(i,1);if(g!==null){var E=wn();Ei(g,i,1,E)}}),Em(i,1)}},Za=function(i){if(i.tag===13){var a=gs(i,134217728);if(a!==null){var f=wn();Ei(a,i,134217728,f)}Em(i,134217728)}},ah=function(i){if(i.tag===13){var a=uo(i),f=gs(i,a);if(f!==null){var g=wn();Ei(f,i,a,g)}Em(i,a)}},lh=function(){return Ot},uh=function(i,a){var f=Ot;try{return Ot=i,a()}finally{Ot=f}},xr=function(i,a,f){switch(a){case"input":if(Ee(i,f),a=f.name,f.type==="radio"&&a!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<f.length;a++){var g=f[a];if(g!==i&&g.form===i.form){var E=Ih(g);if(!E)throw Error(t(90));ve(g),Ee(g,E)}}}break;case"textarea":Z(i,f);break;case"select":a=f.value,a!=null&&ae(i,!!f.multiple,a,!1)}},Gt=mm,br=la;var iC={usingClientEntryPoint:!1,Events:[Uu,ml,Ih,Rt,mr,mm]},Zu={findFiberByHostInstance:ea,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sC={bundleType:Zu.bundleType,version:Zu.version,rendererPackageName:Zu.rendererPackageName,rendererConfig:Zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=jn(i),i===null?null:i.stateNode},findFiberByHostInstance:Zu.findFiberByHostInstance||rC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Qo=ff.inject(sC),$n=ff}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iC,Ln.createPortal=function(i,a){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tm(a))throw Error(t(200));return tC(i,a,null,f)},Ln.createRoot=function(i,a){if(!Tm(i))throw Error(t(299));var f=!1,g="",E=Rw;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=bm(i,1,!1,null,null,f,!1,g,E),i[fs]=a.current,Mu(i.nodeType===8?i.parentNode:i),new Sm(a)},Ln.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=jn(a),i=i===null?null:i.stateNode,i},Ln.flushSync=function(i){return la(i)},Ln.hydrate=function(i,a,f){if(!cf(a))throw Error(t(200));return hf(null,i,a,!0,f)},Ln.hydrateRoot=function(i,a,f){if(!Tm(i))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,E=!1,C="",j=Rw;if(f!=null&&(f.unstable_strictMode===!0&&(E=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onRecoverableError!==void 0&&(j=f.onRecoverableError)),a=Iw(a,null,i,1,f??null,E,!1,C,j),i[fs]=a.current,Mu(i),g)for(i=0;i<g.length;i++)f=g[i],E=f._getVersion,E=E(f._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[f,E]:a.mutableSourceEagerHydrationData.push(f,E);return new uf(a)},Ln.render=function(i,a,f){if(!cf(a))throw Error(t(200));return hf(null,i,a,!1,f)},Ln.unmountComponentAtNode=function(i){if(!cf(i))throw Error(t(40));return i._reactRootContainer?(la(function(){hf(null,null,i,!1,function(){i._reactRootContainer=null,i[fs]=null})}),!0):!1},Ln.unstable_batchedUpdates=mm,Ln.unstable_renderSubtreeIntoContainer=function(i,a,f,g){if(!cf(f))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return hf(i,a,f,!1,g)},Ln.version="18.2.0-next-9e3b772b8-20220608",Ln}var Uw;function gC(){if(Uw)return Cm.exports;Uw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Cm.exports=mC(),Cm.exports}var Bw;function yC(){if(Bw)return df;Bw=1;var r=gC();return df.createRoot=r.createRoot,df.hydrateRoot=r.hydrateRoot,df}var vC=yC(),tc={},jw;function _C(){if(jw)return tc;jw=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.parse=l,tc.serialize=h;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function l(y,_){const b=new o,S=y.length;if(S<2)return b;const T=(_==null?void 0:_.decode)||d;let N=0;do{const x=y.indexOf("=",N);if(x===-1)break;const k=y.indexOf(";",N),q=k===-1?S:k;if(x>q){N=y.lastIndexOf(";",x-1)+1;continue}const H=u(y,N,x),$=c(y,x,H),P=y.slice(H,$);if(b[P]===void 0){let R=u(y,x+1,q),V=c(y,q,R);const M=T(y.slice(R,V));b[P]=M}N=q+1}while(N<S);return b}function u(y,_,b){do{const S=y.charCodeAt(_);if(S!==32&&S!==9)return _}while(++_<b);return b}function c(y,_,b){for(;_>b;){const S=y.charCodeAt(--_);if(S!==32&&S!==9)return _+1}return b}function h(y,_,b){const S=(b==null?void 0:b.encode)||encodeURIComponent;if(!r.test(y))throw new TypeError(`argument name is invalid: ${y}`);const T=S(_);if(!e.test(T))throw new TypeError(`argument val is invalid: ${_}`);let N=y+"="+T;if(!b)return N;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);N+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);N+="; Domain="+b.domain}if(b.path){if(!n.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);N+="; Path="+b.path}if(b.expires){if(!m(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);N+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(N+="; HttpOnly"),b.secure&&(N+="; Secure"),b.partitioned&&(N+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":N+="; Priority=Low";break;case"medium":N+="; Priority=Medium";break;case"high":N+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":N+="; SameSite=Strict";break;case"lax":N+="; SameSite=Lax";break;case"none":N+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return N}function d(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return s.call(y)==="[object Date]"}return tc}_C();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $w="popstate";function wC(r={}){function e(n,s){let{pathname:o,search:l,hash:u}=n.location;return ng("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Tc(s)}return EC(e,t,null,r)}function kr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Pi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bC(){return Math.random().toString(36).substring(2,10)}function zw(r,e){return{usr:r.state,key:r.key,idx:e}}function ng(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?jc(e):e,state:t,key:e&&e.key||n||bC()}}function Tc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function jc(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function EC(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,l=s.history,u="POP",c=null,h=d();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function d(){return(l.state||{idx:null}).idx}function m(){u="POP";let T=d(),N=T==null?null:T-h;h=T,c&&c({action:u,location:S.location,delta:N})}function y(T,N){u="PUSH";let x=ng(S.location,T,N);h=d()+1;let k=zw(x,h),q=S.createHref(x);try{l.pushState(k,"",q)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(q)}o&&c&&c({action:u,location:S.location,delta:1})}function _(T,N){u="REPLACE";let x=ng(S.location,T,N);h=d();let k=zw(x,h),q=S.createHref(x);l.replaceState(k,"",q),o&&c&&c({action:u,location:S.location,delta:0})}function b(T){let N=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof T=="string"?T:Tc(T);return x=x.replace(/ $/,"%20"),kr(N,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,N)}let S={get action(){return u},get location(){return r(s,l)},listen(T){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener($w,m),c=T,()=>{s.removeEventListener($w,m),c=null}},createHref(T){return e(s,T)},createURL:b,encodeLocation(T){let N=b(T);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:_,go(T){return l.go(T)}};return S}function x1(r,e,t="/"){return SC(r,e,t,!1)}function SC(r,e,t,n){let s=typeof e=="string"?jc(e):e,o=Os(s.pathname||"/",t);if(o==null)return null;let l=A1(r);TC(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=LC(o);u=OC(l[c],h,n)}return u}function A1(r,e=[],t=[],n=""){let s=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(kr(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let h=ks([n,c.relativePath]),d=t.concat(c);o.children&&o.children.length>0&&(kr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),A1(o.children,e,d,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:PC(h,o.index),routesMeta:d})};return r.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let c of I1(o.path))s(o,l,c)}),e}function I1(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let l=I1(n.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&u.push(...l),u.map(c=>r.startsWith("/")&&c===""?"/":c)}function TC(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:NC(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var xC=/^:[\w-]+$/,AC=3,IC=2,CC=1,RC=10,kC=-2,Ww=r=>r==="*";function PC(r,e){let t=r.split("/"),n=t.length;return t.some(Ww)&&(n+=kC),e&&(n+=IC),t.filter(s=>!Ww(s)).reduce((s,o)=>s+(xC.test(o)?AC:o===""?CC:RC),n)}function NC(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function OC(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",l=[];for(let u=0;u<n.length;++u){let c=n[u],h=u===n.length-1,d=o==="/"?e:e.slice(o.length)||"/",m=Qf({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),y=c.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=Qf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:ks([o,m.pathname]),pathnameBase:UC(ks([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=ks([o,m.pathnameBase]))}return l}function Qf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=DC(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((h,{paramName:d,isOptional:m},y)=>{if(d==="*"){let b=u[y]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const _=u[y];return m&&!_?h[d]=void 0:h[d]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:r}}function DC(r,e=!1,t=!0){Pi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(n.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function LC(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Os(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function MC(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?jc(r):r;return{pathname:t?t.startsWith("/")?t:FC(t,e):e,search:BC(n),hash:jC(s)}}function FC(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Pm(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VC(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yv(r){let e=VC(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function vv(r,e,t,n=!1){let s;typeof r=="string"?s=jc(r):(s={...r},kr(!s.pathname||!s.pathname.includes("?"),Pm("?","pathname","search",s)),kr(!s.pathname||!s.pathname.includes("#"),Pm("#","pathname","hash",s)),kr(!s.search||!s.search.includes("#"),Pm("#","search","hash",s)));let o=r===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let m=e.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}u=m>=0?e[m]:"/"}let c=MC(s,u),h=l&&l!=="/"&&l.endsWith("/"),d=(o||l===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}var ks=r=>r.join("/").replace(/\/\/+/g,"/"),UC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),BC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function $C(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var C1=["POST","PUT","PATCH","DELETE"];new Set(C1);var zC=["GET",...C1];new Set(zC);var au=pe.createContext(null);au.displayName="DataRouter";var Ed=pe.createContext(null);Ed.displayName="DataRouterState";var R1=pe.createContext({isTransitioning:!1});R1.displayName="ViewTransition";var WC=pe.createContext(new Map);WC.displayName="Fetchers";var qC=pe.createContext(null);qC.displayName="Await";var Ni=pe.createContext(null);Ni.displayName="Navigation";var Sd=pe.createContext(null);Sd.displayName="Location";var Oi=pe.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var _v=pe.createContext(null);_v.displayName="RouteError";function HC(r,{relative:e}={}){kr(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=pe.useContext(Ni),{hash:s,pathname:o,search:l}=$c(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ks([t,o])),n.createHref({pathname:u,search:l,hash:s})}function lu(){return pe.useContext(Sd)!=null}function $o(){return kr(lu(),"useLocation() may be used only in the context of a <Router> component."),pe.useContext(Sd).location}var k1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P1(r){pe.useContext(Ni).static||pe.useLayoutEffect(r)}function Di(){let{isDataRoute:r}=pe.useContext(Oi);return r?oR():QC()}function QC(){kr(lu(),"useNavigate() may be used only in the context of a <Router> component.");let r=pe.useContext(au),{basename:e,navigator:t}=pe.useContext(Ni),{matches:n}=pe.useContext(Oi),{pathname:s}=$o(),o=JSON.stringify(yv(n)),l=pe.useRef(!1);return P1(()=>{l.current=!0}),pe.useCallback((c,h={})=>{if(Pi(l.current,k1),!l.current)return;if(typeof c=="number"){t.go(c);return}let d=vv(c,JSON.parse(o),s,h.relative==="path");r==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ks([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,o,s,r])}pe.createContext(null);function KC(){let{matches:r}=pe.useContext(Oi),e=r[r.length-1];return e?e.params:{}}function $c(r,{relative:e}={}){let{matches:t}=pe.useContext(Oi),{pathname:n}=$o(),s=JSON.stringify(yv(t));return pe.useMemo(()=>vv(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function GC(r,e){return N1(r)}function N1(r,e,t,n){kr(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=pe.useContext(Ni),{matches:l}=pe.useContext(Oi),u=l[l.length-1],c=u?u.params:{},h=u?u.pathname:"/",d=u?u.pathnameBase:"/",m=u&&u.route;{let x=m&&m.path||"";O1(h,!m||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let y=$o(),_;_=y;let b=_.pathname||"/",S=b;if(d!=="/"){let x=d.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(x.length).join("/")}let T=!o&&t&&t.matches&&t.matches.length>0?t.matches:x1(r,{pathname:S});return Pi(m||T!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Pi(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),eR(T&&T.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:ks([d,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:ks([d,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),l,t,n)}function YC(){let r=sR(),e=$C(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=pe.createElement(pe.Fragment,null,pe.createElement("p",null," Hey developer "),pe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",pe.createElement("code",{style:o},"ErrorBoundary")," or"," ",pe.createElement("code",{style:o},"errorElement")," prop on your route.")),pe.createElement(pe.Fragment,null,pe.createElement("h2",null,"Unexpected Application Error!"),pe.createElement("h3",{style:{fontStyle:"italic"}},e),t?pe.createElement("pre",{style:s},t):null,l)}var JC=pe.createElement(YC,null),XC=class extends pe.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?pe.createElement(Oi.Provider,{value:this.props.routeContext},pe.createElement(_v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZC({routeContext:r,match:e,children:t}){let n=pe.useContext(au);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),pe.createElement(Oi.Provider,{value:r},t)}function eR(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,o=t==null?void 0:t.errors;if(o!=null){let c=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);kr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(t)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:m}=t,y=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,h,d)=>{let m,y=!1,_=null,b=null;t&&(m=o&&h.route.id?o[h.route.id]:void 0,_=h.route.errorElement||JC,l&&(u<0&&d===0?(O1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):u===d&&(y=!0,b=h.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,d+1)),T=()=>{let N;return m?N=_:y?N=b:h.route.Component?N=pe.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=c,pe.createElement(ZC,{match:h,routeContext:{outlet:c,matches:S,isDataRoute:t!=null},children:N})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?pe.createElement(XC,{location:t.location,revalidation:t.revalidation,component:_,error:m,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}function wv(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tR(r){let e=pe.useContext(au);return kr(e,wv(r)),e}function rR(r){let e=pe.useContext(Ed);return kr(e,wv(r)),e}function nR(r){let e=pe.useContext(Oi);return kr(e,wv(r)),e}function bv(r){let e=nR(r),t=e.matches[e.matches.length-1];return kr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function iR(){return bv("useRouteId")}function sR(){var n;let r=pe.useContext(_v),e=rR("useRouteError"),t=bv("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function oR(){let{router:r}=tR("useNavigate"),e=bv("useNavigate"),t=pe.useRef(!1);return P1(()=>{t.current=!0}),pe.useCallback(async(s,o={})=>{Pi(t.current,k1),t.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var qw={};function O1(r,e,t){!e&&!qw[r]&&(qw[r]=!0,Pi(!1,t))}pe.memo(aR);function aR({routes:r,future:e,state:t}){return N1(r,void 0,t,e)}function lR({to:r,replace:e,state:t,relative:n}){kr(lu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=pe.useContext(Ni);Pi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=pe.useContext(Oi),{pathname:l}=$o(),u=Di(),c=vv(r,yv(o),l,n==="path"),h=JSON.stringify(c);return pe.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:n})},[u,h,n,e,t]),null}function uR({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1}){kr(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),u=pe.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=jc(t));let{pathname:c="/",search:h="",hash:d="",state:m=null,key:y="default"}=t,_=pe.useMemo(()=>{let b=Os(c,l);return b==null?null:{location:{pathname:b,search:h,hash:d,state:m,key:y},navigationType:n}},[l,c,h,d,m,y,n]);return Pi(_!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:pe.createElement(Ni.Provider,{value:u},pe.createElement(Sd.Provider,{children:e,value:_}))}var Af="get",If="application/x-www-form-urlencoded";function Td(r){return r!=null&&typeof r.tagName=="string"}function cR(r){return Td(r)&&r.tagName.toLowerCase()==="button"}function hR(r){return Td(r)&&r.tagName.toLowerCase()==="form"}function fR(r){return Td(r)&&r.tagName.toLowerCase()==="input"}function dR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function pR(r,e){return r.button===0&&(!e||e==="_self")&&!dR(r)}var pf=null;function mR(){if(pf===null)try{new FormData(document.createElement("form"),0),pf=!1}catch{pf=!0}return pf}var gR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nm(r){return r!=null&&!gR.has(r)?(Pi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${If}"`),null):r}function yR(r,e){let t,n,s,o,l;if(hR(r)){let u=r.getAttribute("action");n=u?Os(u,e):null,t=r.getAttribute("method")||Af,s=Nm(r.getAttribute("enctype"))||If,o=new FormData(r)}else if(cR(r)||fR(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||u.getAttribute("action");if(n=c?Os(c,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||Af,s=Nm(r.getAttribute("formenctype"))||Nm(u.getAttribute("enctype"))||If,o=new FormData(u,r),!mR()){let{name:h,type:d,value:m}=r;if(d==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,m)}}else{if(Td(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Af,n=null,s=If,l=r}return o&&s==="text/plain"&&(l=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:l}}function Ev(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function vR(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _R(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function wR(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await vR(o,t);return l.links?l.links():[]}return[]}));return TR(n.flat(1).filter(_R).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Hw(r,e,t,n,s,o){let l=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,u=(c,h)=>{var d;return t[h].pathname!==c.pathname||((d=t[h].route.path)==null?void 0:d.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,h)=>l(c,h)||u(c,h)):o==="data"?e.filter((c,h)=>{var m;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(l(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function bR(r,e,{includeHydrateFallback:t}={}){return ER(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function ER(r){return[...new Set(r)]}function SR(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function TR(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(SR(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function xR(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Os(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function D1(){let r=pe.useContext(au);return Ev(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function AR(){let r=pe.useContext(Ed);return Ev(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Sv=pe.createContext(void 0);Sv.displayName="FrameworkContext";function L1(){let r=pe.useContext(Sv);return Ev(r,"You must render this element inside a <HydratedRouter> element"),r}function IR(r,e){let t=pe.useContext(Sv),[n,s]=pe.useState(!1),[o,l]=pe.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:d,onTouchStart:m}=e,y=pe.useRef(null);pe.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let S=N=>{N.forEach(x=>{l(x.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[r]),pe.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let _=()=>{s(!0)},b=()=>{s(!1),l(!1)};return t?r!=="intent"?[o,y,{}]:[o,y,{onFocus:rc(u,_),onBlur:rc(c,b),onMouseEnter:rc(h,_),onMouseLeave:rc(d,b),onTouchStart:rc(m,_)}]:[!1,y,{}]}function rc(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function CR({page:r,...e}){let{router:t}=D1(),n=pe.useMemo(()=>x1(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?pe.createElement(kR,{page:r,matches:n,...e}):null}function RR(r){let{manifest:e,routeModules:t}=L1(),[n,s]=pe.useState([]);return pe.useEffect(()=>{let o=!1;return wR(r,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[r,e,t]),n}function kR({page:r,matches:e,...t}){let n=$o(),{manifest:s,routeModules:o}=L1(),{basename:l}=D1(),{loaderData:u,matches:c}=AR(),h=pe.useMemo(()=>Hw(r,e,c,s,n,"data"),[r,e,c,s,n]),d=pe.useMemo(()=>Hw(r,e,c,s,n,"assets"),[r,e,c,s,n]),m=pe.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let b=new Set,S=!1;if(e.forEach(N=>{var k;let x=s.routes[N.route.id];!x||!x.hasLoader||(!h.some(q=>q.route.id===N.route.id)&&N.route.id in u&&((k=o[N.route.id])!=null&&k.shouldRevalidate)||x.hasClientLoader?S=!0:b.add(N.route.id))}),b.size===0)return[];let T=xR(r,l);return S&&b.size>0&&T.searchParams.set("_routes",e.filter(N=>b.has(N.route.id)).map(N=>N.route.id).join(",")),[T.pathname+T.search]},[l,u,n,s,h,e,r,o]),y=pe.useMemo(()=>bR(d,s),[d,s]),_=RR(d);return pe.createElement(pe.Fragment,null,m.map(b=>pe.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),y.map(b=>pe.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),_.map(({key:b,link:S})=>pe.createElement("link",{key:b,...S})))}function PR(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var M1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{M1&&(window.__reactRouterVersion="7.5.0")}catch{}function NR({basename:r,children:e,window:t}){let n=pe.useRef();n.current==null&&(n.current=wC({window:t,v5Compat:!0}));let s=n.current,[o,l]=pe.useState({action:s.action,location:s.location}),u=pe.useCallback(c=>{pe.startTransition(()=>l(c))},[l]);return pe.useLayoutEffect(()=>s.listen(u),[s,u]),pe.createElement(uR,{basename:r,children:e,location:o.location,navigationType:o.action,navigator:s})}var F1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V1=pe.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:d,viewTransition:m,...y},_){let{basename:b}=pe.useContext(Ni),S=typeof h=="string"&&F1.test(h),T,N=!1;if(typeof h=="string"&&S&&(T=h,M1))try{let V=new URL(window.location.href),M=h.startsWith("//")?new URL(V.protocol+h):new URL(h),W=Os(M.pathname,b);M.origin===V.origin&&W!=null?h=W+M.search+M.hash:N=!0}catch{Pi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=HC(h,{relative:s}),[k,q,H]=IR(n,y),$=MR(h,{replace:l,state:u,target:c,preventScrollReset:d,relative:s,viewTransition:m});function P(V){e&&e(V),V.defaultPrevented||$(V)}let R=pe.createElement("a",{...y,...H,href:T||x,onClick:N||o?e:P,ref:PR(_,q),target:c,"data-discover":!S&&t==="render"?"true":void 0});return k&&!S?pe.createElement(pe.Fragment,null,R,pe.createElement(CR,{page:x})):R});V1.displayName="Link";var OR=pe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:l,viewTransition:u,children:c,...h},d){let m=$c(l,{relative:h.relative}),y=$o(),_=pe.useContext(Ed),{navigator:b,basename:S}=pe.useContext(Ni),T=_!=null&&jR(m)&&u===!0,N=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,x=y.pathname,k=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(x=x.toLowerCase(),k=k?k.toLowerCase():null,N=N.toLowerCase()),k&&S&&(k=Os(k,S)||k);const q=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let H=x===N||!s&&x.startsWith(N)&&x.charAt(q)==="/",$=k!=null&&(k===N||!s&&k.startsWith(N)&&k.charAt(N.length)==="/"),P={isActive:H,isPending:$,isTransitioning:T},R=H?e:void 0,V;typeof n=="function"?V=n(P):V=[n,H?"active":null,$?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(P):o;return pe.createElement(V1,{...h,"aria-current":R,className:V,ref:d,style:M,to:l,viewTransition:u},typeof c=="function"?c(P):c)});OR.displayName="NavLink";var DR=pe.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:l=Af,action:u,onSubmit:c,relative:h,preventScrollReset:d,viewTransition:m,...y},_)=>{let b=UR(),S=BR(u,{relative:h}),T=l.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&F1.test(u),x=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let q=k.nativeEvent.submitter,H=(q==null?void 0:q.getAttribute("formmethod"))||l;b(q||k.currentTarget,{fetcherKey:e,method:H,navigate:t,replace:s,state:o,relative:h,preventScrollReset:d,viewTransition:m})};return pe.createElement("form",{ref:_,method:T,action:S,onSubmit:n?c:x,...y,"data-discover":!N&&r==="render"?"true":void 0})});DR.displayName="Form";function LR(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U1(r){let e=pe.useContext(au);return kr(e,LR(r)),e}function MR(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=Di(),c=$o(),h=$c(r,{relative:o});return pe.useCallback(d=>{if(pR(d,e)){d.preventDefault();let m=t!==void 0?t:Tc(c)===Tc(h);u(r,{replace:m,state:n,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,t,n,e,r,s,o,l])}var FR=0,VR=()=>`__${String(++FR)}__`;function UR(){let{router:r}=U1("useSubmit"),{basename:e}=pe.useContext(Ni),t=iR();return pe.useCallback(async(n,s={})=>{let{action:o,method:l,encType:u,formData:c,body:h}=yR(n,e);if(s.navigate===!1){let d=s.fetcherKey||VR();await r.fetch(d,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await r.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,t])}function BR(r,{relative:e}={}){let{basename:t}=pe.useContext(Ni),n=pe.useContext(Oi);kr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...$c(r||".",{relative:e})},l=$o();if(r==null){o.search=l.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(d=>d==="")){u.delete("index"),c.filter(m=>m).forEach(m=>u.append("index",m));let d=u.toString();o.search=d?`?${d}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ks([t,o.pathname])),Tc(o)}function jR(r,e={}){let t=pe.useContext(R1);kr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=U1("useViewTransitionState"),s=$c(r,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Os(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=Os(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Qf(s.pathname,l)!=null||Qf(s.pathname,o)!=null}new TextEncoder;function B1(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=B1(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Pa(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=B1(r))&&(n&&(n+=" "),n+=e);return n}function $R(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}$R(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var zc=r=>typeof r=="number"&&!isNaN(r),Fa=r=>typeof r=="string",Ds=r=>typeof r=="function",zR=r=>Fa(r)||zc(r),ig=r=>Fa(r)||Ds(r)?r:null,WR=(r,e)=>r===!1||zc(r)&&r>0?r:e,sg=r=>pe.isValidElement(r)||Fa(r)||Ds(r)||zc(r);function qR(r,e,t=300){let{scrollHeight:n,style:s}=r;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function HR({enter:r,exit:e,appendPosition:t=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:o,position:l,preventExitTransition:u,done:c,nodeRef:h,isIn:d,playToast:m}){let y=t?`${r}--${l}`:r,_=t?`${e}--${l}`:e,b=pe.useRef(0);return pe.useLayoutEffect(()=>{let S=h.current,T=y.split(" "),N=x=>{x.target===h.current&&(m(),S.removeEventListener("animationend",N),S.removeEventListener("animationcancel",N),b.current===0&&x.type!=="animationcancel"&&S.classList.remove(...T))};S.classList.add(...T),S.addEventListener("animationend",N),S.addEventListener("animationcancel",N)},[]),pe.useEffect(()=>{let S=h.current,T=()=>{S.removeEventListener("animationend",T),n?qR(S,c,s):c()};d||(u?T():(b.current=1,S.className+=` ${_}`,S.addEventListener("animationend",T)))},[d]),Pt.createElement(Pt.Fragment,null,o)}}function Qw(r,e){return{content:j1(r.content,r.props),containerId:r.props.containerId,id:r.props.toastId,theme:r.props.theme,type:r.props.type,data:r.props.data||{},isLoading:r.props.isLoading,icon:r.props.icon,reason:r.removalReason,status:e}}function j1(r,e,t=!1){return pe.isValidElement(r)&&!Fa(r.type)?pe.cloneElement(r,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):Ds(r)?r({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):r}function QR({closeToast:r,theme:e,ariaLabel:t="close"}){return Pt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),r(!0)},"aria-label":t},Pt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Pt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function KR({delay:r,isRunning:e,closeToast:t,type:n="default",hide:s,className:o,controlledProgress:l,progress:u,rtl:c,isIn:h,theme:d}){let m=s||l&&u===0,y={animationDuration:`${r}ms`,animationPlayState:e?"running":"paused"};l&&(y.transform=`scaleX(${u})`);let _=Pa("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),b=Ds(o)?o({rtl:c,type:n,defaultClassName:_}):Pa(_,o),S={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{h&&t()}};return Pt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},Pt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${n}`}),Pt.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:b,style:y,...S}))}var GR=1,$1=()=>`${GR++}`;function YR(r,e,t){let n=1,s=0,o=[],l=[],u=e,c=new Map,h=new Set,d=x=>(h.add(x),()=>h.delete(x)),m=()=>{l=Array.from(c.values()),h.forEach(x=>x())},y=({containerId:x,toastId:k,updateId:q})=>{let H=x?x!==r:r!==1,$=c.has(k)&&q==null;return H||$},_=(x,k)=>{c.forEach(q=>{var H;(k==null||k===q.props.toastId)&&((H=q.toggle)==null||H.call(q,x))})},b=x=>{var k,q;(q=(k=x.props)==null?void 0:k.onClose)==null||q.call(k,x.removalReason),x.isActive=!1},S=x=>{if(x==null)c.forEach(b);else{let k=c.get(x);k&&b(k)}m()},T=()=>{s-=o.length,o=[]},N=x=>{var k,q;let{toastId:H,updateId:$}=x.props,P=$==null;x.staleId&&c.delete(x.staleId),x.isActive=!0,c.set(H,x),m(),t(Qw(x,P?"added":"updated")),P&&((q=(k=x.props).onOpen)==null||q.call(k))};return{id:r,props:u,observe:d,toggle:_,removeToast:S,toasts:c,clearQueue:T,buildToast:(x,k)=>{if(y(k))return;let{toastId:q,updateId:H,data:$,staleId:P,delay:R}=k,V=H==null;V&&s++;let M={...u,style:u.toastStyle,key:n++,...Object.fromEntries(Object.entries(k).filter(([O,F])=>F!=null)),toastId:q,updateId:H,data:$,isIn:!1,className:ig(k.className||u.toastClassName),progressClassName:ig(k.progressClassName||u.progressClassName),autoClose:k.isLoading?!1:WR(k.autoClose,u.autoClose),closeToast(O){c.get(q).removalReason=O,S(q)},deleteToast(){let O=c.get(q);if(O!=null){if(t(Qw(O,"removed")),c.delete(q),s--,s<0&&(s=0),o.length>0){N(o.shift());return}m()}}};M.closeButton=u.closeButton,k.closeButton===!1||sg(k.closeButton)?M.closeButton=k.closeButton:k.closeButton===!0&&(M.closeButton=sg(u.closeButton)?u.closeButton:!0);let W={content:x,props:M,staleId:P};u.limit&&u.limit>0&&s>u.limit&&V?o.push(W):zc(R)?setTimeout(()=>{N(W)},R):N(W)},setProps(x){u=x},setToggle:(x,k)=>{let q=c.get(x);q&&(q.toggle=k)},isToastActive:x=>{var k;return(k=c.get(x))==null?void 0:k.isActive},getSnapshot:()=>l}}var xn=new Map,xc=[],og=new Set,JR=r=>og.forEach(e=>e(r)),z1=()=>xn.size>0;function XR(){xc.forEach(r=>q1(r.content,r.options)),xc=[]}var ZR=(r,{containerId:e})=>{var t;return(t=xn.get(e||1))==null?void 0:t.toasts.get(r)};function W1(r,e){var t;if(e)return!!((t=xn.get(e))!=null&&t.isToastActive(r));let n=!1;return xn.forEach(s=>{s.isToastActive(r)&&(n=!0)}),n}function ek(r){if(!z1()){xc=xc.filter(e=>r!=null&&e.options.toastId!==r);return}if(r==null||zR(r))xn.forEach(e=>{e.removeToast(r)});else if(r&&("containerId"in r||"id"in r)){let e=xn.get(r.containerId);e?e.removeToast(r.id):xn.forEach(t=>{t.removeToast(r.id)})}}var tk=(r={})=>{xn.forEach(e=>{e.props.limit&&(!r.containerId||e.id===r.containerId)&&e.clearQueue()})};function q1(r,e){sg(r)&&(z1()||xc.push({content:r,options:e}),xn.forEach(t=>{t.buildToast(r,e)}))}function rk(r){var e;(e=xn.get(r.containerId||1))==null||e.setToggle(r.id,r.fn)}function H1(r,e){xn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(r,e==null?void 0:e.id)})}function nk(r){let e=r.containerId||1;return{subscribe(t){let n=YR(e,r,JR);xn.set(e,n);let s=n.observe(t);return XR(),()=>{s(),xn.delete(e)}},setProps(t){var n;(n=xn.get(e))==null||n.setProps(t)},getSnapshot(){var t;return(t=xn.get(e))==null?void 0:t.getSnapshot()}}}function ik(r){return og.add(r),()=>{og.delete(r)}}function sk(r){return r&&(Fa(r.toastId)||zc(r.toastId))?r.toastId:$1()}function Wc(r,e){return q1(r,e),e.toastId}function xd(r,e){return{...e,type:e&&e.type||r,toastId:sk(e)}}function Ad(r){return(e,t)=>Wc(e,xd(r,t))}function pt(r,e){return Wc(r,xd("default",e))}pt.loading=(r,e)=>Wc(r,xd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function ok(r,{pending:e,error:t,success:n},s){let o;e&&(o=Fa(e)?pt.loading(e,s):pt.loading(e.render,{...s,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(h,d,m)=>{if(d==null){pt.dismiss(o);return}let y={type:h,...l,...s,data:m},_=Fa(d)?{render:d}:d;return o?pt.update(o,{...y,..._}):pt(_.render,{...y,..._}),m},c=Ds(r)?r():r;return c.then(h=>u("success",n,h)).catch(h=>u("error",t,h)),c}pt.promise=ok;pt.success=Ad("success");pt.info=Ad("info");pt.error=Ad("error");pt.warning=Ad("warning");pt.warn=pt.warning;pt.dark=(r,e)=>Wc(r,xd("default",{theme:"dark",...e}));function ak(r){ek(r)}pt.dismiss=ak;pt.clearWaitingQueue=tk;pt.isActive=W1;pt.update=(r,e={})=>{let t=ZR(r,e);if(t){let{props:n,content:s}=t,o={delay:100,...n,...e,toastId:e.toastId||r,updateId:$1()};o.toastId!==r&&(o.staleId=r);let l=o.render||s;delete o.render,Wc(l,o)}};pt.done=r=>{pt.update(r,{progress:1})};pt.onChange=ik;pt.play=r=>H1(!0,r);pt.pause=r=>H1(!1,r);function lk(r){var e;let{subscribe:t,getSnapshot:n,setProps:s}=pe.useRef(nk(r)).current;s(r);let o=(e=pe.useSyncExternalStore(t,n,n))==null?void 0:e.slice();function l(u){if(!o)return[];let c=new Map;return r.newestOnTop&&o.reverse(),o.forEach(h=>{let{position:d}=h.props;c.has(d)||c.set(d,[]),c.get(d).push(h)}),Array.from(c,h=>u(h[0],h[1]))}return{getToastToRender:l,isToastActive:W1,count:o==null?void 0:o.length}}function uk(r){let[e,t]=pe.useState(!1),[n,s]=pe.useState(!1),o=pe.useRef(null),l=pe.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:c,closeToast:h,onClick:d,closeOnClick:m}=r;rk({id:r.toastId,containerId:r.containerId,fn:t}),pe.useEffect(()=>{if(r.pauseOnFocusLoss)return y(),()=>{_()}},[r.pauseOnFocusLoss]);function y(){document.hasFocus()||N(),window.addEventListener("focus",T),window.addEventListener("blur",N)}function _(){window.removeEventListener("focus",T),window.removeEventListener("blur",N)}function b(P){if(r.draggable===!0||r.draggable===P.pointerType){x();let R=o.current;l.canCloseOnClick=!0,l.canDrag=!0,R.style.transition="none",r.draggableDirection==="x"?(l.start=P.clientX,l.removalDistance=R.offsetWidth*(r.draggablePercent/100)):(l.start=P.clientY,l.removalDistance=R.offsetHeight*(r.draggablePercent===80?r.draggablePercent*1.5:r.draggablePercent)/100)}}function S(P){let{top:R,bottom:V,left:M,right:W}=o.current.getBoundingClientRect();P.nativeEvent.type!=="touchend"&&r.pauseOnHover&&P.clientX>=M&&P.clientX<=W&&P.clientY>=R&&P.clientY<=V?N():T()}function T(){t(!0)}function N(){t(!1)}function x(){l.didMove=!1,document.addEventListener("pointermove",q),document.addEventListener("pointerup",H)}function k(){document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",H)}function q(P){let R=o.current;if(l.canDrag&&R){l.didMove=!0,e&&N(),r.draggableDirection==="x"?l.delta=P.clientX-l.start:l.delta=P.clientY-l.start,l.start!==P.clientX&&(l.canCloseOnClick=!1);let V=r.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;R.style.transform=`translate3d(${V},0)`,R.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function H(){k();let P=o.current;if(l.canDrag&&l.didMove&&P){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){s(!0),r.closeToast(!0),r.collapseAll();return}P.style.transition="transform 0.2s, opacity 0.2s",P.style.removeProperty("transform"),P.style.removeProperty("opacity")}}let $={onPointerDown:b,onPointerUp:S};return u&&c&&($.onMouseEnter=N,r.stacked||($.onMouseLeave=T)),m&&($.onClick=P=>{d&&d(P),l.canCloseOnClick&&h(!0)}),{playToast:T,pauseToast:N,isRunning:e,preventExitTransition:n,toastRef:o,eventHandlers:$}}var ck=typeof window<"u"?pe.useLayoutEffect:pe.useEffect,Id=({theme:r,type:e,isLoading:t,...n})=>Pt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:r==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function hk(r){return Pt.createElement(Id,{...r},Pt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function fk(r){return Pt.createElement(Id,{...r},Pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function dk(r){return Pt.createElement(Id,{...r},Pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function pk(r){return Pt.createElement(Id,{...r},Pt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function mk(){return Pt.createElement("div",{className:"Toastify__spinner"})}var ag={info:fk,warning:hk,success:dk,error:pk,spinner:mk},gk=r=>r in ag;function yk({theme:r,type:e,isLoading:t,icon:n}){let s=null,o={theme:r,type:e};return n===!1||(Ds(n)?s=n({...o,isLoading:t}):pe.isValidElement(n)?s=pe.cloneElement(n,o):t?s=ag.spinner():gk(e)&&(s=ag[e](o))),s}var vk=r=>{let{isRunning:e,preventExitTransition:t,toastRef:n,eventHandlers:s,playToast:o}=uk(r),{closeButton:l,children:u,autoClose:c,onClick:h,type:d,hideProgressBar:m,closeToast:y,transition:_,position:b,className:S,style:T,progressClassName:N,updateId:x,role:k,progress:q,rtl:H,toastId:$,deleteToast:P,isIn:R,isLoading:V,closeOnClick:M,theme:W,ariaLabel:O}=r,F=Pa("Toastify__toast",`Toastify__toast-theme--${W}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":M}),ye=Ds(S)?S({rtl:H,position:b,type:d,defaultClassName:F}):Pa(F,S),se=yk(r),Ne=!!q||!c,Ie={closeToast:y,type:d,theme:W},he=null;return l===!1||(Ds(l)?he=l(Ie):pe.isValidElement(l)?he=pe.cloneElement(l,Ie):he=QR(Ie)),Pt.createElement(_,{isIn:R,done:P,position:b,preventExitTransition:t,nodeRef:n,playToast:o},Pt.createElement("div",{id:$,tabIndex:0,onClick:h,"data-in":R,className:ye,...s,style:T,ref:n,...R&&{role:k,"aria-label":O}},se!=null&&Pt.createElement("div",{className:Pa("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!V})},se),j1(u,r,!e),he,!r.customProgressBar&&Pt.createElement(KR,{...x&&!Ne?{key:`p-${x}`}:{},rtl:H,theme:W,delay:c,isRunning:e,isIn:R,closeToast:y,hide:m,type:d,className:N,controlledProgress:Ne,progress:q||0})))},_k=(r,e=!1)=>({enter:`Toastify--animate Toastify__${r}-enter`,exit:`Toastify--animate Toastify__${r}-exit`,appendPosition:e}),wk=HR(_k("bounce",!0)),bk={position:"top-right",transition:wk,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:r=>r.altKey&&r.code==="KeyT"};function Ek(r){let e={...bk,...r},t=r.stacked,[n,s]=pe.useState(!0),o=pe.useRef(null),{getToastToRender:l,isToastActive:u,count:c}=lk(e),{className:h,style:d,rtl:m,containerId:y,hotKeys:_}=e;function b(T){let N=Pa("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":m});return Ds(h)?h({position:T,rtl:m,defaultClassName:N}):Pa(N,ig(h))}function S(){t&&(s(!0),pt.play())}return ck(()=>{var T;if(t){let N=o.current.querySelectorAll('[data-in="true"]'),x=12,k=(T=e.position)==null?void 0:T.includes("top"),q=0,H=0;Array.from(N).reverse().forEach(($,P)=>{let R=$;R.classList.add("Toastify__toast--stacked"),P>0&&(R.dataset.collapsed=`${n}`),R.dataset.pos||(R.dataset.pos=k?"top":"bot");let V=q*(n?.2:1)+(n?0:x*P);R.style.setProperty("--y",`${k?V:V*-1}px`),R.style.setProperty("--g",`${x}`),R.style.setProperty("--s",`${1-(n?H:0)}`),q+=R.offsetHeight,H+=.025})}},[n,c,t]),pe.useEffect(()=>{function T(N){var x;let k=o.current;_(N)&&((x=k.querySelector('[tabIndex="0"]'))==null||x.focus(),s(!1),pt.pause()),N.key==="Escape"&&(document.activeElement===k||k!=null&&k.contains(document.activeElement))&&(s(!0),pt.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[_]),Pt.createElement("section",{ref:o,className:"Toastify",id:y,onMouseEnter:()=>{t&&(s(!1),pt.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((T,N)=>{let x=N.length?{...d}:{...d,pointerEvents:"none"};return Pt.createElement("div",{tabIndex:-1,className:b(T),"data-stacked":t,style:x,key:`c-${T}`},N.map(({content:k,props:q})=>Pt.createElement(vk,{...q,stacked:t,collapseAll:S,isIn:u(q.toastId,q.containerId),key:`t-${q.key}`},k)))}))}var uu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Va=typeof window>"u"||"Deno"in globalThis;function li(){}function Sk(r,e){return typeof r=="function"?r(e):r}function lg(r){return typeof r=="number"&&r>=0&&r!==1/0}function Q1(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Fl(r,e){return typeof r=="function"?r(e):r}function Ii(r,e){return typeof r=="function"?r(e):r}function Kw(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:o,queryKey:l,stale:u}=r;if(l){if(n){if(e.queryHash!==Tv(l,e.options))return!1}else if(!Ac(e.queryKey,l))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function Gw(r,e){const{exact:t,status:n,predicate:s,mutationKey:o}=r;if(o){if(!e.options.mutationKey)return!1;if(t){if(Ua(e.options.mutationKey)!==Ua(o))return!1}else if(!Ac(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Tv(r,e){return((e==null?void 0:e.queryKeyHashFn)||Ua)(r)}function Ua(r){return JSON.stringify(r,(e,t)=>ug(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function Ac(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>Ac(r[t],e[t])):!1}function K1(r,e){if(r===e)return r;const t=Yw(r)&&Yw(e);if(t||ug(r)&&ug(e)){const n=t?r:Object.keys(r),s=n.length,o=t?e:Object.keys(e),l=o.length,u=t?[]:{};let c=0;for(let h=0;h<l;h++){const d=t?h:o[h];(!t&&n.includes(d)||t)&&r[d]===void 0&&e[d]===void 0?(u[d]=void 0,c++):(u[d]=K1(r[d],e[d]),u[d]===r[d]&&r[d]!==void 0&&c++)}return s===l&&c===s?r:u}return e}function Kf(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function Yw(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function ug(r){if(!Jw(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Jw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Jw(r){return Object.prototype.toString.call(r)==="[object Object]"}function Tk(r){return new Promise(e=>{setTimeout(e,r)})}function cg(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?K1(r,e):e}function xk(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function Ak(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var xv=Symbol();function G1(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===xv?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var Sa,bo,Bl,p1,Ik=(p1=class extends uu{constructor(){super();nt(this,Sa);nt(this,bo);nt(this,Bl);Be(this,Bl,e=>{if(!Va&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){L(this,bo)||this.setEventListener(L(this,Bl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,bo))==null||e.call(this),Be(this,bo,void 0))}setEventListener(e){var t;Be(this,Bl,e),(t=L(this,bo))==null||t.call(this),Be(this,bo,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){L(this,Sa)!==e&&(Be(this,Sa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof L(this,Sa)=="boolean"?L(this,Sa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Sa=new WeakMap,bo=new WeakMap,Bl=new WeakMap,p1),Av=new Ik,jl,Eo,$l,m1,Ck=(m1=class extends uu{constructor(){super();nt(this,jl,!0);nt(this,Eo);nt(this,$l);Be(this,$l,e=>{if(!Va&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){L(this,Eo)||this.setEventListener(L(this,$l))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,Eo))==null||e.call(this),Be(this,Eo,void 0))}setEventListener(e){var t;Be(this,$l,e),(t=L(this,Eo))==null||t.call(this),Be(this,Eo,e(this.setOnline.bind(this)))}setOnline(e){L(this,jl)!==e&&(Be(this,jl,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return L(this,jl)}},jl=new WeakMap,Eo=new WeakMap,$l=new WeakMap,m1),Gf=new Ck;function hg(){let r,e;const t=new Promise((s,o)=>{r=s,e=o});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function Rk(r){return Math.min(1e3*2**r,3e4)}function Y1(r){return(r??"online")==="online"?Gf.isOnline():!0}var J1=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Om(r){return r instanceof J1}function X1(r){let e=!1,t=0,n=!1,s;const o=hg(),l=S=>{var T;n||(y(new J1(S)),(T=r.abort)==null||T.call(r))},u=()=>{e=!0},c=()=>{e=!1},h=()=>Av.isFocused()&&(r.networkMode==="always"||Gf.isOnline())&&r.canRun(),d=()=>Y1(r.networkMode)&&r.canRun(),m=S=>{var T;n||(n=!0,(T=r.onSuccess)==null||T.call(r,S),s==null||s(),o.resolve(S))},y=S=>{var T;n||(n=!0,(T=r.onError)==null||T.call(r,S),s==null||s(),o.reject(S))},_=()=>new Promise(S=>{var T;s=N=>{(n||h())&&S(N)},(T=r.onPause)==null||T.call(r)}).then(()=>{var S;s=void 0,n||(S=r.onContinue)==null||S.call(r)}),b=()=>{if(n)return;let S;const T=t===0?r.initialPromise:void 0;try{S=T??r.fn()}catch(N){S=Promise.reject(N)}Promise.resolve(S).then(m).catch(N=>{var $;if(n)return;const x=r.retry??(Va?0:3),k=r.retryDelay??Rk,q=typeof k=="function"?k(t,N):k,H=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,N);if(e||!H){y(N);return}t++,($=r.onFail)==null||$.call(r,t,N),Tk(q).then(()=>h()?void 0:_()).then(()=>{e?y(N):b()})})};return{promise:o,cancel:l,continue:()=>(s==null||s(),o),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?b():_().then(b),o)}}var kk=r=>setTimeout(r,0);function Pk(){let r=[],e=0,t=u=>{u()},n=u=>{u()},s=kk;const o=u=>{e?r.push(u):s(()=>{t(u)})},l=()=>{const u=r;r=[],u.length&&s(()=>{n(()=>{u.forEach(c=>{t(c)})})})};return{batch:u=>{let c;e++;try{c=u()}finally{e--,e||l()}return c},batchCalls:u=>(...c)=>{o(()=>{u(...c)})},schedule:o,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{s=u}}}var Fr=Pk(),Ta,g1,Z1=(g1=class{constructor(){nt(this,Ta)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lg(this.gcTime)&&Be(this,Ta,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Va?1/0:5*60*1e3))}clearGcTimeout(){L(this,Ta)&&(clearTimeout(L(this,Ta)),Be(this,Ta,void 0))}},Ta=new WeakMap,g1),zl,Wl,ai,xa,hn,Fc,Aa,xi,Es,y1,Nk=(y1=class extends Z1{constructor(t){super();nt(this,xi);nt(this,zl);nt(this,Wl);nt(this,ai);nt(this,xa);nt(this,hn);nt(this,Fc);nt(this,Aa);Be(this,Aa,!1),Be(this,Fc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Be(this,xa,t.client),Be(this,ai,L(this,xa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Be(this,zl,Ok(this.options)),this.state=t.state??L(this,zl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=L(this,hn))==null?void 0:t.promise}setOptions(t){this.options={...L(this,Fc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,ai).remove(this)}setData(t,n){const s=cg(this.state.data,t,this.options);return qe(this,xi,Es).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){qe(this,xi,Es).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,o;const n=(s=L(this,hn))==null?void 0:s.promise;return(o=L(this,hn))==null||o.cancel(t),n?n.then(li).catch(li):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,zl))}isActive(){return this.observers.some(t=>Ii(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Q1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=L(this,hn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=L(this,hn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),L(this,ai).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(L(this,hn)&&(L(this,Aa)?L(this,hn).cancel({revert:!0}):L(this,hn).cancelRetry()),this.scheduleGc()),L(this,ai).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qe(this,xi,Es).call(this,{type:"invalidate"})}fetch(t,n){var h,d,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(L(this,hn))return L(this,hn).continueRetry(),L(this,hn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(_=>_.options.queryFn);y&&this.setOptions(y.options)}const s=new AbortController,o=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(Be(this,Aa,!0),s.signal)})},l=()=>{const y=G1(this.options,n),_={client:L(this,xa),queryKey:this.queryKey,meta:this.meta};return o(_),Be(this,Aa,!1),this.options.persister?this.options.persister(y,_,this):y(_)},u={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:L(this,xa),state:this.state,fetchFn:l};o(u),(h=this.options.behavior)==null||h.onFetch(u,this),Be(this,Wl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=u.fetchOptions)==null?void 0:d.meta))&&qe(this,xi,Es).call(this,{type:"fetch",meta:(m=u.fetchOptions)==null?void 0:m.meta});const c=y=>{var _,b,S,T;Om(y)&&y.silent||qe(this,xi,Es).call(this,{type:"error",error:y}),Om(y)||((b=(_=L(this,ai).config).onError)==null||b.call(_,y,this),(T=(S=L(this,ai).config).onSettled)==null||T.call(S,this.state.data,y,this)),this.scheduleGc()};return Be(this,hn,X1({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,abort:s.abort.bind(s),onSuccess:y=>{var _,b,S,T;if(y===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(y)}catch(N){c(N);return}(b=(_=L(this,ai).config).onSuccess)==null||b.call(_,y,this),(T=(S=L(this,ai).config).onSettled)==null||T.call(S,y,this.state.error,this),this.scheduleGc()},onError:c,onFail:(y,_)=>{qe(this,xi,Es).call(this,{type:"failed",failureCount:y,error:_})},onPause:()=>{qe(this,xi,Es).call(this,{type:"pause"})},onContinue:()=>{qe(this,xi,Es).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),L(this,hn).start()}},zl=new WeakMap,Wl=new WeakMap,ai=new WeakMap,xa=new WeakMap,hn=new WeakMap,Fc=new WeakMap,Aa=new WeakMap,xi=new WeakSet,Es=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...eS(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return Om(o)&&o.revert&&L(this,Wl)?{...L(this,Wl),fetchStatus:"idle"}:{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Fr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,ai).notify({query:this,type:"updated",action:t})})},y1);function eS(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Y1(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Ok(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Yi,v1,Dk=(v1=class extends uu{constructor(e={}){super();nt(this,Yi);this.config=e,Be(this,Yi,new Map)}build(e,t,n){const s=t.queryKey,o=t.queryHash??Tv(s,t);let l=this.get(o);return l||(l=new Nk({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){L(this,Yi).has(e.queryHash)||(L(this,Yi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=L(this,Yi).get(e.queryHash);t&&(e.destroy(),t===e&&L(this,Yi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,Yi).get(e)}getAll(){return[...L(this,Yi).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Kw(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>Kw(e,n)):t}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Yi=new WeakMap,v1),Ji,bn,Ia,Xi,po,_1,Lk=(_1=class extends Z1{constructor(t){super();nt(this,Xi);nt(this,Ji);nt(this,bn);nt(this,Ia);this.mutationId=t.mutationId,Be(this,bn,t.mutationCache),Be(this,Ji,[]),this.state=t.state||tS(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){L(this,Ji).includes(t)||(L(this,Ji).push(t),this.clearGcTimeout(),L(this,bn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Be(this,Ji,L(this,Ji).filter(n=>n!==t)),this.scheduleGc(),L(this,bn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){L(this,Ji).length||(this.state.status==="pending"?this.scheduleGc():L(this,bn).remove(this))}continue(){var t;return((t=L(this,Ia))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,u,c,h,d,m,y,_,b,S,T,N,x,k,q,H,$,P,R,V;const n=()=>{qe(this,Xi,po).call(this,{type:"continue"})};Be(this,Ia,X1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,W)=>{qe(this,Xi,po).call(this,{type:"failed",failureCount:M,error:W})},onPause:()=>{qe(this,Xi,po).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,bn).canRun(this)}));const s=this.state.status==="pending",o=!L(this,Ia).canStart();try{if(s)n();else{qe(this,Xi,po).call(this,{type:"pending",variables:t,isPaused:o}),await((u=(l=L(this,bn).config).onMutate)==null?void 0:u.call(l,t,this));const W=await((h=(c=this.options).onMutate)==null?void 0:h.call(c,t));W!==this.state.context&&qe(this,Xi,po).call(this,{type:"pending",context:W,variables:t,isPaused:o})}const M=await L(this,Ia).start();return await((m=(d=L(this,bn).config).onSuccess)==null?void 0:m.call(d,M,t,this.state.context,this)),await((_=(y=this.options).onSuccess)==null?void 0:_.call(y,M,t,this.state.context)),await((S=(b=L(this,bn).config).onSettled)==null?void 0:S.call(b,M,null,this.state.variables,this.state.context,this)),await((N=(T=this.options).onSettled)==null?void 0:N.call(T,M,null,t,this.state.context)),qe(this,Xi,po).call(this,{type:"success",data:M}),M}catch(M){try{throw await((k=(x=L(this,bn).config).onError)==null?void 0:k.call(x,M,t,this.state.context,this)),await((H=(q=this.options).onError)==null?void 0:H.call(q,M,t,this.state.context)),await((P=($=L(this,bn).config).onSettled)==null?void 0:P.call($,void 0,M,this.state.variables,this.state.context,this)),await((V=(R=this.options).onSettled)==null?void 0:V.call(R,void 0,M,t,this.state.context)),M}finally{qe(this,Xi,po).call(this,{type:"error",error:M})}}finally{L(this,bn).runNext(this)}}},Ji=new WeakMap,bn=new WeakMap,Ia=new WeakMap,Xi=new WeakSet,po=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Fr.batch(()=>{L(this,Ji).forEach(s=>{s.onMutationUpdate(t)}),L(this,bn).notify({mutation:this,type:"updated",action:t})})},_1);function tS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Cs,Ai,Vc,w1,Mk=(w1=class extends uu{constructor(e={}){super();nt(this,Cs);nt(this,Ai);nt(this,Vc);this.config=e,Be(this,Cs,new Set),Be(this,Ai,new Map),Be(this,Vc,0)}build(e,t,n){const s=new Lk({mutationCache:this,mutationId:++fa(this,Vc)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){L(this,Cs).add(e);const t=mf(e);if(typeof t=="string"){const n=L(this,Ai).get(t);n?n.push(e):L(this,Ai).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,Cs).delete(e)){const t=mf(e);if(typeof t=="string"){const n=L(this,Ai).get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&L(this,Ai).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=mf(e);if(typeof t=="string"){const n=L(this,Ai).get(t),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const t=mf(e);if(typeof t=="string"){const s=(n=L(this,Ai).get(t))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fr.batch(()=>{L(this,Cs).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,Cs).clear(),L(this,Ai).clear()})}getAll(){return Array.from(L(this,Cs))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Gw(t,n))}findAll(e={}){return this.getAll().filter(t=>Gw(e,t))}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Fr.batch(()=>Promise.all(e.map(t=>t.continue().catch(li))))}},Cs=new WeakMap,Ai=new WeakMap,Vc=new WeakMap,w1);function mf(r){var e;return(e=r.options.scope)==null?void 0:e.id}function Xw(r){return{onFetch:(e,t)=>{var d,m,y,_,b;const n=e.options,s=(y=(m=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:y.direction,o=((_=e.state.data)==null?void 0:_.pages)||[],l=((b=e.state.data)==null?void 0:b.pageParams)||[];let u={pages:[],pageParams:[]},c=0;const h=async()=>{let S=!1;const T=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?S=!0:e.signal.addEventListener("abort",()=>{S=!0}),e.signal)})},N=G1(e.options,e.fetchOptions),x=async(k,q,H)=>{if(S)return Promise.reject();if(q==null&&k.pages.length)return Promise.resolve(k);const $={client:e.client,queryKey:e.queryKey,pageParam:q,direction:H?"backward":"forward",meta:e.options.meta};T($);const P=await N($),{maxPages:R}=e.options,V=H?Ak:xk;return{pages:V(k.pages,P,R),pageParams:V(k.pageParams,q,R)}};if(s&&o.length){const k=s==="backward",q=k?Fk:Zw,H={pages:o,pageParams:l},$=q(n,H);u=await x(H,$,k)}else{const k=r??o.length;do{const q=c===0?l[0]??n.initialPageParam:Zw(n,u);if(c>0&&q==null)break;u=await x(u,q),c++}while(c<k)}return u};e.options.persister?e.fetchFn=()=>{var S,T;return(T=(S=e.options).persister)==null?void 0:T.call(S,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function Zw(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function Fk(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var vr,So,To,ql,Hl,xo,Ql,Kl,b1,Vk=(b1=class{constructor(r={}){nt(this,vr);nt(this,So);nt(this,To);nt(this,ql);nt(this,Hl);nt(this,xo);nt(this,Ql);nt(this,Kl);Be(this,vr,r.queryCache||new Dk),Be(this,So,r.mutationCache||new Mk),Be(this,To,r.defaultOptions||{}),Be(this,ql,new Map),Be(this,Hl,new Map),Be(this,xo,0)}mount(){fa(this,xo)._++,L(this,xo)===1&&(Be(this,Ql,Av.subscribe(async r=>{r&&(await this.resumePausedMutations(),L(this,vr).onFocus())})),Be(this,Kl,Gf.subscribe(async r=>{r&&(await this.resumePausedMutations(),L(this,vr).onOnline())})))}unmount(){var r,e;fa(this,xo)._--,L(this,xo)===0&&((r=L(this,Ql))==null||r.call(this),Be(this,Ql,void 0),(e=L(this,Kl))==null||e.call(this),Be(this,Kl,void 0))}isFetching(r){return L(this,vr).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return L(this,So).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=L(this,vr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=L(this,vr).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(Fl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return L(this,vr).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=L(this,vr).get(n.queryHash),o=s==null?void 0:s.state.data,l=Sk(e,o);if(l!==void 0)return L(this,vr).build(this,n).setData(l,{...t,manual:!0})}setQueriesData(r,e,t){return Fr.batch(()=>L(this,vr).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=L(this,vr).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=L(this,vr);Fr.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=L(this,vr);return Fr.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=Fr.batch(()=>L(this,vr).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(li).catch(li)}invalidateQueries(r,e={}){return Fr.batch(()=>(L(this,vr).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=Fr.batch(()=>L(this,vr).findAll(r).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(li)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(li)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=L(this,vr).build(this,e);return t.isStaleByTime(Fl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(li).catch(li)}fetchInfiniteQuery(r){return r.behavior=Xw(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(li).catch(li)}ensureInfiniteQueryData(r){return r.behavior=Xw(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Gf.isOnline()?L(this,So).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,vr)}getMutationCache(){return L(this,So)}getDefaultOptions(){return L(this,To)}setDefaultOptions(r){Be(this,To,r)}setQueryDefaults(r,e){L(this,ql).set(Ua(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...L(this,ql).values()],t={};return e.forEach(n=>{Ac(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){L(this,Hl).set(Ua(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...L(this,Hl).values()],t={};return e.forEach(n=>{Ac(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...L(this,To).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Tv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===xv&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...L(this,To).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){L(this,vr).clear(),L(this,So).clear()}},vr=new WeakMap,So=new WeakMap,To=new WeakMap,ql=new WeakMap,Hl=new WeakMap,xo=new WeakMap,Ql=new WeakMap,Kl=new WeakMap,b1),Mn,Dt,Uc,En,Ca,Gl,Ao,Io,Bc,Yl,Jl,Ra,ka,Co,Xl,$t,ac,fg,dg,pg,mg,gg,yg,vg,rS,E1,Uk=(E1=class extends uu{constructor(e,t){super();nt(this,$t);nt(this,Mn);nt(this,Dt);nt(this,Uc);nt(this,En);nt(this,Ca);nt(this,Gl);nt(this,Ao);nt(this,Io);nt(this,Bc);nt(this,Yl);nt(this,Jl);nt(this,Ra);nt(this,ka);nt(this,Co);nt(this,Xl,new Set);this.options=t,Be(this,Mn,e),Be(this,Io,null),Be(this,Ao,hg()),this.options.experimental_prefetchInRender||L(this,Ao).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Dt).addObserver(this),eb(L(this,Dt),this.options)?qe(this,$t,ac).call(this):this.updateResult(),qe(this,$t,mg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _g(L(this,Dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _g(L(this,Dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,qe(this,$t,gg).call(this),qe(this,$t,yg).call(this),L(this,Dt).removeObserver(this)}setOptions(e){const t=this.options,n=L(this,Dt);if(this.options=L(this,Mn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ii(this.options.enabled,L(this,Dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");qe(this,$t,vg).call(this),L(this,Dt).setOptions(this.options),t._defaulted&&!Kf(this.options,t)&&L(this,Mn).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Dt),observer:this});const s=this.hasListeners();s&&tb(L(this,Dt),n,this.options,t)&&qe(this,$t,ac).call(this),this.updateResult(),s&&(L(this,Dt)!==n||Ii(this.options.enabled,L(this,Dt))!==Ii(t.enabled,L(this,Dt))||Fl(this.options.staleTime,L(this,Dt))!==Fl(t.staleTime,L(this,Dt)))&&qe(this,$t,fg).call(this);const o=qe(this,$t,dg).call(this);s&&(L(this,Dt)!==n||Ii(this.options.enabled,L(this,Dt))!==Ii(t.enabled,L(this,Dt))||o!==L(this,Co))&&qe(this,$t,pg).call(this,o)}getOptimisticResult(e){const t=L(this,Mn).getQueryCache().build(L(this,Mn),e),n=this.createResult(t,e);return jk(this,n)&&(Be(this,En,n),Be(this,Gl,this.options),Be(this,Ca,L(this,Dt).state)),n}getCurrentResult(){return L(this,En)}trackResult(e,t){const n={};return Object.keys(e).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),n}trackProp(e){L(this,Xl).add(e)}getCurrentQuery(){return L(this,Dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=L(this,Mn).defaultQueryOptions(e),n=L(this,Mn).getQueryCache().build(L(this,Mn),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return qe(this,$t,ac).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,En)))}createResult(e,t){var V;const n=L(this,Dt),s=this.options,o=L(this,En),l=L(this,Ca),u=L(this,Gl),h=e!==n?e.state:L(this,Uc),{state:d}=e;let m={...d},y=!1,_;if(t._optimisticResults){const M=this.hasListeners(),W=!M&&eb(e,t),O=M&&tb(e,n,t,s);(W||O)&&(m={...m,...eS(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:b,errorUpdatedAt:S,status:T}=m;_=m.data;let N=!1;if(t.placeholderData!==void 0&&_===void 0&&T==="pending"){let M;o!=null&&o.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData)?(M=o.data,N=!0):M=typeof t.placeholderData=="function"?t.placeholderData((V=L(this,Jl))==null?void 0:V.state.data,L(this,Jl)):t.placeholderData,M!==void 0&&(T="success",_=cg(o==null?void 0:o.data,M,t),y=!0)}if(t.select&&_!==void 0&&!N)if(o&&_===(l==null?void 0:l.data)&&t.select===L(this,Bc))_=L(this,Yl);else try{Be(this,Bc,t.select),_=t.select(_),_=cg(o==null?void 0:o.data,_,t),Be(this,Yl,_),Be(this,Io,null)}catch(M){Be(this,Io,M)}L(this,Io)&&(b=L(this,Io),_=L(this,Yl),S=Date.now(),T="error");const x=m.fetchStatus==="fetching",k=T==="pending",q=T==="error",H=k&&x,$=_!==void 0,R={status:T,fetchStatus:m.fetchStatus,isPending:k,isSuccess:T==="success",isError:q,isInitialLoading:H,isLoading:H,data:_,dataUpdatedAt:m.dataUpdatedAt,error:b,errorUpdatedAt:S,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:x,isRefetching:x&&!k,isLoadingError:q&&!$,isPaused:m.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:q&&$,isStale:Iv(e,t),refetch:this.refetch,promise:L(this,Ao)};if(this.options.experimental_prefetchInRender){const M=F=>{R.status==="error"?F.reject(R.error):R.data!==void 0&&F.resolve(R.data)},W=()=>{const F=Be(this,Ao,R.promise=hg());M(F)},O=L(this,Ao);switch(O.status){case"pending":e.queryHash===n.queryHash&&M(O);break;case"fulfilled":(R.status==="error"||R.data!==O.value)&&W();break;case"rejected":(R.status!=="error"||R.error!==O.reason)&&W();break}}return R}updateResult(){const e=L(this,En),t=this.createResult(L(this,Dt),this.options);if(Be(this,Ca,L(this,Dt).state),Be(this,Gl,this.options),L(this,Ca).data!==void 0&&Be(this,Jl,L(this,Dt)),Kf(t,e))return;Be(this,En,t);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!L(this,Xl).size)return!0;const l=new Set(o??L(this,Xl));return this.options.throwOnError&&l.add("error"),Object.keys(L(this,En)).some(u=>{const c=u;return L(this,En)[c]!==e[c]&&l.has(c)})};qe(this,$t,rS).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&qe(this,$t,mg).call(this)}},Mn=new WeakMap,Dt=new WeakMap,Uc=new WeakMap,En=new WeakMap,Ca=new WeakMap,Gl=new WeakMap,Ao=new WeakMap,Io=new WeakMap,Bc=new WeakMap,Yl=new WeakMap,Jl=new WeakMap,Ra=new WeakMap,ka=new WeakMap,Co=new WeakMap,Xl=new WeakMap,$t=new WeakSet,ac=function(e){qe(this,$t,vg).call(this);let t=L(this,Dt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(li)),t},fg=function(){qe(this,$t,gg).call(this);const e=Fl(this.options.staleTime,L(this,Dt));if(Va||L(this,En).isStale||!lg(e))return;const n=Q1(L(this,En).dataUpdatedAt,e)+1;Be(this,Ra,setTimeout(()=>{L(this,En).isStale||this.updateResult()},n))},dg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Dt)):this.options.refetchInterval)??!1},pg=function(e){qe(this,$t,yg).call(this),Be(this,Co,e),!(Va||Ii(this.options.enabled,L(this,Dt))===!1||!lg(L(this,Co))||L(this,Co)===0)&&Be(this,ka,setInterval(()=>{(this.options.refetchIntervalInBackground||Av.isFocused())&&qe(this,$t,ac).call(this)},L(this,Co)))},mg=function(){qe(this,$t,fg).call(this),qe(this,$t,pg).call(this,qe(this,$t,dg).call(this))},gg=function(){L(this,Ra)&&(clearTimeout(L(this,Ra)),Be(this,Ra,void 0))},yg=function(){L(this,ka)&&(clearInterval(L(this,ka)),Be(this,ka,void 0))},vg=function(){const e=L(this,Mn).getQueryCache().build(L(this,Mn),this.options);if(e===L(this,Dt))return;const t=L(this,Dt);Be(this,Dt,e),Be(this,Uc,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},rS=function(e){Fr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(L(this,En))}),L(this,Mn).getQueryCache().notify({query:L(this,Dt),type:"observerResultsUpdated"})})},E1);function Bk(r,e){return Ii(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function eb(r,e){return Bk(r,e)||r.state.data!==void 0&&_g(r,e,e.refetchOnMount)}function _g(r,e,t){if(Ii(e.enabled,r)!==!1){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&Iv(r,e)}return!1}function tb(r,e,t,n){return(r!==e||Ii(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Iv(r,t)}function Iv(r,e){return Ii(e.enabled,r)!==!1&&r.isStaleByTime(Fl(e.staleTime,r))}function jk(r,e){return!Kf(r.getCurrentResult(),e)}var Ro,ko,Fn,Rs,Ns,Cf,wg,S1,$k=(S1=class extends uu{constructor(t,n){super();nt(this,Ns);nt(this,Ro);nt(this,ko);nt(this,Fn);nt(this,Rs);Be(this,Ro,t),this.setOptions(n),this.bindMethods(),qe(this,Ns,Cf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const n=this.options;this.options=L(this,Ro).defaultMutationOptions(t),Kf(this.options,n)||L(this,Ro).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,Fn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Ua(n.mutationKey)!==Ua(this.options.mutationKey)?this.reset():((s=L(this,Fn))==null?void 0:s.state.status)==="pending"&&L(this,Fn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=L(this,Fn))==null||t.removeObserver(this)}onMutationUpdate(t){qe(this,Ns,Cf).call(this),qe(this,Ns,wg).call(this,t)}getCurrentResult(){return L(this,ko)}reset(){var t;(t=L(this,Fn))==null||t.removeObserver(this),Be(this,Fn,void 0),qe(this,Ns,Cf).call(this),qe(this,Ns,wg).call(this)}mutate(t,n){var s;return Be(this,Rs,n),(s=L(this,Fn))==null||s.removeObserver(this),Be(this,Fn,L(this,Ro).getMutationCache().build(L(this,Ro),this.options)),L(this,Fn).addObserver(this),L(this,Fn).execute(t)}},Ro=new WeakMap,ko=new WeakMap,Fn=new WeakMap,Rs=new WeakMap,Ns=new WeakSet,Cf=function(){var n;const t=((n=L(this,Fn))==null?void 0:n.state)??tS();Be(this,ko,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},wg=function(t){Fr.batch(()=>{var n,s,o,l,u,c,h,d;if(L(this,Rs)&&this.hasListeners()){const m=L(this,ko).variables,y=L(this,ko).context;(t==null?void 0:t.type)==="success"?((s=(n=L(this,Rs)).onSuccess)==null||s.call(n,t.data,m,y),(l=(o=L(this,Rs)).onSettled)==null||l.call(o,t.data,null,m,y)):(t==null?void 0:t.type)==="error"&&((c=(u=L(this,Rs)).onError)==null||c.call(u,t.error,m,y),(d=(h=L(this,Rs)).onSettled)==null||d.call(h,void 0,t.error,m,y))}this.listeners.forEach(m=>{m(L(this,ko))})})},S1),nS=pe.createContext(void 0),Cv=r=>{const e=pe.useContext(nS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},zk=({client:r,children:e})=>(pe.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),z(nS.Provider,{value:r,children:e})),iS=pe.createContext(!1),Wk=()=>pe.useContext(iS);iS.Provider;function qk(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var Hk=pe.createContext(qk()),Qk=()=>pe.useContext(Hk);function sS(r,e){return typeof r=="function"?r(...e):!!r}function bg(){}var Kk=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},Gk=r=>{pe.useEffect(()=>{r.clearReset()},[r])},Yk=({result:r,errorResetBoundary:e,throwOnError:t,query:n,suspense:s})=>r.isError&&!e.isReset()&&!r.isFetching&&n&&(s&&r.data===void 0||sS(t,[r.error,n])),Jk=r=>{const e=r.staleTime;r.suspense&&(r.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3)))},Xk=(r,e)=>r.isLoading&&r.isFetching&&!e,Zk=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,rb=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function eP(r,e,t){var m,y,_,b,S;const n=Cv(),s=Wk(),o=Qk(),l=n.defaultQueryOptions(r);(y=(m=n.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||y.call(m,l),l._optimisticResults=s?"isRestoring":"optimistic",Jk(l),Kk(l,o),Gk(o);const u=!n.getQueryCache().get(l.queryHash),[c]=pe.useState(()=>new e(n,l)),h=c.getOptimisticResult(l),d=!s&&r.subscribed!==!1;if(pe.useSyncExternalStore(pe.useCallback(T=>{const N=d?c.subscribe(Fr.batchCalls(T)):bg;return c.updateResult(),N},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),pe.useEffect(()=>{c.setOptions(l)},[l,c]),Zk(l,h))throw rb(l,c,o);if(Yk({result:h,errorResetBoundary:o,throwOnError:l.throwOnError,query:n.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((b=(_=n.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||b.call(_,l,h),l.experimental_prefetchInRender&&!Va&&Xk(h,s)){const T=u?rb(l,c,o):(S=n.getQueryCache().get(l.queryHash))==null?void 0:S.promise;T==null||T.catch(bg).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?h:c.trackResult(h)}function qc(r,e){return eP(r,Uk)}function Yf(r,e){const t=Cv(),[n]=pe.useState(()=>new $k(t,r));pe.useEffect(()=>{n.setOptions(r)},[n,r]);const s=pe.useSyncExternalStore(pe.useCallback(l=>n.subscribe(Fr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=pe.useCallback((l,u)=>{n.mutate(l,u).catch(bg)},[n]);if(s.error&&sS(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}function oS(r,e){return function(){return r.apply(e,arguments)}}const{toString:tP}=Object.prototype,{getPrototypeOf:Rv}=Object,Cd=(r=>e=>{const t=tP.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Li=r=>(r=r.toLowerCase(),e=>Cd(e)===r),Rd=r=>e=>typeof e===r,{isArray:cu}=Array,Ic=Rd("undefined");function rP(r){return r!==null&&!Ic(r)&&r.constructor!==null&&!Ic(r.constructor)&&Yn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const aS=Li("ArrayBuffer");function nP(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&aS(r.buffer),e}const iP=Rd("string"),Yn=Rd("function"),lS=Rd("number"),kd=r=>r!==null&&typeof r=="object",sP=r=>r===!0||r===!1,Rf=r=>{if(Cd(r)!=="object")return!1;const e=Rv(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},oP=Li("Date"),aP=Li("File"),lP=Li("Blob"),uP=Li("FileList"),cP=r=>kd(r)&&Yn(r.pipe),hP=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Yn(r.append)&&((e=Cd(r))==="formdata"||e==="object"&&Yn(r.toString)&&r.toString()==="[object FormData]"))},fP=Li("URLSearchParams"),[dP,pP,mP,gP]=["ReadableStream","Request","Response","Headers"].map(Li),yP=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hc(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),cu(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{const o=t?Object.getOwnPropertyNames(r):Object.keys(r),l=o.length;let u;for(n=0;n<l;n++)u=o[n],e.call(null,r[u],u,r)}}function uS(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const va=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cS=r=>!Ic(r)&&r!==va;function Eg(){const{caseless:r}=cS(this)&&this||{},e={},t=(n,s)=>{const o=r&&uS(e,s)||s;Rf(e[o])&&Rf(n)?e[o]=Eg(e[o],n):Rf(n)?e[o]=Eg({},n):cu(n)?e[o]=n.slice():e[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Hc(arguments[n],t);return e}const vP=(r,e,t,{allOwnKeys:n}={})=>(Hc(e,(s,o)=>{t&&Yn(s)?r[o]=oS(s,t):r[o]=s},{allOwnKeys:n}),r),_P=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),wP=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},bP=(r,e,t,n)=>{let s,o,l;const u={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),o=s.length;o-- >0;)l=s[o],(!n||n(l,r,e))&&!u[l]&&(e[l]=r[l],u[l]=!0);r=t!==!1&&Rv(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},EP=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},SP=r=>{if(!r)return null;if(cu(r))return r;let e=r.length;if(!lS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},TP=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Rv(Uint8Array)),xP=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(r,o[0],o[1])}},AP=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},IP=Li("HTMLFormElement"),CP=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),nb=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),RP=Li("RegExp"),hS=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};Hc(t,(s,o)=>{let l;(l=e(s,o,r))!==!1&&(n[o]=l||s)}),Object.defineProperties(r,n)},kP=r=>{hS(r,(e,t)=>{if(Yn(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(Yn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},PP=(r,e)=>{const t={},n=s=>{s.forEach(o=>{t[o]=!0})};return cu(r)?n(r):n(String(r).split(e)),t},NP=()=>{},OP=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function DP(r){return!!(r&&Yn(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const LP=r=>{const e=new Array(10),t=(n,s)=>{if(kd(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const o=cu(n)?[]:{};return Hc(n,(l,u)=>{const c=t(l,s+1);!Ic(c)&&(o[u]=c)}),e[s]=void 0,o}}return n};return t(r,0)},MP=Li("AsyncFunction"),FP=r=>r&&(kd(r)||Yn(r))&&Yn(r.then)&&Yn(r.catch),fS=((r,e)=>r?setImmediate:e?((t,n)=>(va.addEventListener("message",({source:s,data:o})=>{s===va&&o===t&&n.length&&n.shift()()},!1),s=>{n.push(s),va.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Yn(va.postMessage)),VP=typeof queueMicrotask<"u"?queueMicrotask.bind(va):typeof process<"u"&&process.nextTick||fS,Le={isArray:cu,isArrayBuffer:aS,isBuffer:rP,isFormData:hP,isArrayBufferView:nP,isString:iP,isNumber:lS,isBoolean:sP,isObject:kd,isPlainObject:Rf,isReadableStream:dP,isRequest:pP,isResponse:mP,isHeaders:gP,isUndefined:Ic,isDate:oP,isFile:aP,isBlob:lP,isRegExp:RP,isFunction:Yn,isStream:cP,isURLSearchParams:fP,isTypedArray:TP,isFileList:uP,forEach:Hc,merge:Eg,extend:vP,trim:yP,stripBOM:_P,inherits:wP,toFlatObject:bP,kindOf:Cd,kindOfTest:Li,endsWith:EP,toArray:SP,forEachEntry:xP,matchAll:AP,isHTMLForm:IP,hasOwnProperty:nb,hasOwnProp:nb,reduceDescriptors:hS,freezeMethods:kP,toObjectSet:PP,toCamelCase:CP,noop:NP,toFiniteNumber:OP,findKey:uS,global:va,isContextDefined:cS,isSpecCompliantForm:DP,toJSONObject:LP,isAsyncFn:MP,isThenable:FP,setImmediate:fS,asap:VP};function At(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Le.inherits(At,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const dS=At.prototype,pS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{pS[r]={value:r}});Object.defineProperties(At,pS);Object.defineProperty(dS,"isAxiosError",{value:!0});At.from=(r,e,t,n,s,o)=>{const l=Object.create(dS);return Le.toFlatObject(r,l,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),At.call(l,r.message,e,t,n,s),l.cause=r,l.name=r.name,o&&Object.assign(l,o),l};const UP=null;function Sg(r){return Le.isPlainObject(r)||Le.isArray(r)}function mS(r){return Le.endsWith(r,"[]")?r.slice(0,-2):r}function ib(r,e,t){return r?r.concat(e).map(function(s,o){return s=mS(s),!t&&o?"["+s+"]":s}).join(t?".":""):e}function BP(r){return Le.isArray(r)&&!r.some(Sg)}const jP=Le.toFlatObject(Le,{},null,function(e){return/^is[A-Z]/.test(e)});function Pd(r,e,t){if(!Le.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=Le.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!Le.isUndefined(T[S])});const n=t.metaTokens,s=t.visitor||d,o=t.dots,l=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(e);if(!Le.isFunction(s))throw new TypeError("visitor must be a function");function h(b){if(b===null)return"";if(Le.isDate(b))return b.toISOString();if(!c&&Le.isBlob(b))throw new At("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(b)||Le.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,S,T){let N=b;if(b&&!T&&typeof b=="object"){if(Le.endsWith(S,"{}"))S=n?S:S.slice(0,-2),b=JSON.stringify(b);else if(Le.isArray(b)&&BP(b)||(Le.isFileList(b)||Le.endsWith(S,"[]"))&&(N=Le.toArray(b)))return S=mS(S),N.forEach(function(k,q){!(Le.isUndefined(k)||k===null)&&e.append(l===!0?ib([S],q,o):l===null?S:S+"[]",h(k))}),!1}return Sg(b)?!0:(e.append(ib(T,S,o),h(b)),!1)}const m=[],y=Object.assign(jP,{defaultVisitor:d,convertValue:h,isVisitable:Sg});function _(b,S){if(!Le.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+S.join("."));m.push(b),Le.forEach(b,function(N,x){(!(Le.isUndefined(N)||N===null)&&s.call(e,N,Le.isString(x)?x.trim():x,S,y))===!0&&_(N,S?S.concat(x):[x])}),m.pop()}}if(!Le.isObject(r))throw new TypeError("data must be an object");return _(r),e}function sb(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function kv(r,e){this._pairs=[],r&&Pd(r,this,e)}const gS=kv.prototype;gS.append=function(e,t){this._pairs.push([e,t])};gS.toString=function(e){const t=e?function(n){return e.call(this,n,sb)}:sb;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function $P(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yS(r,e,t){if(!e)return r;const n=t&&t.encode||$P;Le.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let o;if(s?o=s(e,t):o=Le.isURLSearchParams(e)?e.toString():new kv(e,t).toString(n),o){const l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class ob{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Le.forEach(this.handlers,function(n){n!==null&&e(n)})}}const vS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zP=typeof URLSearchParams<"u"?URLSearchParams:kv,WP=typeof FormData<"u"?FormData:null,qP=typeof Blob<"u"?Blob:null,HP={isBrowser:!0,classes:{URLSearchParams:zP,FormData:WP,Blob:qP},protocols:["http","https","file","blob","url","data"]},Pv=typeof window<"u"&&typeof document<"u",Tg=typeof navigator=="object"&&navigator||void 0,QP=Pv&&(!Tg||["ReactNative","NativeScript","NS"].indexOf(Tg.product)<0),KP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",GP=Pv&&window.location.href||"http://localhost",YP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pv,hasStandardBrowserEnv:QP,hasStandardBrowserWebWorkerEnv:KP,navigator:Tg,origin:GP},Symbol.toStringTag,{value:"Module"})),pn={...YP,...HP};function JP(r,e){return Pd(r,new pn.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,o){return pn.isNode&&Le.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function XP(r){return Le.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ZP(r){const e={},t=Object.keys(r);let n;const s=t.length;let o;for(n=0;n<s;n++)o=t[n],e[o]=r[o];return e}function _S(r){function e(t,n,s,o){let l=t[o++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),c=o>=t.length;return l=!l&&Le.isArray(s)?s.length:l,c?(Le.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!u):((!s[l]||!Le.isObject(s[l]))&&(s[l]=[]),e(t,n,s[l],o)&&Le.isArray(s[l])&&(s[l]=ZP(s[l])),!u)}if(Le.isFormData(r)&&Le.isFunction(r.entries)){const t={};return Le.forEachEntry(r,(n,s)=>{e(XP(n),s,t,0)}),t}return null}function e2(r,e,t){if(Le.isString(r))try{return(e||JSON.parse)(r),Le.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const Qc={transitional:vS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,o=Le.isObject(e);if(o&&Le.isHTMLForm(e)&&(e=new FormData(e)),Le.isFormData(e))return s?JSON.stringify(_S(e)):e;if(Le.isArrayBuffer(e)||Le.isBuffer(e)||Le.isStream(e)||Le.isFile(e)||Le.isBlob(e)||Le.isReadableStream(e))return e;if(Le.isArrayBufferView(e))return e.buffer;if(Le.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return JP(e,this.formSerializer).toString();if((u=Le.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Pd(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),e2(e)):e}],transformResponse:[function(e){const t=this.transitional||Qc.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(Le.isResponse(e)||Le.isReadableStream(e))return e;if(e&&Le.isString(e)&&(n&&!this.responseType||s)){const l=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?At.from(u,At.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],r=>{Qc.headers[r]={}});const t2=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),r2=r=>{const e={};let t,n,s;return r&&r.split(`
`).forEach(function(l){s=l.indexOf(":"),t=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!t||e[t]&&t2[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},ab=Symbol("internals");function nc(r){return r&&String(r).trim().toLowerCase()}function kf(r){return r===!1||r==null?r:Le.isArray(r)?r.map(kf):String(r)}function n2(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const i2=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Dm(r,e,t,n,s){if(Le.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!Le.isString(e)){if(Le.isString(n))return e.indexOf(n)!==-1;if(Le.isRegExp(n))return n.test(e)}}function s2(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function o2(r,e){const t=Le.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,o,l){return this[n].call(this,e,s,o,l)},configurable:!0})})}let Un=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function o(u,c,h){const d=nc(c);if(!d)throw new Error("header name must be a non-empty string");const m=Le.findKey(s,d);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||c]=kf(u))}const l=(u,c)=>Le.forEach(u,(h,d)=>o(h,d,c));if(Le.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(Le.isString(e)&&(e=e.trim())&&!i2(e))l(r2(e),t);else if(Le.isHeaders(e))for(const[u,c]of e.entries())o(c,u,n);else e!=null&&o(t,e,n);return this}get(e,t){if(e=nc(e),e){const n=Le.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return n2(s);if(Le.isFunction(t))return t.call(this,s,n);if(Le.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=nc(e),e){const n=Le.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Dm(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function o(l){if(l=nc(l),l){const u=Le.findKey(n,l);u&&(!t||Dm(n,n[u],u,t))&&(delete n[u],s=!0)}}return Le.isArray(e)?e.forEach(o):o(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const o=t[n];(!e||Dm(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const t=this,n={};return Le.forEach(this,(s,o)=>{const l=Le.findKey(n,o);if(l){t[l]=kf(s),delete t[o];return}const u=e?s2(o):String(o).trim();u!==o&&delete t[o],t[u]=kf(s),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Le.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&Le.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[ab]=this[ab]={accessors:{}}).accessors,s=this.prototype;function o(l){const u=nc(l);n[u]||(o2(s,l),n[u]=!0)}return Le.isArray(e)?e.forEach(o):o(e),this}};Un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(Un.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});Le.freezeMethods(Un);function Lm(r,e){const t=this||Qc,n=e||t,s=Un.from(n.headers);let o=n.data;return Le.forEach(r,function(u){o=u.call(t,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function wS(r){return!!(r&&r.__CANCEL__)}function hu(r,e,t){At.call(this,r??"canceled",At.ERR_CANCELED,e,t),this.name="CanceledError"}Le.inherits(hu,At,{__CANCEL__:!0});function bS(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new At("Request failed with status code "+t.status,[At.ERR_BAD_REQUEST,At.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function a2(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function l2(r,e){r=r||10;const t=new Array(r),n=new Array(r);let s=0,o=0,l;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),d=n[o];l||(l=h),t[s]=c,n[s]=h;let m=o,y=0;for(;m!==s;)y+=t[m++],m=m%r;if(s=(s+1)%r,s===o&&(o=(o+1)%r),h-l<e)return;const _=d&&h-d;return _?Math.round(y*1e3/_):void 0}}function u2(r,e){let t=0,n=1e3/e,s,o;const l=(h,d=Date.now())=>{t=d,s=null,o&&(clearTimeout(o),o=null),r.apply(null,h)};return[(...h)=>{const d=Date.now(),m=d-t;m>=n?l(h,d):(s=h,o||(o=setTimeout(()=>{o=null,l(s)},n-m)))},()=>s&&l(s)]}const Jf=(r,e,t=3)=>{let n=0;const s=l2(50,250);return u2(o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,c=l-n,h=s(c),d=l<=u;n=l;const m={loaded:l,total:u,progress:u?l/u:void 0,bytes:c,rate:h||void 0,estimated:h&&u&&d?(u-l)/h:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};r(m)},t)},lb=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},ub=r=>(...e)=>Le.asap(()=>r(...e)),c2=pn.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,pn.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(pn.origin),pn.navigator&&/(msie|trident)/i.test(pn.navigator.userAgent)):()=>!0,h2=pn.hasStandardBrowserEnv?{write(r,e,t,n,s,o){const l=[r+"="+encodeURIComponent(e)];Le.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),Le.isString(n)&&l.push("path="+n),Le.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function f2(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function d2(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function ES(r,e,t){let n=!f2(e);return r&&(n||t==!1)?d2(r,e):e}const cb=r=>r instanceof Un?{...r}:r;function Ba(r,e){e=e||{};const t={};function n(h,d,m,y){return Le.isPlainObject(h)&&Le.isPlainObject(d)?Le.merge.call({caseless:y},h,d):Le.isPlainObject(d)?Le.merge({},d):Le.isArray(d)?d.slice():d}function s(h,d,m,y){if(Le.isUndefined(d)){if(!Le.isUndefined(h))return n(void 0,h,m,y)}else return n(h,d,m,y)}function o(h,d){if(!Le.isUndefined(d))return n(void 0,d)}function l(h,d){if(Le.isUndefined(d)){if(!Le.isUndefined(h))return n(void 0,h)}else return n(void 0,d)}function u(h,d,m){if(m in e)return n(h,d);if(m in r)return n(void 0,h)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(h,d,m)=>s(cb(h),cb(d),m,!0)};return Le.forEach(Object.keys(Object.assign({},r,e)),function(d){const m=c[d]||s,y=m(r[d],e[d],d);Le.isUndefined(y)&&m!==u||(t[d]=y)}),t}const SS=r=>{const e=Ba({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:u}=e;e.headers=l=Un.from(l),e.url=yS(ES(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(Le.isFormData(t)){if(pn.hasStandardBrowserEnv||pn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[h,...d]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...d].join("; "))}}if(pn.hasStandardBrowserEnv&&(n&&Le.isFunction(n)&&(n=n(e)),n||n!==!1&&c2(e.url))){const h=s&&o&&h2.read(o);h&&l.set(s,h)}return e},p2=typeof XMLHttpRequest<"u",m2=p2&&function(r){return new Promise(function(t,n){const s=SS(r);let o=s.data;const l=Un.from(s.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:h}=s,d,m,y,_,b;function S(){_&&_(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let T=new XMLHttpRequest;T.open(s.method.toUpperCase(),s.url,!0),T.timeout=s.timeout;function N(){if(!T)return;const k=Un.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),H={data:!u||u==="text"||u==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:k,config:r,request:T};bS(function(P){t(P),S()},function(P){n(P),S()},H),T=null}"onloadend"in T?T.onloadend=N:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(N)},T.onabort=function(){T&&(n(new At("Request aborted",At.ECONNABORTED,r,T)),T=null)},T.onerror=function(){n(new At("Network Error",At.ERR_NETWORK,r,T)),T=null},T.ontimeout=function(){let q=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const H=s.transitional||vS;s.timeoutErrorMessage&&(q=s.timeoutErrorMessage),n(new At(q,H.clarifyTimeoutError?At.ETIMEDOUT:At.ECONNABORTED,r,T)),T=null},o===void 0&&l.setContentType(null),"setRequestHeader"in T&&Le.forEach(l.toJSON(),function(q,H){T.setRequestHeader(H,q)}),Le.isUndefined(s.withCredentials)||(T.withCredentials=!!s.withCredentials),u&&u!=="json"&&(T.responseType=s.responseType),h&&([y,b]=Jf(h,!0),T.addEventListener("progress",y)),c&&T.upload&&([m,_]=Jf(c),T.upload.addEventListener("progress",m),T.upload.addEventListener("loadend",_)),(s.cancelToken||s.signal)&&(d=k=>{T&&(n(!k||k.type?new hu(null,r,T):k),T.abort(),T=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=a2(s.url);if(x&&pn.protocols.indexOf(x)===-1){n(new At("Unsupported protocol "+x+":",At.ERR_BAD_REQUEST,r));return}T.send(o||null)})},g2=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,s;const o=function(h){if(!s){s=!0,u();const d=h instanceof Error?h:this.reason;n.abort(d instanceof At?d:new hu(d instanceof Error?d.message:d))}};let l=e&&setTimeout(()=>{l=null,o(new At(`timeout ${e} of ms exceeded`,At.ETIMEDOUT))},e);const u=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),r=null)};r.forEach(h=>h.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>Le.asap(u),c}},y2=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,s;for(;n<t;)s=n+e,yield r.slice(n,s),n=s},v2=async function*(r,e){for await(const t of _2(r))yield*y2(t,e)},_2=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},hb=(r,e,t,n)=>{const s=v2(r,e);let o=0,l,u=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:h,value:d}=await s.next();if(h){u(),c.close();return}let m=d.byteLength;if(t){let y=o+=m;t(y)}c.enqueue(new Uint8Array(d))}catch(h){throw u(h),h}},cancel(c){return u(c),s.return()}},{highWaterMark:2})},Nd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",TS=Nd&&typeof ReadableStream=="function",w2=Nd&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),xS=(r,...e)=>{try{return!!r(...e)}catch{return!1}},b2=TS&&xS(()=>{let r=!1;const e=new Request(pn.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),fb=64*1024,xg=TS&&xS(()=>Le.isReadableStream(new Response("").body)),Xf={stream:xg&&(r=>r.body)};Nd&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Xf[e]&&(Xf[e]=Le.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new At(`Response type '${e}' is not supported`,At.ERR_NOT_SUPPORT,n)})})})(new Response);const E2=async r=>{if(r==null)return 0;if(Le.isBlob(r))return r.size;if(Le.isSpecCompliantForm(r))return(await new Request(pn.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(r)||Le.isArrayBuffer(r))return r.byteLength;if(Le.isURLSearchParams(r)&&(r=r+""),Le.isString(r))return(await w2(r)).byteLength},S2=async(r,e)=>{const t=Le.toFiniteNumber(r.getContentLength());return t??E2(e)},T2=Nd&&(async r=>{let{url:e,method:t,data:n,signal:s,cancelToken:o,timeout:l,onDownloadProgress:u,onUploadProgress:c,responseType:h,headers:d,withCredentials:m="same-origin",fetchOptions:y}=SS(r);h=h?(h+"").toLowerCase():"text";let _=g2([s,o&&o.toAbortSignal()],l),b;const S=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let T;try{if(c&&b2&&t!=="get"&&t!=="head"&&(T=await S2(d,n))!==0){let H=new Request(e,{method:"POST",body:n,duplex:"half"}),$;if(Le.isFormData(n)&&($=H.headers.get("content-type"))&&d.setContentType($),H.body){const[P,R]=lb(T,Jf(ub(c)));n=hb(H.body,fb,P,R)}}Le.isString(m)||(m=m?"include":"omit");const N="credentials"in Request.prototype;b=new Request(e,{...y,signal:_,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:N?m:void 0});let x=await fetch(b);const k=xg&&(h==="stream"||h==="response");if(xg&&(u||k&&S)){const H={};["status","statusText","headers"].forEach(V=>{H[V]=x[V]});const $=Le.toFiniteNumber(x.headers.get("content-length")),[P,R]=u&&lb($,Jf(ub(u),!0))||[];x=new Response(hb(x.body,fb,P,()=>{R&&R(),S&&S()}),H)}h=h||"text";let q=await Xf[Le.findKey(Xf,h)||"text"](x,r);return!k&&S&&S(),await new Promise((H,$)=>{bS(H,$,{data:q,headers:Un.from(x.headers),status:x.status,statusText:x.statusText,config:r,request:b})})}catch(N){throw S&&S(),N&&N.name==="TypeError"&&/fetch/i.test(N.message)?Object.assign(new At("Network Error",At.ERR_NETWORK,r,b),{cause:N.cause||N}):At.from(N,N&&N.code,r,b)}}),Ag={http:UP,xhr:m2,fetch:T2};Le.forEach(Ag,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const db=r=>`- ${r}`,x2=r=>Le.isFunction(r)||r===null||r===!1,AS={getAdapter:r=>{r=Le.isArray(r)?r:[r];const{length:e}=r;let t,n;const s={};for(let o=0;o<e;o++){t=r[o];let l;if(n=t,!x2(t)&&(n=Ag[(l=String(t)).toLowerCase()],n===void 0))throw new At(`Unknown adapter '${l}'`);if(n)break;s[l||"#"+o]=n}if(!n){const o=Object.entries(s).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(db).join(`
`):" "+db(o[0]):"as no adapter specified";throw new At("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:Ag};function Mm(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new hu(null,r)}function pb(r){return Mm(r),r.headers=Un.from(r.headers),r.data=Lm.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),AS.getAdapter(r.adapter||Qc.adapter)(r).then(function(n){return Mm(r),n.data=Lm.call(r,r.transformResponse,n),n.headers=Un.from(n.headers),n},function(n){return wS(n)||(Mm(r),n&&n.response&&(n.response.data=Lm.call(r,r.transformResponse,n.response),n.response.headers=Un.from(n.response.headers))),Promise.reject(n)})}const IS="1.8.4",Od={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Od[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const mb={};Od.transitional=function(e,t,n){function s(o,l){return"[Axios v"+IS+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,u)=>{if(e===!1)throw new At(s(l," has been removed"+(t?" in "+t:"")),At.ERR_DEPRECATED);return t&&!mb[l]&&(mb[l]=!0,console.warn(s(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,u):!0}};Od.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function A2(r,e,t){if(typeof r!="object")throw new At("options must be an object",At.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let s=n.length;for(;s-- >0;){const o=n[s],l=e[o];if(l){const u=r[o],c=u===void 0||l(u,o,r);if(c!==!0)throw new At("option "+o+" must be "+c,At.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new At("Unknown option "+o,At.ERR_BAD_OPTION)}}const Pf={assertOptions:A2,validators:Od},Hi=Pf.validators;let Na=class{constructor(e){this.defaults=e,this.interceptors={request:new ob,response:new ob}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ba(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:o}=t;n!==void 0&&Pf.assertOptions(n,{silentJSONParsing:Hi.transitional(Hi.boolean),forcedJSONParsing:Hi.transitional(Hi.boolean),clarifyTimeoutError:Hi.transitional(Hi.boolean)},!1),s!=null&&(Le.isFunction(s)?t.paramsSerializer={serialize:s}:Pf.assertOptions(s,{encode:Hi.function,serialize:Hi.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Pf.assertOptions(t,{baseUrl:Hi.spelling("baseURL"),withXsrfToken:Hi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&Le.merge(o.common,o[t.method]);o&&Le.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),t.headers=Un.concat(l,o);const u=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(c=c&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const h=[];this.interceptors.response.forEach(function(S){h.push(S.fulfilled,S.rejected)});let d,m=0,y;if(!c){const b=[pb.bind(this),void 0];for(b.unshift.apply(b,u),b.push.apply(b,h),y=b.length,d=Promise.resolve(t);m<y;)d=d.then(b[m++],b[m++]);return d}y=u.length;let _=t;for(m=0;m<y;){const b=u[m++],S=u[m++];try{_=b(_)}catch(T){S.call(this,T);break}}try{d=pb.call(this,_)}catch(b){return Promise.reject(b)}for(m=0,y=h.length;m<y;)d=d.then(h[m++],h[m++]);return d}getUri(e){e=Ba(this.defaults,e);const t=ES(e.baseURL,e.url,e.allowAbsoluteUrls);return yS(t,e.params,e.paramsSerializer)}};Le.forEach(["delete","get","head","options"],function(e){Na.prototype[e]=function(t,n){return this.request(Ba(n||{},{method:e,url:t,data:(n||{}).data}))}});Le.forEach(["post","put","patch"],function(e){function t(n){return function(o,l,u){return this.request(Ba(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Na.prototype[e]=t(),Na.prototype[e+"Form"]=t(!0)});let I2=class CS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(u=>{n.subscribe(u),o=u}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},e(function(o,l,u){n.reason||(n.reason=new hu(o,l,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new CS(function(s){e=s}),cancel:e}}};function C2(r){return function(t){return r.apply(null,t)}}function R2(r){return Le.isObject(r)&&r.isAxiosError===!0}const Ig={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ig).forEach(([r,e])=>{Ig[e]=r});function RS(r){const e=new Na(r),t=oS(Na.prototype.request,e);return Le.extend(t,Na.prototype,e,{allOwnKeys:!0}),Le.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return RS(Ba(r,s))},t}const jt=RS(Qc);jt.Axios=Na;jt.CanceledError=hu;jt.CancelToken=I2;jt.isCancel=wS;jt.VERSION=IS;jt.toFormData=Pd;jt.AxiosError=At;jt.Cancel=jt.CanceledError;jt.all=function(e){return Promise.all(e)};jt.spread=C2;jt.isAxiosError=R2;jt.mergeConfig=Ba;jt.AxiosHeaders=Un;jt.formToJSON=r=>_S(Le.isHTMLForm(r)?new FormData(r):r);jt.getAdapter=AS.getAdapter;jt.HttpStatusCode=Ig;jt.default=jt;const{Axios:nV,AxiosError:iV,CanceledError:sV,isCancel:oV,CancelToken:aV,VERSION:lV,all:uV,Cancel:cV,isAxiosError:hV,spread:fV,toFormData:dV,AxiosHeaders:pV,HttpStatusCode:mV,formToJSON:gV,getAdapter:yV,mergeConfig:vV}=jt,k2=async r=>{const e=r.length>0?`https://devapi.uniscore.vn/uri/api/products/search?name=${r}`:"https://devapi.uniscore.vn/uri/api/products",{data:t}=await jt.get(e);return Array.isArray(t.data)?t.data:[]},P2=()=>{const r=Di(),[e,t]=pe.useState(""),[n,s]=pe.useState(!1),{data:o=[],isLoading:l,error:u}=qc({queryKey:["products",e],queryFn:()=>k2(e)}),c=h=>{const d=JSON.parse(localStorage.getItem("cart")||"[]"),m=d.find(y=>y.id===h.id);if(m)m.quantity+=1;else{const y={id:h.id,name:h.name,price:h.price,image:h.images[0],quantity:1,color:"red",size:null};d.push(y)}localStorage.setItem("cart",JSON.stringify(d)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500}),setTimeout(()=>{window.location.reload()},1500)};return Array.isArray(o)?be("div",{className:"mx-auto py-12 w-full px-4 pl-4 pr-4 xl:pl-40 xl:pr-40",children:[z("h2",{className:"text-[36px] font-semibold mb-6 font-[Inter]",children:"Explore Our Products"}),be("div",{className:"relative w-full max-w-md mb-6",children:[be("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden shadow-sm",children:[z("span",{className:"px-3",children:z("img",{src:"/R2S-Client/SearchIcon.svg",alt:"Search",className:"w-4 h-4 cursor-pointer"})}),z("input",{type:"text",placeholder:"Search products...",value:e,onChange:h=>{t(h.target.value),s(h.target.value.length>0)},onBlur:()=>setTimeout(()=>s(!1),200),className:"w-full p-2 outline-none"})]}),n&&e.length>0&&o.length>0&&z("ul",{className:"absolute w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-10",children:o.map(h=>z("li",{onClick:()=>{t(h.name),s(!1)},className:"p-3 hover:bg-gray-100 cursor-pointer transition",children:h.name},h.id))})]}),z("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 min-h-[100px]",children:l?z("p",{className:"col-span-4 text-center",children:"Loading..."}):u?z("p",{className:"col-span-4 text-center text-red-500",children:"Error loading products"}):o.length>0?o.slice().sort((h,d)=>h.id-d.id).map(h=>be("div",{className:"group rounded-lg bg-white transition duration-300 sm:w-full md:max-w-[270px] lg:max-w-[270px] xl:max-w-[270px] 2xl:max-w-[270px]",onClick:()=>r(`/detail/${h.id}`),children:[be("div",{className:"w-full h-[250px] bg-[#F5F5F5] flex flex-col items-center overflow-hidden rounded-md relative",children:[z("div",{className:"flex-grow flex items-center justify-center",children:z("img",{src:h.images[0],alt:h.name,className:"max-h-[180px] object-contain"})}),be("div",{className:"absolute top-2 right-2 flex flex-col gap-2 items-center",children:[z("img",{src:"/R2S-Client/Heart.svg",alt:"Heart",className:"w-[34px] h-[34px] cursor-pointer"}),z("img",{src:"/R2S-Client/Eye.svg",alt:"Eye",className:"w-[34px] h-[34px] cursor-pointer"})]}),z("button",{onClick:d=>{d.stopPropagation(),c(h)},className:"absolute bottom-0 left-0 w-full bg-black text-white py-3 text-center opacity-0 translate-y-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0",children:"Add To Cart"})]}),z("h3",{className:"text-[16px] font-medium mt-3",children:h.name}),be("div",{className:"flex items-center gap-3",children:[be("a",{className:"text-red-500 text-[16px] font-medium",children:["$",h.price]}),be("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((d,m)=>m<(h.rate||4)?z("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},m):z("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},m)),be("span",{className:"text-gray-500 text-[14px] font-medium",children:["(",h.stock||50,")"]})]})]})]},h.id)):z("div",{className:"col-span-4 flex items-center justify-center",children:"No products found"})}),be("div",{className:"flex flex-row justify-center items-center gap-6 sm:gap-4 md:gap-20 lg:gap-20 xl:gap-20 2xl:gap-20 mt-20",children:[be("div",{className:"flex flex-col items-center text-center",children:[z("div",{className:"w-[80px] h-[80px] flex items-center justify-center bg-gray-300 rounded-full",children:z("div",{className:"w-[58px] h-[58px] flex items-center justify-center bg-black rounded-full",children:z("img",{src:"/R2S-Client/icon-delivery.svg",alt:"Delivery",className:"w-[40px] h-[40px]"})})}),z("h3",{className:"text-[16px] sm:text-[20px] font-semibold mt-4",children:"FREE AND FAST DELIVERY"}),z("p",{className:"text-gray-600 text-[12px] sm:text-[14px]",children:"Free delivery for all orders over $140"})]}),be("div",{className:"flex flex-col items-center text-center",children:[z("div",{className:"w-[80px] h-[80px] flex items-center justify-center bg-gray-300 rounded-full",children:z("div",{className:"w-[58px] h-[58px] flex items-center justify-center bg-black rounded-full",children:z("img",{src:"/R2S-Client/CustomerService.svg",alt:"CService",className:"w-[40px] h-[40px]"})})}),z("h3",{className:"text-[16px] sm:text-[20px] font-semibold mt-4",children:"24/7 CUSTOMER SERVICE"}),z("p",{className:"text-gray-600 text-[12px] sm:text-[14px]",children:"Friendly 24/7 customer support"})]}),be("div",{className:"flex flex-col items-center text-center",children:[z("div",{className:"w-[80px] h-[80px] flex items-center justify-center bg-gray-300 rounded-full",children:z("div",{className:"w-[58px] h-[58px] flex items-center justify-center bg-black rounded-full",children:z("img",{src:"/R2S-Client/Icon-secure.svg",alt:"Icon-secure",className:"w-[40px] h-[40px]"})})}),z("h3",{className:"text-[16px] sm:text-[20px] font-semibold mt-4",children:"MONEY BACK GUARANTEE"}),z("p",{className:"text-gray-600 text-[12px] sm:text-[14px]",children:"We return money within 30 days"})]})]}),z("div",{className:"flex flex-col md:flex-row justify-center items-center gap-8 mt-10 border-t border-gray-300 pt-2"})]}):z("p",{children:"No products available"})},N2=()=>{const[r,e]=pe.useState(0),[t,n]=pe.useState(!1),[s,o]=pe.useState(!1),[l,u]=pe.useState(!1),c=pe.useRef(null);let h;const d=Di(),m=_=>{_.preventDefault(),d("/login")},y=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("user"),localStorage.removeItem("checkoutInfo"),window.location.href="/R2S-Client/login",window.location.reload(),window.scrollTo(0,0)};return pe.useEffect(()=>{const _=localStorage.getItem("isLoggedIn")==="true";n(_);const b=localStorage.getItem("user");if(b){const N=JSON.parse(b);N.roles&&N.roles[0]==="ADMIN"&&o(!0)}const S=JSON.parse(localStorage.getItem("cart")||"[]");e(S.length);const T=N=>{c.current&&c.current instanceof Node&&!c.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),be("header",{className:"w-full border-b top-0 left-0 bg-white z-50",children:[be("div",{className:"bg-black text-white flex justify-between items-center py-2 px-8 text-sm h-12 gap-x-16",children:[be("span",{className:"font-[Poppins] text-[14px] flex-1 text-center text-gray-300",children:["Summer Sale For All Swim Suits And Free Express Delivery - OFF 50%!"," ",z("a",{href:"#",className:"font-semibold hover:border-b-2 hover:border-white",children:"ShopNow"})]}),be("div",{className:"flex sm:flex items-center gap-2 cursor-pointer text-gray-300",children:[z("span",{children:"English"}),z("img",{src:"/R2S-Client/DropDown.svg",alt:"Search",className:"w-3.5 h-3.5 cursor-pointer"})]})]}),be("nav",{className:"flex items-center justify-between max-w-7xl mx-auto p-4",children:[z("h1",{className:"text-[24px] font-bold",children:"Exclusive"}),be("div",{className:"hidden md:flex md:space-x-4 md:text-sm lg:text-[16px] lg:space-x-12 space-x-8 text-[16px]",children:[z("a",{href:s?"/R2S-Client/productmanage":"/R2S-Client/",className:"hover:border-b-2 hover:border-black",children:"Home"}),s?z("a",{href:"/R2S-Client/ordermanage",className:"hover:border-b-2 hover:border-black",children:"Orders"}):z("a",{href:"#",className:"hover:border-b-2 hover:border-black",children:"About"}),t?z("a",{href:"/R2S-Client/chat",className:"hover:border-b-2 hover:border-black",children:"Contact"}):z("a",{onClick:m,className:"hover:border-b-2 hover:border-black",children:"Sign In"}),t?z("a",{href:"/R2S-Client/profile",className:"hover:border-b-2 hover:border-black",children:"Account"}):z("a",{href:"/R2S-Client/signup",className:"hover:border-b-2 hover:border-black",children:"Sign Up"})]}),be("div",{className:"flex items-center space-x-4",children:[be("div",{className:"flex sm:w-[243px] md:w-[195px] lg:w-[243px] xl:w-[243px] 2xl:w-[243px] items-center bg-gray-100 px-4 py-2 rounded-lg text-[12px] w-[180px] h-[38px]",children:[z("input",{type:"text",placeholder:"What are you looking for?",className:"bg-transparent outline-none cursor-pointer text-[10px] sm:text-[12px] md:text-[11px] lg:text-[12px] xl:text-[12px] 2xl:text-[12px] flex-1","aria-label":"Search"}),z("img",{src:"/R2S-Client/SearchIcon.svg",alt:"Search",className:"w-3 h-3 sm:w-4 sm:h-4 cursor-pointer"})]}),be("div",{className:"flex items-center space-x-4 relative",children:[z("img",{src:"/R2S-Client/Wishlist.svg",alt:"Favorite",className:"w-[32px] h-[32px] cursor-pointer",tabIndex:0}),be("a",{href:"/R2S-Client/cart",className:"relative",children:[z("img",{src:"/R2S-Client/Cart1.svg",alt:"Cart",className:"w-[32px] h-[32px] cursor-pointer",tabIndex:0}),r>0&&z("span",{className:"absolute -top-1 -right-2 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:r})]}),be("div",{className:"relative inline-block",onMouseEnter:()=>{clearTimeout(h),u(!0)},onMouseLeave:()=>{h=setTimeout(()=>u(!1),200)},children:[z("a",{href:t?"/R2S-Client/profile":"/R2S-Client/login",className:"flex items-center",children:z("img",{src:t?"/R2S-Client/userlogged.svg":"/R2S-Client/user.svg",alt:"User",className:"w-[32px] h-[32px] cursor-pointer"})}),t&&l&&be("div",{className:"absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg py-2 border z-50",style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",minWidth:"200px"},children:[z("a",{href:"/R2S-Client/profile",className:"block px-4 py-2 hover:bg-gray-100",children:"My Profile"}),z("a",{href:"#",className:"block px-4 py-2 hover:bg-gray-100",children:"My Order"}),z("a",{href:"#",className:"block px-4 py-2 hover:bg-gray-100",children:"My Cancellations"}),z("a",{href:"/R2S-Client/login",onClick:y,className:"block px-4 py-2 hover:bg-gray-100",children:"Log Out"})]})]})]})]})]}),z("nav",{className:"md:hidden flex items-center justify-center max-w-7xl mx-auto p-2",children:be("div",{className:"space-x-8 text-[16px]",children:[z("a",{href:s?"/R2S-Client/productmanage":"/R2S-Client/",className:"hover:border-b-2 hover:border-black",children:"Home"}),s?z("a",{href:"/R2S-Client/ordermanage",className:"hover:border-b-2 hover:border-black",children:"Orders"}):z("a",{href:"#",className:"hover:border-b-2 hover:border-black",children:"About"}),t?z("a",{href:"/R2S-Client/chat",className:"hover:border-b-2 hover:border-black",children:"Contact"}):z("a",{href:"/R2S-Client/login",className:"hover:border-b-2 hover:border-black",children:"Sign In"}),t?z("a",{href:"/R2S-Client/profile",className:"hover:border-b-2 hover:border-black",children:"Account"}):z("a",{href:"/R2S-Client/signup",className:"hover:border-b-2 hover:border-black",children:"Sign Up"})]})})]})},O2=()=>be("div",{children:[z(N2,{}),z(P2,{})]}),D2=()=>{const[r,e]=pe.useState({name:"",address:"",email:"",password:""}),[t,n]=pe.useState(!1),s=m=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/.test(m),o=Di(),l=m=>{e({...r,[m.target.name]:m.target.value})},u=async m=>{if(!s(m.password))return pt.error("Password must be 8+ characters with an uppercase, lowercase, and number.",{position:"top-right",autoClose:3e3}),Promise.reject(new Error("Invalid password format"));try{return(await jt.post("https://devapi.uniscore.vn/uri/api/auth/register",m)).data}catch(y){return Promise.reject(y)}},{mutate:c,isPending:h}=Yf({mutationFn:u,onSuccess:()=>{pt.success("Account created successfully!",{autoClose:1500}),setTimeout(()=>{o("/login")},1500)},onError:m=>{m.message==="Invalid password format"||pt.error("Email is already in use!")}});return z("div",{className:"flex h-[500px] md:h-[600px] justify-center mt-10 md:mt-20 bg-white",children:be("div",{className:"flex bg-white overflow-hidden w-[1000px] h-[500px]",children:[z("div",{className:"w-1/2 hidden md:block rounded",children:z("img",{src:"/R2S-Client/SideImage.svg",alt:"Sign Up",className:"w-full h-full object-cover rounded"})}),be("div",{className:"w-full md:w-1/2 p-2 md:p-8 lg:p-12",children:[z("h2",{className:"text-[36px] mb-1 font-[Inter]",children:"Create an account"}),z("p",{className:"mb-8 text-gray-600 text-[16px]",children:"Enter your details below"}),be("form",{onSubmit:m=>{if(m.preventDefault(),!r.email||!r.password||!r.name){pt.error("One or more fields are empty!");return}c(r)},children:[z("div",{className:"flex gap-4 mb-4",children:z("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:l,className:"w-full border-b border-gray-400 text-gray-600 text-[16px] outline-none"})}),z("input",{type:"text",name:"address",placeholder:"Address",value:r.address,onChange:l,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),z("input",{type:"email",name:"email",placeholder:"Email",value:r.email,onChange:l,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),be("div",{className:"relative mb-4",children:[z("input",{type:t?"text":"password",name:"password",placeholder:"Password",value:r.password,onChange:l,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),z("button",{type:"button",onClick:()=>n(!t),className:"absolute right-2 top-1/4 transform -translate-y-1/2 text-gray-500",children:t?z("img",{src:"/R2S-Client/ShowPass.svg",alt:"Show Password",className:"w-[20px] h-[20px] cursor-pointer"}):z("img",{src:"/R2S-Client/hide.png",alt:"Hide Password",className:"w-[20px] h-[20px] cursor-pointer"})})]}),z("button",{type:"submit",disabled:h,className:"w-full bg-red-500 text-white py-2 rounded text-[16px]",children:h?"Creating...":"Create Account"})]}),be("button",{className:"flex items-center justify-center w-full h-[56px] mt-4 border border-black/40 rounded-[4px]",children:[z("img",{src:"/R2S-Client/Google.svg",alt:"Google",className:"w-[24px] h-[24px]"}),z("span",{className:"ml-4 text-[16px]",children:"Sign up with Google"})]}),be("p",{className:"mt-4 text-center text-gray-700",children:["Already have an account?",z("a",{href:"/login",className:"text-black ml-4 hover:border-b-2 hover:border-black",children:"Log in"})]})]})]})})},L2=()=>{const[r,e]=pe.useState({email:"",password:""}),[t,n]=pe.useState(!1),s=Di(),o=d=>{e({...r,[d.target.name]:d.target.value})},l=async({email:d,password:m})=>(await jt.post("https://devapi.uniscore.vn/uri/api/auth/login",{email:d,password:m})).data,{mutate:u,isPending:c}=Yf({mutationFn:l,onSuccess:d=>{console.log("Login success:",d),localStorage.setItem("accessToken",d.tokens.accessToken),console.log("Access Token:",d.tokens.accessToken),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user",JSON.stringify(d.user)),pt.success("Logged in successfully!",{autoClose:1500}),setTimeout(()=>{const m=d.user.roles[0];s(m==="ADMIN"?"/productmanage":"/"),window.location.reload()},1500)},onError:()=>{pt.error("Login failed! Please try again.")}});return z("div",{className:"flex h-[400px] md:h-[600px] justify-center mt-20 bg-white",children:be("div",{className:"flex bg-white overflow-hidden w-[1000px] h-[300px] md:h-[500px]",children:[z("div",{className:"w-1/2 hidden md:block rounded",children:z("img",{src:"/R2S-Client/SideImage.svg",alt:"Sign Up",className:"w-full h-full object-cover rounded"})}),be("div",{className:"w-full md:w-1/2 p-2 md:p-8 md:mt-4 lg:mt-0 lg:p-12",children:[z("h2",{className:"text-[36px] mb-1 font-[Inter]",children:"Log in to Exclusive"}),z("p",{className:"mb-8 text-gray-600 text-[16px]",children:"Enter your details below"}),be("form",{onSubmit:d=>{if(d.preventDefault(),!r.email||!r.password){pt.error("Please enter email and password.");return}u(r)},children:[z("input",{type:"text",name:"email",placeholder:"Email",value:r.email,onChange:o,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),be("div",{className:"relative mb-4",children:[z("input",{type:t?"text":"password",name:"password",placeholder:"Password",value:r.password,onChange:o,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),z("button",{type:"button",onClick:()=>n(!t),className:"absolute right-2 top-1/4 transform -translate-y-1/2 text-gray-500",children:t?z("img",{src:"/R2S-Client/ShowPass.svg",alt:"Show Password",className:"w-[20px] h-[20px] cursor-pointer"}):z("img",{src:"/R2S-Client/hide.png",alt:"Hide Password",className:"w-[20px] h-[20px] cursor-pointer"})})]}),be("div",{className:"flex justify-between items-center",children:[z("button",{type:"submit",disabled:c,className:"w-[143px] bg-red-500 text-white py-2 rounded text-[16px]",children:c?"Logging in...":"Log In"}),z("a",{href:"/forgot-password",className:"text-red-500 md:ml-8 lg:ml-0",children:"Forgot Password?"})]})]})]})]})})},M2=async r=>{try{const{data:e}=await jt.get(`https://devapi.uniscore.vn/uri/api/products/${r}`);return console.log("datadata:",e),e.data[0]||null}catch(e){return console.error("Error fetching product:",e),null}},F2=r=>qc({queryKey:["product",r],queryFn:()=>M2(r),enabled:!!r,staleTime:6e5,refetchOnWindowFocus:!1,retry:!1}),V2=async()=>{const{data:r}=await jt.get("https://devapi.uniscore.vn/uri/api/products");return Array.isArray(r.data)?r.data:[]},U2=()=>qc({queryKey:["products"],queryFn:V2,staleTime:6e5,refetchOnWindowFocus:!1,retry:!1}),B2=({currentProductId:r})=>{const{data:e,isLoading:t,error:n}=U2(),s=Di(),o=c=>{const h=JSON.parse(localStorage.getItem("cart")||"[]"),d=h.find(m=>m.id===c.id);if(d)d.quantity+=1;else{const m={id:c.id,name:c.name,price:c.price,image:c.images[0],quantity:1,color:"red",size:null};h.push(m)}localStorage.setItem("cart",JSON.stringify(h)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),setTimeout(()=>{window.location.reload()},1500)};if(t)return z("p",{children:"Loading..."});if(n)return z("p",{children:"Error loading products"});if(!Array.isArray(e))return z("p",{children:"No products available"});const u=(c=>e.filter(h=>h.id!==c).sort(()=>Math.random()-.5).slice(0,4))(r);return be("div",{className:"container mx-auto py-12",children:[be("div",{className:"flex items-center gap-3 mb-6",children:[z("div",{className:"w-[20px] h-[40px] rounded bg-red-500"}),z("span",{className:"text-[16px] text-red-500 font-semibold font-[Inter]",children:"Related Item"})]}),z("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:u.map(c=>be("div",{className:"group rounded-lg bg-white transition duration-300 w-[270px]",onClick:()=>s(`/detail/${c.id}`),children:[be("div",{className:"w-[270px] h-[250px] bg-[#F5F5F5] flex flex-col items-center overflow-hidden rounded-md relative",children:[z("div",{className:"flex-grow flex items-center justify-center",children:z("img",{src:c.images[0],alt:c.name,className:"max-h-[180px] object-contain"})}),be("div",{className:"absolute top-2 right-2 flex flex-col gap-2 items-center",children:[z("img",{src:"/R2S-Client/Heart.svg",alt:"Heart",className:"w-[34px] h-[34px] cursor-pointer"}),z("img",{src:"/R2S-Client/Eye.svg",alt:"Eye",className:"w-[34px] h-[34px] cursor-pointer"})]}),z("button",{onClick:h=>{h.stopPropagation(),o(c)},className:"absolute bottom-0 left-0 w-full bg-black text-white py-3 text-center opacity-0 translate-y-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0",children:"Add To Cart"})]}),z("h3",{className:"text-[16px] font-medium mt-3",children:c.name}),be("div",{className:"flex items-center gap-3",children:[be("a",{className:"text-red-500 text-[16px] font-medium",children:["$",c.price]}),be("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((h,d)=>d<(c.rate||4)?z("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},d):z("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},d)),be("span",{className:"text-gray-500 text-[14px] font-medium",children:["(",c.stock||50,")"]})]})]})]},c.id))})]})},j2=()=>{const{id:r}=KC(),{data:e,isLoading:t,error:n}=F2(Number(r)),[s,o]=pe.useState(""),[l,u]=pe.useState(1),[c,h]=pe.useState("red"),d=[{name:"Red",color:"bg-red-500"},{name:"Blue",color:"bg-blue-500"},{name:"Gray",color:"bg-gray-400"}],[m,y]=pe.useState(null),_=pe.useMemo(()=>e!=null&&e.id?z(B2,{currentProductId:e.id}):null,[e==null?void 0:e.id]);if(pe.useEffect(()=>{var S;(S=e==null?void 0:e.images)!=null&&S.length&&o(e.images[0])},[e]),pe.useEffect(()=>{window.scrollTo(0,0),u(1),h("red"),y(null)},[r]),t)return z("div",{className:"min-h-[100vh] flex justify-center items-center",children:z("p",{className:"text-gray-500 text-lg animate-pulse",children:"Loading..."})});if(n||!e)return z("p",{children:"Product not found"});const b=()=>{const S=JSON.parse(localStorage.getItem("cart")||"[]"),T={id:e.id,name:e.name,price:e.price,image:s,quantity:l,color:c,size:m},N=S.find(x=>x.id===e.id);N?N.quantity+=l:S.push(T),localStorage.setItem("cart",JSON.stringify(S)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),setTimeout(()=>{window.location.reload()},1500)};return be("div",{children:[be("div",{className:"container mx-auto py-12 grid grid-cols-1 md:grid-cols-[60%_40%] gap-10",children:[be("div",{className:"flex gap-4 items-start w-full",children:[z("div",{className:"flex flex-col gap-2",children:Array(4).fill(null).map((S,T)=>{var x;const N=(x=e.images)==null?void 0:x[T];return z("div",{className:"bg-[#F5F5F5] rounded w-[170px] h-[138px] flex items-center justify-center",children:N?z("img",{src:N,alt:`Thumbnail ${T}`,className:`h-[120px] p-1 cursor-pointer ${s===N?"border-blue-500":"border-gray-300"}`,onClick:()=>o(N)}):z("span",{className:"text-gray-400",children:"No Image"})},T)})}),z("div",{className:"bg-[#F5F5F5] rounded w-[450px] h-[576px] w-full p-4 flex items-center justify-center",children:s&&z("img",{src:s,alt:e.name,className:"w-full h-full object-contain"})})]}),be("div",{className:"w-full ml-auto",children:[z("h1",{className:"text-[24px] font-semibold font-[Inter]",children:e.name}),be("div",{className:"flex items-center gap-2 my-2",children:[[...Array(5)].map((S,T)=>T<(e.rate||4)?z("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},T):z("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},T)),z("span",{className:"text-gray-500 text-[14px]",children:"(100 Reviews)"}),be("span",{className:"text-gray-500 text-[14px]",children:["(",e.stock||50," in stock)"]})]}),be("p",{className:"text-[24px] text-black font-[Inter]",children:["$",e.price]}),z("p",{className:"text-[14px] text-black my-4",children:e.description}),be("div",{className:"my-4 flex items-center gap-4",children:[z("h3",{className:"text-[20px] font-[Inter]",children:"Colours:"}),z("div",{className:"flex gap-4",children:d.map(({name:S,color:T})=>z("div",{className:`w-4 h-4 rounded-full cursor-pointer ${T}
                        ${c===S?"border-2 border-white outline outline-2 outline-black":"border-2 border-white"}`,onClick:()=>h(S)},S))})]}),be("div",{className:"my-4 flex items-center gap-4",children:[z("h3",{className:"text-[20px] font-[Inter]",children:"Size:"}),z("div",{className:"flex gap-2",children:["XS","S","M","L","XL"].map(S=>z("button",{className:`w-[32px] h-[32px] items-center justify-center text-[14px] border border-gray-400 rounded ${m===S?"bg-red-500 text-white border border-red-500":""}`,onClick:()=>y(S),children:S},S))})]}),be("div",{className:"flex items-center gap-4 my-6",children:[be("div",{className:"flex border border-gray-400 w-[159px] h-[44px] items-center rounded",children:[z("button",{className:"flex items-center justify-center text-black w-[45px] h-[40px]",onClick:()=>u(S=>Math.max(1,S-1)),children:"-"}),z("span",{className:"flex items-center justify-center text-center w-[69px] h-[44px] text-[20px] border border-gray-400",children:l}),z("button",{className:"flex items-center justify-center text-black w-[45px] h-[40px]",onClick:()=>u(S=>S+1),children:"+"})]}),z("button",{onClick:b,className:"bg-red-500 text-white w-[165px] h-[44px] flex items-center justify-center rounded",children:"Buy Now"}),z("button",{className:"border border-gray-400 rounded w-[40px] h-[40px] flex items-center justify-center",children:z("img",{src:"/R2S-Client/Wishlist2.svg",alt:"Wishlist2",className:"w-[32px] h-[32px]"})})]}),be("div",{className:"border border-gray-400 rounded",children:[be("div",{className:"p-4 flex items-start gap-3",children:[z("img",{src:"/R2S-Client/icon-delivery2.svg",alt:"icon-delivery2",className:"w-[40px] h-[40px] object-contain"}),be("div",{children:[z("h3",{className:"font-medium text-[16px]",children:"Free Delivery"}),z("button",{className:"font-medium text-[12px] text-black hover:border-b hover:border-black",children:"Enter your postal code for Delivery Availability"})]})]}),be("div",{className:"border-t border-t-gray-400 p-4 flex items-start gap-3",children:[z("img",{src:"/R2S-Client/Icon-return.svg",alt:"Icon-return",className:"w-[40px] h-[40px] object-contain"}),be("div",{children:[z("h3",{className:"font-medium text-[16px]",children:"Return Delivery"}),z("span",{className:"font-medium text-[12px] text-black mr-1",children:"Free 30 Days Delivery Returns."}),z("button",{className:"font-medium text-[12px] text-black hover:border-b hover:border-black",children:"Details"})]})]})]})]})]}),z("div",{className:"mt-5 mb-10",children:_})]})},$2=()=>{const[r,e]=pe.useState([]),[t,n]=pe.useState([]),[s,o]=pe.useState(!1);pe.useEffect(()=>{const y=JSON.parse(localStorage.getItem("cart")||"[]");e(y),n(y);const _=localStorage.getItem("user");if(_){const b=JSON.parse(_);b.roles&&b.roles[0]==="ADMIN"&&o(!0)}},[]);const l=y=>{const _=r.filter(b=>b.id!==y);e(_),localStorage.setItem("cart",JSON.stringify(_)),window.location.reload()},u=(y,_)=>{const b=Math.max(1,parseInt(_)||1),S=r.map(T=>T.id===y?{...T,quantity:b}:T);n(S)},c=()=>{e(t),localStorage.setItem("cart",JSON.stringify(t))},h=Di(),d=!!localStorage.getItem("user"),m=()=>{h(d?"/checkout":"/login")};return be("div",{className:"container mx-auto py-12",children:[be("div",{className:"flex items-center space-x-2 text-gray-500 text-[14px]",children:[z("a",{href:s?"/productmanage":"/",className:"hover:underline",children:"Home"}),z("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),z("span",{className:"font-normal text-black",children:"Cart"})]}),z("div",{children:be("div",{className:"mt-10",children:[z("div",{className:"w-full",children:be("table",{className:"min-w-full border-separate border-spacing-y-4",children:[z("thead",{className:"shadow-md rounded",children:be("tr",{children:[z("th",{className:"p-4 text-[16px]",children:"Product"}),z("th",{className:"p-4 text-left text-[16px]",children:"Price"}),z("th",{className:"p-4 text-left text-[16px]",children:"Quantity"}),z("th",{className:"p-4 text-left text-[16px]",children:"Subtotal"}),z("th",{className:"p-4 text-[16px]",children:"Action"})]})}),z("tbody",{children:t.length>0?t.map(y=>be("tr",{className:"shadow-md rounded",children:[be("td",{className:"p-4 sm:flex items-center gap-2 text-[16px]",children:[z("img",{src:y.image,alt:y.name,className:"hidden sm:flex w-16 h-16"}),y.name]}),be("td",{className:"p-2 text-[16px]",children:["$",y.price]}),z("td",{className:"p-4 text-left",children:z("div",{className:"flex items-left gap-2",children:z("input",{type:"number",className:"w-14 h-10 text-center rounded-lg",value:y.quantity,onChange:_=>u(y.id,_.target.value),min:"1"})})}),be("td",{className:"p-4 text-[16px]",children:["$",(y.price*y.quantity).toFixed(2)]}),z("td",{className:"p-2 text-center",children:z("button",{className:"text-[16px] text-red-500 hover:underline",onClick:()=>l(y.id),children:"Remove"})})]},y.id)):be("tr",{className:"shadow-md rounded",children:[z("td",{className:"p-4 flex items-center gap-2 text-[16px]",children:"Your cart is empty."}),z("td",{className:"p-4 text-[16px]",children:"$0"}),z("td",{className:"p-4 text-[16px]",children:z("input",{type:"number",value:0,className:"w-16 border border-gray-300 p-1 text-center text-[16px]",min:"1",readOnly:!0})}),z("td",{className:"p-4 text-[16px]",children:"$0"}),z("td",{className:"p-4 text-center"})]})})]})}),be("div",{className:"flex justify-between mt-6",children:[z("a",{href:s?"/productmanage":"/",className:"px-4 py-2 bg-gray-200 text-black rounded text-[16px]",children:"Return To Shop"}),r.length>0&&z("button",{className:"px-4 py-2 bg-red-500 text-white rounded text-[16px]",onClick:c,children:"Update Cart"})]})]})}),r.length>0&&be("div",{className:"grid grid-cols-[60%_40%] lg:gap-10 mt-10",children:[z("div",{className:"justify-between",children:be("div",{className:"flex",children:[z("input",{type:"text",placeholder:"Coupon Code",className:"border border-black px-4 py-2 w-full max-w-[250px] h-[56px] text-gray-500 text-[14px] md:text-[16px] rounded"}),z("button",{className:"bg-red-500 text-white px-6 py-2 mx-4 text-[14px] md:text-[16px] w-full lg:w-[211px] h-[56px] rounded",children:"Apply Coupon"})]})}),be("div",{className:"border border-black p-6 rounded w-full lg:w-[300px] xl:w-[400px]",children:[z("h2",{className:"text-[20px] font-medium mb-4",children:"Cart Total"}),be("div",{className:"flex justify-between mb-4 text-[14px] md:text-[16px] border-b border-gray-400",children:[z("span",{children:"Subtotal:"}),be("span",{children:["$",r.reduce((y,_)=>y+_.price*_.quantity,0).toFixed(2)]})]}),be("div",{className:"flex justify-between mb-4 text-[14px] md:text-[16px] border-b border-gray-400",children:[z("span",{children:"Shipping:"}),z("span",{children:"Free"})]}),be("div",{className:"flex justify-between text-[14px] md:text-[16px]",children:[z("span",{children:"Total:"}),be("span",{children:["$",r.reduce((y,_)=>y+_.price*_.quantity,0).toFixed(2)]})]}),z("button",{onClick:m,className:"w-full mt-4 w-full lg:w-[260px] xl:ml-12 h-[56px] bg-red-500 text-white rounded",children:"Proceed to checkout"})]})]})]})},z2=()=>{const[r,e]=pe.useState(null),[t,n]=pe.useState(!1),s=Di();pe.useEffect(()=>{const u=JSON.parse(localStorage.getItem("user")||"null");if(u){e(u);const c=localStorage.getItem("user");if(c){const h=JSON.parse(c);h.roles&&h.roles[0]==="ADMIN"&&n(!0)}}else s("/login")},[s]);const o=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("user"),localStorage.removeItem("checkoutInfo"),s("/login"),window.location.reload(),window.scrollTo(0,0)},l=async()=>{if(!r){pt.error("Profile data is missing!");return}const{name:u,address:c}=r;if(!u||!c){pt.error("One or more fields are empty.");return}console.log("Sending update request with data:",{name:u,address:c});try{if(!u||u.length<3||!c||c.length<3){pt.error("Name and address must be at least 3 characters long.");return}const h=await fetch("https://devapi.uniscore.vn/uri/api/auth/update-profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({name:u,address:c})});if(!h.ok){const y=await h.json().catch(()=>({}));console.error("API error:",y),pt.error(y.message||"Update failed! Please try again.");return}pt.success("Profile updated successfully!");const m={...JSON.parse(localStorage.getItem("user")||"{}"),name:u,address:c};localStorage.setItem("user",JSON.stringify(m)),e(m)}catch(h){console.error("Update failed:",h),pt.error("Something went wrong. Please try again later.")}};return be("div",{className:"container mx-auto py-12",children:[be("div",{className:"flex items-center space-x-2 text-gray-500 text-[14px]",children:[z("a",{href:t?"/productmanage":"/",className:"hover:underline",children:"Home"}),z("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),z("span",{className:"font-normal text-black",children:"My Account"})]}),be("div",{className:"flex min-h-screen mt-10",children:[be("aside",{className:"hidden md:block w-1/3 bg-white rounded-lg",children:[z("h2",{className:"text-[14px] lg:text-[16px] font-medium mb-4",children:"Manage My Account"}),be("ul",{className:"space-y-3 ml-8",children:[z("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Profile"}),z("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"Address Book"}),z("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Payment Options"})]}),z("h2",{className:"text-[14px] lg:text-[16px] font-medium mt-6 mb-4",children:"My Orders"}),be("ul",{className:"space-y-3 ml-8",children:[z("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Returns"}),z("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Cancellations"})]}),z("h2",{className:"text-[14px] lg:text-[16px] font-medium mt-6 mb-4",children:"My Wishlist"}),z("button",{onClick:o,className:"mt-4 bg-red-500 text-[16px] text-white py-2 px-4 rounded-lg hover:bg-red-600",children:"Logout"})]}),be("div",{className:"w-full h-full p-8 bg-white shadow-lg rounded-l md:ml-16",children:[z("h2",{className:"text-[20px] font-medium text-red-500 mb-6",children:"Edit Your Profile"}),be("div",{className:"md:grid lg:grid-cols-[1.5fr_1fr] gap-6",children:[be("div",{children:[be("label",{className:"block text-[16px] mb-1",children:["Full Name",z("a",{className:"text-red-500",children:"*"})]}),z("input",{type:"text",value:(r==null?void 0:r.name)||"",onChange:u=>e(c=>c?{...c,name:u.target.value}:null),className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] text-gray-600 mb-4 md:mb-0"})]}),be("div",{children:[be("label",{className:"flex items-center text-[16px] mb-1",children:["Email",z("img",{src:"/R2S-Client/lock.png",alt:"Lock",className:"w-4 h-4 ml-2 relative -translate-y-[2px]"})]}),z("input",{type:"email",value:(r==null?void 0:r.email)||"",className:"w-full p-2 border border-gray-300 rounded bg-gray-100 text-[16px] text-gray-600 mb-4 md:mb-0",disabled:!0})]}),be("div",{className:"col-span-2",children:[be("label",{className:"block text-[16px] mb-1",children:["Address",z("a",{className:"text-red-500",children:"*"})]}),z("input",{type:"text",value:(r==null?void 0:r.address)||"",onChange:u=>e(c=>c?{...c,address:u.target.value}:null),className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] text-gray-600"})]})]}),z("h3",{className:"text-[16px] mt-6 mb-4",children:"Password Changes"}),be("div",{className:"grid grid-cols-1 gap-4",children:[z("input",{type:"password",placeholder:"Current Password",className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] placeholder:text-gray-600"}),z("input",{type:"password",placeholder:"New Password",className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] placeholder:text-gray-600"}),z("input",{type:"password",placeholder:"Confirm New Password",className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] placeholder:text-gray-600"})]}),be("div",{className:"flex justify-end mt-6 space-x-4",children:[z("button",{onClick:()=>{const u=JSON.parse(localStorage.getItem("user")||"null");u&&e(u)},className:"px-4 py-2 text-black text-[16px]",children:"Cancel"}),z("button",{onClick:l,className:"px-6 py-2 bg-red-500 text-white rounded-lg text-[16px]",children:"Save Changes"})]})]})]})]})},W2=()=>{};var gb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},q2=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],l=r[t++],u=r[t++],c=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const o=r[t++],l=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},PS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],l=s+1<r.length,u=l?r[s+1]:0,c=s+2<r.length,h=c?r[s+2]:0,d=o>>2,m=(o&3)<<4|u>>4;let y=(u&15)<<2|h>>6,_=h&63;c||(_=64,l||(y=64)),n.push(t[d],t[m],t[y],t[_])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(kS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):q2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const h=s<r.length?t[r.charAt(s)]:64;++s;const m=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||h==null||m==null)throw new H2;const y=o<<2|u>>4;if(n.push(y),h!==64){const _=u<<4&240|h>>2;if(n.push(_),m!==64){const b=h<<6&192|m;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class H2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Q2=function(r){const e=kS(r);return PS.encodeByteArray(e,!0)},Zf=function(r){return Q2(r).replace(/\./g,"")},K2=function(r){try{return PS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=()=>G2().__FIREBASE_DEFAULTS__,J2=()=>{if(typeof process>"u"||typeof gb>"u")return;const r=gb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},X2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&K2(r[1]);return e&&JSON.parse(e)},Nv=()=>{try{return W2()||Y2()||J2()||X2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Z2=r=>{var e,t;return(t=(e=Nv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},eN=r=>{const e=Z2(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},NS=()=>{var r;return(r=Nv())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Zf(JSON.stringify(t)),Zf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iN(){var r;const e=(r=Nv())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sN(){return!iN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oN(){try{return typeof indexedDB=="object"}catch{return!1}}function aN(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="FirebaseError";class fu extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=lN,Object.setPrototypeOf(this,fu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,OS.prototype.create)}}class OS{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?uN(o,n):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new fu(s,u,n)}}function uN(r,e){return r.replace(cN,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const cN=/\{\$([^}]+)}/g;function ed(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],l=e[s];if(yb(o)&&yb(l)){if(!ed(o,l))return!1}else if(o!==l)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function yb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(r){return r&&r._delegate?r._delegate:r}class Cc{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new tN;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dN(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&l.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),o=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:fN(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fN(r){return r===ga?void 0:r}function dN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ft||(Ft={}));const mN={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},gN=Ft.INFO,yN={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},vN=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=yN[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class DS{constructor(e){this.name=e,this._logLevel=gN,this._logHandler=vN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const _N=(r,e)=>e.some(t=>r instanceof t);let vb,_b;function wN(){return vb||(vb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bN(){return _b||(_b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LS=new WeakMap,Cg=new WeakMap,MS=new WeakMap,Fm=new WeakMap,Ov=new WeakMap;function EN(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",l)},o=()=>{t(No(r.result)),s()},l=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&LS.set(t,r)}).catch(()=>{}),Ov.set(e,r),e}function SN(r){if(Cg.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",l),r.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",l),r.addEventListener("abort",l)});Cg.set(r,e)}let Rg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Cg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||MS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return No(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function TN(r){Rg=r(Rg)}function xN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Vm(this),e,...t);return MS.set(n,e.sort?e.sort():[e]),No(n)}:bN().includes(r)?function(...e){return r.apply(Vm(this),e),No(LS.get(this))}:function(...e){return No(r.apply(Vm(this),e))}}function AN(r){return typeof r=="function"?xN(r):(r instanceof IDBTransaction&&SN(r),_N(r,wN())?new Proxy(r,Rg):r)}function No(r){if(r instanceof IDBRequest)return EN(r);if(Fm.has(r))return Fm.get(r);const e=AN(r);return e!==r&&(Fm.set(r,e),Ov.set(e,r)),e}const Vm=r=>Ov.get(r);function IN(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const l=indexedDB.open(r,e),u=No(l);return n&&l.addEventListener("upgradeneeded",c=>{n(No(l.result),c.oldVersion,c.newVersion,No(l.transaction),c)}),t&&l.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const CN=["get","getKey","getAll","getAllKeys","count"],RN=["put","add","delete","clear"],Um=new Map;function wb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Um.get(e))return Um.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=RN.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||CN.includes(t)))return;const o=async function(l,...u){const c=this.transaction(l,s?"readwrite":"readonly");let h=c.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),s&&c.done]))[0]};return Um.set(e,o),o}TN(r=>({...r,get:(e,t,n)=>wb(e,t)||r.get(e,t,n),has:(e,t)=>!!wb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PN(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function PN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kg="@firebase/app",bb="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new DS("@firebase/app"),NN="@firebase/app-compat",ON="@firebase/analytics-compat",DN="@firebase/analytics",LN="@firebase/app-check-compat",MN="@firebase/app-check",FN="@firebase/auth",VN="@firebase/auth-compat",UN="@firebase/database",BN="@firebase/data-connect",jN="@firebase/database-compat",$N="@firebase/functions",zN="@firebase/functions-compat",WN="@firebase/installations",qN="@firebase/installations-compat",HN="@firebase/messaging",QN="@firebase/messaging-compat",KN="@firebase/performance",GN="@firebase/performance-compat",YN="@firebase/remote-config",JN="@firebase/remote-config-compat",XN="@firebase/storage",ZN="@firebase/storage-compat",eO="@firebase/firestore",tO="@firebase/vertexai",rO="@firebase/firestore-compat",nO="firebase",iO="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="[DEFAULT]",sO={[kg]:"fire-core",[NN]:"fire-core-compat",[DN]:"fire-analytics",[ON]:"fire-analytics-compat",[MN]:"fire-app-check",[LN]:"fire-app-check-compat",[FN]:"fire-auth",[VN]:"fire-auth-compat",[UN]:"fire-rtdb",[BN]:"fire-data-connect",[jN]:"fire-rtdb-compat",[$N]:"fire-fn",[zN]:"fire-fn-compat",[WN]:"fire-iid",[qN]:"fire-iid-compat",[HN]:"fire-fcm",[QN]:"fire-fcm-compat",[KN]:"fire-perf",[GN]:"fire-perf-compat",[YN]:"fire-rc",[JN]:"fire-rc-compat",[XN]:"fire-gcs",[ZN]:"fire-gcs-compat",[eO]:"fire-fst",[rO]:"fire-fst-compat",[tO]:"fire-vertex","fire-js":"fire-js",[nO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Map,oO=new Map,Ng=new Map;function Eb(r,e){try{r.container.addComponent(e)}catch(t){Ls.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function rd(r){const e=r.name;if(Ng.has(e))return Ls.debug(`There were multiple attempts to register component ${e}.`),!1;Ng.set(e,r);for(const t of td.values())Eb(t,r);for(const t of oO.values())Eb(t,r);return!0}function aO(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function lO(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new OS("app","Firebase",uO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Cc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=iO;function FS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Pg,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Oo.create("bad-app-name",{appName:String(s)});if(t||(t=NS()),!t)throw Oo.create("no-options");const o=td.get(s);if(o){if(ed(t,o.options)&&ed(n,o.config))return o;throw Oo.create("duplicate-app",{appName:s})}const l=new pN(s);for(const c of Ng.values())l.addComponent(c);const u=new cO(t,n,l);return td.set(s,u),u}function fO(r=Pg){const e=td.get(r);if(!e&&r===Pg&&NS())return FS();if(!e)throw Oo.create("no-app",{appName:r});return e}function Vl(r,e,t){var n;let s=(n=sO[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ls.warn(u.join(" "));return}rd(new Cc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="firebase-heartbeat-database",pO=1,Rc="firebase-heartbeat-store";let Bm=null;function VS(){return Bm||(Bm=IN(dO,pO,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Rc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Oo.create("idb-open",{originalErrorMessage:r.message})})),Bm}async function mO(r){try{const t=(await VS()).transaction(Rc),n=await t.objectStore(Rc).get(US(r));return await t.done,n}catch(e){if(e instanceof fu)Ls.warn(e.message);else{const t=Oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ls.warn(t.message)}}}async function Sb(r,e){try{const n=(await VS()).transaction(Rc,"readwrite");await n.objectStore(Rc).put(e,US(r)),await n.done}catch(t){if(t instanceof fu)Ls.warn(t.message);else{const n=Oo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ls.warn(n.message)}}}function US(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=1024,yO=30;class vO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wO(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Tb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>yO){const l=bO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ls.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tb(),{heartbeatsToSend:n,unsentEntries:s}=_O(this._heartbeatsCache.heartbeats),o=Zf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ls.warn(t),""}}}function Tb(){return new Date().toISOString().substring(0,10)}function _O(r,e=gO){const t=[];let n=r.slice();for(const s of r){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),xb(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),xb(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class wO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oN()?aN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function xb(r){return Zf(JSON.stringify({version:2,heartbeats:r})).length}function bO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(r){rd(new Cc("platform-logger",e=>new kN(e),"PRIVATE")),rd(new Cc("heartbeat",e=>new vO(e),"PRIVATE")),Vl(kg,bb,r),Vl(kg,bb,"esm2017"),Vl("fire-js","")}EO("");var SO="firebase",TO="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vl(SO,TO,"app");var Ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Do,BS;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function V(){}V.prototype=R.prototype,P.D=R.prototype,P.prototype=new V,P.prototype.constructor=P,P.C=function(M,W,O){for(var F=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)F[ye-2]=arguments[ye];return R.prototype[W].apply(M,F)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,V){V||(V=0);var M=Array(16);if(typeof R=="string")for(var W=0;16>W;++W)M[W]=R.charCodeAt(V++)|R.charCodeAt(V++)<<8|R.charCodeAt(V++)<<16|R.charCodeAt(V++)<<24;else for(W=0;16>W;++W)M[W]=R[V++]|R[V++]<<8|R[V++]<<16|R[V++]<<24;R=P.g[0],V=P.g[1],W=P.g[2];var O=P.g[3],F=R+(O^V&(W^O))+M[0]+3614090360&4294967295;R=V+(F<<7&4294967295|F>>>25),F=O+(W^R&(V^W))+M[1]+3905402710&4294967295,O=R+(F<<12&4294967295|F>>>20),F=W+(V^O&(R^V))+M[2]+606105819&4294967295,W=O+(F<<17&4294967295|F>>>15),F=V+(R^W&(O^R))+M[3]+3250441966&4294967295,V=W+(F<<22&4294967295|F>>>10),F=R+(O^V&(W^O))+M[4]+4118548399&4294967295,R=V+(F<<7&4294967295|F>>>25),F=O+(W^R&(V^W))+M[5]+1200080426&4294967295,O=R+(F<<12&4294967295|F>>>20),F=W+(V^O&(R^V))+M[6]+2821735955&4294967295,W=O+(F<<17&4294967295|F>>>15),F=V+(R^W&(O^R))+M[7]+4249261313&4294967295,V=W+(F<<22&4294967295|F>>>10),F=R+(O^V&(W^O))+M[8]+1770035416&4294967295,R=V+(F<<7&4294967295|F>>>25),F=O+(W^R&(V^W))+M[9]+2336552879&4294967295,O=R+(F<<12&4294967295|F>>>20),F=W+(V^O&(R^V))+M[10]+4294925233&4294967295,W=O+(F<<17&4294967295|F>>>15),F=V+(R^W&(O^R))+M[11]+2304563134&4294967295,V=W+(F<<22&4294967295|F>>>10),F=R+(O^V&(W^O))+M[12]+1804603682&4294967295,R=V+(F<<7&4294967295|F>>>25),F=O+(W^R&(V^W))+M[13]+4254626195&4294967295,O=R+(F<<12&4294967295|F>>>20),F=W+(V^O&(R^V))+M[14]+2792965006&4294967295,W=O+(F<<17&4294967295|F>>>15),F=V+(R^W&(O^R))+M[15]+1236535329&4294967295,V=W+(F<<22&4294967295|F>>>10),F=R+(W^O&(V^W))+M[1]+4129170786&4294967295,R=V+(F<<5&4294967295|F>>>27),F=O+(V^W&(R^V))+M[6]+3225465664&4294967295,O=R+(F<<9&4294967295|F>>>23),F=W+(R^V&(O^R))+M[11]+643717713&4294967295,W=O+(F<<14&4294967295|F>>>18),F=V+(O^R&(W^O))+M[0]+3921069994&4294967295,V=W+(F<<20&4294967295|F>>>12),F=R+(W^O&(V^W))+M[5]+3593408605&4294967295,R=V+(F<<5&4294967295|F>>>27),F=O+(V^W&(R^V))+M[10]+38016083&4294967295,O=R+(F<<9&4294967295|F>>>23),F=W+(R^V&(O^R))+M[15]+3634488961&4294967295,W=O+(F<<14&4294967295|F>>>18),F=V+(O^R&(W^O))+M[4]+3889429448&4294967295,V=W+(F<<20&4294967295|F>>>12),F=R+(W^O&(V^W))+M[9]+568446438&4294967295,R=V+(F<<5&4294967295|F>>>27),F=O+(V^W&(R^V))+M[14]+3275163606&4294967295,O=R+(F<<9&4294967295|F>>>23),F=W+(R^V&(O^R))+M[3]+4107603335&4294967295,W=O+(F<<14&4294967295|F>>>18),F=V+(O^R&(W^O))+M[8]+1163531501&4294967295,V=W+(F<<20&4294967295|F>>>12),F=R+(W^O&(V^W))+M[13]+2850285829&4294967295,R=V+(F<<5&4294967295|F>>>27),F=O+(V^W&(R^V))+M[2]+4243563512&4294967295,O=R+(F<<9&4294967295|F>>>23),F=W+(R^V&(O^R))+M[7]+1735328473&4294967295,W=O+(F<<14&4294967295|F>>>18),F=V+(O^R&(W^O))+M[12]+2368359562&4294967295,V=W+(F<<20&4294967295|F>>>12),F=R+(V^W^O)+M[5]+4294588738&4294967295,R=V+(F<<4&4294967295|F>>>28),F=O+(R^V^W)+M[8]+2272392833&4294967295,O=R+(F<<11&4294967295|F>>>21),F=W+(O^R^V)+M[11]+1839030562&4294967295,W=O+(F<<16&4294967295|F>>>16),F=V+(W^O^R)+M[14]+4259657740&4294967295,V=W+(F<<23&4294967295|F>>>9),F=R+(V^W^O)+M[1]+2763975236&4294967295,R=V+(F<<4&4294967295|F>>>28),F=O+(R^V^W)+M[4]+1272893353&4294967295,O=R+(F<<11&4294967295|F>>>21),F=W+(O^R^V)+M[7]+4139469664&4294967295,W=O+(F<<16&4294967295|F>>>16),F=V+(W^O^R)+M[10]+3200236656&4294967295,V=W+(F<<23&4294967295|F>>>9),F=R+(V^W^O)+M[13]+681279174&4294967295,R=V+(F<<4&4294967295|F>>>28),F=O+(R^V^W)+M[0]+3936430074&4294967295,O=R+(F<<11&4294967295|F>>>21),F=W+(O^R^V)+M[3]+3572445317&4294967295,W=O+(F<<16&4294967295|F>>>16),F=V+(W^O^R)+M[6]+76029189&4294967295,V=W+(F<<23&4294967295|F>>>9),F=R+(V^W^O)+M[9]+3654602809&4294967295,R=V+(F<<4&4294967295|F>>>28),F=O+(R^V^W)+M[12]+3873151461&4294967295,O=R+(F<<11&4294967295|F>>>21),F=W+(O^R^V)+M[15]+530742520&4294967295,W=O+(F<<16&4294967295|F>>>16),F=V+(W^O^R)+M[2]+3299628645&4294967295,V=W+(F<<23&4294967295|F>>>9),F=R+(W^(V|~O))+M[0]+4096336452&4294967295,R=V+(F<<6&4294967295|F>>>26),F=O+(V^(R|~W))+M[7]+1126891415&4294967295,O=R+(F<<10&4294967295|F>>>22),F=W+(R^(O|~V))+M[14]+2878612391&4294967295,W=O+(F<<15&4294967295|F>>>17),F=V+(O^(W|~R))+M[5]+4237533241&4294967295,V=W+(F<<21&4294967295|F>>>11),F=R+(W^(V|~O))+M[12]+1700485571&4294967295,R=V+(F<<6&4294967295|F>>>26),F=O+(V^(R|~W))+M[3]+2399980690&4294967295,O=R+(F<<10&4294967295|F>>>22),F=W+(R^(O|~V))+M[10]+4293915773&4294967295,W=O+(F<<15&4294967295|F>>>17),F=V+(O^(W|~R))+M[1]+2240044497&4294967295,V=W+(F<<21&4294967295|F>>>11),F=R+(W^(V|~O))+M[8]+1873313359&4294967295,R=V+(F<<6&4294967295|F>>>26),F=O+(V^(R|~W))+M[15]+4264355552&4294967295,O=R+(F<<10&4294967295|F>>>22),F=W+(R^(O|~V))+M[6]+2734768916&4294967295,W=O+(F<<15&4294967295|F>>>17),F=V+(O^(W|~R))+M[13]+1309151649&4294967295,V=W+(F<<21&4294967295|F>>>11),F=R+(W^(V|~O))+M[4]+4149444226&4294967295,R=V+(F<<6&4294967295|F>>>26),F=O+(V^(R|~W))+M[11]+3174756917&4294967295,O=R+(F<<10&4294967295|F>>>22),F=W+(R^(O|~V))+M[2]+718787259&4294967295,W=O+(F<<15&4294967295|F>>>17),F=V+(O^(W|~R))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(W+(F<<21&4294967295|F>>>11))&4294967295,P.g[2]=P.g[2]+W&4294967295,P.g[3]=P.g[3]+O&4294967295}n.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var V=R-this.blockSize,M=this.B,W=this.h,O=0;O<R;){if(W==0)for(;O<=V;)s(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<R;)if(M[W++]=P.charCodeAt(O++),W==this.blockSize){s(this,M),W=0;break}}else for(;O<R;)if(M[W++]=P[O++],W==this.blockSize){s(this,M),W=0;break}}this.h=W,this.o+=R},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var V=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=V&255,V/=256;for(this.u(P),P=Array(16),R=V=0;4>R;++R)for(var M=0;32>M;M+=8)P[V++]=this.g[R]>>>M&255;return P};function o(P,R){var V=u;return Object.prototype.hasOwnProperty.call(V,P)?V[P]:V[P]=R(P)}function l(P,R){this.h=R;for(var V=[],M=!0,W=P.length-1;0<=W;W--){var O=P[W]|0;M&&O==R||(V[W]=O,M=!1)}this.g=V}var u={};function c(P){return-128<=P&&128>P?o(P,function(R){return new l([R|0],0>R?-1:0)}):new l([P|0],0>P?-1:0)}function h(P){if(isNaN(P)||!isFinite(P))return m;if(0>P)return T(h(-P));for(var R=[],V=1,M=0;P>=V;M++)R[M]=P/V|0,V*=4294967296;return new l(R,0)}function d(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return T(d(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=h(Math.pow(R,8)),M=m,W=0;W<P.length;W+=8){var O=Math.min(8,P.length-W),F=parseInt(P.substring(W,W+O),R);8>O?(O=h(Math.pow(R,O)),M=M.j(O).add(h(F))):(M=M.j(V),M=M.add(h(F)))}return M}var m=c(0),y=c(1),_=c(16777216);r=l.prototype,r.m=function(){if(S(this))return-T(this).m();for(var P=0,R=1,V=0;V<this.g.length;V++){var M=this.i(V);P+=(0<=M?M:4294967296+M)*R,R*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(S(this))return"-"+T(this).toString(P);for(var R=h(Math.pow(P,6)),V=this,M="";;){var W=q(V,R).g;V=N(V,W.j(R));var O=((0<V.g.length?V.g[0]:V.h)>>>0).toString(P);if(V=W,b(V))return O+M;for(;6>O.length;)O="0"+O;M=O+M}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function S(P){return P.h==-1}r.l=function(P){return P=N(this,P),S(P)?-1:b(P)?0:1};function T(P){for(var R=P.g.length,V=[],M=0;M<R;M++)V[M]=~P.g[M];return new l(V,~P.h).add(y)}r.abs=function(){return S(this)?T(this):this},r.add=function(P){for(var R=Math.max(this.g.length,P.g.length),V=[],M=0,W=0;W<=R;W++){var O=M+(this.i(W)&65535)+(P.i(W)&65535),F=(O>>>16)+(this.i(W)>>>16)+(P.i(W)>>>16);M=F>>>16,O&=65535,F&=65535,V[W]=F<<16|O}return new l(V,V[V.length-1]&-2147483648?-1:0)};function N(P,R){return P.add(T(R))}r.j=function(P){if(b(this)||b(P))return m;if(S(this))return S(P)?T(this).j(T(P)):T(T(this).j(P));if(S(P))return T(this.j(T(P)));if(0>this.l(_)&&0>P.l(_))return h(this.m()*P.m());for(var R=this.g.length+P.g.length,V=[],M=0;M<2*R;M++)V[M]=0;for(M=0;M<this.g.length;M++)for(var W=0;W<P.g.length;W++){var O=this.i(M)>>>16,F=this.i(M)&65535,ye=P.i(W)>>>16,se=P.i(W)&65535;V[2*M+2*W]+=F*se,x(V,2*M+2*W),V[2*M+2*W+1]+=O*se,x(V,2*M+2*W+1),V[2*M+2*W+1]+=F*ye,x(V,2*M+2*W+1),V[2*M+2*W+2]+=O*ye,x(V,2*M+2*W+2)}for(M=0;M<R;M++)V[M]=V[2*M+1]<<16|V[2*M];for(M=R;M<2*R;M++)V[M]=0;return new l(V,0)};function x(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function k(P,R){this.g=P,this.h=R}function q(P,R){if(b(R))throw Error("division by zero");if(b(P))return new k(m,m);if(S(P))return R=q(T(P),R),new k(T(R.g),T(R.h));if(S(R))return R=q(P,T(R)),new k(T(R.g),R.h);if(30<P.g.length){if(S(P)||S(R))throw Error("slowDivide_ only works with positive integers.");for(var V=y,M=R;0>=M.l(P);)V=H(V),M=H(M);var W=$(V,1),O=$(M,1);for(M=$(M,2),V=$(V,2);!b(M);){var F=O.add(M);0>=F.l(P)&&(W=W.add(V),O=F),M=$(M,1),V=$(V,1)}return R=N(P,W.j(R)),new k(W,R)}for(W=m;0<=P.l(R);){for(V=Math.max(1,Math.floor(P.m()/R.m())),M=Math.ceil(Math.log(V)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),O=h(V),F=O.j(R);S(F)||0<F.l(P);)V-=M,O=h(V),F=O.j(R);b(O)&&(O=y),W=W.add(O),P=N(P,F)}return new k(W,P)}r.A=function(P){return q(this,P).h},r.and=function(P){for(var R=Math.max(this.g.length,P.g.length),V=[],M=0;M<R;M++)V[M]=this.i(M)&P.i(M);return new l(V,this.h&P.h)},r.or=function(P){for(var R=Math.max(this.g.length,P.g.length),V=[],M=0;M<R;M++)V[M]=this.i(M)|P.i(M);return new l(V,this.h|P.h)},r.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),V=[],M=0;M<R;M++)V[M]=this.i(M)^P.i(M);return new l(V,this.h^P.h)};function H(P){for(var R=P.g.length+1,V=[],M=0;M<R;M++)V[M]=P.i(M)<<1|P.i(M-1)>>>31;return new l(V,P.h)}function $(P,R){var V=R>>5;R%=32;for(var M=P.g.length-V,W=[],O=0;O<M;O++)W[O]=0<R?P.i(O+V)>>>R|P.i(O+V+1)<<32-R:P.i(O+V);return new l(W,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,BS=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=d,Do=l}).apply(typeof Ab<"u"?Ab:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jS,lc,$S,Nf,Og,zS,WS,qS;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,I,D){return p==Array.prototype||p==Object.prototype||(p[I]=D.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var I=0;I<p.length;++I){var D=p[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var n=t(this);function s(p,I){if(I)e:{var D=n;p=p.split(".");for(var K=0;K<p.length-1;K++){var Se=p[K];if(!(Se in D))break e;D=D[Se]}p=p[p.length-1],K=D[p],I=I(K),I!=K&&I!=null&&e(D,p,{configurable:!0,writable:!0,value:I})}}function o(p,I){p instanceof String&&(p+="");var D=0,K=!1,Se={next:function(){if(!K&&D<p.length){var Pe=D++;return{value:I(Pe,p[Pe]),done:!1}}return K=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}s("Array.prototype.values",function(p){return p||function(){return o(this,function(I,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function c(p){var I=typeof p;return I=I!="object"?I:p?Array.isArray(p)?"array":I:"null",I=="array"||I=="object"&&typeof p.length=="number"}function h(p){var I=typeof p;return I=="object"&&p!=null||I=="function"}function d(p,I,D){return p.call.apply(p.bind,arguments)}function m(p,I,D){if(!p)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,K),p.apply(I,Se)}}return function(){return p.apply(I,arguments)}}function y(p,I,D){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,y.apply(null,arguments)}function _(p,I){var D=Array.prototype.slice.call(arguments,1);return function(){var K=D.slice();return K.push.apply(K,arguments),p.apply(this,K)}}function b(p,I){function D(){}D.prototype=I.prototype,p.aa=I.prototype,p.prototype=new D,p.prototype.constructor=p,p.Qb=function(K,Se,Pe){for(var it=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)it[qt-2]=arguments[qt];return I.prototype[Se].apply(K,it)}}function S(p){const I=p.length;if(0<I){const D=Array(I);for(let K=0;K<I;K++)D[K]=p[K];return D}return[]}function T(p,I){for(let D=1;D<arguments.length;D++){const K=arguments[D];if(c(K)){const Se=p.length||0,Pe=K.length||0;p.length=Se+Pe;for(let it=0;it<Pe;it++)p[Se+it]=K[it]}else p.push(K)}}class N{constructor(I,D){this.i=I,this.j=D,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function x(p){return/^[\s\xa0]*$/.test(p)}function k(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function q(p){return q[" "](p),p}q[" "]=function(){};var H=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function $(p,I,D){for(const K in p)I.call(D,p[K],K,p)}function P(p,I){for(const D in p)I.call(void 0,p[D],D,p)}function R(p){const I={};for(const D in p)I[D]=p[D];return I}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(p,I){let D,K;for(let Se=1;Se<arguments.length;Se++){K=arguments[Se];for(D in K)p[D]=K[D];for(let Pe=0;Pe<V.length;Pe++)D=V[Pe],Object.prototype.hasOwnProperty.call(K,D)&&(p[D]=K[D])}}function W(p){var I=1;p=p.split(":");const D=[];for(;0<I&&p.length;)D.push(p.shift()),I--;return p.length&&D.push(p.join(":")),D}function O(p){u.setTimeout(()=>{throw p},0)}function F(){var p=Re;let I=null;return p.g&&(I=p.g,p.g=p.g.next,p.g||(p.h=null),I.next=null),I}class ye{constructor(){this.h=this.g=null}add(I,D){const K=se.get();K.set(I,D),this.h?this.h.next=K:this.g=K,this.h=K}}var se=new N(()=>new Ne,p=>p.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(I,D){this.h=I,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,he=!1,Re=new ye,B=()=>{const p=u.Promise.resolve(void 0);Ie=()=>{p.then(ue)}};var ue=()=>{for(var p;p=F();){try{p.h.call(p.g)}catch(D){O(D)}var I=se;I.j(p),100>I.h&&(I.h++,p.next=I.g,I.g=p)}he=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(p,I){this.type=p,this.g=this.target=I,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,I=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};u.addEventListener("test",D,I),u.removeEventListener("test",D,I)}catch{}return p}();function oe(p,I){if(we.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var D=this.type=p.type,K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=I,I=p.relatedTarget){if(H){e:{try{q(I.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(I=null)}}else D=="mouseover"?I=p.fromElement:D=="mouseout"&&(I=p.toElement);this.relatedTarget=I,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ge[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&oe.aa.h.call(this)}}b(oe,we);var Ge={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),ee=0;function xe(p,I,D,K,Se){this.listener=p,this.proxy=null,this.src=I,this.type=D,this.capture=!!K,this.ha=Se,this.key=++ee,this.da=this.fa=!1}function me(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function de(p){this.src=p,this.g={},this.h=0}de.prototype.add=function(p,I,D,K,Se){var Pe=p.toString();p=this.g[Pe],p||(p=this.g[Pe]=[],this.h++);var it=Fe(p,I,K,Se);return-1<it?(I=p[it],D||(I.fa=!1)):(I=new xe(I,this.src,Pe,!!K,Se),I.fa=D,p.push(I)),I};function ve(p,I){var D=I.type;if(D in p.g){var K=p.g[D],Se=Array.prototype.indexOf.call(K,I,void 0),Pe;(Pe=0<=Se)&&Array.prototype.splice.call(K,Se,1),Pe&&(me(I),p.g[D].length==0&&(delete p.g[D],p.h--))}}function Fe(p,I,D,K){for(var Se=0;Se<p.length;++Se){var Pe=p[Se];if(!Pe.da&&Pe.listener==I&&Pe.capture==!!D&&Pe.ha==K)return Se}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),ne={};function le(p,I,D,K,Se){if(Array.isArray(I)){for(var Pe=0;Pe<I.length;Pe++)le(p,I[Pe],D,K,Se);return null}return D=Ue(D),p&&p[ce]?p.K(I,D,h(K)?!!K.capture:!1,Se):Ee(p,I,D,!1,K,Se)}function Ee(p,I,D,K,Se,Pe){if(!I)throw Error("Invalid event type");var it=h(Se)?!!Se.capture:!!Se,qt=re(p);if(qt||(p[Oe]=qt=new de(p)),D=qt.add(I,D,K,it,Pe),D.proxy)return D;if(K=Me(),D.proxy=K,K.src=p,K.listener=D,p.addEventListener)De||(Se=it),Se===void 0&&(Se=!1),p.addEventListener(I.toString(),K,Se);else if(p.attachEvent)p.attachEvent(ae(I.toString()),K);else if(p.addListener&&p.removeListener)p.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Me(){function p(D){return I.call(p.src,p.listener,D)}const I=Q;return p}function ke(p,I,D,K,Se){if(Array.isArray(I))for(var Pe=0;Pe<I.length;Pe++)ke(p,I[Pe],D,K,Se);else K=h(K)?!!K.capture:!!K,D=Ue(D),p&&p[ce]?(p=p.i,I=String(I).toString(),I in p.g&&(Pe=p.g[I],D=Fe(Pe,D,K,Se),-1<D&&(me(Pe[D]),Array.prototype.splice.call(Pe,D,1),Pe.length==0&&(delete p.g[I],p.h--)))):p&&(p=re(p))&&(I=p.g[I.toString()],p=-1,I&&(p=Fe(I,D,K,Se)),(D=-1<p?I[p]:null)&&Ve(D))}function Ve(p){if(typeof p!="number"&&p&&!p.da){var I=p.src;if(I&&I[ce])ve(I.i,p);else{var D=p.type,K=p.proxy;I.removeEventListener?I.removeEventListener(D,K,p.capture):I.detachEvent?I.detachEvent(ae(D),K):I.addListener&&I.removeListener&&I.removeListener(K),(D=re(I))?(ve(D,p),D.h==0&&(D.src=null,I[Oe]=null)):me(p)}}}function ae(p){return p in ne?ne[p]:ne[p]="on"+p}function Q(p,I){if(p.da)p=!0;else{I=new oe(I,this);var D=p.listener,K=p.ha||p.src;p.fa&&Ve(p),p=D.call(K,I)}return p}function re(p){return p=p[Oe],p instanceof de?p:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(p){return typeof p=="function"?p:(p[Z]||(p[Z]=function(I){return p.handleEvent(I)}),p[Z])}function v(){G.call(this),this.i=new de(this),this.M=this,this.F=null}b(v,G),v.prototype[ce]=!0,v.prototype.removeEventListener=function(p,I,D,K){ke(this,p,I,D,K)};function w(p,I){var D,K=p.F;if(K)for(D=[];K;K=K.F)D.push(K);if(p=p.M,K=I.type||I,typeof I=="string")I=new we(I,p);else if(I instanceof we)I.target=I.target||p;else{var Se=I;I=new we(K,p),M(I,Se)}if(Se=!0,D)for(var Pe=D.length-1;0<=Pe;Pe--){var it=I.g=D[Pe];Se=A(it,K,!0,I)&&Se}if(it=I.g=p,Se=A(it,K,!0,I)&&Se,Se=A(it,K,!1,I)&&Se,D)for(Pe=0;Pe<D.length;Pe++)it=I.g=D[Pe],Se=A(it,K,!1,I)&&Se}v.prototype.N=function(){if(v.aa.N.call(this),this.i){var p=this.i,I;for(I in p.g){for(var D=p.g[I],K=0;K<D.length;K++)me(D[K]);delete p.g[I],p.h--}}this.F=null},v.prototype.K=function(p,I,D,K){return this.i.add(String(p),I,!1,D,K)},v.prototype.L=function(p,I,D,K){return this.i.add(String(p),I,!0,D,K)};function A(p,I,D,K){if(I=p.i.g[String(I)],!I)return!0;I=I.concat();for(var Se=!0,Pe=0;Pe<I.length;++Pe){var it=I[Pe];if(it&&!it.da&&it.capture==D){var qt=it.listener,Or=it.ha||it.src;it.fa&&ve(p.i,it),Se=qt.call(Or,K)!==!1&&Se}}return Se&&!K.defaultPrevented}function U(p,I,D){if(typeof p=="function")D&&(p=y(p,D));else if(p&&typeof p.handleEvent=="function")p=y(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:u.setTimeout(p,I||0)}function J(p){p.g=U(()=>{p.g=null,p.i&&(p.i=!1,J(p))},p.l);const I=p.h;p.h=null,p.m.apply(null,I)}class ie extends G{constructor(I,D){super(),this.m=I,this.l=D,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(p){G.call(this),this.h=p,this.g={}}b(_e,G);var Ze=[];function et(p){$(p.g,function(I,D){this.g.hasOwnProperty(D)&&Ve(I)},p),p.g={}}_e.prototype.N=function(){_e.aa.N.call(this),et(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=u.JSON.stringify,bt=u.JSON.parse,mt=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function _r(){}_r.prototype.h=null;function wr(p){return p.h||(p.h=p.i())}function xr(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){we.call(this,"d")}b(Wt,we);function gt(){we.call(this,"c")}b(gt,we);var Rt={},mr=null;function Gt(){return mr=mr||new v}Rt.La="serverreachability";function br(p){we.call(this,Rt.La,p)}b(br,we);function jr(p){const I=Gt();w(I,new br(I))}Rt.STAT_EVENT="statevent";function Y(p,I){we.call(this,Rt.STAT_EVENT,p),this.stat=I}b(Y,we);function X(p){const I=Gt();w(I,new Y(I,p))}Rt.Ma="timingevent";function Ye(p,I){we.call(this,Rt.Ma,p),this.size=I}b(Ye,we);function rt(p,I){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},I)}function st(){this.g=!0}st.prototype.xa=function(){this.g=!1};function nr(p,I,D,K,Se,Pe){p.info(function(){if(p.g)if(Pe)for(var it="",qt=Pe.split("&"),Or=0;Or<qt.length;Or++){var Lt=qt[Or].split("=");if(1<Lt.length){var $r=Lt[0];Lt=Lt[1];var Ar=$r.split("_");it=2<=Ar.length&&Ar[1]=="type"?it+($r+"="+Lt+"&"):it+($r+"=redacted&")}}else it=null;else it=Pe;return"XMLHTTP REQ ("+K+") [attempt "+Se+"]: "+I+`
`+D+`
`+it})}function Pr(p,I,D,K,Se,Pe,it){p.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+Se+"]: "+I+`
`+D+`
`+Pe+" "+it})}function Nr(p,I,D,K){p.info(function(){return"XMLHTTP TEXT ("+I+"): "+wu(p,D)+(K?" "+K:"")})}function zs(p,I){p.info(function(){return"TIMEOUT: "+I})}st.prototype.info=function(){};function wu(p,I){if(!p.g)return I;if(!I)return null;try{var D=JSON.parse(I);if(D){for(p=0;p<D.length;p++)if(Array.isArray(D[p])){var K=D[p];if(!(2>K.length)){var Se=K[1];if(Array.isArray(Se)&&!(1>Se.length)){var Pe=Se[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var it=1;it<Se.length;it++)Se[it]=""}}}}return ft(D)}catch{return I}}var os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mn;function hi(){}b(hi,_r),hi.prototype.g=function(){return new XMLHttpRequest},hi.prototype.i=function(){return{}},mn=new hi;function gn(p,I,D,K){this.j=p,this.i=I,this.l=D,this.R=K||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mi}function Mi(){this.i=null,this.g="",this.h=!1}var jn={},rn={};function Ya(p,I,D){p.L=1,p.v=Ks(zn(I)),p.m=D,p.P=!0,bu(p,null)}function bu(p,I){p.F=Date.now(),Jt(p),p.A=zn(p.v);var D=p.A,K=p.R;Array.isArray(K)||(K=[String(K)]),Ys(D.i,"t",K),p.C=0,D=p.j.J,p.h=new Mi,p.g=yh(p.j,D?I:null,!p.m),0<p.O&&(p.M=new ie(y(p.Y,p,p.g),p.O)),I=p.U,D=p.g,K=p.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&(Ze[0]=Se.toString()),Se=Ze);for(var Pe=0;Pe<Se.length;Pe++){var it=le(D,Se[Pe],K||I.handleEvent,!1,I.h||I);if(!it)break;I.g[it.key]=it}I=p.H?R(p.H):{},p.m?(p.u||(p.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,I)):(p.u="GET",p.g.ea(p.A,p.u,null,I)),jr(),nr(p.i,p.u,p.A,p.l,p.R,p.m)}gn.prototype.ca=function(p){p=p.target;const I=this.M;I&&Rn(p)==3?I.j():this.Y(p)},gn.prototype.Y=function(p){try{if(p==this.g)e:{const Ar=Rn(this.g);var I=this.g.Ba();const Zn=this.g.Z();if(!(3>Ar)&&(Ar!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Ar!=4||I==7||(I==8||0>=Zn?jr(3):jr(2)),Ho(this);var D=this.g.Z();this.X=D;t:if(eh(this)){var K=Iu(this.g);p="";var Se=K.length,Pe=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),Ws(this);var it="";break t}this.h.i=new u.TextDecoder}for(I=0;I<Se;I++)this.h.h=!0,p+=this.h.i.decode(K[I],{stream:!(Pe&&I==Se-1)});K.length=0,this.h.g+=p,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=D==200,Pr(this.i,this.u,this.A,this.l,this.R,Ar,D),this.o){if(this.T&&!this.K){t:{if(this.g){var qt,Or=this.g;if((qt=Or.g?Or.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(qt)){var Lt=qt;break t}}Lt=null}if(D=Lt)Nr(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eu(this,D);else{this.o=!1,this.s=3,X(12),Jn(this),Ws(this);break e}}if(this.P){D=!0;let qn;for(;!this.J&&this.C<it.length;)if(qn=ep(this,it),qn==rn){Ar==4&&(this.s=4,X(14),D=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==jn){this.s=4,X(15),Nr(this.i,this.l,it,"[Invalid Chunk]"),D=!1;break}else Nr(this.i,this.l,qn,null),Eu(this,qn);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ar!=4||it.length!=0||this.h.h||(this.s=1,X(16),D=!1),this.o=this.o&&D,!D)Nr(this.i,this.l,it,"[Invalid Chunked Response]"),Jn(this),Ws(this);else if(0<it.length&&!this.W){this.W=!0;var $r=this.j;$r.g==this&&$r.ba&&!$r.M&&($r.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),Ru($r),$r.M=!0,X(11))}}else Nr(this.i,this.l,it,null),Eu(this,it);Ar==4&&Jn(this),this.o&&!this.J&&(Ar==4?al(this.j,this):(this.o=!1,Jt(this)))}else rl(this.g),D==400&&0<it.indexOf("Unknown SID")?(this.s=3,X(12)):(this.s=0,X(13)),Jn(this),Ws(this)}}}catch{}finally{}};function eh(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function ep(p,I){var D=p.C,K=I.indexOf(`
`,D);return K==-1?rn:(D=Number(I.substring(D,K)),isNaN(D)?jn:(K+=1,K+D>I.length?rn:(I=I.slice(K,K+D),p.C=K+D,I)))}gn.prototype.cancel=function(){this.J=!0,Jn(this)};function Jt(p){p.S=Date.now()+p.I,th(p,p.I)}function th(p,I){if(p.B!=null)throw Error("WatchDog timer not null");p.B=rt(y(p.ba,p),I)}function Ho(p){p.B&&(u.clearTimeout(p.B),p.B=null)}gn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(zs(this.i,this.A),this.L!=2&&(jr(),X(17)),Jn(this),this.s=2,Ws(this)):th(this,this.S-p)};function Ws(p){p.j.G==0||p.J||al(p.j,p)}function Jn(p){Ho(p);var I=p.M;I&&typeof I.ma=="function"&&I.ma(),p.M=null,et(p.U),p.g&&(I=p.g,p.g=null,I.abort(),I.ma())}function Eu(p,I){try{var D=p.j;if(D.G!=0&&(D.g==p||yn(D.h,p))){if(!p.K&&yn(D.h,p)&&D.G==3){try{var K=D.Da.g.parse(I)}catch{K=null}if(Array.isArray(K)&&K.length==3){var Se=K;if(Se[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<p.F)ol(D),gi(D);else break e;sl(D),X(18)}}else D.za=Se[1],0<D.za-D.T&&37500>Se[2]&&D.F&&D.v==0&&!D.C&&(D.C=rt(y(D.Za,D),6e3));if(1>=nh(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else hs(D,11)}else if((p.K||D.g==p)&&ol(D),!x(I))for(Se=D.Da.g.parse(I),I=0;I<Se.length;I++){let Lt=Se[I];if(D.T=Lt[0],Lt=Lt[1],D.G==2)if(Lt[0]=="c"){D.K=Lt[1],D.ia=Lt[2];const $r=Lt[3];$r!=null&&(D.la=$r,D.j.info("VER="+D.la));const Ar=Lt[4];Ar!=null&&(D.Aa=Ar,D.j.info("SVER="+D.Aa));const Zn=Lt[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(K=1.5*Zn,D.L=K,D.j.info("backChannelRequestTimeoutMs_="+K)),K=D;const qn=p.g;if(qn){const Zo=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var Pe=K.h;Pe.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Su(Pe,Pe.h),Pe.h=null))}if(K.D){const ul=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(K.ya=ul,Yt(K.I,K.D,ul))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-p.F,D.j.info("Handshake RTT: "+D.R+"ms")),K=D;var it=p;if(K.qa=gh(K,K.J?K.ia:null,K.W),it.K){ih(K.h,it);var qt=it,Or=K.L;Or&&(qt.I=Or),qt.B&&(Ho(qt),Jt(qt)),K.g=it}else Xo(K);0<D.i.length&&Bi(D)}else Lt[0]!="stop"&&Lt[0]!="close"||hs(D,7);else D.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?hs(D,7):Yr(D):Lt[0]!="noop"&&D.l&&D.l.ta(Lt),D.v=0)}}jr(4)}catch{}}var rh=class{constructor(p,I){this.g=p,this.map=I}};function Qo(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $n(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function nh(p){return p.h?1:p.g?p.g.size:0}function yn(p,I){return p.h?p.h==I:p.g?p.g.has(I):!1}function Su(p,I){p.g?p.g.add(I):p.h=I}function ih(p,I){p.h&&p.h==I?p.h=null:p.g&&p.g.has(I)&&p.g.delete(I)}Qo.prototype.cancel=function(){if(this.i=sh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function sh(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let I=p.i;for(const D of p.g.values())I=I.concat(D.D);return I}return S(p.i)}function Ja(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var I=[],D=p.length,K=0;K<D;K++)I.push(p[K]);return I}I=[],D=0;for(K in p)I[D++]=p[K];return I}function Xa(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var I=[];p=p.length;for(var D=0;D<p;D++)I.push(D);return I}I=[],D=0;for(const K in p)I[D++]=K;return I}}}function qs(p,I){if(p.forEach&&typeof p.forEach=="function")p.forEach(I,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,I,void 0);else for(var D=Xa(p),K=Ja(p),Se=K.length,Pe=0;Pe<Se;Pe++)I.call(void 0,K[Pe],D&&D[Pe],p)}var Ko=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tp(p,I){if(p){p=p.split("&");for(var D=0;D<p.length;D++){var K=p[D].indexOf("="),Se=null;if(0<=K){var Pe=p[D].substring(0,K);Se=p[D].substring(K+1)}else Pe=p[D];I(Pe,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function as(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof as){this.h=p.h,Go(this,p.j),this.o=p.o,this.g=p.g,Hs(this,p.s),this.l=p.l;var I=p.i,D=new Fi;D.i=I.i,I.g&&(D.g=new Map(I.g),D.h=I.h),Qs(this,D),this.m=p.m}else p&&(I=String(p).match(Ko))?(this.h=!1,Go(this,I[1]||"",!0),this.o=Ot(I[2]||""),this.g=Ot(I[3]||"",!0),Hs(this,I[4]),this.l=Ot(I[5]||"",!0),Qs(this,I[6]||"",!0),this.m=Ot(I[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}as.prototype.toString=function(){var p=[],I=this.j;I&&p.push(Gs(I,Za,!0),":");var D=this.g;return(D||I=="file")&&(p.push("//"),(I=this.o)&&p.push(Gs(I,Za,!0),"@"),p.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&p.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(Gs(D,D.charAt(0)=="/"?lh:ah,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",Gs(D,Tu)),p.join("")};function zn(p){return new as(p)}function Go(p,I,D){p.j=D?Ot(I,!0):I,p.j&&(p.j=p.j.replace(/:$/,""))}function Hs(p,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);p.s=I}else p.s=null}function Qs(p,I,D){I instanceof Fi?(p.i=I,Vi(p.i,p.h)):(D||(I=Gs(I,uh)),p.i=new Fi(I,p.h))}function Yt(p,I,D){p.i.set(I,D)}function Ks(p){return Yt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Ot(p,I){return p?I?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Gs(p,I,D){return typeof p=="string"?(p=encodeURI(p).replace(I,oh),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function oh(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Za=/[#\/\?@]/g,ah=/[#\?:]/g,lh=/[#\?]/g,uh=/[#\?@]/g,Tu=/#/g;function Fi(p,I){this.h=this.g=null,this.i=p||null,this.j=!!I}function Gr(p){p.g||(p.g=new Map,p.h=0,p.i&&tp(p.i,function(I,D){p.add(decodeURIComponent(I.replace(/\+/g," ")),D)}))}r=Fi.prototype,r.add=function(p,I){Gr(this),this.i=null,p=Xn(this,p);var D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(I),this.h+=1,this};function fi(p,I){Gr(p),I=Xn(p,I),p.g.has(I)&&(p.i=null,p.h-=p.g.get(I).length,p.g.delete(I))}function di(p,I){return Gr(p),I=Xn(p,I),p.g.has(I)}r.forEach=function(p,I){Gr(this),this.g.forEach(function(D,K){D.forEach(function(Se){p.call(I,Se,K,this)},this)},this)},r.na=function(){Gr(this);const p=Array.from(this.g.values()),I=Array.from(this.g.keys()),D=[];for(let K=0;K<I.length;K++){const Se=p[K];for(let Pe=0;Pe<Se.length;Pe++)D.push(I[K])}return D},r.V=function(p){Gr(this);let I=[];if(typeof p=="string")di(this,p)&&(I=I.concat(this.g.get(Xn(this,p))));else{p=Array.from(this.g.values());for(let D=0;D<p.length;D++)I=I.concat(p[D])}return I},r.set=function(p,I){return Gr(this),this.i=null,p=Xn(this,p),di(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[I]),this.h+=1,this},r.get=function(p,I){return p?(p=this.V(p),0<p.length?String(p[0]):I):I};function Ys(p,I,D){fi(p,I),0<D.length&&(p.i=null,p.g.set(Xn(p,I),S(D)),p.h+=D.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],I=Array.from(this.g.keys());for(var D=0;D<I.length;D++){var K=I[D];const Pe=encodeURIComponent(String(K)),it=this.V(K);for(K=0;K<it.length;K++){var Se=Pe;it[K]!==""&&(Se+="="+encodeURIComponent(String(it[K]))),p.push(Se)}}return this.i=p.join("&")};function Xn(p,I){return I=String(I),p.j&&(I=I.toLowerCase()),I}function Vi(p,I){I&&!p.j&&(Gr(p),p.i=null,p.g.forEach(function(D,K){var Se=K.toLowerCase();K!=Se&&(fi(this,K),Ys(this,Se,D))},p)),p.j=I}function rp(p,I){const D=new st;if(u.Image){const K=new Image;K.onload=_(Cn,D,"TestLoadImage: loaded",!0,I,K),K.onerror=_(Cn,D,"TestLoadImage: error",!1,I,K),K.onabort=_(Cn,D,"TestLoadImage: abort",!1,I,K),K.ontimeout=_(Cn,D,"TestLoadImage: timeout",!1,I,K),u.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=p}else I(!1)}function ch(p,I){const D=new st,K=new AbortController,Se=setTimeout(()=>{K.abort(),Cn(D,"TestPingServer: timeout",!1,I)},1e4);fetch(p,{signal:K.signal}).then(Pe=>{clearTimeout(Se),Pe.ok?Cn(D,"TestPingServer: ok",!0,I):Cn(D,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Se),Cn(D,"TestPingServer: error",!1,I)})}function Cn(p,I,D,K,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),K(D)}catch{}}function np(){this.g=new mt}function hh(p,I,D){const K=D||"";try{qs(p,function(Se,Pe){let it=Se;h(Se)&&(it=ft(Se)),I.push(K+Pe+"="+encodeURIComponent(it))})}catch(Se){throw I.push(K+"type="+encodeURIComponent("_badmap")),Se}}function ls(p){this.l=p.Ub||null,this.j=p.eb||!1}b(ls,_r),ls.prototype.g=function(){return new Yo(this.l,this.j)},ls.prototype.i=function(p){return function(){return p}}({});function Yo(p,I){v.call(this),this.D=p,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Yo,v),r=Yo.prototype,r.open=function(p,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=I,this.readyState=1,mi(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(I.body=p),(this.D||u).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},r.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fh(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function fh(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}r.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var I=p.value?p.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!p.done}))&&(this.response=this.responseText+=I)}p.done?pi(this):mi(this),this.readyState==3&&fh(this)}},r.Ra=function(p){this.g&&(this.response=this.responseText=p,pi(this))},r.Qa=function(p){this.g&&(this.response=p,pi(this))},r.ga=function(){this.g&&pi(this)};function pi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,mi(p)}r.setRequestHeader=function(p,I){this.u.append(p,I)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],I=this.h.entries();for(var D=I.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=I.next();return p.join(`\r
`)};function mi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function us(p){let I="";return $(p,function(D,K){I+=K,I+=":",I+=D,I+=`\r
`}),I}function Js(p,I,D){e:{for(K in D){var K=!1;break e}K=!0}K||(D=us(D),typeof p=="string"?D!=null&&encodeURIComponent(String(D)):Yt(p,I,D))}function ir(p){v.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ir,v);var ip=/^https?$/i,xu=["POST","PUT"];r=ir.prototype,r.Ha=function(p){this.J=p},r.ea=function(p,I,D,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);I=I?I.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mn.g(),this.v=this.o?wr(this.o):wr(mn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(I,String(p),!0),this.B=!1}catch(Pe){Jo(this,Pe);return}if(p=D||"",D=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var Se in K)D.set(Se,K[Se]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const Pe of K.keys())D.set(Pe,K.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(D.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),Se=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(xu,I,void 0))||K||Se||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,it]of D)this.g.setRequestHeader(Pe,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tl(this),this.u=!0,this.g.send(p),this.u=!1}catch(Pe){Jo(this,Pe)}};function Jo(p,I){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=I,p.m=5,el(p),Wn(p)}function el(p){p.A||(p.A=!0,w(p,"complete"),w(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,w(this,"complete"),w(this,"abort"),Wn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wn(this,!0)),ir.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Au(this):this.bb())},r.bb=function(){Au(this)};function Au(p){if(p.h&&typeof l<"u"&&(!p.v[1]||Rn(p)!=4||p.Z()!=2)){if(p.u&&Rn(p)==4)U(p.Ea,0,p);else if(w(p,"readystatechange"),Rn(p)==4){p.h=!1;try{const it=p.Z();e:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var D;if(!(D=I)){var K;if(K=it===0){var Se=String(p.D).match(Ko)[1]||null;!Se&&u.self&&u.self.location&&(Se=u.self.location.protocol.slice(0,-1)),K=!ip.test(Se?Se.toLowerCase():"")}D=K}if(D)w(p,"complete"),w(p,"success");else{p.m=6;try{var Pe=2<Rn(p)?p.g.statusText:""}catch{Pe=""}p.l=Pe+" ["+p.Z()+"]",el(p)}}finally{Wn(p)}}}}function Wn(p,I){if(p.g){tl(p);const D=p.g,K=p.v[0]?()=>{}:null;p.g=null,p.v=null,I||w(p,"ready");try{D.onreadystatechange=K}catch{}}}function tl(p){p.I&&(u.clearTimeout(p.I),p.I=null)}r.isActive=function(){return!!this.g};function Rn(p){return p.g?p.g.readyState:0}r.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(p){if(this.g){var I=this.g.responseText;return p&&I.indexOf(p)==0&&(I=I.substring(p.length)),bt(I)}};function Iu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function rl(p){const I={};p=(p.g&&2<=Rn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<p.length;K++){if(x(p[K]))continue;var D=W(p[K]);const Se=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Pe=I[Se]||[];I[Se]=Pe,Pe.push(D)}P(I,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(p,I,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||I}function Cu(p){this.Aa=0,this.i=[],this.j=new st,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,p),this.cb=Ui("retryDelaySeedMs",1e4,p),this.Wa=Ui("forwardChannelMaxRetries",2,p),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Qo(p&&p.concurrentRequestLimit),this.Da=new np,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Cu.prototype,r.la=8,r.G=1,r.connect=function(p,I,D,K){X(0),this.W=p,this.H=I||{},D&&K!==void 0&&(this.H.OSID=D,this.H.OAID=K),this.F=this.X,this.I=gh(this,null,this.W),Bi(this)};function Yr(p){if(nl(p),p.G==3){var I=p.U++,D=zn(p.I);if(Yt(D,"SID",p.K),Yt(D,"RID",I),Yt(D,"TYPE","terminate"),cs(p,D),I=new gn(p,p.j,I),I.L=2,I.v=Ks(zn(D)),D=!1,u.navigator&&u.navigator.sendBeacon)try{D=u.navigator.sendBeacon(I.v.toString(),"")}catch{}!D&&u.Image&&(new Image().src=I.v,D=!0),D||(I.g=yh(I.j,null),I.g.ea(I.v)),I.F=Date.now(),Jt(I)}mh(p)}function gi(p){p.g&&(Ru(p),p.g.cancel(),p.g=null)}function nl(p){gi(p),p.u&&(u.clearTimeout(p.u),p.u=null),ol(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Bi(p){if(!$n(p.h)&&!p.s){p.s=!0;var I=p.Ga;Ie||B(),he||(Ie(),he=!0),Re.add(I,p),p.B=0}}function sp(p,I){return nh(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=I.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=rt(y(p.Ga,p,I),ph(p,p.B)),p.B++,!0)}r.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Se=new gn(this,this.j,p);let Pe=this.o;if(this.S&&(Pe?(Pe=R(Pe),M(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(Se.H=Pe,Pe=null),this.P)e:{for(var I=0,D=0;D<this.i.length;D++){t:{var K=this.i[D];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(I+=K,4096<I){I=D;break e}if(I===4096||D===this.i.length-1){I=D+1;break e}}I=1e3}else I=1e3;I=Xs(this,Se,I),D=zn(this.I),Yt(D,"RID",p),Yt(D,"CVER",22),this.D&&Yt(D,"X-HTTP-Session-Id",this.D),cs(this,D),Pe&&(this.O?I="headers="+encodeURIComponent(String(us(Pe)))+"&"+I:this.m&&Js(D,this.m,Pe)),Su(this.h,Se),this.Ua&&Yt(D,"TYPE","init"),this.P?(Yt(D,"$req",I),Yt(D,"SID","null"),Se.T=!0,Ya(Se,D,null)):Ya(Se,D,I),this.G=2}}else this.G==3&&(p?il(this,p):this.i.length==0||$n(this.h)||il(this))};function il(p,I){var D;I?D=I.l:D=p.U++;const K=zn(p.I);Yt(K,"SID",p.K),Yt(K,"RID",D),Yt(K,"AID",p.T),cs(p,K),p.m&&p.o&&Js(K,p.m,p.o),D=new gn(p,p.j,D,p.B+1),p.m===null&&(D.H=p.o),I&&(p.i=I.D.concat(p.i)),I=Xs(p,D,1e3),D.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Su(p.h,D),Ya(D,K,I)}function cs(p,I){p.H&&$(p.H,function(D,K){Yt(I,K,D)}),p.l&&qs({},function(D,K){Yt(I,K,D)})}function Xs(p,I,D){D=Math.min(p.i.length,D);var K=p.l?y(p.l.Na,p.l,p):null;e:{var Se=p.i;let Pe=-1;for(;;){const it=["count="+D];Pe==-1?0<D?(Pe=Se[0].g,it.push("ofs="+Pe)):Pe=0:it.push("ofs="+Pe);let qt=!0;for(let Or=0;Or<D;Or++){let Lt=Se[Or].g;const $r=Se[Or].map;if(Lt-=Pe,0>Lt)Pe=Math.max(0,Se[Or].g-100),qt=!1;else try{hh($r,it,"req"+Lt+"_")}catch{K&&K($r)}}if(qt){K=it.join("&");break e}}}return p=p.i.splice(0,D),I.D=p,K}function Xo(p){if(!p.g&&!p.u){p.Y=1;var I=p.Fa;Ie||B(),he||(Ie(),he=!0),Re.add(I,p),p.v=0}}function sl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=rt(y(p.Fa,p),ph(p,p.v)),p.v++,!0)}r.Fa=function(){if(this.u=null,dh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=rt(y(this.ab,this),p)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,X(10),gi(this),dh(this))};function Ru(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function dh(p){p.g=new gn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var I=zn(p.qa);Yt(I,"RID","rpc"),Yt(I,"SID",p.K),Yt(I,"AID",p.T),Yt(I,"CI",p.F?"0":"1"),!p.F&&p.ja&&Yt(I,"TO",p.ja),Yt(I,"TYPE","xmlhttp"),cs(p,I),p.m&&p.o&&Js(I,p.m,p.o),p.L&&(p.g.I=p.L);var D=p.g;p=p.ia,D.L=1,D.v=Ks(zn(I)),D.m=null,D.P=!0,bu(D,p)}r.Za=function(){this.C!=null&&(this.C=null,gi(this),sl(this),X(19))};function ol(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function al(p,I){var D=null;if(p.g==I){ol(p),Ru(p),p.g=null;var K=2}else if(yn(p.h,I))D=I.D,ih(p.h,I),K=1;else return;if(p.G!=0){if(I.o)if(K==1){D=I.m?I.m.length:0,I=Date.now()-I.F;var Se=p.B;K=Gt(),w(K,new Ye(K,D)),Bi(p)}else Xo(p);else if(Se=I.s,Se==3||Se==0&&0<I.X||!(K==1&&sp(p,I)||K==2&&sl(p)))switch(D&&0<D.length&&(I=p.h,I.i=I.i.concat(D)),Se){case 1:hs(p,5);break;case 4:hs(p,10);break;case 3:hs(p,6);break;default:hs(p,2)}}}function ph(p,I){let D=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(D*=2),D*I}function hs(p,I){if(p.j.info("Error code "+I),I==2){var D=y(p.fb,p),K=p.Xa;const Se=!K;K=new as(K||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Go(K,"https"),Ks(K),Se?rp(K.toString(),D):ch(K.toString(),D)}else X(2);p.G=0,p.l&&p.l.sa(I),mh(p),nl(p)}r.fb=function(p){p?(this.j.info("Successfully pinged google.com"),X(2)):(this.j.info("Failed to ping google.com"),X(1))};function mh(p){if(p.G=0,p.ka=[],p.l){const I=sh(p.h);(I.length!=0||p.i.length!=0)&&(T(p.ka,I),T(p.ka,p.i),p.h.i.length=0,S(p.i),p.i.length=0),p.l.ra()}}function gh(p,I,D){var K=D instanceof as?zn(D):new as(D);if(K.g!="")I&&(K.g=I+"."+K.g),Hs(K,K.s);else{var Se=u.location;K=Se.protocol,I=I?I+"."+Se.hostname:Se.hostname,Se=+Se.port;var Pe=new as(null);K&&Go(Pe,K),I&&(Pe.g=I),Se&&Hs(Pe,Se),D&&(Pe.l=D),K=Pe}return D=p.D,I=p.ya,D&&I&&Yt(K,D,I),Yt(K,"VER",p.la),cs(p,K),K}function yh(p,I,D){if(I&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=p.Ca&&!p.pa?new ir(new ls({eb:D})):new ir(p.pa),I.Ha(p.J),I}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}r=ku.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ll(){}ll.prototype.g=function(p,I){return new vn(p,I)};function vn(p,I){v.call(this),this.g=new Cu(I),this.l=p,this.h=I&&I.messageUrlParams||null,p=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(p?p["X-WebChannel-Content-Type"]=I.messageContentType:p={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(p?p["X-WebChannel-Client-Profile"]=I.va:p={"X-WebChannel-Client-Profile":I.va}),this.g.S=p,(p=I&&I.Sb)&&!x(p)&&(this.g.m=p),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!x(I)&&(this.g.D=I,p=this.h,p!==null&&I in p&&(p=this.h,I in p&&delete p[I])),this.j=new ji(this)}b(vn,v),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Yr(this.g)},vn.prototype.o=function(p){var I=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.u&&(D={},D.__data__=ft(p),p=D);I.i.push(new rh(I.Ya++,p)),I.G==3&&Bi(I)},vn.prototype.N=function(){this.g.l=null,delete this.j,Yr(this.g),delete this.g,vn.aa.N.call(this)};function vh(p){Wt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var I=p.__sm__;if(I){e:{for(const D in I){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,I=I!==null&&p in I?I[p]:void 0),this.data=I}else this.data=p}b(vh,Wt);function _h(){gt.call(this),this.status=1}b(_h,gt);function ji(p){this.g=p}b(ji,ku),ji.prototype.ua=function(){w(this.g,"a")},ji.prototype.ta=function(p){w(this.g,new vh(p))},ji.prototype.sa=function(p){w(this.g,new _h)},ji.prototype.ra=function(){w(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,qS=function(){return new ll},WS=function(){return Gt()},zS=Rt,Og={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,Nf=os,qo.COMPLETE="complete",$S=qo,xr.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",v.prototype.listen=v.prototype.K,lc=xr,ir.prototype.listenOnce=ir.prototype.L,ir.prototype.getLastError=ir.prototype.Ka,ir.prototype.getLastErrorCode=ir.prototype.Ba,ir.prototype.getStatus=ir.prototype.Z,ir.prototype.getResponseJson=ir.prototype.Oa,ir.prototype.getResponseText=ir.prototype.oa,ir.prototype.send=ir.prototype.ea,ir.prototype.setWithCredentials=ir.prototype.Ha,jS=ir}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});const Ib="@firebase/firestore",Cb="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new DS("@firebase/firestore");function Nl(){return ja.logLevel}function at(r,...e){if(ja.logLevel<=Ft.DEBUG){const t=e.map(Dv);ja.debug(`Firestore (${du}): ${r}`,...t)}}function Ms(r,...e){if(ja.logLevel<=Ft.ERROR){const t=e.map(Dv);ja.error(`Firestore (${du}): ${r}`,...t)}}function eu(r,...e){if(ja.logLevel<=Ft.WARN){const t=e.map(Dv);ja.warn(`Firestore (${du}): ${r}`,...t)}}function Dv(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r="Unexpected state"){const e=`FIRESTORE (${du}) INTERNAL ASSERTION FAILED: `+r;throw Ms(e),new Error(e)}function zt(r,e){r||Et()}function xt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends fu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class AO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IO{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){zt(this.o===void 0);let n=this.i;const s=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve();let o=new Oa;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Oa,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Oa)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(zt(typeof n.accessToken=="string"),new HS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zt(e===null||typeof e=="string"),new fn(e)}}class CO{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class RO{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new CO(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kO{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,lO(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){zt(this.o===void 0);const n=o=>{o.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,at("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const s=o=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Rb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(zt(typeof t.token=="string"),this.R=t.token,new Rb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=PO(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function It(r,e){return r<e?-1:r>e?1:0}function Dg(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),s=e.codePointAt(t);if(n!==s){if(n<128&&s<128)return It(n,s);{const o=QS(),l=NO(o.encode(kb(r,t)),o.encode(kb(e,t)));return l!==0?l:It(n,s)}}t+=n>65535?2:1}return It(r.length,e.length)}function kb(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function NO(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return It(r[t],e[t]);return It(r.length,e.length)}function tu(r,e,t){return r.length===e.length&&r.every((n,s)=>t(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=-62135596800,Nb=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Nb);return new Ur(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yt(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yt(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Pb)throw new yt(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nb}_compareTo(e){return this.seconds===e.seconds?It(this.nanoseconds,e.nanoseconds):It(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Pb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Ur(0,0))}static max(){return new Tt(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="__name__";class Ki{constructor(e,t,n){t===void 0?t=0:t>e.length&&Et(),n===void 0?n=e.length-t:n>e.length-t&&Et(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Ki.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return It(e.length,t.length)}static compareSegments(e,t){const n=Ki.isNumericId(e),s=Ki.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Ki.extractNumericId(e).compare(Ki.extractNumericId(t)):Dg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Do.fromString(e.substring(4,e.length-2))}}class ur extends Ki{construct(e,t,n){return new ur(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new yt(Je.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new ur(t)}static emptyPath(){return new ur([])}}const OO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ki{construct(e,t,n){return new en(e,t,n)}static isValidIdentifier(e){return OO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ob}static keyField(){return new en([Ob])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new yt(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new yt(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new yt(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(n+=u,s++):(o(),s++)}if(o(),l)throw new yt(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.path=e}static fromPath(e){return new wt(ur.fromString(e))}static fromName(e){return new wt(ur.fromString(e).popFirst(5))}static empty(){return new wt(ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ur.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ur.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new ur(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-1;function DO(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=Tt.fromTimestamp(n===1e9?new Ur(t+1,0):new Ur(t,n));return new Mo(s,wt.empty(),e)}function LO(r){return new Mo(r.readTime,r.key,kc)}class Mo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Mo(Tt.min(),wt.empty(),kc)}static max(){return new Mo(Tt.max(),wt.empty(),kc)}}function MO(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=wt.comparator(r.documentKey,e.documentKey),t!==0?t:It(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(r){if(r.code!==Je.FAILED_PRECONDITION||r.message!==FO)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new We((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof We?t:We.resolve(t)}catch(t){return We.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):We.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):We.reject(t)}static resolve(e){return new We((t,n)=>{t(e)})}static reject(e){return new We((t,n)=>{n(e)})}static waitFor(e){return new We((t,n)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&t()},c=>n(c))}),l=!0,o===s&&t()})}static or(e){let t=We.resolve(!1);for(const n of e)t=t.next(s=>s?We.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,o)=>{n.push(t.call(this,s,o))}),this.waitFor(n)}static mapArray(e,t){return new We((n,s)=>{const o=e.length,l=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;t(e[h]).next(d=>{l[h]=d,++u,u===o&&n(l)},d=>s(d))}})}static doWhile(e,t){return new We((n,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):n()};o()})}}function UO(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Dd.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=-1;function Ld(r){return r==null}function nd(r){return r===0&&1/r==-1/0}function BO(r){return typeof r=="number"&&Number.isInteger(r)&&!nd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="";function jO(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Db(e)),e=$O(r.get(t),e);return Db(e)}function $O(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case GS:t+="";break;default:t+=o}}return t}function Db(r){return r+GS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function za(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function YS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yf(this.root,e,this.comparator,!0)}}class yf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Zr.RED,this.left=s??Zr.EMPTY,this.right=o??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Zr(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Zr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1;Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(e,t,n,s,o){return this}insert(e,t,n){return new Zr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mb(this.data.getIterator())}getIteratorFrom(e){return new Mb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Br(this.comparator);return t.data=e,t}}class Mb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new ki([])}unionWith(e){let t=new Br(en.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ki(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JS("Invalid base64 string: "+o):o}}(e);return new tn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return It(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const zO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(r){if(zt(!!r),typeof r=="string"){let e=0;const t=zO.exec(r);if(zt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Sr(r.seconds),nanos:Sr(r.nanos)}}function Sr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Vo(r){return typeof r=="string"?tn.fromBase64String(r):tn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="server_timestamp",ZS="__type__",eT="__previous_value__",tT="__local_write_time__";function Mv(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZS])===null||t===void 0?void 0:t.stringValue)===XS}function Md(r){const e=r.mapValue.fields[eT];return Mv(e)?Md(e):e}function Pc(r){const e=Fo(r.mapValue.fields[tT].timestampValue);return new Ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,t,n,s,o,l,u,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const id="(default)";class Nc{constructor(e,t){this.projectId=e,this.database=t||id}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="__type__",qO="__max__",vf={mapValue:{}},nT="__vector__",sd="value";function Uo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mv(r)?4:QO(r)?9007199254740991:HO(r)?10:11:Et()}function is(r,e){if(r===e)return!0;const t=Uo(r);if(t!==Uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Pc(r).isEqual(Pc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Fo(s.timestampValue),u=Fo(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(s,o){return Vo(s.bytesValue).isEqual(Vo(o.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,o){return Sr(s.geoPointValue.latitude)===Sr(o.geoPointValue.latitude)&&Sr(s.geoPointValue.longitude)===Sr(o.geoPointValue.longitude)}(r,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Sr(s.integerValue)===Sr(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Sr(s.doubleValue),u=Sr(o.doubleValue);return l===u?nd(l)===nd(u):isNaN(l)&&isNaN(u)}return!1}(r,e);case 9:return tu(r.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Lb(l)!==Lb(u))return!1;for(const c in l)if(l.hasOwnProperty(c)&&(u[c]===void 0||!is(l[c],u[c])))return!1;return!0}(r,e);default:return Et()}}function Oc(r,e){return(r.values||[]).find(t=>is(t,e))!==void 0}function ru(r,e){if(r===e)return 0;const t=Uo(r),n=Uo(e);if(t!==n)return It(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return It(r.booleanValue,e.booleanValue);case 2:return function(o,l){const u=Sr(o.integerValue||o.doubleValue),c=Sr(l.integerValue||l.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(r,e);case 3:return Fb(r.timestampValue,e.timestampValue);case 4:return Fb(Pc(r),Pc(e));case 5:return Dg(r.stringValue,e.stringValue);case 6:return function(o,l){const u=Vo(o),c=Vo(l);return u.compareTo(c)}(r.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),c=l.split("/");for(let h=0;h<u.length&&h<c.length;h++){const d=It(u[h],c[h]);if(d!==0)return d}return It(u.length,c.length)}(r.referenceValue,e.referenceValue);case 8:return function(o,l){const u=It(Sr(o.latitude),Sr(l.latitude));return u!==0?u:It(Sr(o.longitude),Sr(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Vb(r.arrayValue,e.arrayValue);case 10:return function(o,l){var u,c,h,d;const m=o.fields||{},y=l.fields||{},_=(u=m[sd])===null||u===void 0?void 0:u.arrayValue,b=(c=y[sd])===null||c===void 0?void 0:c.arrayValue,S=It(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:Vb(_,b)}(r.mapValue,e.mapValue);case 11:return function(o,l){if(o===vf.mapValue&&l===vf.mapValue)return 0;if(o===vf.mapValue)return 1;if(l===vf.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=l.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const y=Dg(c[m],d[m]);if(y!==0)return y;const _=ru(u[c[m]],h[d[m]]);if(_!==0)return _}return It(c.length,d.length)}(r.mapValue,e.mapValue);default:throw Et()}}function Fb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return It(r,e);const t=Fo(r),n=Fo(e),s=It(t.seconds,n.seconds);return s!==0?s:It(t.nanos,n.nanos)}function Vb(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=ru(t[s],n[s]);if(o)return o}return It(t.length,n.length)}function nu(r){return Lg(r)}function Lg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Fo(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Vo(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return wt.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=Lg(o);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of n)o?o=!1:s+=",",s+=`${l}:${Lg(t.fields[l])}`;return s+"}"}(r.mapValue):Et()}function Of(r){switch(Uo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Md(r);return e?16+Of(e):16;case 5:return 2*r.stringValue.length;case 6:return Vo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,o)=>s+Of(o),0)}(r.arrayValue);case 10:case 11:return function(n){let s=0;return za(n.fields,(o,l)=>{s+=o.length+Of(l)}),s}(r.mapValue);default:throw Et()}}function Mg(r){return!!r&&"integerValue"in r}function Fv(r){return!!r&&"arrayValue"in r}function Ub(r){return!!r&&"nullValue"in r}function Bb(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Df(r){return!!r&&"mapValue"in r}function HO(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[rT])===null||t===void 0?void 0:t.stringValue)===nT}function mc(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return za(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=mc(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mc(r.arrayValue.values[t]);return e}return Object.assign({},r)}function QO(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===qO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(t)}setAll(e){let t=en.emptyPath(),n={},s=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,n,s),n={},s=[],t=u.popLast()}l?n[u.lastSegment()]=mc(l):s.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());Df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Df(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){za(t,(s,o)=>e[s]=o);for(const s of n)delete e[s]}clone(){return new ui(mc(this.value))}}function iT(r){const e=[];return za(r.fields,(t,n)=>{const s=new en([t]);if(Df(n)){const o=iT(n.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new ki(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,n,s,o,l,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new dn(e,0,Tt.min(),Tt.min(),Tt.min(),ui.empty(),0)}static newFoundDocument(e,t,n,s){return new dn(e,1,t,Tt.min(),n,s,0)}static newNoDocument(e,t){return new dn(e,2,t,Tt.min(),Tt.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Tt.min(),Tt.min(),ui.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.position=e,this.inclusive=t}}function jb(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],l=r.position[s];if(o.field.isKeyField()?n=wt.comparator(wt.fromName(l.referenceValue),t.key):n=ru(l,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function $b(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!is(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t="asc"){this.field=e,this.dir=t}}function KO(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{}class Vr extends sT{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new YO(e,t,n):t==="array-contains"?new ZO(e,n):t==="in"?new eD(e,n):t==="not-in"?new tD(e,n):t==="array-contains-any"?new rD(e,n):new Vr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new JO(e,n):new XO(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ru(t,this.value)):t!==null&&Uo(this.value)===Uo(t)&&this.matchesComparison(ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends sT{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ss(e,t)}matches(e){return oT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function oT(r){return r.op==="and"}function aT(r){return GO(r)&&oT(r)}function GO(r){for(const e of r.filters)if(e instanceof ss)return!1;return!0}function Fg(r){if(r instanceof Vr)return r.field.canonicalString()+r.op.toString()+nu(r.value);if(aT(r))return r.filters.map(e=>Fg(e)).join(",");{const e=r.filters.map(t=>Fg(t)).join(",");return`${r.op}(${e})`}}function lT(r,e){return r instanceof Vr?function(n,s){return s instanceof Vr&&n.op===s.op&&n.field.isEqual(s.field)&&is(n.value,s.value)}(r,e):r instanceof ss?function(n,s){return s instanceof ss&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((o,l,u)=>o&&lT(l,s.filters[u]),!0):!1}(r,e):void Et()}function uT(r){return r instanceof Vr?function(t){return`${t.field.canonicalString()} ${t.op} ${nu(t.value)}`}(r):r instanceof ss?function(t){return t.op.toString()+" {"+t.getFilters().map(uT).join(" ,")+"}"}(r):"Filter"}class YO extends Vr{constructor(e,t,n){super(e,t,n),this.key=wt.fromName(n.referenceValue)}matches(e){const t=wt.comparator(e.key,this.key);return this.matchesComparison(t)}}class JO extends Vr{constructor(e,t){super(e,"in",t),this.keys=cT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XO extends Vr{constructor(e,t){super(e,"not-in",t),this.keys=cT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cT(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>wt.fromName(n.referenceValue))}class ZO extends Vr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fv(t)&&Oc(t.arrayValue,this.value)}}class eD extends Vr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Oc(this.value.arrayValue,t)}}class tD extends Vr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Oc(this.value.arrayValue,t)}}class rD extends Vr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Oc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t=null,n=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function zb(r,e=null,t=[],n=[],s=null,o=null,l=null){return new nD(r,e,t,n,s,o,l)}function Vv(r){const e=xt(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>Fg(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),Ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>nu(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>nu(n)).join(",")),e.le=t}return e.le}function Uv(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!KO(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!lT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!$b(r.startAt,e.startAt)&&$b(r.endAt,e.endAt)}function Vg(r){return wt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t=null,n=[],s=[],o=null,l="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function iD(r,e,t,n,s,o,l,u){return new Fd(r,e,t,n,s,o,l,u)}function Bv(r){return new Fd(r)}function Wb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function sD(r){return r.collectionGroup!==null}function gc(r){const e=xt(r);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Br(en.comparator);return l.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new ad(o,n))}),t.has(en.keyField().canonicalString())||e.he.push(new ad(en.keyField(),n))}return e.he}function rs(r){const e=xt(r);return e.Pe||(e.Pe=oD(e,gc(r))),e.Pe}function oD(r,e){if(r.limitType==="F")return zb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new ad(s.field,o)});const t=r.endAt?new od(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new od(r.startAt.position,r.startAt.inclusive):null;return zb(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Ug(r,e,t){return new Fd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vd(r,e){return Uv(rs(r),rs(e))&&r.limitType===e.limitType}function hT(r){return`${Vv(rs(r))}|lt:${r.limitType}`}function Ol(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>uT(s)).join(", ")}]`),Ld(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>nu(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>nu(s)).join(",")),`Target(${n})`}(rs(r))}; limitType=${r.limitType})`}function Ud(r,e){return e.isFoundDocument()&&function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):wt.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(r,e)&&function(n,s){for(const o of gc(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(r,e)&&function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0}(r,e)&&function(n,s){return!(n.startAt&&!function(l,u,c){const h=jb(l,u,c);return l.inclusive?h<=0:h<0}(n.startAt,gc(n),s)||n.endAt&&!function(l,u,c){const h=jb(l,u,c);return l.inclusive?h>=0:h>0}(n.endAt,gc(n),s))}(r,e)}function aD(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fT(r){return(e,t)=>{let n=!1;for(const s of gc(r)){const o=lD(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function lD(r,e,t){const n=r.field.isKeyField()?wt.comparator(e.key,t.key):function(o,l,u){const c=l.data.field(o),h=u.data.field(o);return c!==null&&h!==null?ru(c,h):Et()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,(t,n)=>{for(const[s,o]of n)e(s,o)})}isEmpty(){return YS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new pr(wt.comparator);function Fs(){return uD}const dT=new pr(wt.comparator);function uc(...r){let e=dT;for(const t of r)e=e.insert(t.key,t);return e}function pT(r){let e=dT;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function _a(){return yc()}function mT(){return yc()}function yc(){return new Wa(r=>r.toString(),(r,e)=>r.isEqual(e))}const cD=new pr(wt.comparator),hD=new Br(wt.comparator);function Nt(...r){let e=hD;for(const t of r)e=e.add(t);return e}const fD=new Br(It);function dD(){return fD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function gT(r){return{integerValue:""+r}}function pD(r,e){return BO(e)?gT(e):jv(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(){this._=void 0}}function mD(r,e,t){return r instanceof ld?function(s,o){const l={fields:{[ZS]:{stringValue:XS},[tT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Mv(o)&&(o=Md(o)),o&&(l.fields[eT]=o),{mapValue:l}}(t,e):r instanceof Dc?vT(r,e):r instanceof Lc?_T(r,e):function(s,o){const l=yT(s,o),u=qb(l)+qb(s.Ie);return Mg(l)&&Mg(s.Ie)?gT(u):jv(s.serializer,u)}(r,e)}function gD(r,e,t){return r instanceof Dc?vT(r,e):r instanceof Lc?_T(r,e):t}function yT(r,e){return r instanceof ud?function(n){return Mg(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class ld extends Bd{}class Dc extends Bd{constructor(e){super(),this.elements=e}}function vT(r,e){const t=wT(e);for(const n of r.elements)t.some(s=>is(s,n))||t.push(n);return{arrayValue:{values:t}}}class Lc extends Bd{constructor(e){super(),this.elements=e}}function _T(r,e){let t=wT(e);for(const n of r.elements)t=t.filter(s=>!is(s,n));return{arrayValue:{values:t}}}class ud extends Bd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function qb(r){return Sr(r.integerValue||r.doubleValue)}function wT(r){return Fv(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function yD(r,e){return r.field.isEqual(e.field)&&function(n,s){return n instanceof Dc&&s instanceof Dc||n instanceof Lc&&s instanceof Lc?tu(n.elements,s.elements,is):n instanceof ud&&s instanceof ud?is(n.Ie,s.Ie):n instanceof ld&&s instanceof ld}(r.transform,e.transform)}class vD{constructor(e,t){this.version=e,this.transformResults=t}}class Ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ps}static exists(e){return new Ps(void 0,e)}static updateTime(e){return new Ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jd{}function bT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ST(r.key,Ps.none()):new Kc(r.key,r.data,Ps.none());{const t=r.data,n=ui.empty();let s=new Br(en.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?n.delete(o):n.set(o,l),s=s.add(o)}return new qa(r.key,n,new ki(s.toArray()),Ps.none())}}function _D(r,e,t){r instanceof Kc?function(s,o,l){const u=s.value.clone(),c=Qb(s.fieldTransforms,o,l.transformResults);u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(r,e,t):r instanceof qa?function(s,o,l){if(!Lf(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Qb(s.fieldTransforms,o,l.transformResults),c=o.data;c.setAll(ET(s)),c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(r,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function vc(r,e,t,n){return r instanceof Kc?function(o,l,u,c){if(!Lf(o.precondition,l))return u;const h=o.value.clone(),d=Kb(o.fieldTransforms,c,l);return h.setAll(d),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(r,e,t,n):r instanceof qa?function(o,l,u,c){if(!Lf(o.precondition,l))return u;const h=Kb(o.fieldTransforms,c,l),d=l.data;return d.setAll(ET(o)),d.setAll(h),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(r,e,t,n):function(o,l,u){return Lf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(r,e,t)}function wD(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=yT(n.transform,s||null);o!=null&&(t===null&&(t=ui.empty()),t.set(n.field,o))}return t||null}function Hb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&tu(n,s,(o,l)=>yD(o,l))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Kc extends jd{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qa extends jd{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ET(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Qb(r,e,t){const n=new Map;zt(r.length===t.length);for(let s=0;s<t.length;s++){const o=r[s],l=o.transform,u=e.data.field(o.field);n.set(o.field,gD(l,u,t[s]))}return n}function Kb(r,e,t){const n=new Map;for(const s of r){const o=s.transform,l=t.data.field(s.field);n.set(s.field,mD(o,l,e))}return n}class ST extends jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bD extends jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&_D(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=mT();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const c=bT(l,u);c!==null&&n.set(s.key,c),l.isValidDocument()||l.convertToNoDocument(Tt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,(t,n)=>Hb(t,n))&&tu(this.baseMutations,e.baseMutations,(t,n)=>Hb(t,n))}}class $v{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){zt(e.mutations.length===n.length);let s=function(){return cD}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,n[l].version);return new $v(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr,Mt;function xD(r){switch(r){case Je.OK:return Et();case Je.CANCELLED:case Je.UNKNOWN:case Je.DEADLINE_EXCEEDED:case Je.RESOURCE_EXHAUSTED:case Je.INTERNAL:case Je.UNAVAILABLE:case Je.UNAUTHENTICATED:return!1;case Je.INVALID_ARGUMENT:case Je.NOT_FOUND:case Je.ALREADY_EXISTS:case Je.PERMISSION_DENIED:case Je.FAILED_PRECONDITION:case Je.ABORTED:case Je.OUT_OF_RANGE:case Je.UNIMPLEMENTED:case Je.DATA_LOSS:return!0;default:return Et()}}function TT(r){if(r===void 0)return Ms("GRPC error has no .code"),Je.UNKNOWN;switch(r){case Cr.OK:return Je.OK;case Cr.CANCELLED:return Je.CANCELLED;case Cr.UNKNOWN:return Je.UNKNOWN;case Cr.DEADLINE_EXCEEDED:return Je.DEADLINE_EXCEEDED;case Cr.RESOURCE_EXHAUSTED:return Je.RESOURCE_EXHAUSTED;case Cr.INTERNAL:return Je.INTERNAL;case Cr.UNAVAILABLE:return Je.UNAVAILABLE;case Cr.UNAUTHENTICATED:return Je.UNAUTHENTICATED;case Cr.INVALID_ARGUMENT:return Je.INVALID_ARGUMENT;case Cr.NOT_FOUND:return Je.NOT_FOUND;case Cr.ALREADY_EXISTS:return Je.ALREADY_EXISTS;case Cr.PERMISSION_DENIED:return Je.PERMISSION_DENIED;case Cr.FAILED_PRECONDITION:return Je.FAILED_PRECONDITION;case Cr.ABORTED:return Je.ABORTED;case Cr.OUT_OF_RANGE:return Je.OUT_OF_RANGE;case Cr.UNIMPLEMENTED:return Je.UNIMPLEMENTED;case Cr.DATA_LOSS:return Je.DATA_LOSS;default:return Et()}}(Mt=Cr||(Cr={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=new Do([4294967295,4294967295],0);function Gb(r){const e=QS().encode(r),t=new BS;return t.update(e),new Uint8Array(t.digest())}function Yb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Do([t,n],0),new Do([s,o],0)]}class zv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(n<0)throw new cc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Do.fromNumber(this.Ee)}Ae(e,t,n){let s=e.add(t.multiply(Do.fromNumber(n)));return s.compare(AD)===1&&(s=new Do([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Gb(e),[n,s]=Yb(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(n,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new zv(o,s,t);return n.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=Gb(e),[n,s]=Yb(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(n,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new $d(Tt.min(),s,new pr(It),Fs(),Nt())}}class Gc{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Gc(n,t,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,n,s){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=s}}class xT{constructor(e,t){this.targetId=e,this.ge=t}}class AT{constructor(e,t,n=tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class Jb{constructor(){this.pe=0,this.ye=Xb(),this.we=tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Nt(),t=Nt(),n=Nt();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Et()}}),new Gc(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=Xb()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,zt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class ID{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Fs(),this.$e=_f(),this.Ue=_f(),this.Ke=new pr(It)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,n=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Vg(o))if(n===0){const l=new wt(o.path);this.ze(t,l,dn.newNoDocument(l,Tt.min()))}else zt(n===1);else{const l=this.et(t);if(l!==n){const u=this.tt(e),c=u?this.nt(u,e,l):1;if(c!==0){this.Ye(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=Vo(n).toUint8Array()}catch(c){if(c instanceof JS)return eu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new zv(l,s,o)}catch(c){return eu(c instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ee===0?null:u}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let s=0;return n.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&Vg(u.target)){const c=new wt(u.target.path);this._t(c).has(l)||this.ut(l,c)||this.ze(l,c,dn.newNoDocument(c,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let n=Nt();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new $d(e,t,this.Ke,this.Qe,n);return this.Qe=Fs(),this.$e=_f(),this.Ue=_f(),this.Ke=new pr(It),s}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Jb,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Br(It),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Br(It),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||at("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Jb),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function _f(){return new pr(wt.comparator)}function Xb(){return new pr(wt.comparator)}const CD={asc:"ASCENDING",desc:"DESCENDING"},RD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kD={and:"AND",or:"OR"};class PD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bg(r,e){return r.useProto3Json||Ld(e)?e:{value:e}}function cd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ND(r,e){return cd(r,e.toTimestamp())}function ns(r){return zt(!!r),Tt.fromTimestamp(function(t){const n=Fo(t);return new Ur(n.seconds,n.nanos)}(r))}function Wv(r,e){return jg(r,e).canonicalString()}function jg(r,e){const t=function(s){return new ur(["projects",s.projectId,"databases",s.database])}(r).child("documents");return e===void 0?t:t.child(e)}function CT(r){const e=ur.fromString(r);return zt(OT(e)),e}function $g(r,e){return Wv(r.databaseId,e.path)}function jm(r,e){const t=CT(e);if(t.get(1)!==r.databaseId.projectId)throw new yt(Je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new yt(Je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new wt(kT(t))}function RT(r,e){return Wv(r.databaseId,e)}function OD(r){const e=CT(r);return e.length===4?ur.emptyPath():kT(e)}function zg(r){return new ur(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kT(r){return zt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Zb(r,e,t){return{name:$g(r,e),fields:t.value.mapValue.fields}}function DD(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Et()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,d){return h.useProto3Json?(zt(d===void 0||typeof d=="string"),tn.fromBase64String(d||"")):(zt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),tn.fromUint8Array(d||new Uint8Array))}(r,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const d=h.code===void 0?Je.UNKNOWN:TT(h.code);return new yt(d,h.message||"")}(l);t=new AT(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=jm(r,n.document.name),o=ns(n.document.updateTime),l=n.document.createTime?ns(n.document.createTime):Tt.min(),u=new ui({mapValue:{fields:n.document.fields}}),c=dn.newFoundDocument(s,o,l,u),h=n.targetIds||[],d=n.removedTargetIds||[];t=new Mf(h,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=jm(r,n.document),o=n.readTime?ns(n.readTime):Tt.min(),l=dn.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Mf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=jm(r,n.document),o=n.removedTargetIds||[];t=new Mf([],o,s,null)}else{if(!("filter"in e))return Et();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,l=new TD(s,o),u=n.targetId;t=new xT(u,l)}}return t}function LD(r,e){let t;if(e instanceof Kc)t={update:Zb(r,e.key,e.value)};else if(e instanceof ST)t={delete:$g(r,e.key)};else if(e instanceof qa)t={update:Zb(r,e.key,e.data),updateMask:WD(e.fieldMask)};else{if(!(e instanceof bD))return Et();t={verify:$g(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(o,l){const u=l.transform;if(u instanceof ld)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Dc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Lc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ud)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Et()}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:ND(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Et()}(r,e.precondition)),t}function MD(r,e){return r&&r.length>0?(zt(e!==void 0),r.map(t=>function(s,o){let l=s.updateTime?ns(s.updateTime):ns(o);return l.isEqual(Tt.min())&&(l=ns(o)),new vD(l,s.transformResults||[])}(t,e))):[]}function FD(r,e){return{documents:[RT(r,e.path)]}}function VD(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=RT(r,s);const o=function(h){if(h.length!==0)return NT(ss.create(h,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(d=>function(y){return{field:Dl(y.field),direction:jD(y.dir)}}(d))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Bg(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:s}}function UD(r){let e=OD(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){zt(n===1);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(m){const y=PT(m);return y instanceof ss&&aT(y)?y.getFilters():[y]}(t.where));let l=[];t.orderBy&&(l=function(m){return m.map(y=>function(b){return new ad(Ll(b.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(t.orderBy));let u=null;t.limit&&(u=function(m){let y;return y=typeof m=="object"?m.value:m,Ld(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(m){const y=!!m.before,_=m.values||[];return new od(_,y)}(t.startAt));let h=null;return t.endAt&&(h=function(m){const y=!m.before,_=m.values||[];return new od(_,y)}(t.endAt)),iD(e,s,l,o,u,"F",c,h)}function BD(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ll(t.unaryFilter.field);return Vr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ll(t.unaryFilter.field);return Vr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ll(t.unaryFilter.field);return Vr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ll(t.unaryFilter.field);return Vr.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Et()}}(r):r.fieldFilter!==void 0?function(t){return Vr.create(Ll(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ss.create(t.compositeFilter.filters.map(n=>PT(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Et()}}(t.compositeFilter.op))}(r):Et()}function jD(r){return CD[r]}function $D(r){return RD[r]}function zD(r){return kD[r]}function Dl(r){return{fieldPath:r.canonicalString()}}function Ll(r){return en.fromServerFormat(r.fieldPath)}function NT(r){return r instanceof Vr?function(t){if(t.op==="=="){if(Bb(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NAN"}};if(Ub(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bb(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NAN"}};if(Ub(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(t.field),op:$D(t.op),value:t.value}}}(r):r instanceof ss?function(t){const n=t.getFilters().map(s=>NT(s));return n.length===1?n[0]:{compositeFilter:{op:zD(t.op),filters:n}}}(r):Et()}function WD(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t,n,s,o=Tt.min(),l=Tt.min(),u=tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.Tt=e}}function HD(r){const e=UD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.Tn=new KD}addToCollectionParentIndex(e,t){return this.Tn.add(t),We.resolve()}getCollectionParents(e,t){return We.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return We.resolve()}deleteFieldIndex(e,t){return We.resolve()}deleteAllFieldIndexes(e){return We.resolve()}createTargetIndexes(e,t){return We.resolve()}getDocumentsMatchingTarget(e,t){return We.resolve(null)}getIndexType(e,t){return We.resolve(0)}getFieldIndexes(e,t){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,t){return We.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return We.resolve(Mo.min())}updateCollectionGroup(e,t,n){return We.resolve()}updateIndexEntries(e,t){return We.resolve()}}class KD{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Br(ur.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Br(ur.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DT=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(DT,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new iu(0)}static Kn(){return new iu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="LruGarbageCollector",GD=1048576;function rE([r,e],[t,n]){const s=It(r,t);return s===0?It(e,n):s}class YD{constructor(e){this.Hn=e,this.buffer=new Br(rE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();rE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JD{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){at(tE,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mu(t)?at(tE,"Ignoring IndexedDB error during garbage collection: ",t):await pu(t)}await this.er(3e5)})}}class XD{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return We.resolve(Dd.ae);const n=new YD(t);return this.tr.forEachTarget(e,s=>n.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>n.Zn(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(eE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,s,o,l,u,c,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,l=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(n=m,u=Date.now(),this.removeTargets(e,n,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(m=>(h=Date.now(),Nl()<=Ft.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-d}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:m})))}}function ZD(r,e){return new XD(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this.changes=new Wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?We.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&vc(n.mutation,s,ki.empty(),Ur.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Nt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Nt()){const s=_a();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(o=>{let l=uc();return o.forEach((u,c)=>{l=l.insert(u,c.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=_a();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Nt()))}populateOverlays(e,t,n){const s=[];return n.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,n,s){let o=Fs();const l=yc(),u=function(){return yc()}();return t.forEach((c,h)=>{const d=n.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof qa)?o=o.insert(h.key,h):d!==void 0?(l.set(h.key,d.mutation.getFieldMask()),vc(d.mutation,h,d.mutation.getFieldMask(),Ur.now())):l.set(h.key,ki.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,d)=>l.set(h,d)),t.forEach((h,d)=>{var m;return u.set(h,new t4(d,(m=l.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,t){const n=yc();let s=new pr((l,u)=>l-u),o=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let d=n.get(c)||ki.empty();d=u.applyToLocalView(h,d),n.set(c,d);const m=(s.get(u.batchId)||Nt()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,d=c.value,m=mT();d.forEach(y=>{if(!o.has(y)){const _=bT(t.get(y),n.get(y));_!==null&&m.set(y,_),o=o.add(y)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,m))}return We.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(l){return wt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):We.resolve(_a());let u=kc,c=o;return l.next(h=>We.forEach(h,(d,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),o.get(d)?We.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{c=c.insert(d,y)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,Nt())).next(d=>({batchId:u,changes:pT(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wt(t)).next(n=>{let s=uc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let l=uc();return this.indexManager.getCollectionParents(e,o).next(u=>We.forEach(u,c=>{const h=function(m,y){return new Fd(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next(d=>{d.forEach((m,y)=>{l=l.insert(m,y)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s))).next(l=>{o.forEach((c,h)=>{const d=h.getKey();l.get(d)===null&&(l=l.insert(d,dn.newInvalidDocument(d)))});let u=uc();return l.forEach((c,h)=>{const d=o.get(c);d!==void 0&&vc(d.mutation,h,ki.empty(),Ur.now()),Ud(t,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return We.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ns(s.createTime)}}(t)),We.resolve()}getNamedQuery(e,t){return We.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:HD(s.bundledQuery),readTime:ns(s.readTime)}}(t)),We.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.overlays=new pr(wt.comparator),this.Rr=new Map}getOverlay(e,t){return We.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_a();return We.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&n.set(s,o)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,o)=>{this.Et(e,t,o)}),We.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Rr.get(n);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(n)),We.resolve()}getOverlaysForCollection(e,t,n){const s=_a(),o=t.length+1,l=new wt(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>n&&s.set(c.getKey(),c)}return We.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new pr((h,d)=>h-d);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let d=o.get(h.largestBatchId);d===null&&(d=_a(),o=o.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const u=_a(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>u.set(h,d)),!(u.size()>=s)););return We.resolve(u)}Et(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(n.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new SD(t,n));let o=this.Rr.get(t);o===void 0&&(o=Nt(),this.Rr.set(t,o)),this.Rr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return We.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,We.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.Vr=new Br(Hr.mr),this.gr=new Br(Hr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Hr(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new Hr(e,t))}Sr(e,t){e.forEach(n=>this.removeReference(n,t))}br(e){const t=new wt(new ur([])),n=new Hr(t,e),s=new Hr(t,e+1),o=[];return this.gr.forEachInRange([n,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new wt(new ur([])),n=new Hr(t,e),s=new Hr(t,e+1);let o=Nt();return this.gr.forEachInRange([n,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Hr(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Hr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return wt.comparator(e.key,t.key)||It(e.Cr,t.Cr)}static pr(e,t){return It(e.Cr,t.Cr)||wt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Br(Hr.mr)}checkEmpty(e){return We.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new ED(o,t,n,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new Hr(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return We.resolve(l)}lookupMutationBatch(e,t){return We.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Nr(n),o=s<0?0:s;return We.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(this.mutationQueue.length===0?Lv:this.Fr-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Hr(t,0),s=new Hr(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([n,s],l=>{const u=this.Or(l.Cr);o.push(u)}),We.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Br(It);return t.forEach(s=>{const o=new Hr(s,0),l=new Hr(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{n=n.add(u.Cr)})}),We.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;wt.isDocumentKey(o)||(o=o.child(""));const l=new Hr(new wt(o),0);let u=new Br(It);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Cr)),!0)},l),We.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(n=>{const s=this.Or(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){zt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return We.forEach(t.mutations,s=>{const o=new Hr(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new Hr(t,0),s=this.Mr.firstAfterOrEqual(n);return We.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,We.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.kr=e,this.docs=function(){return new pr(wt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return We.resolve(n?n.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let n=Fs();return t.forEach(s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():dn.newInvalidDocument(s))}),We.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=Fs();const l=t.path,u=new wt(l.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||MO(LO(d),n)<=0||(s.has(d.key)||Ud(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return We.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Et()}qr(e,t){return We.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new l4(this)}getSize(e){return We.resolve(this.size)}}class l4 extends e4{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(n)}),We.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.persistence=e,this.Qr=new Wa(t=>Vv(t),Uv),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new qv,this.targetCount=0,this.Kr=iu.Un()}forEachTarget(e,t){return this.Qr.forEach((n,s)=>t(s)),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),We.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new iu(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,We.resolve()}updateTargetData(e,t){return this.zn(t),We.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),We.waitFor(o).next(()=>s)}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return We.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),We.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),We.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),We.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return We.resolve(n)}containsKey(e,t){return We.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Dd(0),this.zr=!1,this.zr=!0,this.jr=new s4,this.referenceDelegate=e(this),this.Hr=new u4(this),this.indexManager=new QD,this.remoteDocumentCache=function(s){return new a4(s)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new qD(t),this.Yr=new n4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new i4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new o4(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){at("MemoryPersistence","Starting transaction:",e);const s=new c4(this.Gr.next());return this.referenceDelegate.Zr(),n(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return We.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class c4 extends VO{constructor(e){super(),this.currentSequenceNumber=e}}class Hv{constructor(e){this.persistence=e,this.ti=new qv,this.ni=null}static ri(e){return new Hv(e)}get ii(){if(this.ni)return this.ni;throw Et()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),We.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),We.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),We.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.ii,n=>{const s=wt.fromPath(n);return this.si(e,s).next(o=>{o||t.removeEntry(s,Tt.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return We.or([()=>We.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class hd{constructor(e,t){this.persistence=e,this.oi=new Wa(n=>jO(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=ZD(this,t)}static ri(e,t){return new hd(e,t)}Zr(){}Xr(e){return We.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return We.forEach(this.oi,(n,s)=>this.ar(e,n,s).next(o=>o?We.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(u=>{u||(n++,o.removeEntry(l,Tt.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),We.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),We.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),We.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),We.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Of(e.data.value)),t}ar(e,t,n){return We.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return We.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=s}static Yi(e,t){let n=Nt(),s=Nt();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Qv(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return sN()?8:UO(nN())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,n).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new h4;return this._s(e,t,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>o.result)}us(e,t,n,s){return n.documentReadCount<this.es?(Nl()<=Ft.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),We.resolve()):(Nl()<=Ft.DEBUG&&at("QueryEngine","Query:",Ol(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ts*s?(Nl()<=Ft.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(t))):We.resolve())}rs(e,t){if(Wb(t))return We.resolve(null);let n=rs(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Ug(t,null,"F"),n=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const l=Nt(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,n).next(c=>{const h=this.cs(t,u);return this.ls(t,h,l,c.readTime)?this.rs(e,Ug(t,null,"F")):this.hs(e,h,t,c)}))})))}ss(e,t,n,s){return Wb(t)||s.isEqual(Tt.min())?We.resolve(null):this.ns.getDocuments(e,n).next(o=>{const l=this.cs(t,o);return this.ls(t,l,n,s)?We.resolve(null):(Nl()<=Ft.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ol(t)),this.hs(e,l,t,DO(s,kc)).next(u=>u))})}cs(e,t){let n=new Br(fT(e));return t.forEach((s,o)=>{Ud(e,o)&&(n=n.add(o))}),n}ls(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,n){return Nl()<=Ft.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Ol(t)),this.ns.getDocumentsMatchingQuery(e,t,Mo.min(),n)}hs(e,t,n,s){return this.ns.getDocumentsMatchingQuery(e,n,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="LocalStore",d4=3e8;class p4{constructor(e,t,n,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new pr(It),this.Is=new Wa(o=>Vv(o),Uv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r4(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function m4(r,e,t,n){return new p4(r,e,t,n)}async function MT(r,e){const t=xt(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(o=>{const l=[],u=[];let c=Nt();for(const h of s){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of o){u.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(n,c).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function g4(r,e){const t=xt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,c,h,d){const m=h.batch,y=m.keys();let _=We.resolve();return y.forEach(b=>{_=_.next(()=>d.getEntry(c,b)).next(S=>{const T=h.docVersions.get(b);zt(T!==null),S.version.compareTo(T)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),d.addEntry(S)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(t,n,e,o).next(()=>o.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let c=Nt();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function FT(r){const e=xt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function y4(r,e){const t=xt(r),n=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const u=[];e.targetChanges.forEach((d,m)=>{const y=s.get(m);if(!y)return;u.push(t.Hr.removeMatchingKeys(o,d.removedDocuments,m).next(()=>t.Hr.addMatchingKeys(o,d.addedDocuments,m)));let _=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(tn.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,n)),s=s.insert(m,_),function(S,T,N){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=d4?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(y,_,d)&&u.push(t.Hr.updateTargetData(o,_))});let c=Fs(),h=Nt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),u.push(v4(o,l,e.documentUpdates).next(d=>{c=d.Vs,h=d.fs})),!n.isEqual(Tt.min())){const d=t.Hr.getLastRemoteSnapshotVersion(o).next(m=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,n));u.push(d)}return We.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(t.Ts=s,o))}function v4(r,e,t){let n=Nt(),s=Nt();return t.forEach(o=>n=n.add(o)),e.getEntries(r,n).next(o=>{let l=Fs();return t.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(Tt.min())?(e.removeEntry(u,c.readTime),l=l.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),l=l.insert(u,c)):at(Kv,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Vs:l,fs:s}})}function _4(r,e){const t=xt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Lv),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function w4(r,e){const t=xt(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.Hr.getTargetData(n,e).next(o=>o?(s=o,We.resolve(s)):t.Hr.allocateTargetId(n).next(l=>(s=new Po(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.Ts.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function Wg(r,e,t){const n=xt(r),s=n.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,l=>n.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!mu(l))throw l;at(Kv,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ts=n.Ts.remove(e),n.Is.delete(s.target)}function nE(r,e,t){const n=xt(r);let s=Tt.min(),o=Nt();return n.persistence.runTransaction("Execute query","readwrite",l=>function(c,h,d){const m=xt(c),y=m.Is.get(d);return y!==void 0?We.resolve(m.Ts.get(y)):m.Hr.getTargetData(h,d)}(n,l,rs(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(l,u.targetId).next(c=>{o=c})}).next(()=>n.Ps.getDocumentsMatchingQuery(l,e,t?s:Tt.min(),t?o:Nt())).next(u=>(b4(n,aD(e),u),{documents:u,gs:o})))}function b4(r,e,t){let n=r.Es.get(e)||Tt.min();t.forEach((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),r.Es.set(e,n)}class iE{constructor(){this.activeTargetIds=dD()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E4{constructor(){this.ho=new iE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new iE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="ConnectivityMonitor";class oE{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){at(sE,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){at(sE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf=null;function qg(){return wf===null?wf=function(){return 268435456+Math.round(2147483648*Math.random())}():wf++,"0x"+wf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="RestConnection",T4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${s}`,this.wo=this.databaseId.database===id?`project_id=${n}`:`project_id=${n}&database_id=${s}`}So(e,t,n,s,o){const l=qg(),u=this.bo(e,t.toUriEncodedString());at($m,`Sending RPC '${e}' ${l}:`,u,n);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,o),this.vo(e,u,c,n).then(h=>(at($m,`Received RPC '${e}' ${l}: `,h),h),h=>{throw eu($m,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",n),h})}Co(e,t,n,s,o,l){return this.So(e,t,n,s,o)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+du}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),n&&n.headers.forEach((s,o)=>e[o]=s)}bo(e,t){const n=T4[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class I4 extends x4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,s){const o=qg();return new Promise((l,u)=>{const c=new jS;c.setWithCredentials(!0),c.listenOnce($S.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nf.NO_ERROR:const d=c.getResponseJson();at(ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),l(d);break;case Nf.TIMEOUT:at(ln,`RPC '${e}' ${o} timed out`),u(new yt(Je.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const m=c.getStatus();if(at(ln,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const b=function(T){const N=T.toLowerCase().replace(/_/g,"-");return Object.values(Je).indexOf(N)>=0?N:Je.UNKNOWN}(_.status);u(new yt(b,_.message))}else u(new yt(Je.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new yt(Je.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{at(ln,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);at(ln,`RPC '${e}' ${o} sending request:`,s),c.send(t,"POST",h,n,15)})}Wo(e,t,n){const s=qg(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=qS(),u=WS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const d=o.join("");at(ln,`Creating RPC '${e}' stream ${s}: ${d}`,c);const m=l.createWebChannel(d,c);let y=!1,_=!1;const b=new A4({Fo:T=>{_?at(ln,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(y||(at(ln,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),at(ln,`RPC '${e}' stream ${s} sending:`,T),m.send(T))},Mo:()=>m.close()}),S=(T,N,x)=>{T.listen(N,k=>{try{x(k)}catch(q){setTimeout(()=>{throw q},0)}})};return S(m,lc.EventType.OPEN,()=>{_||(at(ln,`RPC '${e}' stream ${s} transport opened.`),b.Qo())}),S(m,lc.EventType.CLOSE,()=>{_||(_=!0,at(ln,`RPC '${e}' stream ${s} transport closed`),b.Uo())}),S(m,lc.EventType.ERROR,T=>{_||(_=!0,eu(ln,`RPC '${e}' stream ${s} transport errored:`,T),b.Uo(new yt(Je.UNAVAILABLE,"The operation could not be completed")))}),S(m,lc.EventType.MESSAGE,T=>{var N;if(!_){const x=T.data[0];zt(!!x);const k=x,q=(k==null?void 0:k.error)||((N=k[0])===null||N===void 0?void 0:N.error);if(q){at(ln,`RPC '${e}' stream ${s} received error:`,q);const H=q.status;let $=function(V){const M=Cr[V];if(M!==void 0)return TT(M)}(H),P=q.message;$===void 0&&($=Je.INTERNAL,P="Unknown error status: "+H+" with message "+q.message),_=!0,b.Uo(new yt($,P)),m.close()}else at(ln,`RPC '${e}' stream ${s} received:`,x),b.Ko(x)}}),S(u,zS.STAT_EVENT,T=>{T.stat===Og.PROXY?at(ln,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Og.NOPROXY&&at(ln,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}}function zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(r){return new PD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-n);s>0&&at("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="PersistentStream";class UT{constructor(e,t,n,s,o,l,u,c){this.Ti=e,this.n_=n,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new VT(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Je.RESOURCE_EXHAUSTED?(Ms(t.toString()),Ms("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.i_===t&&this.V_(n,s)},n=>{e(()=>{const s=new yt(Je.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(s)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{n(()=>this.m_(s))}),this.stream.onMessage(s=>{n(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return at(aE,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(at(aE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C4 extends UT{constructor(e,t,n,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=DD(this.serializer,e),n=function(o){if(!("targetChange"in o))return Tt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Tt.min():l.readTime?ns(l.readTime):Tt.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=zg(this.serializer),t.addTarget=function(o,l){let u;const c=l.target;if(u=Vg(c)?{documents:FD(o,c)}:{query:VD(o,c).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=IT(o,l.resumeToken);const h=Bg(o,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(Tt.min())>0){u.readTime=cd(o,l.snapshotVersion.toTimestamp());const h=Bg(o,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const n=BD(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=zg(this.serializer),t.removeTarget=e,this.I_(t)}}class R4 extends UT{constructor(e,t,n,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return zt(!!e.streamToken),this.lastStreamToken=e.streamToken,zt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=MD(e.writeResults,e.commitTime),n=ns(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=zg(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>LD(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{}class P4 extends k4{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new yt(Je.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,jg(t,n),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new yt(Je.UNKNOWN,o.toString())})}Co(e,t,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,jg(t,n),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new yt(Je.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class N4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ms(t),this.N_=!1):at("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="RemoteStore";class O4{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{n.enqueueAndForget(async()=>{Ha(this)&&(at($a,"Restarting streams for network reachability change."),await async function(c){const h=xt(c);h.W_.add(4),await Yc(h),h.j_.set("Unknown"),h.W_.delete(4),await Wd(h)}(this))})}),this.j_=new N4(n,s)}}async function Wd(r){if(Ha(r))for(const e of r.G_)await e(!0)}async function Yc(r){for(const e of r.G_)await e(!1)}function BT(r,e){const t=xt(r);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Xv(t)?Jv(t):gu(t).c_()&&Yv(t,e))}function Gv(r,e){const t=xt(r),n=gu(t);t.K_.delete(e),n.c_()&&jT(t,e),t.K_.size===0&&(n.c_()?n.P_():Ha(t)&&t.j_.set("Unknown"))}function Yv(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gu(r).y_(e)}function jT(r,e){r.H_.Ne(e),gu(r).w_(e)}function Jv(r){r.H_=new ID({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),gu(r).start(),r.j_.B_()}function Xv(r){return Ha(r)&&!gu(r).u_()&&r.K_.size>0}function Ha(r){return xt(r).W_.size===0}function $T(r){r.H_=void 0}async function D4(r){r.j_.set("Online")}async function L4(r){r.K_.forEach((e,t)=>{Yv(r,e)})}async function M4(r,e){$T(r),Xv(r)?(r.j_.q_(e),Jv(r)):r.j_.set("Unknown")}async function F4(r,e,t){if(r.j_.set("Online"),e instanceof AT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(r,e)}catch(n){at($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await fd(r,n)}else if(e instanceof Mf?r.H_.We(e):e instanceof xT?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Tt.min()))try{const n=await FT(r.localStore);t.compareTo(n)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.K_.get(h);d&&o.K_.set(h,d.withResumeToken(c.resumeToken,l))}}),u.targetMismatches.forEach((c,h)=>{const d=o.K_.get(c);if(!d)return;o.K_.set(c,d.withResumeToken(tn.EMPTY_BYTE_STRING,d.snapshotVersion)),jT(o,c);const m=new Po(d.target,c,h,d.sequenceNumber);Yv(o,m)}),o.remoteSyncer.applyRemoteEvent(u)}(r,t)}catch(n){at($a,"Failed to raise snapshot:",n),await fd(r,n)}}async function fd(r,e,t){if(!mu(e))throw e;r.W_.add(1),await Yc(r),r.j_.set("Offline"),t||(t=()=>FT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{at($a,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Wd(r)})}function zT(r,e){return e().catch(t=>fd(r,t,e))}async function qd(r){const e=xt(r),t=Bo(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:Lv;for(;V4(e);)try{const s=await _4(e.localStore,n);if(s===null){e.U_.length===0&&t.P_();break}n=s.batchId,U4(e,s)}catch(s){await fd(e,s)}WT(e)&&qT(e)}function V4(r){return Ha(r)&&r.U_.length<10}function U4(r,e){r.U_.push(e);const t=Bo(r);t.c_()&&t.S_&&t.b_(e.mutations)}function WT(r){return Ha(r)&&!Bo(r).u_()&&r.U_.length>0}function qT(r){Bo(r).start()}async function B4(r){Bo(r).C_()}async function j4(r){const e=Bo(r);for(const t of r.U_)e.b_(t.mutations)}async function $4(r,e,t){const n=r.U_.shift(),s=$v.from(n,e,t);await zT(r,()=>r.remoteSyncer.applySuccessfulWrite(s)),await qd(r)}async function z4(r,e){e&&Bo(r).S_&&await async function(n,s){if(function(l){return xD(l)&&l!==Je.ABORTED}(s.code)){const o=n.U_.shift();Bo(n).h_(),await zT(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s)),await qd(n)}}(r,e),WT(r)&&qT(r)}async function lE(r,e){const t=xt(r);t.asyncQueue.verifyOperationInProgress(),at($a,"RemoteStore received new credentials");const n=Ha(t);t.W_.add(3),await Yc(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Wd(t)}async function W4(r,e){const t=xt(r);e?(t.W_.delete(2),await Wd(t)):e||(t.W_.add(2),await Yc(t),t.j_.set("Unknown"))}function gu(r){return r.J_||(r.J_=function(t,n,s){const o=xt(t);return o.M_(),new C4(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(r.datastore,r.asyncQueue,{xo:D4.bind(null,r),No:L4.bind(null,r),Lo:M4.bind(null,r),p_:F4.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Xv(r)?Jv(r):r.j_.set("Unknown")):(await r.J_.stop(),$T(r))})),r.J_}function Bo(r){return r.Y_||(r.Y_=function(t,n,s){const o=xt(t);return o.M_(),new R4(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:B4.bind(null,r),Lo:z4.bind(null,r),D_:j4.bind(null,r),v_:$4.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await qd(r)):(await r.Y_.stop(),r.U_.length>0&&(at($a,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const l=Date.now()+n,u=new Zv(e,t,l,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e0(r,e){if(Ms("AsyncQueue",`${e}: ${r}`),mu(r))return new yt(Je.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||wt.comparator(t.key,n.key):(t,n)=>wt.comparator(t.key,n.key),this.keyedMap=uc(),this.sortedSet=new pr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ul;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Z_=new pr(wt.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Et():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class su{constructor(e,t,n,s,o,l,u,c,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,s,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new su(e,t,Ul.emptySet(t),l,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class H4{constructor(){this.queries=cE(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const s=xt(t),o=s.queries;s.queries=cE(),o.forEach((l,u)=>{for(const c of u.ta)c.onError(n)})})(this,new yt(Je.ABORTED,"Firestore shutting down"))}}function cE(){return new Wa(r=>hT(r),Vd)}async function Q4(r,e){const t=xt(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(n=2):(o=new q4,n=e.ra()?0:1);try{switch(n){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=e0(l,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&t0(t)}async function K4(r,e){const t=xt(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function G4(r,e){const t=xt(r);let n=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(n=!0);l.ea=s}}n&&t0(t)}function Y4(r,e,t){const n=xt(r),s=n.queries.get(e);if(s)for(const o of s.ta)o.onError(t);n.queries.delete(e)}function t0(r){r.ia.forEach(e=>{e.next()})}var Hg,hE;(hE=Hg||(Hg={}))._a="default",hE.Cache="cache";class J4{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new su(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Hg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.key=e}}class QT{constructor(e){this.key=e}}class X4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Nt(),this.mutatedKeys=Nt(),this.ya=fT(e),this.wa=new Ul(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new uE,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const y=s.get(d),_=Ud(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),S=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;y&&_?y.data.isEqual(_.data)?b!==S&&(n.track({type:3,doc:_}),T=!0):this.va(y,_)||(n.track({type:2,doc:_}),T=!0,(c&&this.ya(_,c)>0||h&&this.ya(_,h)<0)&&(u=!0)):!y&&_?(n.track({type:0,doc:_}),T=!0):y&&!_&&(n.track({type:1,doc:y}),T=!0,(c||h)&&(u=!0)),T&&(_?(l=l.add(_),o=S?o.add(d):o.delete(d)):(l=l.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const d=this.query.limitType==="F"?l.last():l.first();l=l.delete(d.key),o=o.delete(d.key),n.track({type:1,doc:d})}return{wa:l,Da:n,ls:u,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((d,m)=>function(_,b){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return S(_)-S(b)}(d.type,m.type)||this.ya(d.doc,m.doc)),this.Ca(n),s=s!=null&&s;const u=t&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,h=c!==this.ga;return this.ga=c,l.length!==0||h?{snapshot:new su(this.query,e.wa,o,l,e.mutatedKeys,c===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new uE,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Nt(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new QT(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new HT(n))}),t}Oa(e){this.fa=e.gs,this.pa=Nt();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return su.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const r0="SyncEngine";class Z4{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class eL{constructor(e){this.key=e,this.Ba=!1}}class tL{constructor(e,t,n,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Wa(u=>hT(u),Vd),this.qa=new Map,this.Qa=new Set,this.$a=new pr(wt.comparator),this.Ua=new Map,this.Ka=new qv,this.Wa={},this.Ga=new Map,this.za=iu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function rL(r,e,t=!0){const n=ZT(r);let s;const o=n.ka.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await KT(n,e,t,!0),s}async function nL(r,e){const t=ZT(r);await KT(t,e,!0,!1)}async function KT(r,e,t,n){const s=await w4(r.localStore,rs(e)),o=s.targetId,l=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await iL(r,e,o,l==="current",s.resumeToken)),r.isPrimaryClient&&t&&BT(r.remoteStore,s),u}async function iL(r,e,t,n,s){r.Ha=(m,y,_)=>async function(S,T,N,x){let k=T.view.ba(N);k.ls&&(k=await nE(S.localStore,T.query,!1).then(({documents:P})=>T.view.ba(P,k)));const q=x&&x.targetChanges.get(T.targetId),H=x&&x.targetMismatches.get(T.targetId)!=null,$=T.view.applyChanges(k,S.isPrimaryClient,q,H);return dE(S,T.targetId,$.Ma),$.snapshot}(r,m,y,_);const o=await nE(r.localStore,e,!0),l=new X4(e,o.gs),u=l.ba(o.documents),c=Gc.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),h=l.applyChanges(u,r.isPrimaryClient,c);dE(r,t,h.Ma);const d=new Z4(e,t,l);return r.ka.set(e,d),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),h.snapshot}async function sL(r,e,t){const n=xt(r),s=n.ka.get(e),o=n.qa.get(s.targetId);if(o.length>1)return n.qa.set(s.targetId,o.filter(l=>!Vd(l,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Wg(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&Gv(n.remoteStore,s.targetId),Qg(n,s.targetId)}).catch(pu)):(Qg(n,s.targetId),await Wg(n.localStore,s.targetId,!0))}async function oL(r,e){const t=xt(r),n=t.ka.get(e),s=t.qa.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Gv(t.remoteStore,n.targetId))}async function aL(r,e,t){const n=pL(r);try{const s=await function(l,u){const c=xt(l),h=Ur.now(),d=u.reduce((_,b)=>_.add(b.key),Nt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=Fs(),S=Nt();return c.ds.getEntries(_,d).next(T=>{b=T,b.forEach((N,x)=>{x.isValidDocument()||(S=S.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,b)).next(T=>{m=T;const N=[];for(const x of u){const k=wD(x,m.get(x.key).overlayedDocument);k!=null&&N.push(new qa(x.key,k,iT(k.value.mapValue),Ps.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,N,u)}).next(T=>{y=T;const N=T.applyToLocalDocumentSet(m,S);return c.documentOverlayCache.saveOverlays(_,T.batchId,N)})}).then(()=>({batchId:y.batchId,changes:pT(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(l,u,c){let h=l.Wa[l.currentUser.toKey()];h||(h=new pr(It)),h=h.insert(u,c),l.Wa[l.currentUser.toKey()]=h}(n,s.batchId,t),await Jc(n,s.changes),await qd(n.remoteStore)}catch(s){const o=e0(s,"Failed to persist write");t.reject(o)}}async function GT(r,e){const t=xt(r);try{const n=await y4(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ua.get(o);l&&(zt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?zt(l.Ba):s.removedDocuments.size>0&&(zt(l.Ba),l.Ba=!1))}),await Jc(t,n,e)}catch(n){await pu(n)}}function fE(r,e,t){const n=xt(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const c=xt(l);c.onlineState=u;let h=!1;c.queries.forEach((d,m)=>{for(const y of m.ta)y.sa(u)&&(h=!0)}),h&&t0(c)}(n.eventManager,e),s.length&&n.La.p_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function lL(r,e,t){const n=xt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Ua.get(e),o=s&&s.key;if(o){let l=new pr(wt.comparator);l=l.insert(o,dn.newNoDocument(o,Tt.min()));const u=Nt().add(o),c=new $d(Tt.min(),new Map,new pr(It),l,u);await GT(n,c),n.$a=n.$a.remove(o),n.Ua.delete(e),n0(n)}else await Wg(n.localStore,e,!1).then(()=>Qg(n,e,t)).catch(pu)}async function uL(r,e){const t=xt(r),n=e.batch.batchId;try{const s=await g4(t.localStore,e);JT(t,n,null),YT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Jc(t,s)}catch(s){await pu(s)}}async function cL(r,e,t){const n=xt(r);try{const s=await function(l,u){const c=xt(l);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(zt(m!==null),d=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(n.localStore,e);JT(n,e,t),YT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Jc(n,s)}catch(s){await pu(s)}}function YT(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function JT(r,e,t){const n=xt(r);let s=n.Wa[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Wa[n.currentUser.toKey()]=s}}function Qg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(n=>{r.Ka.containsKey(n)||XT(r,n)})}function XT(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(Gv(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ua.delete(t),n0(r))}function dE(r,e,t){for(const n of t)n instanceof HT?(r.Ka.addReference(n.key,e),hL(r,n)):n instanceof QT?(at(r0,"Document no longer in limbo: "+n.key),r.Ka.removeReference(n.key,e),r.Ka.containsKey(n.key)||XT(r,n.key)):Et()}function hL(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(at(r0,"New document in limbo: "+t),r.Qa.add(n),n0(r))}function n0(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new wt(ur.fromString(e)),n=r.za.next();r.Ua.set(n,new eL(t)),r.$a=r.$a.insert(t,n),BT(r.remoteStore,new Po(rs(Bv(t.path)),n,"TargetPurposeLimboResolution",Dd.ae))}}async function Jc(r,e,t){const n=xt(r),s=[],o=[],l=[];n.ka.isEmpty()||(n.ka.forEach((u,c)=>{l.push(n.Ha(c,e,t).then(h=>{var d;if((h||t)&&n.isPrimaryClient){const m=h?!h.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Qv.Yi(c.targetId,h);o.push(m)}}))}),await Promise.all(l),n.La.p_(s),await async function(c,h){const d=xt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>We.forEach(h,y=>We.forEach(y.Hi,_=>d.persistence.referenceDelegate.addReference(m,y.targetId,_)).next(()=>We.forEach(y.Ji,_=>d.persistence.referenceDelegate.removeReference(m,y.targetId,_)))))}catch(m){if(!mu(m))throw m;at(Kv,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const _=d.Ts.get(y),b=_.snapshotVersion,S=_.withLastLimboFreeSnapshotVersion(b);d.Ts=d.Ts.insert(y,S)}}}(n.localStore,o))}async function fL(r,e){const t=xt(r);if(!t.currentUser.isEqual(e)){at(r0,"User change. New user:",e.toKey());const n=await MT(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(c=>{c.reject(new yt(Je.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Jc(t,n.Rs)}}function dL(r,e){const t=xt(r),n=t.Ua.get(e);if(n&&n.Ba)return Nt().add(n.key);{let s=Nt();const o=t.qa.get(e);if(!o)return s;for(const l of o){const u=t.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function ZT(r){const e=xt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lL.bind(null,e),e.La.p_=G4.bind(null,e.eventManager),e.La.Ja=Y4.bind(null,e.eventManager),e}function pL(r){const e=xt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cL.bind(null,e),e}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zd(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return m4(this.persistence,new f4,e.initialUser,this.serializer)}Xa(e){return new LT(Hv.ri,this.serializer)}Za(e){return new E4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class mL extends dd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){zt(this.persistence.referenceDelegate instanceof hd);const n=this.persistence.referenceDelegate.garbageCollector;return new JD(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new LT(n=>hd.ri(n,t),this.serializer)}}class Kg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>fE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=fL.bind(null,this.syncEngine),await W4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new H4}()}createDatastore(e){const t=zd(e.databaseInfo.databaseId),n=function(o){return new I4(o)}(e.databaseInfo);return function(o,l,u,c){return new P4(o,l,u,c)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,o,l,u){return new O4(n,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>fE(this.syncEngine,t,0),function(){return oE.D()?new oE:new S4}())}createSyncEngine(e,t){return function(s,o,l,u,c,h,d){const m=new tL(s,o,l,u,c,h);return d&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=xt(s);at($a,"RemoteStore shutting down."),o.W_.add(5),await Yc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ms("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="FirestoreClient";class yL{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=KS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async l=>{at(jo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(at(jo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=e0(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Wm(r,e){r.asyncQueue.verifyOperationInProgress(),at(jo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async s=>{n.isEqual(s)||(await MT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function pE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await vL(r);at(jo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>lE(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>lE(e.remoteStore,s)),r._onlineComponents=e}async function vL(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(jo,"Using user provided OfflineComponentProvider");try{await Wm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Je.FAILED_PRECONDITION||s.code===Je.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;eu("Error using user provided cache. Falling back to memory cache: "+t),await Wm(r,new dd)}}else at(jo,"Using default OfflineComponentProvider"),await Wm(r,new mL(void 0));return r._offlineComponents}async function ex(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(jo,"Using user provided OnlineComponentProvider"),await pE(r,r._uninitializedComponentsProvider._online)):(at(jo,"Using default OnlineComponentProvider"),await pE(r,new Kg))),r._onlineComponents}function _L(r){return ex(r).then(e=>e.syncEngine)}async function mE(r){const e=await ex(r),t=e.eventManager;return t.onListen=rL.bind(null,e.syncEngine),t.onUnlisten=sL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oL.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(r,e,t){if(!t)throw new yt(Je.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function wL(r,e,t,n){if(e===!0&&n===!0)throw new yt(Je.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function yE(r){if(!wt.isDocumentKey(r))throw new yt(Je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vE(r){if(wt.isDocumentKey(r))throw new yt(Je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function i0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Et()}function _c(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new yt(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=i0(r);throw new yt(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="firestore.googleapis.com",_E=!0;class wE{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new yt(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nx,this.ssl=_E}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_E;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GD)throw new yt(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tx((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new yt(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new yt(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new yt(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new yt(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xO;switch(n.type){case"firstParty":return new RO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new yt(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=gE.get(t);n&&(at("ComponentProvider","Removing Datastore"),gE.delete(t),n.terminate())}(this),Promise.resolve()}}function bL(r,e,t,n={}){var s;const o=(r=_c(r,Hd))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:r._getEmulatorOptions()}),u=`${e}:${t}`;o.host!==nx&&o.host!==u&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:n});if(!ed(c,l)&&(r._setSettings(c),n.mockUserToken)){let h,d;if(typeof n.mockUserToken=="string")h=n.mockUserToken,d=fn.MOCK_USER;else{h=rN(n.mockUserToken,(s=r._app)===null||s===void 0?void 0:s.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new yt(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new fn(m)}r._authCredentials=new AO(new HS(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qd(this.firestore,e,this._query)}}class ci{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ci(this.firestore,e,this._key)}}class Lo extends Qd{constructor(e,t,n){super(e,t,Bv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ci(this.firestore,null,new wt(e))}withConverter(e){return new Lo(this.firestore,e,this._path)}}function bE(r,e,...t){if(r=Zl(r),rx("collection","path",e),r instanceof Hd){const n=ur.fromString(e,...t);return vE(n),new Lo(r,null,n)}{if(!(r instanceof ci||r instanceof Lo))throw new yt(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ur.fromString(e,...t));return vE(n),new Lo(r.firestore,null,n)}}function EL(r,e,...t){if(r=Zl(r),arguments.length===1&&(e=KS.newId()),rx("doc","path",e),r instanceof Hd){const n=ur.fromString(e,...t);return yE(n),new ci(r,null,new wt(n))}{if(!(r instanceof ci||r instanceof Lo))throw new yt(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ur.fromString(e,...t));return yE(n),new ci(r.firestore,r instanceof Lo?r.converter:null,new wt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="AsyncQueue";class SE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new VT(this,"async_queue_retry"),this.Su=()=>{const n=zm();n&&at(EE,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=zm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=zm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Oa;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!mu(e))throw e;at(EE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(n);throw Ms("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.pu=!1,n))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Zv.createAndSchedule(this,e,t,n,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Et()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function TE(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1}(r,["next","error","complete"])}class pd extends Hd{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new SE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SE(e),this._firestoreClient=void 0,await e}}}function SL(r,e){const t=typeof r=="object"?r:fO(),n=typeof r=="string"?r:id,s=aO(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=eN("firestore");o&&bL(s,...o)}return s}function ix(r){if(r._terminated)throw new yt(Je.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||TL(r),r._firestoreClient}function TL(r){var e,t,n;const s=r._freezeSettings(),o=function(u,c,h,d){return new WO(u,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tx(d.experimentalLongPollingOptions),d.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new yL(r._authCredentials,r._appCheckCredentials,r._queue,o,r._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ou(tn.fromBase64String(e))}catch(t){throw new yt(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ou(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new yt(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yt(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yt(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return It(this._lat,e._lat)||It(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=/^__.*__$/;class AL{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new qa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kc(e,this.data,t,this.fieldTransforms)}}function ox(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class l0{constructor(e,t,n,s,o,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new l0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.$u(e),s}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return md(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(ox(this.Lu)&&xL.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class IL{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zd(e)}ju(e,t,n,s=!1){return new l0({Lu:e,methodName:t,zu:n,path:en.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function CL(r){const e=r._freezeSettings(),t=zd(r._databaseId);return new IL(r._databaseId,!!e.ignoreUndefinedProperties,t)}function RL(r,e,t,n,s,o={}){const l=r.ju(o.merge||o.mergeFields?2:0,e,t,s);cx("Data must be an object, but it was:",l,n);const u=lx(n,l);let c,h;if(o.merge)c=new ki(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const d=[];for(const m of o.mergeFields){const y=kL(e,m,t);if(!l.contains(y))throw new yt(Je.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);NL(d,y)||d.push(y)}c=new ki(d),h=l.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=l.fieldTransforms;return new AL(new ui(u),c,h)}function ax(r,e){if(ux(r=Zl(r)))return cx("Unsupported field value:",e,r),lx(r,e);if(r instanceof sx)return function(n,s){if(!ox(s.Lu))throw s.Wu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,s){const o=[];let l=0;for(const u of n){let c=ax(u,s.Ku(l));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),l++}return{arrayValue:{values:o}}}(r,e)}return function(n,s){if((n=Zl(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return pD(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Ur.fromDate(n);return{timestampValue:cd(s.serializer,o)}}if(n instanceof Ur){const o=new Ur(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:cd(s.serializer,o)}}if(n instanceof o0)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ou)return{bytesValue:IT(s.serializer,n._byteString)};if(n instanceof ci){const o=s.databaseId,l=n.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wv(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof a0)return function(l,u){return{mapValue:{fields:{[rT]:{stringValue:nT},[sd]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return jv(u.serializer,h)})}}}}}}(n,s);throw s.Wu(`Unsupported field value: ${i0(n)}`)}(r,e)}function lx(r,e){const t={};return YS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(r,(n,s)=>{const o=ax(s,e.qu(n));o!=null&&(t[n]=o)}),{mapValue:{fields:t}}}function ux(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ur||r instanceof o0||r instanceof ou||r instanceof ci||r instanceof sx||r instanceof a0)}function cx(r,e,t){if(!ux(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const n=i0(t);throw n==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+n)}}function kL(r,e,t){if((e=Zl(e))instanceof s0)return e._internalPath;if(typeof e=="string")return hx(r,e);throw md("Field path arguments must be of type string or ",r,!1,void 0,t)}const PL=new RegExp("[~\\*/\\[\\]]");function hx(r,e,t){if(e.search(PL)>=0)throw md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new s0(...e.split("."))._internalPath}catch{throw md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function md(r,e,t,n,s){const o=n&&!n.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||l)&&(c+=" (found",o&&(c+=` in field ${n}`),l&&(c+=` in document ${s}`),c+=")"),new yt(Je.INVALID_ARGUMENT,u+r+c)}function NL(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ci(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OL extends fx{data(){return super.data()}}function dx(r,e){return typeof e=="string"?hx(r,e):e instanceof s0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new yt(Je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LL{convertValue(e,t="none"){switch(Uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return za(e,(s,o)=>{n[s]=this.convertValue(o,t)}),n}convertVectorValue(e){var t,n,s;const o=(s=(n=(t=e.fields)===null||t===void 0?void 0:t[sd].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(l=>Sr(l.doubleValue));return new a0(o)}convertGeoPoint(e){return new o0(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Md(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=Fo(e);return new Ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ur.fromString(e);zt(OT(n));const s=new Nc(n.get(1),n.get(3)),o=new wt(n.popFirst(5));return s.isEqual(t)||Ms(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(r,e,t){let n;return n=r?r.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class px extends fx{constructor(e,t,n,s,o,l){super(e,t,n,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(dx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ff extends px{data(e={}){return super.data(e)}}class FL{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new hc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ff(this._firestore,this._userDataWriter,n.key,n,new hc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yt(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const c=new Ff(s._firestore,s._userDataWriter,u.doc.key,u.doc,new hc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Ff(s._firestore,s._userDataWriter,u.doc.key,u.doc,new hc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),d=l.indexOf(u.doc.key)),{type:VL(u.type),doc:c,oldIndex:h,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function VL(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}class mx extends LL{constructor(e){super(),this.firestore=e}convertBytes(e){return new ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ci(this.firestore,null,t)}}function UL(r,e){const t=_c(r.firestore,pd),n=EL(r),s=ML(r.converter,e);return jL(t,[RL(CL(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Ps.exists(!1))]).then(()=>n)}function BL(r,...e){var t,n,s;r=Zl(r);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||TE(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(TE(e[l])){const m=e[l];e[l]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[l+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[l+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,d;if(r instanceof ci)h=_c(r.firestore,pd),d=Bv(r._key.path),c={next:m=>{e[l]&&e[l]($L(h,r,m))},error:e[l+1],complete:e[l+2]};else{const m=_c(r,Qd);h=_c(m.firestore,pd),d=m._query;const y=new mx(h);c={next:_=>{e[l]&&e[l](new FL(h,y,m,_))},error:e[l+1],complete:e[l+2]},DL(r._query)}return function(y,_,b,S){const T=new gL(S),N=new J4(_,T,b);return y.asyncQueue.enqueueAndForget(async()=>Q4(await mE(y),N)),()=>{T.su(),y.asyncQueue.enqueueAndForget(async()=>K4(await mE(y),N))}}(ix(h),d,u,c)}function jL(r,e){return function(n,s){const o=new Oa;return n.asyncQueue.enqueueAndForget(async()=>aL(await _L(n),s,o)),o.promise}(ix(r),e)}function $L(r,e,t){const n=t.docs.get(e._key),s=new mx(r);return new px(r,s,e._key,n,new hc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){du=s})(hO),rd(new Cc("firestore",(n,{instanceIdentifier:s,options:o})=>{const l=n.getProvider("app").getImmediate(),u=new pd(new IO(n.getProvider("auth-internal")),new kO(l,n.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new yt(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(h.options.projectId,d)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Vl(Ib,Cb,e),Vl(Ib,Cb,"esm2017")})();const zL={apiKey:"AIzaSyAhfo3784zKGWVJRQbhbZEuxZpdCP4yw5k",authDomain:"chat-reactjs-54898.firebaseapp.com",projectId:"chat-reactjs-54898",storageBucket:"chat-reactjs-54898.firebasestorage.app",messagingSenderId:"250177889716",appId:"1:250177889716:web:6385820525645a5a8e3ee1",measurementId:"G-YMS03SMKBZ"},WL=FS(zL),xE=SL(WL);var u0=Object.defineProperty,qL=Object.getOwnPropertyDescriptor,HL=Object.getOwnPropertyNames,QL=Object.prototype.hasOwnProperty,An=(r,e)=>()=>(r&&(e=r(r=0)),e),Ke=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),yu=(r,e)=>{for(var t in e)u0(r,t,{get:e[t],enumerable:!0})},KL=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of HL(e))!QL.call(r,s)&&s!==t&&u0(r,s,{get:()=>e[s],enumerable:!(n=qL(e,s))||n.enumerable});return r},Kt=r=>KL(u0({},"__esModule",{value:!0}),r),je=An(()=>{}),Bt={};yu(Bt,{_debugEnd:()=>Iy,_debugProcess:()=>Ay,_events:()=>$y,_eventsCount:()=>zy,_exiting:()=>fy,_fatalExceptions:()=>Sy,_getActiveHandles:()=>Sx,_getActiveRequests:()=>Ex,_kill:()=>my,_linkedBinding:()=>_x,_maxListeners:()=>jy,_preload_modules:()=>Uy,_rawDebug:()=>uy,_startProfilerIdleNotifier:()=>Cy,_stopProfilerIdleNotifier:()=>Ry,_tickCallback:()=>xy,abort:()=>Oy,addListener:()=>Wy,allowedNodeEnvironmentFlags:()=>by,arch:()=>Yg,argv:()=>Zg,argv0:()=>Vy,assert:()=>Tx,binding:()=>iy,chdir:()=>ay,config:()=>dy,cpuUsage:()=>fc,cwd:()=>oy,debugPort:()=>Fy,default:()=>h0,dlopen:()=>bx,domain:()=>hy,emit:()=>Gy,emitWarning:()=>ny,env:()=>Xg,execArgv:()=>ey,execPath:()=>My,exit:()=>_y,features:()=>Ey,hasUncaughtExceptionCaptureCallback:()=>xx,hrtime:()=>Vf,kill:()=>vy,listeners:()=>Ix,memoryUsage:()=>yy,moduleLoadList:()=>cy,nextTick:()=>yx,off:()=>Hy,on:()=>Ss,once:()=>qy,openStdin:()=>wy,pid:()=>Dy,platform:()=>Jg,ppid:()=>Ly,prependListener:()=>Yy,prependOnceListener:()=>Jy,reallyExit:()=>py,release:()=>ly,removeAllListeners:()=>Ky,removeListener:()=>Qy,resourceUsage:()=>gy,setSourceMapsEnabled:()=>By,setUncaughtExceptionCaptureCallback:()=>Ty,stderr:()=>Py,stdin:()=>Ny,stdout:()=>ky,title:()=>Gg,umask:()=>sy,uptime:()=>Ax,version:()=>ty,versions:()=>ry});function c0(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function GL(){!Da||!wa||(Da=!1,wa.length?Zi=wa.concat(Zi):wc=-1,Zi.length&&gx())}function gx(){if(!Da){var r=setTimeout(GL,0);Da=!0;for(var e=Zi.length;e;){for(wa=Zi,Zi=[];++wc<e;)wa&&wa[wc].run();wc=-1,e=Zi.length}wa=null,Da=!1,clearTimeout(r)}}function yx(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Zi.push(new vx(r,e)),Zi.length===1&&!Da&&setTimeout(gx,0)}function vx(r,e){this.fun=r,this.array=e}function un(){}function _x(r){c0("_linkedBinding")}function bx(r){c0("dlopen")}function Ex(){return[]}function Sx(){return[]}function Tx(r,e){if(!r)throw new Error(e||"assertion error")}function xx(){return!1}function Ax(){return Is.now()/1e3}function Vf(r){var e=Math.floor((Date.now()-Is.now())*.001),t=Is.now()*.001,n=Math.floor(t)+e,s=Math.floor(t%1*1e9);return r&&(n=n-r[0],s=s-r[1],s<0&&(n--,s+=Uf)),[n,s]}function Ss(){return h0}function Ix(r){return[]}var Zi,Da,wa,wc,Gg,Yg,Jg,Xg,Zg,ey,ty,ry,ny,iy,sy,oy,ay,ly,uy,cy,hy,fy,dy,py,my,fc,gy,yy,vy,_y,wy,by,Ey,Sy,Ty,xy,Ay,Iy,Cy,Ry,ky,Py,Ny,Oy,Dy,Ly,My,Fy,Vy,Uy,By,Is,qm,Uf,jy,$y,zy,Wy,qy,Hy,Qy,Ky,Gy,Yy,Jy,h0,YL=An(()=>{je(),ze(),$e(),Zi=[],Da=!1,wc=-1,vx.prototype.run=function(){this.fun.apply(null,this.array)},Gg="browser",Yg="x64",Jg="browser",Xg={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Zg=["/usr/bin/node"],ey=[],ty="v16.8.0",ry={},ny=function(r,e){console.warn((e?e+": ":"")+r)},iy=function(r){c0("binding")},sy=function(r){return 0},oy=function(){return"/"},ay=function(r){},ly={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},uy=un,cy=[],hy={},fy=!1,dy={},py=un,my=un,fc=function(){return{}},gy=fc,yy=fc,vy=un,_y=un,wy=un,by={},Ey={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Sy=un,Ty=un,xy=un,Ay=un,Iy=un,Cy=un,Ry=un,ky=void 0,Py=void 0,Ny=void 0,Oy=un,Dy=2,Ly=1,My="/bin/usr/node",Fy=9229,Vy="node",Uy=[],By=un,Is={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Is.now===void 0&&(qm=Date.now(),Is.timing&&Is.timing.navigationStart&&(qm=Is.timing.navigationStart),Is.now=()=>Date.now()-qm),Uf=1e9,Vf.bigint=function(r){var e=Vf(r);return typeof BigInt>"u"?e[0]*Uf+e[1]:BigInt(e[0]*Uf)+BigInt(e[1])},jy=10,$y={},zy=0,Wy=Ss,qy=Ss,Hy=Ss,Qy=Ss,Ky=Ss,Gy=un,Yy=Ss,Jy=Ss,h0={version:ty,versions:ry,arch:Yg,platform:Jg,release:ly,_rawDebug:uy,moduleLoadList:cy,binding:iy,_linkedBinding:_x,_events:$y,_eventsCount:zy,_maxListeners:jy,on:Ss,addListener:Wy,once:qy,off:Hy,removeListener:Qy,removeAllListeners:Ky,emit:Gy,prependListener:Yy,prependOnceListener:Jy,listeners:Ix,domain:hy,_exiting:fy,config:dy,dlopen:bx,uptime:Ax,_getActiveRequests:Ex,_getActiveHandles:Sx,reallyExit:py,_kill:my,cpuUsage:fc,resourceUsage:gy,memoryUsage:yy,kill:vy,exit:_y,openStdin:wy,allowedNodeEnvironmentFlags:by,assert:Tx,features:Ey,_fatalExceptions:Sy,setUncaughtExceptionCaptureCallback:Ty,hasUncaughtExceptionCaptureCallback:xx,emitWarning:ny,nextTick:yx,_tickCallback:xy,_debugProcess:Ay,_debugEnd:Iy,_startProfilerIdleNotifier:Cy,_stopProfilerIdleNotifier:Ry,stdout:ky,stdin:Ny,stderr:Py,abort:Oy,umask:sy,chdir:ay,cwd:oy,env:Xg,title:Gg,argv:Zg,execArgv:ey,pid:Dy,ppid:Ly,execPath:My,debugPort:Fy,hrtime:Vf,argv0:Vy,_preload_modules:Uy,setSourceMapsEnabled:By}}),$e=An(()=>{YL()}),Qr={};yu(Qr,{Buffer:()=>gd,INSPECT_MAX_BYTES:()=>Cx,default:()=>Ts,kMaxLength:()=>Rx});function JL(){if(Xy)return Ml;Xy=!0,Ml.byteLength=u,Ml.toByteArray=h,Ml.fromByteArray=y;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=n.length;s<o;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function l(_){var b=_.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=_.indexOf("=");S===-1&&(S=b);var T=S===b?0:4-S%4;return[S,T]}function u(_){var b=l(_),S=b[0],T=b[1];return(S+T)*3/4-T}function c(_,b,S){return(b+S)*3/4-S}function h(_){var b,S=l(_),T=S[0],N=S[1],x=new t(c(_,T,N)),k=0,q=N>0?T-4:T,H;for(H=0;H<q;H+=4)b=e[_.charCodeAt(H)]<<18|e[_.charCodeAt(H+1)]<<12|e[_.charCodeAt(H+2)]<<6|e[_.charCodeAt(H+3)],x[k++]=b>>16&255,x[k++]=b>>8&255,x[k++]=b&255;return N===2&&(b=e[_.charCodeAt(H)]<<2|e[_.charCodeAt(H+1)]>>4,x[k++]=b&255),N===1&&(b=e[_.charCodeAt(H)]<<10|e[_.charCodeAt(H+1)]<<4|e[_.charCodeAt(H+2)]>>2,x[k++]=b>>8&255,x[k++]=b&255),x}function d(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function m(_,b,S){for(var T,N=[],x=b;x<S;x+=3)T=(_[x]<<16&16711680)+(_[x+1]<<8&65280)+(_[x+2]&255),N.push(d(T));return N.join("")}function y(_){for(var b,S=_.length,T=S%3,N=[],x=16383,k=0,q=S-T;k<q;k+=x)N.push(m(_,k,k+x>q?q:k+x));return T===1?(b=_[S-1],N.push(r[b>>2]+r[b<<4&63]+"==")):T===2&&(b=(_[S-2]<<8)+_[S-1],N.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),N.join("")}return Ml}function XL(){return Zy?dc:(Zy=!0,dc.read=function(r,e,t,n,s){var o,l,u=s*8-n-1,c=(1<<u)-1,h=c>>1,d=-7,m=t?s-1:0,y=t?-1:1,_=r[e+m];for(m+=y,o=_&(1<<-d)-1,_>>=-d,d+=u;d>0;o=o*256+r[e+m],m+=y,d-=8);for(l=o&(1<<-d)-1,o>>=-d,d+=n;d>0;l=l*256+r[e+m],m+=y,d-=8);if(o===0)o=1-h;else{if(o===c)return l?NaN:(_?-1:1)*(1/0);l=l+Math.pow(2,n),o=o-h}return(_?-1:1)*l*Math.pow(2,o-n)},dc.write=function(r,e,t,n,s,o){var l,u,c,h=o*8-s-1,d=(1<<h)-1,m=d>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:o-1,b=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=d):(l=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-l))<1&&(l--,c*=2),l+m>=1?e+=y/c:e+=y*Math.pow(2,1-m),e*c>=2&&(l++,c/=2),l+m>=d?(u=0,l=d):l+m>=1?(u=(e*c-1)*Math.pow(2,s),l=l+m):(u=e*Math.pow(2,m-1)*Math.pow(2,s),l=0));s>=8;r[t+_]=u&255,_+=b,u/=256,s-=8);for(l=l<<s|u,h+=s;h>0;r[t+_]=l&255,_+=b,l/=256,h-=8);r[t+_-b]|=S*128},dc)}function ZL(){if(ev)return mo;ev=!0;let r=JL(),e=XL(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;mo.Buffer=l,mo.SlowBuffer=N,mo.INSPECT_MAX_BYTES=50;let n=2147483647;mo.kMaxLength=n,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let v=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(v,w),v.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(v){if(v>n)throw new RangeError('The value "'+v+'" is invalid for option "size"');let w=new Uint8Array(v);return Object.setPrototypeOf(w,l.prototype),w}function l(v,w,A){if(typeof v=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(v)}return u(v,w,A)}l.poolSize=8192;function u(v,w,A){if(typeof v=="string")return m(v,w);if(ArrayBuffer.isView(v))return _(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(ae(v,ArrayBuffer)||v&&ae(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ae(v,SharedArrayBuffer)||v&&ae(v.buffer,SharedArrayBuffer)))return b(v,w,A);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let U=v.valueOf&&v.valueOf();if(U!=null&&U!==v)return l.from(U,w,A);let J=S(v);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return l.from(v[Symbol.toPrimitive]("string"),w,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}l.from=function(v,w,A){return u(v,w,A)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function c(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function h(v,w,A){return c(v),v<=0?o(v):w!==void 0?typeof A=="string"?o(v).fill(w,A):o(v).fill(w):o(v)}l.alloc=function(v,w,A){return h(v,w,A)};function d(v){return c(v),o(v<0?0:T(v)|0)}l.allocUnsafe=function(v){return d(v)},l.allocUnsafeSlow=function(v){return d(v)};function m(v,w){if((typeof w!="string"||w==="")&&(w="utf8"),!l.isEncoding(w))throw new TypeError("Unknown encoding: "+w);let A=x(v,w)|0,U=o(A),J=U.write(v,w);return J!==A&&(U=U.slice(0,J)),U}function y(v){let w=v.length<0?0:T(v.length)|0,A=o(w);for(let U=0;U<w;U+=1)A[U]=v[U]&255;return A}function _(v){if(ae(v,Uint8Array)){let w=new Uint8Array(v);return b(w.buffer,w.byteOffset,w.byteLength)}return y(v)}function b(v,w,A){if(w<0||v.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<w+(A||0))throw new RangeError('"length" is outside of buffer bounds');let U;return w===void 0&&A===void 0?U=new Uint8Array(v):A===void 0?U=new Uint8Array(v,w):U=new Uint8Array(v,w,A),Object.setPrototypeOf(U,l.prototype),U}function S(v){if(l.isBuffer(v)){let w=T(v.length)|0,A=o(w);return A.length===0||v.copy(A,0,0,w),A}if(v.length!==void 0)return typeof v.length!="number"||Q(v.length)?o(0):y(v);if(v.type==="Buffer"&&Array.isArray(v.data))return y(v.data)}function T(v){if(v>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return v|0}function N(v){return+v!=v&&(v=0),l.alloc(+v)}l.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==l.prototype},l.compare=function(v,w){if(ae(v,Uint8Array)&&(v=l.from(v,v.offset,v.byteLength)),ae(w,Uint8Array)&&(w=l.from(w,w.offset,w.byteLength)),!l.isBuffer(v)||!l.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===w)return 0;let A=v.length,U=w.length;for(let J=0,ie=Math.min(A,U);J<ie;++J)if(v[J]!==w[J]){A=v[J],U=w[J];break}return A<U?-1:U<A?1:0},l.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(v,w){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return l.alloc(0);let A;if(w===void 0)for(w=0,A=0;A<v.length;++A)w+=v[A].length;let U=l.allocUnsafe(w),J=0;for(A=0;A<v.length;++A){let ie=v[A];if(ae(ie,Uint8Array))J+ie.length>U.length?(l.isBuffer(ie)||(ie=l.from(ie)),ie.copy(U,J)):Uint8Array.prototype.set.call(U,ie,J);else if(l.isBuffer(ie))ie.copy(U,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=ie.length}return U};function x(v,w){if(l.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||ae(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);let A=v.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&A===0)return 0;let J=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return le(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return ke(v).length;default:if(J)return U?-1:le(v).length;w=(""+w).toLowerCase(),J=!0}}l.byteLength=x;function k(v,w,A){let U=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,w>>>=0,A<=w))return"";for(v||(v="utf8");;)switch(v){case"hex":return he(this,w,A);case"utf8":case"utf-8":return F(this,w,A);case"ascii":return Ne(this,w,A);case"latin1":case"binary":return Ie(this,w,A);case"base64":return O(this,w,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,w,A);default:if(U)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),U=!0}}l.prototype._isBuffer=!0;function q(v,w,A){let U=v[w];v[w]=v[A],v[A]=U}l.prototype.swap16=function(){let v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<v;w+=2)q(this,w,w+1);return this},l.prototype.swap32=function(){let v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<v;w+=4)q(this,w,w+3),q(this,w+1,w+2);return this},l.prototype.swap64=function(){let v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<v;w+=8)q(this,w,w+7),q(this,w+1,w+6),q(this,w+2,w+5),q(this,w+3,w+4);return this},l.prototype.toString=function(){let v=this.length;return v===0?"":arguments.length===0?F(this,0,v):k.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(v){if(!l.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:l.compare(this,v)===0},l.prototype.inspect=function(){let v="",w=mo.INSPECT_MAX_BYTES;return v=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(v+=" ... "),"<Buffer "+v+">"},t&&(l.prototype[t]=l.prototype.inspect),l.prototype.compare=function(v,w,A,U,J){if(ae(v,Uint8Array)&&(v=l.from(v,v.offset,v.byteLength)),!l.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(w===void 0&&(w=0),A===void 0&&(A=v?v.length:0),U===void 0&&(U=0),J===void 0&&(J=this.length),w<0||A>v.length||U<0||J>this.length)throw new RangeError("out of range index");if(U>=J&&w>=A)return 0;if(U>=J)return-1;if(w>=A)return 1;if(w>>>=0,A>>>=0,U>>>=0,J>>>=0,this===v)return 0;let ie=J-U,_e=A-w,Ze=Math.min(ie,_e),et=this.slice(U,J),ft=v.slice(w,A);for(let bt=0;bt<Ze;++bt)if(et[bt]!==ft[bt]){ie=et[bt],_e=ft[bt];break}return ie<_e?-1:_e<ie?1:0};function H(v,w,A,U,J){if(v.length===0)return-1;if(typeof A=="string"?(U=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Q(A)&&(A=J?0:v.length-1),A<0&&(A=v.length+A),A>=v.length){if(J)return-1;A=v.length-1}else if(A<0)if(J)A=0;else return-1;if(typeof w=="string"&&(w=l.from(w,U)),l.isBuffer(w))return w.length===0?-1:$(v,w,A,U,J);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(v,w,A):Uint8Array.prototype.lastIndexOf.call(v,w,A):$(v,[w],A,U,J);throw new TypeError("val must be string, number or Buffer")}function $(v,w,A,U,J){let ie=1,_e=v.length,Ze=w.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(v.length<2||w.length<2)return-1;ie=2,_e/=2,Ze/=2,A/=2}function et(bt,mt){return ie===1?bt[mt]:bt.readUInt16BE(mt*ie)}let ft;if(J){let bt=-1;for(ft=A;ft<_e;ft++)if(et(v,ft)===et(w,bt===-1?0:ft-bt)){if(bt===-1&&(bt=ft),ft-bt+1===Ze)return bt*ie}else bt!==-1&&(ft-=ft-bt),bt=-1}else for(A+Ze>_e&&(A=_e-Ze),ft=A;ft>=0;ft--){let bt=!0;for(let mt=0;mt<Ze;mt++)if(et(v,ft+mt)!==et(w,mt)){bt=!1;break}if(bt)return ft}return-1}l.prototype.includes=function(v,w,A){return this.indexOf(v,w,A)!==-1},l.prototype.indexOf=function(v,w,A){return H(this,v,w,A,!0)},l.prototype.lastIndexOf=function(v,w,A){return H(this,v,w,A,!1)};function P(v,w,A,U){A=Number(A)||0;let J=v.length-A;U?(U=Number(U),U>J&&(U=J)):U=J;let ie=w.length;U>ie/2&&(U=ie/2);let _e;for(_e=0;_e<U;++_e){let Ze=parseInt(w.substr(_e*2,2),16);if(Q(Ze))return _e;v[A+_e]=Ze}return _e}function R(v,w,A,U){return Ve(le(w,v.length-A),v,A,U)}function V(v,w,A,U){return Ve(Ee(w),v,A,U)}function M(v,w,A,U){return Ve(ke(w),v,A,U)}function W(v,w,A,U){return Ve(Me(w,v.length-A),v,A,U)}l.prototype.write=function(v,w,A,U){if(w===void 0)U="utf8",A=this.length,w=0;else if(A===void 0&&typeof w=="string")U=w,A=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(A)?(A=A>>>0,U===void 0&&(U="utf8")):(U=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let J=this.length-w;if((A===void 0||A>J)&&(A=J),v.length>0&&(A<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let ie=!1;for(;;)switch(U){case"hex":return P(this,v,w,A);case"utf8":case"utf-8":return R(this,v,w,A);case"ascii":case"latin1":case"binary":return V(this,v,w,A);case"base64":return M(this,v,w,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,v,w,A);default:if(ie)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),ie=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(v,w,A){return w===0&&A===v.length?r.fromByteArray(v):r.fromByteArray(v.slice(w,A))}function F(v,w,A){A=Math.min(v.length,A);let U=[],J=w;for(;J<A;){let ie=v[J],_e=null,Ze=ie>239?4:ie>223?3:ie>191?2:1;if(J+Ze<=A){let et,ft,bt,mt;switch(Ze){case 1:ie<128&&(_e=ie);break;case 2:et=v[J+1],(et&192)===128&&(mt=(ie&31)<<6|et&63,mt>127&&(_e=mt));break;case 3:et=v[J+1],ft=v[J+2],(et&192)===128&&(ft&192)===128&&(mt=(ie&15)<<12|(et&63)<<6|ft&63,mt>2047&&(mt<55296||mt>57343)&&(_e=mt));break;case 4:et=v[J+1],ft=v[J+2],bt=v[J+3],(et&192)===128&&(ft&192)===128&&(bt&192)===128&&(mt=(ie&15)<<18|(et&63)<<12|(ft&63)<<6|bt&63,mt>65535&&mt<1114112&&(_e=mt))}}_e===null?(_e=65533,Ze=1):_e>65535&&(_e-=65536,U.push(_e>>>10&1023|55296),_e=56320|_e&1023),U.push(_e),J+=Ze}return se(U)}let ye=4096;function se(v){let w=v.length;if(w<=ye)return String.fromCharCode.apply(String,v);let A="",U=0;for(;U<w;)A+=String.fromCharCode.apply(String,v.slice(U,U+=ye));return A}function Ne(v,w,A){let U="";A=Math.min(v.length,A);for(let J=w;J<A;++J)U+=String.fromCharCode(v[J]&127);return U}function Ie(v,w,A){let U="";A=Math.min(v.length,A);for(let J=w;J<A;++J)U+=String.fromCharCode(v[J]);return U}function he(v,w,A){let U=v.length;(!w||w<0)&&(w=0),(!A||A<0||A>U)&&(A=U);let J="";for(let ie=w;ie<A;++ie)J+=re[v[ie]];return J}function Re(v,w,A){let U=v.slice(w,A),J="";for(let ie=0;ie<U.length-1;ie+=2)J+=String.fromCharCode(U[ie]+U[ie+1]*256);return J}l.prototype.slice=function(v,w){let A=this.length;v=~~v,w=w===void 0?A:~~w,v<0?(v+=A,v<0&&(v=0)):v>A&&(v=A),w<0?(w+=A,w<0&&(w=0)):w>A&&(w=A),w<v&&(w=v);let U=this.subarray(v,w);return Object.setPrototypeOf(U,l.prototype),U};function B(v,w,A){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+w>A)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(v,w,A){v=v>>>0,w=w>>>0,A||B(v,w,this.length);let U=this[v],J=1,ie=0;for(;++ie<w&&(J*=256);)U+=this[v+ie]*J;return U},l.prototype.readUintBE=l.prototype.readUIntBE=function(v,w,A){v=v>>>0,w=w>>>0,A||B(v,w,this.length);let U=this[v+--w],J=1;for(;w>0&&(J*=256);)U+=this[v+--w]*J;return U},l.prototype.readUint8=l.prototype.readUInt8=function(v,w){return v=v>>>0,w||B(v,1,this.length),this[v]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(v,w){return v=v>>>0,w||B(v,2,this.length),this[v]|this[v+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(v,w){return v=v>>>0,w||B(v,2,this.length),this[v]<<8|this[v+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(v,w){return v=v>>>0,w||B(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(v,w){return v=v>>>0,w||B(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},l.prototype.readBigUInt64LE=Z(function(v){v=v>>>0,ve(v,"offset");let w=this[v],A=this[v+7];(w===void 0||A===void 0)&&Fe(v,this.length-8);let U=w+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,J=this[++v]+this[++v]*2**8+this[++v]*2**16+A*2**24;return BigInt(U)+(BigInt(J)<<BigInt(32))}),l.prototype.readBigUInt64BE=Z(function(v){v=v>>>0,ve(v,"offset");let w=this[v],A=this[v+7];(w===void 0||A===void 0)&&Fe(v,this.length-8);let U=w*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],J=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+A;return(BigInt(U)<<BigInt(32))+BigInt(J)}),l.prototype.readIntLE=function(v,w,A){v=v>>>0,w=w>>>0,A||B(v,w,this.length);let U=this[v],J=1,ie=0;for(;++ie<w&&(J*=256);)U+=this[v+ie]*J;return J*=128,U>=J&&(U-=Math.pow(2,8*w)),U},l.prototype.readIntBE=function(v,w,A){v=v>>>0,w=w>>>0,A||B(v,w,this.length);let U=w,J=1,ie=this[v+--U];for(;U>0&&(J*=256);)ie+=this[v+--U]*J;return J*=128,ie>=J&&(ie-=Math.pow(2,8*w)),ie},l.prototype.readInt8=function(v,w){return v=v>>>0,w||B(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},l.prototype.readInt16LE=function(v,w){v=v>>>0,w||B(v,2,this.length);let A=this[v]|this[v+1]<<8;return A&32768?A|4294901760:A},l.prototype.readInt16BE=function(v,w){v=v>>>0,w||B(v,2,this.length);let A=this[v+1]|this[v]<<8;return A&32768?A|4294901760:A},l.prototype.readInt32LE=function(v,w){return v=v>>>0,w||B(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},l.prototype.readInt32BE=function(v,w){return v=v>>>0,w||B(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},l.prototype.readBigInt64LE=Z(function(v){v=v>>>0,ve(v,"offset");let w=this[v],A=this[v+7];(w===void 0||A===void 0)&&Fe(v,this.length-8);let U=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(A<<24);return(BigInt(U)<<BigInt(32))+BigInt(w+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),l.prototype.readBigInt64BE=Z(function(v){v=v>>>0,ve(v,"offset");let w=this[v],A=this[v+7];(w===void 0||A===void 0)&&Fe(v,this.length-8);let U=(w<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(U)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+A)}),l.prototype.readFloatLE=function(v,w){return v=v>>>0,w||B(v,4,this.length),e.read(this,v,!0,23,4)},l.prototype.readFloatBE=function(v,w){return v=v>>>0,w||B(v,4,this.length),e.read(this,v,!1,23,4)},l.prototype.readDoubleLE=function(v,w){return v=v>>>0,w||B(v,8,this.length),e.read(this,v,!0,52,8)},l.prototype.readDoubleBE=function(v,w){return v=v>>>0,w||B(v,8,this.length),e.read(this,v,!1,52,8)};function ue(v,w,A,U,J,ie){if(!l.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>J||w<ie)throw new RangeError('"value" argument is out of bounds');if(A+U>v.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(v,w,A,U){if(v=+v,w=w>>>0,A=A>>>0,!U){let _e=Math.pow(2,8*A)-1;ue(this,v,w,A,_e,0)}let J=1,ie=0;for(this[w]=v&255;++ie<A&&(J*=256);)this[w+ie]=v/J&255;return w+A},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(v,w,A,U){if(v=+v,w=w>>>0,A=A>>>0,!U){let _e=Math.pow(2,8*A)-1;ue(this,v,w,A,_e,0)}let J=A-1,ie=1;for(this[w+J]=v&255;--J>=0&&(ie*=256);)this[w+J]=v/ie&255;return w+A},l.prototype.writeUint8=l.prototype.writeUInt8=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,1,255,0),this[w]=v&255,w+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,2,65535,0),this[w]=v&255,this[w+1]=v>>>8,w+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,2,65535,0),this[w]=v>>>8,this[w+1]=v&255,w+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,4,4294967295,0),this[w+3]=v>>>24,this[w+2]=v>>>16,this[w+1]=v>>>8,this[w]=v&255,w+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,4,4294967295,0),this[w]=v>>>24,this[w+1]=v>>>16,this[w+2]=v>>>8,this[w+3]=v&255,w+4};function G(v,w,A,U,J){de(w,U,J,v,A,7);let ie=Number(w&BigInt(4294967295));v[A++]=ie,ie=ie>>8,v[A++]=ie,ie=ie>>8,v[A++]=ie,ie=ie>>8,v[A++]=ie;let _e=Number(w>>BigInt(32)&BigInt(4294967295));return v[A++]=_e,_e=_e>>8,v[A++]=_e,_e=_e>>8,v[A++]=_e,_e=_e>>8,v[A++]=_e,A}function we(v,w,A,U,J){de(w,U,J,v,A,7);let ie=Number(w&BigInt(4294967295));v[A+7]=ie,ie=ie>>8,v[A+6]=ie,ie=ie>>8,v[A+5]=ie,ie=ie>>8,v[A+4]=ie;let _e=Number(w>>BigInt(32)&BigInt(4294967295));return v[A+3]=_e,_e=_e>>8,v[A+2]=_e,_e=_e>>8,v[A+1]=_e,_e=_e>>8,v[A]=_e,A+8}l.prototype.writeBigUInt64LE=Z(function(v,w=0){return G(this,v,w,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Z(function(v,w=0){return we(this,v,w,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(v,w,A,U){if(v=+v,w=w>>>0,!U){let Ze=Math.pow(2,8*A-1);ue(this,v,w,A,Ze-1,-Ze)}let J=0,ie=1,_e=0;for(this[w]=v&255;++J<A&&(ie*=256);)v<0&&_e===0&&this[w+J-1]!==0&&(_e=1),this[w+J]=(v/ie>>0)-_e&255;return w+A},l.prototype.writeIntBE=function(v,w,A,U){if(v=+v,w=w>>>0,!U){let Ze=Math.pow(2,8*A-1);ue(this,v,w,A,Ze-1,-Ze)}let J=A-1,ie=1,_e=0;for(this[w+J]=v&255;--J>=0&&(ie*=256);)v<0&&_e===0&&this[w+J+1]!==0&&(_e=1),this[w+J]=(v/ie>>0)-_e&255;return w+A},l.prototype.writeInt8=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,1,127,-128),v<0&&(v=255+v+1),this[w]=v&255,w+1},l.prototype.writeInt16LE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,2,32767,-32768),this[w]=v&255,this[w+1]=v>>>8,w+2},l.prototype.writeInt16BE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,2,32767,-32768),this[w]=v>>>8,this[w+1]=v&255,w+2},l.prototype.writeInt32LE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,4,2147483647,-2147483648),this[w]=v&255,this[w+1]=v>>>8,this[w+2]=v>>>16,this[w+3]=v>>>24,w+4},l.prototype.writeInt32BE=function(v,w,A){return v=+v,w=w>>>0,A||ue(this,v,w,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[w]=v>>>24,this[w+1]=v>>>16,this[w+2]=v>>>8,this[w+3]=v&255,w+4},l.prototype.writeBigInt64LE=Z(function(v,w=0){return G(this,v,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Z(function(v,w=0){return we(this,v,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function De(v,w,A,U,J,ie){if(A+U>v.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function oe(v,w,A,U,J){return w=+w,A=A>>>0,J||De(v,w,A,4),e.write(v,w,A,U,23,4),A+4}l.prototype.writeFloatLE=function(v,w,A){return oe(this,v,w,!0,A)},l.prototype.writeFloatBE=function(v,w,A){return oe(this,v,w,!1,A)};function Ge(v,w,A,U,J){return w=+w,A=A>>>0,J||De(v,w,A,8),e.write(v,w,A,U,52,8),A+8}l.prototype.writeDoubleLE=function(v,w,A){return Ge(this,v,w,!0,A)},l.prototype.writeDoubleBE=function(v,w,A){return Ge(this,v,w,!1,A)},l.prototype.copy=function(v,w,A,U){if(!l.isBuffer(v))throw new TypeError("argument should be a Buffer");if(A||(A=0),!U&&U!==0&&(U=this.length),w>=v.length&&(w=v.length),w||(w=0),U>0&&U<A&&(U=A),U===A||v.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),v.length-w<U-A&&(U=v.length-w+A);let J=U-A;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,A,U):Uint8Array.prototype.set.call(v,this.subarray(A,U),w),J},l.prototype.fill=function(v,w,A,U){if(typeof v=="string"){if(typeof w=="string"?(U=w,w=0,A=this.length):typeof A=="string"&&(U=A,A=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!l.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(v.length===1){let ie=v.charCodeAt(0);(U==="utf8"&&ie<128||U==="latin1")&&(v=ie)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(w<0||this.length<w||this.length<A)throw new RangeError("Out of range index");if(A<=w)return this;w=w>>>0,A=A===void 0?this.length:A>>>0,v||(v=0);let J;if(typeof v=="number")for(J=w;J<A;++J)this[J]=v;else{let ie=l.isBuffer(v)?v:l.from(v,U),_e=ie.length;if(_e===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(J=0;J<A-w;++J)this[J+w]=ie[J%_e]}return this};let ce={};function ee(v,w,A){ce[v]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(v,w){return`The "${v}" argument must be of type number. Received type ${typeof w}`},TypeError),ee("ERR_OUT_OF_RANGE",function(v,w,A){let U=`The value of "${v}" is out of range.`,J=A;return Number.isInteger(A)&&Math.abs(A)>2**32?J=xe(String(A)):typeof A=="bigint"&&(J=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(J=xe(J)),J+="n"),U+=` It must be ${w}. Received ${J}`,U},RangeError);function xe(v){let w="",A=v.length,U=v[0]==="-"?1:0;for(;A>=U+4;A-=3)w=`_${v.slice(A-3,A)}${w}`;return`${v.slice(0,A)}${w}`}function me(v,w,A){ve(w,"offset"),(v[w]===void 0||v[w+A]===void 0)&&Fe(w,v.length-(A+1))}function de(v,w,A,U,J,ie){if(v>A||v<w){let _e=typeof w=="bigint"?"n":"",Ze;throw w===0||w===BigInt(0)?Ze=`>= 0${_e} and < 2${_e} ** ${(ie+1)*8}${_e}`:Ze=`>= -(2${_e} ** ${(ie+1)*8-1}${_e}) and < 2 ** ${(ie+1)*8-1}${_e}`,new ce.ERR_OUT_OF_RANGE("value",Ze,v)}me(U,J,ie)}function ve(v,w){if(typeof v!="number")throw new ce.ERR_INVALID_ARG_TYPE(w,"number",v)}function Fe(v,w,A){throw Math.floor(v)!==v?(ve(v,A),new ce.ERR_OUT_OF_RANGE("offset","an integer",v)):w<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,v)}let Oe=/[^+/0-9A-Za-z-_]/g;function ne(v){if(v=v.split("=")[0],v=v.trim().replace(Oe,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function le(v,w){w=w||1/0;let A,U=v.length,J=null,ie=[];for(let _e=0;_e<U;++_e){if(A=v.charCodeAt(_e),A>55295&&A<57344){if(!J){if(A>56319){(w-=3)>-1&&ie.push(239,191,189);continue}else if(_e+1===U){(w-=3)>-1&&ie.push(239,191,189);continue}J=A;continue}if(A<56320){(w-=3)>-1&&ie.push(239,191,189),J=A;continue}A=(J-55296<<10|A-56320)+65536}else J&&(w-=3)>-1&&ie.push(239,191,189);if(J=null,A<128){if((w-=1)<0)break;ie.push(A)}else if(A<2048){if((w-=2)<0)break;ie.push(A>>6|192,A&63|128)}else if(A<65536){if((w-=3)<0)break;ie.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((w-=4)<0)break;ie.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return ie}function Ee(v){let w=[];for(let A=0;A<v.length;++A)w.push(v.charCodeAt(A)&255);return w}function Me(v,w){let A,U,J,ie=[];for(let _e=0;_e<v.length&&!((w-=2)<0);++_e)A=v.charCodeAt(_e),U=A>>8,J=A%256,ie.push(J),ie.push(U);return ie}function ke(v){return r.toByteArray(ne(v))}function Ve(v,w,A,U){let J;for(J=0;J<U&&!(J+A>=w.length||J>=v.length);++J)w[J+A]=v[J];return J}function ae(v,w){return v instanceof w||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===w.name}function Q(v){return v!==v}let re=function(){let v="0123456789abcdef",w=new Array(256);for(let A=0;A<16;++A){let U=A*16;for(let J=0;J<16;++J)w[U+J]=v[A]+v[J]}return w}();function Z(v){return typeof BigInt>"u"?Ue:v}function Ue(){throw new Error("BigInt not supported")}return mo}var Ml,Xy,dc,Zy,mo,ev,Ts,gd,Cx,Rx,Kr=An(()=>{je(),ze(),$e(),Ml={},Xy=!1,dc={},Zy=!1,mo={},ev=!1,Ts=ZL(),Ts.Buffer,Ts.SlowBuffer,Ts.INSPECT_MAX_BYTES,Ts.kMaxLength,gd=Ts.Buffer,Cx=Ts.INSPECT_MAX_BYTES,Rx=Ts.kMaxLength}),ze=An(()=>{Kr()}),eM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};r.default=e}),dr=Ke((r,e)=>{je(),ze(),$e();var t=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let s="";for(let o=0;o<n.length;o++)s+=`    ${n[o].stack}
`;super(s),this.name="AggregateError",this.errors=n}};e.exports={AggregateError:t,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,s){return n.includes(s)},ArrayPrototypeIndexOf(n,s){return n.indexOf(s)},ArrayPrototypeJoin(n,s){return n.join(s)},ArrayPrototypeMap(n,s){return n.map(s)},ArrayPrototypePop(n,s){return n.pop(s)},ArrayPrototypePush(n,s){return n.push(s)},ArrayPrototypeSlice(n,s,o){return n.slice(s,o)},Error,FunctionPrototypeCall(n,s,...o){return n.call(s,...o)},FunctionPrototypeSymbolHasInstance(n,s){return Function.prototype[Symbol.hasInstance].call(n,s)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,s){return Object.defineProperties(n,s)},ObjectDefineProperty(n,s,o){return Object.defineProperty(n,s,o)},ObjectGetOwnPropertyDescriptor(n,s){return Object.getOwnPropertyDescriptor(n,s)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,s){return Object.setPrototypeOf(n,s)},Promise,PromisePrototypeCatch(n,s){return n.catch(s)},PromisePrototypeThen(n,s,o){return n.then(s,o)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,s){return n.test(s)},SafeSet:Set,String,StringPrototypeSlice(n,s,o){return n.slice(s,o)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,s,o){return n.set(s,o)},Boolean,Uint8Array}}),kx=Ke((r,e)=>{je(),ze(),$e(),e.exports={format(t,...n){return t.replace(/%([sdifj])/g,function(...[s,o]){let l=n.shift();return o==="f"?l.toFixed(6):o==="j"?JSON.stringify(l):o==="s"&&typeof l=="object"?`${l.constructor!==Object?l.constructor.name:""} {}`.trim():l.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}}),In=Ke((r,e)=>{je(),ze(),$e();var{format:t,inspect:n}=kx(),{AggregateError:s}=dr(),o=globalThis.AggregateError||s,l=Symbol("kIsNodeError"),u=["string","function","number","object","Function","Object","boolean","bigint","symbol"],c=/^([A-Z][a-z0-9]*)+$/,h="__node_internal_",d={};function m(x,k){if(!x)throw new d.ERR_INTERNAL_ASSERTION(k)}function y(x){let k="",q=x.length,H=x[0]==="-"?1:0;for(;q>=H+4;q-=3)k=`_${x.slice(q-3,q)}${k}`;return`${x.slice(0,q)}${k}`}function _(x,k,q){if(typeof k=="function")return m(k.length<=q.length,`Code: ${x}; The provided arguments length (${q.length}) does not match the required ones (${k.length}).`),k(...q);let H=(k.match(/%[dfijoOs]/g)||[]).length;return m(H===q.length,`Code: ${x}; The provided arguments length (${q.length}) does not match the required ones (${H}).`),q.length===0?k:t(k,...q)}function b(x,k,q){q||(q=Error);class H extends q{constructor(...P){super(_(x,k,P))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(H.prototype,{name:{value:q.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),H.prototype.code=x,H.prototype[l]=!0,d[x]=H}function S(x){let k=h+x.name;return Object.defineProperty(x,"name",{value:k}),x}function T(x,k){if(x&&k&&x!==k){if(Array.isArray(k.errors))return k.errors.push(x),k;let q=new o([k,x],k.message);return q.code=k.code,q}return x||k}var N=class extends Error{constructor(x="The operation was aborted",k=void 0){if(k!==void 0&&typeof k!="object")throw new d.ERR_INVALID_ARG_TYPE("options","Object",k);super(x,k),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(x,k,q)=>{m(typeof x=="string","'name' must be a string"),Array.isArray(k)||(k=[k]);let H="The ";x.endsWith(" argument")?H+=`${x} `:H+=`"${x}" ${x.includes(".")?"property":"argument"} `,H+="must be ";let $=[],P=[],R=[];for(let M of k)m(typeof M=="string","All expected entries have to be of type string"),u.includes(M)?$.push(M.toLowerCase()):c.test(M)?P.push(M):(m(M!=="object",'The value "object" should be written as "Object"'),R.push(M));if(P.length>0){let M=$.indexOf("object");M!==-1&&($.splice($,M,1),P.push("Object"))}if($.length>0){switch($.length){case 1:H+=`of type ${$[0]}`;break;case 2:H+=`one of type ${$[0]} or ${$[1]}`;break;default:{let M=$.pop();H+=`one of type ${$.join(", ")}, or ${M}`}}(P.length>0||R.length>0)&&(H+=" or ")}if(P.length>0){switch(P.length){case 1:H+=`an instance of ${P[0]}`;break;case 2:H+=`an instance of ${P[0]} or ${P[1]}`;break;default:{let M=P.pop();H+=`an instance of ${P.join(", ")}, or ${M}`}}R.length>0&&(H+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(H+="an "),H+=`${R[0]}`;break;case 2:H+=`one of ${R[0]} or ${R[1]}`;break;default:{let M=R.pop();H+=`one of ${R.join(", ")}, or ${M}`}}if(q==null)H+=`. Received ${q}`;else if(typeof q=="function"&&q.name)H+=`. Received function ${q.name}`;else if(typeof q=="object"){var V;if((V=q.constructor)!==null&&V!==void 0&&V.name)H+=`. Received an instance of ${q.constructor.name}`;else{let M=n(q,{depth:-1});H+=`. Received ${M}`}}else{let M=n(q,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),H+=`. Received type ${typeof q} (${M})`}return H},TypeError),b("ERR_INVALID_ARG_VALUE",(x,k,q="is invalid")=>{let H=n(k);return H.length>128&&(H=H.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${q}. Received ${H}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(x,k,q)=>{var H;let $=q!=null&&(H=q.constructor)!==null&&H!==void 0&&H.name?`instance of ${q.constructor.name}`:`type ${typeof q}`;return`Expected ${x} to be returned from the "${k}" function but got ${$}.`},TypeError),b("ERR_MISSING_ARGS",(...x)=>{m(x.length>0,"At least one arg needs to be specified");let k,q=x.length;switch(x=(Array.isArray(x)?x:[x]).map(H=>`"${H}"`).join(" or "),q){case 1:k+=`The ${x[0]} argument`;break;case 2:k+=`The ${x[0]} and ${x[1]} arguments`;break;default:{let H=x.pop();k+=`The ${x.join(", ")}, and ${H} arguments`}break}return`${k} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(x,k,q)=>{m(k,'Missing "range" argument');let H;if(Number.isInteger(q)&&Math.abs(q)>2**32)H=y(String(q));else if(typeof q=="bigint"){H=String(q);let $=BigInt(2)**BigInt(32);(q>$||q<-$)&&(H=y(H)),H+="n"}else H=n(q);return`The value of "${x}" is out of range. It must be ${k}. Received ${H}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:N,aggregateTwoErrors:S(T),hideStackFrames:S,codes:d}}),Mc=Ke((r,e)=>{je(),ze(),$e();var{AbortController:t,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t});function Qt(){Qt.init.call(this)}function Bf(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function Px(r){return r._maxListeners===void 0?Qt.defaultMaxListeners:r._maxListeners}function AE(r,e,t,n){var s,o,l,u;if(Bf(t),(o=r._events)===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),l=o[e]),l===void 0)l=o[e]=t,++r._eventsCount;else if(typeof l=="function"?l=o[e]=n?[t,l]:[l,t]:n?l.unshift(t):l.push(t),(s=Px(r))>0&&l.length>s&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=l.length,u=c,console&&console.warn&&console.warn(u)}return r}function tM(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function IE(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},s=tM.bind(n);return s.listener=t,n.wrapFn=s,s}function CE(r,e,t){var n=r._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?function(o){for(var l=new Array(o.length),u=0;u<l.length;++u)l[u]=o[u].listener||o[u];return l}(s):Nx(s,s.length)}function RE(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function Nx(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}var kE,PE,da,Hm,Qm,Km,Gn,NE=An(()=>{je(),ze(),$e(),da=typeof Reflect=="object"?Reflect:null,Hm=da&&typeof da.apply=="function"?da.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)},PE=da&&typeof da.ownKeys=="function"?da.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)},Qm=Number.isNaN||function(r){return r!=r},kE=Qt,Qt.EventEmitter=Qt,Qt.prototype._events=void 0,Qt.prototype._eventsCount=0,Qt.prototype._maxListeners=void 0,Km=10,Object.defineProperty(Qt,"defaultMaxListeners",{enumerable:!0,get:function(){return Km},set:function(r){if(typeof r!="number"||r<0||Qm(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Km=r}}),Qt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Qt.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Qm(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},Qt.prototype.getMaxListeners=function(){return Px(this)},Qt.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n=r==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var u=s[r];if(u===void 0)return!1;if(typeof u=="function")Hm(u,this,e);else{var c=u.length,h=Nx(u,c);for(t=0;t<c;++t)Hm(h[t],this,e)}return!0},Qt.prototype.addListener=function(r,e){return AE(this,r,e,!1)},Qt.prototype.on=Qt.prototype.addListener,Qt.prototype.prependListener=function(r,e){return AE(this,r,e,!0)},Qt.prototype.once=function(r,e){return Bf(e),this.on(r,IE(this,r,e)),this},Qt.prototype.prependOnceListener=function(r,e){return Bf(e),this.prependListener(r,IE(this,r,e)),this},Qt.prototype.removeListener=function(r,e){var t,n,s,o,l;if(Bf(e),(n=this._events)===void 0)return this;if((t=n[r])===void 0)return this;if(t===e||t.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if(typeof t!="function"){for(s=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){l=t[o].listener,s=o;break}if(s<0)return this;s===0?t.shift():function(u,c){for(;c+1<u.length;c++)u[c]=u[c+1];u.pop()}(t,s),t.length===1&&(n[r]=t[0]),n.removeListener!==void 0&&this.emit("removeListener",r,l||e)}return this},Qt.prototype.off=Qt.prototype.removeListener,Qt.prototype.removeAllListeners=function(r){var e,t,n;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[r]),this;if(arguments.length===0){var s,o=Object.keys(t);for(n=0;n<o.length;++n)(s=o[n])!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=t[r])=="function")this.removeListener(r,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},Qt.prototype.listeners=function(r){return CE(this,r,!0)},Qt.prototype.rawListeners=function(r){return CE(this,r,!1)},Qt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):RE.call(r,e)},Qt.prototype.listenerCount=RE,Qt.prototype.eventNames=function(){return this._eventsCount>0?PE(this._events):[]},Gn=kE,Gn.EventEmitter,Gn.defaultMaxListeners,Gn.init,Gn.listenerCount,Gn.EventEmitter,Gn.defaultMaxListeners,Gn.init,Gn.listenerCount}),zo={};yu(zo,{EventEmitter:()=>Ox,default:()=>Gn,defaultMaxListeners:()=>Dx,init:()=>Lx,listenerCount:()=>Mx,on:()=>Fx,once:()=>Vx});var Ox,Dx,Lx,Mx,Fx,Vx,Qa=An(()=>{je(),ze(),$e(),NE(),NE(),Gn.once=function(r,e){return new Promise((t,n)=>{function s(...l){o!==void 0&&r.removeListener("error",o),t(l)}let o;e!=="error"&&(o=l=>{r.removeListener(name,s),n(l)},r.once("error",o)),r.once(e,s)})},Gn.on=function(r,e){let t=[],n=[],s=null,o=!1,l={async next(){let h=t.shift();if(h)return createIterResult(h,!1);if(s){let d=Promise.reject(s);return s=null,d}return o?createIterResult(void 0,!0):new Promise((d,m)=>n.push({resolve:d,reject:m}))},async return(){r.removeListener(e,u),r.removeListener("error",c),o=!0;for(let h of n)h.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(h){s=h,r.removeListener(e,u),r.removeListener("error",c)},[Symbol.asyncIterator](){return this}};return r.on(e,u),r.on("error",c),l;function u(...h){let d=n.shift();d?d.resolve(createIterResult(h,!1)):t.push(h)}function c(h){o=!0;let d=n.shift();d?d.reject(h):s=h,l.return()}},{EventEmitter:Ox,defaultMaxListeners:Dx,init:Lx,listenerCount:Mx,on:Fx,once:Vx}=Gn}),Bn=Ke((r,e)=>{je(),ze(),$e();var t=(Kr(),Kt(Qr)),{format:n,inspect:s}=kx(),{codes:{ERR_INVALID_ARG_TYPE:o}}=In(),{kResistStopPropagation:l,AggregateError:u,SymbolDispose:c}=dr(),h=globalThis.AbortSignal||Mc().AbortSignal,d=globalThis.AbortController||Mc().AbortController,m=Object.getPrototypeOf(async function(){}).constructor,y=globalThis.Blob||t.Blob,_=typeof y<"u"?function(T){return T instanceof y}:function(T){return!1},b=(T,N)=>{if(T!==void 0&&(T===null||typeof T!="object"||!("aborted"in T)))throw new o(N,"AbortSignal",T)},S=(T,N)=>{if(typeof T!="function")throw new o(N,"Function",T)};e.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(T){let N=!1;return function(...x){N||(N=!0,T.apply(this,x))}},createDeferredPromise:function(){let T,N;return{promise:new Promise((x,k)=>{T=x,N=k}),resolve:T,reject:N}},promisify(T){return new Promise((N,x)=>{T((k,...q)=>k?x(k):N(...q))})},debuglog(){return function(){}},format:n,inspect:s,types:{isAsyncFunction(T){return T instanceof m},isArrayBufferView(T){return ArrayBuffer.isView(T)}},isBlob:_,deprecate(T,N){return T},addAbortListener:(Qa(),Kt(zo)).addAbortListener||function(T,N){if(T===void 0)throw new o("signal","AbortSignal",T);b(T,"signal"),S(N,"listener");let x;return T.aborted?queueMicrotask(()=>N()):(T.addEventListener("abort",N,{__proto__:null,once:!0,[l]:!0}),x=()=>{T.removeEventListener("abort",N)}),{__proto__:null,[c](){var k;(k=x)===null||k===void 0||k()}}},AbortSignalAny:h.any||function(T){if(T.length===1)return T[0];let N=new d,x=()=>N.abort();return T.forEach(k=>{b(k,"signals"),k.addEventListener("abort",x,{once:!0})}),N.signal.addEventListener("abort",()=>{T.forEach(k=>k.removeEventListener("abort",x))},{once:!0}),N.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Xc=Ke((r,e)=>{je(),ze(),$e();var{ArrayIsArray:t,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:s,ArrayPrototypeMap:o,NumberIsInteger:l,NumberIsNaN:u,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:h,NumberParseInt:d,ObjectPrototypeHasOwnProperty:m,RegExpPrototypeExec:y,String:_,StringPrototypeToUpperCase:b,StringPrototypeTrim:S}=dr(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:N,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:k,ERR_OUT_OF_RANGE:q,ERR_UNKNOWN_SIGNAL:H}}=In(),{normalizeEncoding:$}=Bn(),{isAsyncFunction:P,isArrayBufferView:R}=Bn().types,V={};function M(ae){return ae===(ae|0)}function W(ae){return ae===ae>>>0}var O=/^[0-7]+$/,F="must be a 32-bit unsigned integer or an octal string";function ye(ae,Q,re){if(typeof ae>"u"&&(ae=re),typeof ae=="string"){if(y(O,ae)===null)throw new k(Q,ae,F);ae=d(ae,8)}return Ie(ae,Q),ae}var se=T((ae,Q,re=h,Z=c)=>{if(typeof ae!="number")throw new x(Q,"number",ae);if(!l(ae))throw new q(Q,"an integer",ae);if(ae<re||ae>Z)throw new q(Q,`>= ${re} && <= ${Z}`,ae)}),Ne=T((ae,Q,re=-2147483648,Z=2147483647)=>{if(typeof ae!="number")throw new x(Q,"number",ae);if(!l(ae))throw new q(Q,"an integer",ae);if(ae<re||ae>Z)throw new q(Q,`>= ${re} && <= ${Z}`,ae)}),Ie=T((ae,Q,re=!1)=>{if(typeof ae!="number")throw new x(Q,"number",ae);if(!l(ae))throw new q(Q,"an integer",ae);let Z=re?1:0,Ue=4294967295;if(ae<Z||ae>Ue)throw new q(Q,`>= ${Z} && <= ${Ue}`,ae)});function he(ae,Q){if(typeof ae!="string")throw new x(Q,"string",ae)}function Re(ae,Q,re=void 0,Z){if(typeof ae!="number")throw new x(Q,"number",ae);if(re!=null&&ae<re||Z!=null&&ae>Z||(re!=null||Z!=null)&&u(ae))throw new q(Q,`${re!=null?`>= ${re}`:""}${re!=null&&Z!=null?" && ":""}${Z!=null?`<= ${Z}`:""}`,ae)}var B=T((ae,Q,re)=>{if(!n(re,ae)){let Z="must be one of: "+s(o(re,Ue=>typeof Ue=="string"?`'${Ue}'`:_(Ue)),", ");throw new k(Q,ae,Z)}});function ue(ae,Q){if(typeof ae!="boolean")throw new x(Q,"boolean",ae)}function G(ae,Q,re){return ae==null||!m(ae,Q)?re:ae[Q]}var we=T((ae,Q,re=null)=>{let Z=G(re,"allowArray",!1),Ue=G(re,"allowFunction",!1);if(!G(re,"nullable",!1)&&ae===null||!Z&&t(ae)||typeof ae!="object"&&(!Ue||typeof ae!="function"))throw new x(Q,"Object",ae)}),De=T((ae,Q)=>{if(ae!=null&&typeof ae!="object"&&typeof ae!="function")throw new x(Q,"a dictionary",ae)}),oe=T((ae,Q,re=0)=>{if(!t(ae))throw new x(Q,"Array",ae);if(ae.length<re){let Z=`must be longer than ${re}`;throw new k(Q,ae,Z)}});function Ge(ae,Q){oe(ae,Q);for(let re=0;re<ae.length;re++)he(ae[re],`${Q}[${re}]`)}function ce(ae,Q){oe(ae,Q);for(let re=0;re<ae.length;re++)ue(ae[re],`${Q}[${re}]`)}function ee(ae,Q){oe(ae,Q);for(let re=0;re<ae.length;re++){let Z=ae[re],Ue=`${Q}[${re}]`;if(Z==null)throw new x(Ue,"AbortSignal",Z);Fe(Z,Ue)}}function xe(ae,Q="signal"){if(he(ae,Q),V[ae]===void 0)throw V[b(ae)]!==void 0?new H(ae+" (signals must use all capital letters)"):new H(ae)}var me=T((ae,Q="buffer")=>{if(!R(ae))throw new x(Q,["Buffer","TypedArray","DataView"],ae)});function de(ae,Q){let re=$(Q),Z=ae.length;if(re==="hex"&&Z%2!==0)throw new k("encoding",Q,`is invalid for data of length ${Z}`)}function ve(ae,Q="Port",re=!0){if(typeof ae!="number"&&typeof ae!="string"||typeof ae=="string"&&S(ae).length===0||+ae!==+ae>>>0||ae>65535||ae===0&&!re)throw new N(Q,ae,re);return ae|0}var Fe=T((ae,Q)=>{if(ae!==void 0&&(ae===null||typeof ae!="object"||!("aborted"in ae)))throw new x(Q,"AbortSignal",ae)}),Oe=T((ae,Q)=>{if(typeof ae!="function")throw new x(Q,"Function",ae)}),ne=T((ae,Q)=>{if(typeof ae!="function"||P(ae))throw new x(Q,"Function",ae)}),le=T((ae,Q)=>{if(ae!==void 0)throw new x(Q,"undefined",ae)});function Ee(ae,Q,re){if(!n(re,ae))throw new x(Q,`('${s(re,"|")}')`,ae)}var Me=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ke(ae,Q){if(typeof ae>"u"||!y(Me,ae))throw new k(Q,ae,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ve(ae){if(typeof ae=="string")return ke(ae,"hints"),ae;if(t(ae)){let Q=ae.length,re="";if(Q===0)return re;for(let Z=0;Z<Q;Z++){let Ue=ae[Z];ke(Ue,"hints"),re+=Ue,Z!==Q-1&&(re+=", ")}return re}throw new k("hints",ae,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:M,isUint32:W,parseFileMode:ye,validateArray:oe,validateStringArray:Ge,validateBooleanArray:ce,validateAbortSignalArray:ee,validateBoolean:ue,validateBuffer:me,validateDictionary:De,validateEncoding:de,validateFunction:Oe,validateInt32:Ne,validateInteger:se,validateNumber:Re,validateObject:we,validateOneOf:B,validatePlainFunction:ne,validatePort:ve,validateSignalName:xe,validateString:he,validateUint32:Ie,validateUndefined:le,validateUnion:Ee,validateAbortSignal:Fe,validateLinkHeaderValue:Ve}}),Ka=Ke((r,e)=>{je(),ze(),$e();var t=e.exports={},n,s;function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=o}catch{n=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=l}catch{s=l}})();function u(N){if(n===setTimeout)return setTimeout(N,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(N,0);try{return n(N,0)}catch{try{return n.call(null,N,0)}catch{return n.call(this,N,0)}}}function c(N){if(s===clearTimeout)return clearTimeout(N);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(N);try{return s(N)}catch{try{return s.call(null,N)}catch{return s.call(this,N)}}}var h=[],d=!1,m,y=-1;function _(){!d||!m||(d=!1,m.length?h=m.concat(h):y=-1,h.length&&b())}function b(){if(!d){var N=u(_);d=!0;for(var x=h.length;x;){for(m=h,h=[];++y<x;)m&&m[y].run();y=-1,x=h.length}m=null,d=!1,c(N)}}t.nextTick=function(N){var x=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)x[k-1]=arguments[k];h.push(new S(N,x)),h.length===1&&!d&&u(b)};function S(N,x){this.fun=N,this.array=x}S.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function T(){}t.on=T,t.addListener=T,t.once=T,t.off=T,t.removeListener=T,t.removeAllListeners=T,t.emit=T,t.prependListener=T,t.prependOnceListener=T,t.listeners=function(N){return[]},t.binding=function(N){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(N){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Bs=Ke((r,e)=>{je(),ze(),$e();var{SymbolAsyncIterator:t,SymbolIterator:n,SymbolFor:s}=dr(),o=s("nodejs.stream.destroyed"),l=s("nodejs.stream.errored"),u=s("nodejs.stream.readable"),c=s("nodejs.stream.writable"),h=s("nodejs.stream.disturbed"),d=s("nodejs.webstream.isClosedPromise"),m=s("nodejs.webstream.controllerErrorFunction");function y(G,we=!1){var De;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!we||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((De=G._readableState)===null||De===void 0?void 0:De.readable)!==!1)&&(!G._writableState||G._readableState))}function _(G){var we;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((we=G._writableState)===null||we===void 0?void 0:we.writable)!==!1))}function b(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function S(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function T(G){return!!(G&&!S(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function N(G){return!!(G&&!S(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function x(G){return!!(G&&!S(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function k(G){return T(G)||N(G)||x(G)}function q(G,we){return G==null?!1:we===!0?typeof G[t]=="function":we===!1?typeof G[n]=="function":typeof G[t]=="function"||typeof G[n]=="function"}function H(G){if(!S(G))return null;let we=G._writableState,De=G._readableState,oe=we||De;return!!(G.destroyed||G[o]||oe!=null&&oe.destroyed)}function $(G){if(!_(G))return null;if(G.writableEnded===!0)return!0;let we=G._writableState;return we!=null&&we.errored?!1:typeof(we==null?void 0:we.ended)!="boolean"?null:we.ended}function P(G,we){if(!_(G))return null;if(G.writableFinished===!0)return!0;let De=G._writableState;return De!=null&&De.errored?!1:typeof(De==null?void 0:De.finished)!="boolean"?null:!!(De.finished||we===!1&&De.ended===!0&&De.length===0)}function R(G){if(!y(G))return null;if(G.readableEnded===!0)return!0;let we=G._readableState;return!we||we.errored?!1:typeof(we==null?void 0:we.ended)!="boolean"?null:we.ended}function V(G,we){if(!y(G))return null;let De=G._readableState;return De!=null&&De.errored?!1:typeof(De==null?void 0:De.endEmitted)!="boolean"?null:!!(De.endEmitted||we===!1&&De.ended===!0&&De.length===0)}function M(G){return G&&G[u]!=null?G[u]:typeof(G==null?void 0:G.readable)!="boolean"?null:H(G)?!1:y(G)&&G.readable&&!V(G)}function W(G){return G&&G[c]!=null?G[c]:typeof(G==null?void 0:G.writable)!="boolean"?null:H(G)?!1:_(G)&&G.writable&&!$(G)}function O(G,we){return S(G)?H(G)?!0:!((we==null?void 0:we.readable)!==!1&&M(G)||(we==null?void 0:we.writable)!==!1&&W(G)):null}function F(G){var we,De;return S(G)?G.writableErrored?G.writableErrored:(we=(De=G._writableState)===null||De===void 0?void 0:De.errored)!==null&&we!==void 0?we:null:null}function ye(G){var we,De;return S(G)?G.readableErrored?G.readableErrored:(we=(De=G._readableState)===null||De===void 0?void 0:De.errored)!==null&&we!==void 0?we:null:null}function se(G){if(!S(G))return null;if(typeof G.closed=="boolean")return G.closed;let we=G._writableState,De=G._readableState;return typeof(we==null?void 0:we.closed)=="boolean"||typeof(De==null?void 0:De.closed)=="boolean"?(we==null?void 0:we.closed)||(De==null?void 0:De.closed):typeof G._closed=="boolean"&&Ne(G)?G._closed:null}function Ne(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function Ie(G){return typeof G._sent100=="boolean"&&Ne(G)}function he(G){var we;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((we=G.req)===null||we===void 0?void 0:we.upgradeOrConnect)===void 0}function Re(G){if(!S(G))return null;let we=G._writableState,De=G._readableState,oe=we||De;return!oe&&Ie(G)||!!(oe&&oe.autoDestroy&&oe.emitClose&&oe.closed===!1)}function B(G){var we;return!!(G&&((we=G[h])!==null&&we!==void 0?we:G.readableDidRead||G.readableAborted))}function ue(G){var we,De,oe,Ge,ce,ee,xe,me,de,ve;return!!(G&&((we=(De=(oe=(Ge=(ce=(ee=G[l])!==null&&ee!==void 0?ee:G.readableErrored)!==null&&ce!==void 0?ce:G.writableErrored)!==null&&Ge!==void 0?Ge:(xe=G._readableState)===null||xe===void 0?void 0:xe.errorEmitted)!==null&&oe!==void 0?oe:(me=G._writableState)===null||me===void 0?void 0:me.errorEmitted)!==null&&De!==void 0?De:(de=G._readableState)===null||de===void 0?void 0:de.errored)!==null&&we!==void 0?we:!((ve=G._writableState)===null||ve===void 0)&&ve.errored))}e.exports={isDestroyed:H,kIsDestroyed:o,isDisturbed:B,kIsDisturbed:h,isErrored:ue,kIsErrored:l,isReadable:M,kIsReadable:u,kIsClosedPromise:d,kControllerErrorFunction:m,kIsWritable:c,isClosed:se,isDuplexNodeStream:b,isFinished:O,isIterable:q,isReadableNodeStream:y,isReadableStream:T,isReadableEnded:R,isReadableFinished:V,isReadableErrored:ye,isNodeStream:S,isWebStream:k,isWritable:W,isWritableNodeStream:_,isWritableStream:N,isWritableEnded:$,isWritableFinished:P,isWritableErrored:F,isServerRequest:he,isServerResponse:Ie,willEmitClose:Re,isTransformStream:x}}),Wo=Ke((r,e)=>{je(),ze(),$e();var t=Ka(),{AbortError:n,codes:s}=In(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:l}=s,{kEmptyObject:u,once:c}=Bn(),{validateAbortSignal:h,validateFunction:d,validateObject:m,validateBoolean:y}=Xc(),{Promise:_,PromisePrototypeThen:b,SymbolDispose:S}=dr(),{isClosed:T,isReadable:N,isReadableNodeStream:x,isReadableStream:k,isReadableFinished:q,isReadableErrored:H,isWritable:$,isWritableNodeStream:P,isWritableStream:R,isWritableFinished:V,isWritableErrored:M,isNodeStream:W,willEmitClose:O,kIsClosedPromise:F}=Bs(),ye;function se(B){return B.setHeader&&typeof B.abort=="function"}var Ne=()=>{};function Ie(B,ue,G){var we,De;if(arguments.length===2?(G=ue,ue=u):ue==null?ue=u:m(ue,"options"),d(G,"callback"),h(ue.signal,"options.signal"),G=c(G),k(B)||R(B))return he(B,ue,G);if(!W(B))throw new o("stream",["ReadableStream","WritableStream","Stream"],B);let oe=(we=ue.readable)!==null&&we!==void 0?we:x(B),Ge=(De=ue.writable)!==null&&De!==void 0?De:P(B),ce=B._writableState,ee=B._readableState,xe=()=>{B.writable||ve()},me=O(B)&&x(B)===oe&&P(B)===Ge,de=V(B,!1),ve=()=>{de=!0,B.destroyed&&(me=!1),!(me&&(!B.readable||oe))&&(!oe||Fe)&&G.call(B)},Fe=q(B,!1),Oe=()=>{Fe=!0,B.destroyed&&(me=!1),!(me&&(!B.writable||Ge))&&(!Ge||de)&&G.call(B)},ne=ae=>{G.call(B,ae)},le=T(B),Ee=()=>{le=!0;let ae=M(B)||H(B);if(ae&&typeof ae!="boolean")return G.call(B,ae);if(oe&&!Fe&&x(B,!0)&&!q(B,!1))return G.call(B,new l);if(Ge&&!de&&!V(B,!1))return G.call(B,new l);G.call(B)},Me=()=>{le=!0;let ae=M(B)||H(B);if(ae&&typeof ae!="boolean")return G.call(B,ae);G.call(B)},ke=()=>{B.req.on("finish",ve)};se(B)?(B.on("complete",ve),me||B.on("abort",Ee),B.req?ke():B.on("request",ke)):Ge&&!ce&&(B.on("end",xe),B.on("close",xe)),!me&&typeof B.aborted=="boolean"&&B.on("aborted",Ee),B.on("end",Oe),B.on("finish",ve),ue.error!==!1&&B.on("error",ne),B.on("close",Ee),le?t.nextTick(Ee):ce!=null&&ce.errorEmitted||ee!=null&&ee.errorEmitted?me||t.nextTick(Me):(!oe&&(!me||N(B))&&(de||$(B)===!1)||!Ge&&(!me||$(B))&&(Fe||N(B)===!1)||ee&&B.req&&B.aborted)&&t.nextTick(Me);let Ve=()=>{G=Ne,B.removeListener("aborted",Ee),B.removeListener("complete",ve),B.removeListener("abort",Ee),B.removeListener("request",ke),B.req&&B.req.removeListener("finish",ve),B.removeListener("end",xe),B.removeListener("close",xe),B.removeListener("finish",ve),B.removeListener("end",Oe),B.removeListener("error",ne),B.removeListener("close",Ee)};if(ue.signal&&!le){let ae=()=>{let Q=G;Ve(),Q.call(B,new n(void 0,{cause:ue.signal.reason}))};if(ue.signal.aborted)t.nextTick(ae);else{ye=ye||Bn().addAbortListener;let Q=ye(ue.signal,ae),re=G;G=c((...Z)=>{Q[S](),re.apply(B,Z)})}}return Ve}function he(B,ue,G){let we=!1,De=Ne;if(ue.signal)if(De=()=>{we=!0,G.call(B,new n(void 0,{cause:ue.signal.reason}))},ue.signal.aborted)t.nextTick(De);else{ye=ye||Bn().addAbortListener;let Ge=ye(ue.signal,De),ce=G;G=c((...ee)=>{Ge[S](),ce.apply(B,ee)})}let oe=(...Ge)=>{we||t.nextTick(()=>G.apply(B,Ge))};return b(B[F].promise,oe,oe),Ne}function Re(B,ue){var G;let we=!1;return ue===null&&(ue=u),(G=ue)!==null&&G!==void 0&&G.cleanup&&(y(ue.cleanup,"cleanup"),we=ue.cleanup),new _((De,oe)=>{let Ge=Ie(B,ue,ce=>{we&&Ge(),ce?oe(ce):De()})})}e.exports=Ie,e.exports.finished=Re}),vu=Ke((r,e)=>{je(),ze(),$e();var t=Ka(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:o}=In(),{Symbol:l}=dr(),{kIsDestroyed:u,isDestroyed:c,isFinished:h,isServerRequest:d}=Bs(),m=l("kDestroy"),y=l("kConstruct");function _(O,F,ye){O&&(O.stack,F&&!F.errored&&(F.errored=O),ye&&!ye.errored&&(ye.errored=O))}function b(O,F){let ye=this._readableState,se=this._writableState,Ne=se||ye;return se!=null&&se.destroyed||ye!=null&&ye.destroyed?(typeof F=="function"&&F(),this):(_(O,se,ye),se&&(se.destroyed=!0),ye&&(ye.destroyed=!0),Ne.constructed?S(this,O,F):this.once(m,function(Ie){S(this,n(Ie,O),F)}),this)}function S(O,F,ye){let se=!1;function Ne(Ie){if(se)return;se=!0;let he=O._readableState,Re=O._writableState;_(Ie,Re,he),Re&&(Re.closed=!0),he&&(he.closed=!0),typeof ye=="function"&&ye(Ie),Ie?t.nextTick(T,O,Ie):t.nextTick(N,O)}try{O._destroy(F||null,Ne)}catch(Ie){Ne(Ie)}}function T(O,F){x(O,F),N(O)}function N(O){let F=O._readableState,ye=O._writableState;ye&&(ye.closeEmitted=!0),F&&(F.closeEmitted=!0),(ye!=null&&ye.emitClose||F!=null&&F.emitClose)&&O.emit("close")}function x(O,F){let ye=O._readableState,se=O._writableState;se!=null&&se.errorEmitted||ye!=null&&ye.errorEmitted||(se&&(se.errorEmitted=!0),ye&&(ye.errorEmitted=!0),O.emit("error",F))}function k(){let O=this._readableState,F=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),F&&(F.constructed=!0,F.destroyed=!1,F.closed=!1,F.closeEmitted=!1,F.errored=null,F.errorEmitted=!1,F.finalCalled=!1,F.prefinished=!1,F.ended=F.writable===!1,F.ending=F.writable===!1,F.finished=F.writable===!1)}function q(O,F,ye){let se=O._readableState,Ne=O._writableState;if(Ne!=null&&Ne.destroyed||se!=null&&se.destroyed)return this;se!=null&&se.autoDestroy||Ne!=null&&Ne.autoDestroy?O.destroy(F):F&&(F.stack,Ne&&!Ne.errored&&(Ne.errored=F),se&&!se.errored&&(se.errored=F),ye?t.nextTick(x,O,F):x(O,F))}function H(O,F){if(typeof O._construct!="function")return;let ye=O._readableState,se=O._writableState;ye&&(ye.constructed=!1),se&&(se.constructed=!1),O.once(y,F),!(O.listenerCount(y)>1)&&t.nextTick($,O)}function $(O){let F=!1;function ye(se){if(F){q(O,se??new s);return}F=!0;let Ne=O._readableState,Ie=O._writableState,he=Ie||Ne;Ne&&(Ne.constructed=!0),Ie&&(Ie.constructed=!0),he.destroyed?O.emit(m,se):se?q(O,se,!0):t.nextTick(P,O)}try{O._construct(se=>{t.nextTick(ye,se)})}catch(se){t.nextTick(ye,se)}}function P(O){O.emit(y)}function R(O){return(O==null?void 0:O.setHeader)&&typeof O.abort=="function"}function V(O){O.emit("close")}function M(O,F){O.emit("error",F),t.nextTick(V,O)}function W(O,F){!O||c(O)||(!F&&!h(O)&&(F=new o),d(O)?(O.socket=null,O.destroy(F)):R(O)?O.abort():R(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(F):typeof O.close=="function"?O.close():F?t.nextTick(M,O,F):t.nextTick(V,O),O.destroyed||(O[u]=!0))}e.exports={construct:H,destroyer:W,destroy:b,undestroy:k,errorOrDestroy:q}}),f0=Ke((r,e)=>{je(),ze(),$e();var{ArrayIsArray:t,ObjectSetPrototypeOf:n}=dr(),{EventEmitter:s}=(Qa(),Kt(zo));function o(u){s.call(this,u)}n(o.prototype,s.prototype),n(o,s),o.prototype.pipe=function(u,c){let h=this;function d(N){u.writable&&u.write(N)===!1&&h.pause&&h.pause()}h.on("data",d);function m(){h.readable&&h.resume&&h.resume()}u.on("drain",m),!u._isStdio&&(!c||c.end!==!1)&&(h.on("end",_),h.on("close",b));let y=!1;function _(){y||(y=!0,u.end())}function b(){y||(y=!0,typeof u.destroy=="function"&&u.destroy())}function S(N){T(),s.listenerCount(this,"error")===0&&this.emit("error",N)}l(h,"error",S),l(u,"error",S);function T(){h.removeListener("data",d),u.removeListener("drain",m),h.removeListener("end",_),h.removeListener("close",b),h.removeListener("error",S),u.removeListener("error",S),h.removeListener("end",T),h.removeListener("close",T),u.removeListener("close",T)}return h.on("end",T),h.on("close",T),u.on("close",T),u.emit("pipe",h),u};function l(u,c,h){if(typeof u.prependListener=="function")return u.prependListener(c,h);!u._events||!u._events[c]?u.on(c,h):t(u._events[c])?u._events[c].unshift(h):u._events[c]=[h,u._events[c]]}e.exports={Stream:o,prependListener:l}}),Kd=Ke((r,e)=>{je(),ze(),$e();var{SymbolDispose:t}=dr(),{AbortError:n,codes:s}=In(),{isNodeStream:o,isWebStream:l,kControllerErrorFunction:u}=Bs(),c=Wo(),{ERR_INVALID_ARG_TYPE:h}=s,d,m=(y,_)=>{if(typeof y!="object"||!("aborted"in y))throw new h(_,"AbortSignal",y)};e.exports.addAbortSignal=function(y,_){if(m(y,"signal"),!o(_)&&!l(_))throw new h("stream",["ReadableStream","WritableStream","Stream"],_);return e.exports.addAbortSignalNoValidate(y,_)},e.exports.addAbortSignalNoValidate=function(y,_){if(typeof y!="object"||!("aborted"in y))return _;let b=o(_)?()=>{_.destroy(new n(void 0,{cause:y.reason}))}:()=>{_[u](new n(void 0,{cause:y.reason}))};if(y.aborted)b();else{d=d||Bn().addAbortListener;let S=d(y,b);c(_,S[t])}return _}}),rM=Ke((r,e)=>{je(),ze(),$e();var{StringPrototypeSlice:t,SymbolIterator:n,TypedArrayPrototypeSet:s,Uint8Array:o}=dr(),{Buffer:l}=(Kr(),Kt(Qr)),{inspect:u}=Bn();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(c){let h={data:c,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(c){let h={data:c,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;let c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}clear(){this.head=this.tail=null,this.length=0}join(c){if(this.length===0)return"";let h=this.head,d=""+h.data;for(;(h=h.next)!==null;)d+=c+h.data;return d}concat(c){if(this.length===0)return l.alloc(0);let h=l.allocUnsafe(c>>>0),d=this.head,m=0;for(;d;)s(h,d.data,m),m+=d.data.length,d=d.next;return h}consume(c,h){let d=this.head.data;if(c<d.length){let m=d.slice(0,c);return this.head.data=d.slice(c),m}return c===d.length?this.shift():h?this._getString(c):this._getBuffer(c)}first(){return this.head.data}*[n](){for(let c=this.head;c;c=c.next)yield c.data}_getString(c){let h="",d=this.head,m=0;do{let y=d.data;if(c>y.length)h+=y,c-=y.length;else{c===y.length?(h+=y,++m,d.next?this.head=d.next:this.head=this.tail=null):(h+=t(y,0,c),this.head=d,d.data=t(y,c));break}++m}while((d=d.next)!==null);return this.length-=m,h}_getBuffer(c){let h=l.allocUnsafe(c),d=c,m=this.head,y=0;do{let _=m.data;if(c>_.length)s(h,_,d-c),c-=_.length;else{c===_.length?(s(h,_,d-c),++y,m.next?this.head=m.next:this.head=this.tail=null):(s(h,new o(_.buffer,_.byteOffset,c),d-c),this.head=m,m.data=_.slice(c));break}++y}while((m=m.next)!==null);return this.length-=y,h}[Symbol.for("nodejs.util.inspect.custom")](c,h){return u(this,{...h,depth:0,customInspect:!1})}}}),Gd=Ke((r,e)=>{je(),ze(),$e();var{MathFloor:t,NumberIsInteger:n}=dr(),{validateInteger:s}=Xc(),{ERR_INVALID_ARG_VALUE:o}=In().codes,l=16*1024,u=16;function c(y,_,b){return y.highWaterMark!=null?y.highWaterMark:_?y[b]:null}function h(y){return y?u:l}function d(y,_){s(_,"value",0),y?u=_:l=_}function m(y,_,b,S){let T=c(_,S,b);if(T!=null){if(!n(T)||T<0){let N=S?`options.${b}`:"options.highWaterMark";throw new o(N,T)}return t(T)}return h(y.objectMode)}e.exports={getHighWaterMark:m,getDefaultHighWaterMark:h,setDefaultHighWaterMark:d}}),nM=Ke((r,e)=>{je(),ze(),$e();var t=(Kr(),Kt(Qr)),n=t.Buffer;function s(l,u){for(var c in l)u[c]=l[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(s(t,r),r.Buffer=o);function o(l,u,c){return n(l,u,c)}o.prototype=Object.create(n.prototype),s(n,o),o.from=function(l,u,c){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,u,c)},o.alloc=function(l,u,c){if(typeof l!="number")throw new TypeError("Argument must be a number");var h=n(l);return u!==void 0?typeof c=="string"?h.fill(u,c):h.fill(u):h.fill(0),h},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(l)}}),iM=Ke(r=>{je(),ze(),$e();var e=nM().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var k;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(k)return;x=(""+x).toLowerCase(),k=!0}}function s(x){var k=n(x);if(typeof k!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return k||x}r.StringDecoder=o;function o(x){this.encoding=s(x);var k;switch(this.encoding){case"utf16le":this.text=y,this.end=_,k=4;break;case"utf8":this.fillLast=h,k=4;break;case"base64":this.text=b,this.end=S,k=3;break;default:this.write=T,this.end=N;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(k)}o.prototype.write=function(x){if(x.length===0)return"";var k,q;if(this.lastNeed){if(k=this.fillLast(x),k===void 0)return"";q=this.lastNeed,this.lastNeed=0}else q=0;return q<x.length?k?k+this.text(x,q):this.text(x,q):k||""},o.prototype.end=m,o.prototype.text=d,o.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function l(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function u(x,k,q){var H=k.length-1;if(H<q)return 0;var $=l(k[H]);return $>=0?($>0&&(x.lastNeed=$-1),$):--H<q||$===-2?0:($=l(k[H]),$>=0?($>0&&(x.lastNeed=$-2),$):--H<q||$===-2?0:($=l(k[H]),$>=0?($>0&&($===2?$=0:x.lastNeed=$-3),$):0))}function c(x,k,q){if((k[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return x.lastNeed=2,""}}function h(x){var k=this.lastTotal-this.lastNeed,q=c(this,x);if(q!==void 0)return q;if(this.lastNeed<=x.length)return x.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,k,0,x.length),this.lastNeed-=x.length}function d(x,k){var q=u(this,x,k);if(!this.lastNeed)return x.toString("utf8",k);this.lastTotal=q;var H=x.length-(q-this.lastNeed);return x.copy(this.lastChar,0,H),x.toString("utf8",k,H)}function m(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+"":k}function y(x,k){if((x.length-k)%2===0){var q=x.toString("utf16le",k);if(q){var H=q.charCodeAt(q.length-1);if(H>=55296&&H<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],q.slice(0,-1)}return q}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",k,x.length-1)}function _(x){var k=x&&x.length?this.write(x):"";if(this.lastNeed){var q=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,q)}return k}function b(x,k){var q=(x.length-k)%3;return q===0?x.toString("base64",k):(this.lastNeed=3-q,this.lastTotal=3,q===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",k,x.length-q))}function S(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function T(x){return x.toString(this.encoding)}function N(x){return x&&x.length?this.write(x):""}}),Ux=Ke((r,e)=>{je(),ze(),$e();var t=Ka(),{PromisePrototypeThen:n,SymbolAsyncIterator:s,SymbolIterator:o}=dr(),{Buffer:l}=(Kr(),Kt(Qr)),{ERR_INVALID_ARG_TYPE:u,ERR_STREAM_NULL_VALUES:c}=In().codes;function h(d,m,y){let _;if(typeof m=="string"||m instanceof l)return new d({objectMode:!0,...y,read(){this.push(m),this.push(null)}});let b;if(m&&m[s])b=!0,_=m[s]();else if(m&&m[o])b=!1,_=m[o]();else throw new u("iterable",["Iterable"],m);let S=new d({objectMode:!0,highWaterMark:1,...y}),T=!1;S._read=function(){T||(T=!0,x())},S._destroy=function(k,q){n(N(k),()=>t.nextTick(q,k),H=>t.nextTick(q,H||k))};async function N(k){let q=k!=null,H=typeof _.throw=="function";if(q&&H){let{value:$,done:P}=await _.throw(k);if(await $,P)return}if(typeof _.return=="function"){let{value:$}=await _.return();await $}}async function x(){for(;;){try{let{value:k,done:q}=b?await _.next():_.next();if(q)S.push(null);else{let H=k&&typeof k.then=="function"?await k:k;if(H===null)throw T=!1,new c;if(S.push(H))continue;T=!1}}catch(k){S.destroy(k)}break}}return S}e.exports=h}),Yd=Ke((r,e)=>{je(),ze(),$e();var t=Ka(),{ArrayPrototypeIndexOf:n,NumberIsInteger:s,NumberIsNaN:o,NumberParseInt:l,ObjectDefineProperties:u,ObjectKeys:c,ObjectSetPrototypeOf:h,Promise:d,SafeSet:m,SymbolAsyncDispose:y,SymbolAsyncIterator:_,Symbol:b}=dr();e.exports=Z,Z.ReadableState=re;var{EventEmitter:S}=(Qa(),Kt(zo)),{Stream:T,prependListener:N}=f0(),{Buffer:x}=(Kr(),Kt(Qr)),{addAbortSignal:k}=Kd(),q=Wo(),H=Bn().debuglog("stream",Y=>{H=Y}),$=rM(),P=vu(),{getHighWaterMark:R,getDefaultHighWaterMark:V}=Gd(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:W,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:F,ERR_STREAM_PUSH_AFTER_EOF:ye,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:se},AbortError:Ne}=In(),{validateObject:Ie}=Xc(),he=b("kPaused"),{StringDecoder:Re}=iM(),B=Ux();h(Z.prototype,T.prototype),h(Z,T);var ue=()=>{},{errorOrDestroy:G}=P,we=1,De=2,oe=4,Ge=8,ce=16,ee=32,xe=64,me=128,de=256,ve=512,Fe=1024,Oe=2048,ne=4096,le=8192,Ee=16384,Me=32768,ke=65536,Ve=1<<17,ae=1<<18;function Q(Y){return{enumerable:!1,get(){return(this.state&Y)!==0},set(X){X?this.state|=Y:this.state&=~Y}}}u(re.prototype,{objectMode:Q(we),ended:Q(De),endEmitted:Q(oe),reading:Q(Ge),constructed:Q(ce),sync:Q(ee),needReadable:Q(xe),emittedReadable:Q(me),readableListening:Q(de),resumeScheduled:Q(ve),errorEmitted:Q(Fe),emitClose:Q(Oe),autoDestroy:Q(ne),destroyed:Q(le),closed:Q(Ee),closeEmitted:Q(Me),multiAwaitDrain:Q(ke),readingMore:Q(Ve),dataEmitted:Q(ae)});function re(Y,X,Ye){typeof Ye!="boolean"&&(Ye=X instanceof Vs()),this.state=Oe|ne|ce|ee,Y&&Y.objectMode&&(this.state|=we),Ye&&Y&&Y.readableObjectMode&&(this.state|=we),this.highWaterMark=Y?R(this,Y,"readableHighWaterMark",Ye):V(!1),this.buffer=new $,this.length=0,this.pipes=[],this.flowing=null,this[he]=null,Y&&Y.emitClose===!1&&(this.state&=-2049),Y&&Y.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=Y&&Y.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,Y&&Y.encoding&&(this.decoder=new Re(Y.encoding),this.encoding=Y.encoding)}function Z(Y){if(!(this instanceof Z))return new Z(Y);let X=this instanceof Vs();this._readableState=new re(Y,this,X),Y&&(typeof Y.read=="function"&&(this._read=Y.read),typeof Y.destroy=="function"&&(this._destroy=Y.destroy),typeof Y.construct=="function"&&(this._construct=Y.construct),Y.signal&&!X&&k(Y.signal,this)),T.call(this,Y),P.construct(this,()=>{this._readableState.needReadable&&Ze(this,this._readableState)})}Z.prototype.destroy=P.destroy,Z.prototype._undestroy=P.undestroy,Z.prototype._destroy=function(Y,X){X(Y)},Z.prototype[S.captureRejectionSymbol]=function(Y){this.destroy(Y)},Z.prototype[y]=function(){let Y;return this.destroyed||(Y=this.readableEnded?null:new Ne,this.destroy(Y)),new d((X,Ye)=>q(this,rt=>rt&&rt!==Y?Ye(rt):X(null)))},Z.prototype.push=function(Y,X){return Ue(this,Y,X,!1)},Z.prototype.unshift=function(Y,X){return Ue(this,Y,X,!0)};function Ue(Y,X,Ye,rt){H("readableAddChunk",X);let st=Y._readableState,nr;if((st.state&we)===0&&(typeof X=="string"?(Ye=Ye||st.defaultEncoding,st.encoding!==Ye&&(rt&&st.encoding?X=x.from(X,Ye).toString(st.encoding):(X=x.from(X,Ye),Ye=""))):X instanceof x?Ye="":T._isUint8Array(X)?(X=T._uint8ArrayToBuffer(X),Ye=""):X!=null&&(nr=new W("chunk",["string","Buffer","Uint8Array"],X))),nr)G(Y,nr);else if(X===null)st.state&=-9,J(Y,st);else if((st.state&we)!==0||X&&X.length>0)if(rt)if((st.state&oe)!==0)G(Y,new se);else{if(st.destroyed||st.errored)return!1;v(Y,st,X,!0)}else if(st.ended)G(Y,new ye);else{if(st.destroyed||st.errored)return!1;st.state&=-9,st.decoder&&!Ye?(X=st.decoder.write(X),st.objectMode||X.length!==0?v(Y,st,X,!1):Ze(Y,st)):v(Y,st,X,!1)}else rt||(st.state&=-9,Ze(Y,st));return!st.ended&&(st.length<st.highWaterMark||st.length===0)}function v(Y,X,Ye,rt){X.flowing&&X.length===0&&!X.sync&&Y.listenerCount("data")>0?((X.state&ke)!==0?X.awaitDrainWriters.clear():X.awaitDrainWriters=null,X.dataEmitted=!0,Y.emit("data",Ye)):(X.length+=X.objectMode?1:Ye.length,rt?X.buffer.unshift(Ye):X.buffer.push(Ye),(X.state&xe)!==0&&ie(Y)),Ze(Y,X)}Z.prototype.isPaused=function(){let Y=this._readableState;return Y[he]===!0||Y.flowing===!1},Z.prototype.setEncoding=function(Y){let X=new Re(Y);this._readableState.decoder=X,this._readableState.encoding=this._readableState.decoder.encoding;let Ye=this._readableState.buffer,rt="";for(let st of Ye)rt+=X.write(st);return Ye.clear(),rt!==""&&Ye.push(rt),this._readableState.length=rt.length,this};var w=1073741824;function A(Y){if(Y>w)throw new F("size","<= 1GiB",Y);return Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++,Y}function U(Y,X){return Y<=0||X.length===0&&X.ended?0:(X.state&we)!==0?1:o(Y)?X.flowing&&X.length?X.buffer.first().length:X.length:Y<=X.length?Y:X.ended?X.length:0}Z.prototype.read=function(Y){H("read",Y),Y===void 0?Y=NaN:s(Y)||(Y=l(Y,10));let X=this._readableState,Ye=Y;if(Y>X.highWaterMark&&(X.highWaterMark=A(Y)),Y!==0&&(X.state&=-129),Y===0&&X.needReadable&&((X.highWaterMark!==0?X.length>=X.highWaterMark:X.length>0)||X.ended))return H("read: emitReadable",X.length,X.ended),X.length===0&&X.ended?Rt(this):ie(this),null;if(Y=U(Y,X),Y===0&&X.ended)return X.length===0&&Rt(this),null;let rt=(X.state&xe)!==0;if(H("need readable",rt),(X.length===0||X.length-Y<X.highWaterMark)&&(rt=!0,H("length less than watermark",rt)),X.ended||X.reading||X.destroyed||X.errored||!X.constructed)rt=!1,H("reading, ended or constructing",rt);else if(rt){H("do read"),X.state|=Ge|ee,X.length===0&&(X.state|=xe);try{this._read(X.highWaterMark)}catch(nr){G(this,nr)}X.state&=-33,X.reading||(Y=U(Ye,X))}let st;return Y>0?st=gt(Y,X):st=null,st===null?(X.needReadable=X.length<=X.highWaterMark,Y=0):(X.length-=Y,X.multiAwaitDrain?X.awaitDrainWriters.clear():X.awaitDrainWriters=null),X.length===0&&(X.ended||(X.needReadable=!0),Ye!==Y&&X.ended&&Rt(this)),st!==null&&!X.errorEmitted&&!X.closeEmitted&&(X.dataEmitted=!0,this.emit("data",st)),st};function J(Y,X){if(H("onEofChunk"),!X.ended){if(X.decoder){let Ye=X.decoder.end();Ye&&Ye.length&&(X.buffer.push(Ye),X.length+=X.objectMode?1:Ye.length)}X.ended=!0,X.sync?ie(Y):(X.needReadable=!1,X.emittedReadable=!0,_e(Y))}}function ie(Y){let X=Y._readableState;H("emitReadable",X.needReadable,X.emittedReadable),X.needReadable=!1,X.emittedReadable||(H("emitReadable",X.flowing),X.emittedReadable=!0,t.nextTick(_e,Y))}function _e(Y){let X=Y._readableState;H("emitReadable_",X.destroyed,X.length,X.ended),!X.destroyed&&!X.errored&&(X.length||X.ended)&&(Y.emit("readable"),X.emittedReadable=!1),X.needReadable=!X.flowing&&!X.ended&&X.length<=X.highWaterMark,xr(Y)}function Ze(Y,X){!X.readingMore&&X.constructed&&(X.readingMore=!0,t.nextTick(et,Y,X))}function et(Y,X){for(;!X.reading&&!X.ended&&(X.length<X.highWaterMark||X.flowing&&X.length===0);){let Ye=X.length;if(H("maybeReadMore read 0"),Y.read(0),Ye===X.length)break}X.readingMore=!1}Z.prototype._read=function(Y){throw new O("_read()")},Z.prototype.pipe=function(Y,X){let Ye=this,rt=this._readableState;rt.pipes.length===1&&(rt.multiAwaitDrain||(rt.multiAwaitDrain=!0,rt.awaitDrainWriters=new m(rt.awaitDrainWriters?[rt.awaitDrainWriters]:[]))),rt.pipes.push(Y),H("pipe count=%d opts=%j",rt.pipes.length,X);let st=(!X||X.end!==!1)&&Y!==t.stdout&&Y!==t.stderr?Pr:Mi;rt.endEmitted?t.nextTick(st):Ye.once("end",st),Y.on("unpipe",nr);function nr(jn,rn){H("onunpipe"),jn===Ye&&rn&&rn.hasUnpiped===!1&&(rn.hasUnpiped=!0,wu())}function Pr(){H("onend"),Y.end()}let Nr,zs=!1;function wu(){H("cleanup"),Y.removeListener("close",hi),Y.removeListener("finish",gn),Nr&&Y.removeListener("drain",Nr),Y.removeListener("error",mn),Y.removeListener("unpipe",nr),Ye.removeListener("end",Pr),Ye.removeListener("end",Mi),Ye.removeListener("data",qo),zs=!0,Nr&&rt.awaitDrainWriters&&(!Y._writableState||Y._writableState.needDrain)&&Nr()}function os(){zs||(rt.pipes.length===1&&rt.pipes[0]===Y?(H("false write response, pause",0),rt.awaitDrainWriters=Y,rt.multiAwaitDrain=!1):rt.pipes.length>1&&rt.pipes.includes(Y)&&(H("false write response, pause",rt.awaitDrainWriters.size),rt.awaitDrainWriters.add(Y)),Ye.pause()),Nr||(Nr=ft(Ye,Y),Y.on("drain",Nr))}Ye.on("data",qo);function qo(jn){H("ondata");let rn=Y.write(jn);H("dest.write",rn),rn===!1&&os()}function mn(jn){if(H("onerror",jn),Mi(),Y.removeListener("error",mn),Y.listenerCount("error")===0){let rn=Y._writableState||Y._readableState;rn&&!rn.errorEmitted?G(Y,jn):Y.emit("error",jn)}}N(Y,"error",mn);function hi(){Y.removeListener("finish",gn),Mi()}Y.once("close",hi);function gn(){H("onfinish"),Y.removeListener("close",hi),Mi()}Y.once("finish",gn);function Mi(){H("unpipe"),Ye.unpipe(Y)}return Y.emit("pipe",Ye),Y.writableNeedDrain===!0?os():rt.flowing||(H("pipe resume"),Ye.resume()),Y};function ft(Y,X){return function(){let Ye=Y._readableState;Ye.awaitDrainWriters===X?(H("pipeOnDrain",1),Ye.awaitDrainWriters=null):Ye.multiAwaitDrain&&(H("pipeOnDrain",Ye.awaitDrainWriters.size),Ye.awaitDrainWriters.delete(X)),(!Ye.awaitDrainWriters||Ye.awaitDrainWriters.size===0)&&Y.listenerCount("data")&&Y.resume()}}Z.prototype.unpipe=function(Y){let X=this._readableState,Ye={hasUnpiped:!1};if(X.pipes.length===0)return this;if(!Y){let st=X.pipes;X.pipes=[],this.pause();for(let nr=0;nr<st.length;nr++)st[nr].emit("unpipe",this,{hasUnpiped:!1});return this}let rt=n(X.pipes,Y);return rt===-1?this:(X.pipes.splice(rt,1),X.pipes.length===0&&this.pause(),Y.emit("unpipe",this,Ye),this)},Z.prototype.on=function(Y,X){let Ye=T.prototype.on.call(this,Y,X),rt=this._readableState;return Y==="data"?(rt.readableListening=this.listenerCount("readable")>0,rt.flowing!==!1&&this.resume()):Y==="readable"&&!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.flowing=!1,rt.emittedReadable=!1,H("on readable",rt.length,rt.reading),rt.length?ie(this):rt.reading||t.nextTick(mt,this)),Ye},Z.prototype.addListener=Z.prototype.on,Z.prototype.removeListener=function(Y,X){let Ye=T.prototype.removeListener.call(this,Y,X);return Y==="readable"&&t.nextTick(bt,this),Ye},Z.prototype.off=Z.prototype.removeListener,Z.prototype.removeAllListeners=function(Y){let X=T.prototype.removeAllListeners.apply(this,arguments);return(Y==="readable"||Y===void 0)&&t.nextTick(bt,this),X};function bt(Y){let X=Y._readableState;X.readableListening=Y.listenerCount("readable")>0,X.resumeScheduled&&X[he]===!1?X.flowing=!0:Y.listenerCount("data")>0?Y.resume():X.readableListening||(X.flowing=null)}function mt(Y){H("readable nexttick read 0"),Y.read(0)}Z.prototype.resume=function(){let Y=this._readableState;return Y.flowing||(H("resume"),Y.flowing=!Y.readableListening,_r(this,Y)),Y[he]=!1,this};function _r(Y,X){X.resumeScheduled||(X.resumeScheduled=!0,t.nextTick(wr,Y,X))}function wr(Y,X){H("resume",X.reading),X.reading||Y.read(0),X.resumeScheduled=!1,Y.emit("resume"),xr(Y),X.flowing&&!X.reading&&Y.read(0)}Z.prototype.pause=function(){return H("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(H("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[he]=!0,this};function xr(Y){let X=Y._readableState;for(H("flow",X.flowing);X.flowing&&Y.read()!==null;);}Z.prototype.wrap=function(Y){let X=!1;Y.on("data",rt=>{!this.push(rt)&&Y.pause&&(X=!0,Y.pause())}),Y.on("end",()=>{this.push(null)}),Y.on("error",rt=>{G(this,rt)}),Y.on("close",()=>{this.destroy()}),Y.on("destroy",()=>{this.destroy()}),this._read=()=>{X&&Y.resume&&(X=!1,Y.resume())};let Ye=c(Y);for(let rt=1;rt<Ye.length;rt++){let st=Ye[rt];this[st]===void 0&&typeof Y[st]=="function"&&(this[st]=Y[st].bind(Y))}return this},Z.prototype[_]=function(){return Ct(this)},Z.prototype.iterator=function(Y){return Y!==void 0&&Ie(Y,"options"),Ct(this,Y)};function Ct(Y,X){typeof Y.read!="function"&&(Y=Z.wrap(Y,{objectMode:!0}));let Ye=Wt(Y,X);return Ye.stream=Y,Ye}async function*Wt(Y,X){let Ye=ue;function rt(Pr){this===Y?(Ye(),Ye=ue):Ye=Pr}Y.on("readable",rt);let st,nr=q(Y,{writable:!1},Pr=>{st=Pr?M(st,Pr):null,Ye(),Ye=ue});try{for(;;){let Pr=Y.destroyed?null:Y.read();if(Pr!==null)yield Pr;else{if(st)throw st;if(st===null)return;await new d(rt)}}}catch(Pr){throw st=M(st,Pr),st}finally{(st||(X==null?void 0:X.destroyOnReturn)!==!1)&&(st===void 0||Y._readableState.autoDestroy)?P.destroyer(Y,null):(Y.off("readable",rt),nr())}}u(Z.prototype,{readable:{__proto__:null,get(){let Y=this._readableState;return!!Y&&Y.readable!==!1&&!Y.destroyed&&!Y.errorEmitted&&!Y.endEmitted},set(Y){this._readableState&&(this._readableState.readable=!!Y)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Y){this._readableState&&(this._readableState.flowing=Y)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(Y){this._readableState&&(this._readableState.destroyed=Y)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),u(re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[he]!==!1},set(Y){this[he]=!!Y}}}),Z._fromList=gt;function gt(Y,X){if(X.length===0)return null;let Ye;return X.objectMode?Ye=X.buffer.shift():!Y||Y>=X.length?(X.decoder?Ye=X.buffer.join(""):X.buffer.length===1?Ye=X.buffer.first():Ye=X.buffer.concat(X.length),X.buffer.clear()):Ye=X.buffer.consume(Y,X.decoder),Ye}function Rt(Y){let X=Y._readableState;H("endReadable",X.endEmitted),X.endEmitted||(X.ended=!0,t.nextTick(mr,X,Y))}function mr(Y,X){if(H("endReadableNT",Y.endEmitted,Y.length),!Y.errored&&!Y.closeEmitted&&!Y.endEmitted&&Y.length===0){if(Y.endEmitted=!0,X.emit("end"),X.writable&&X.allowHalfOpen===!1)t.nextTick(Gt,X);else if(Y.autoDestroy){let Ye=X._writableState;(!Ye||Ye.autoDestroy&&(Ye.finished||Ye.writable===!1))&&X.destroy()}}}function Gt(Y){Y.writable&&!Y.writableEnded&&!Y.destroyed&&Y.end()}Z.from=function(Y,X){return B(Z,Y,X)};var br;function jr(){return br===void 0&&(br={}),br}Z.fromWeb=function(Y,X){return jr().newStreamReadableFromReadableStream(Y,X)},Z.toWeb=function(Y,X){return jr().newReadableStreamFromStreamReadable(Y,X)},Z.wrap=function(Y,X){var Ye,rt;return new Z({objectMode:(Ye=(rt=Y.readableObjectMode)!==null&&rt!==void 0?rt:Y.objectMode)!==null&&Ye!==void 0?Ye:!0,...X,destroy(st,nr){P.destroyer(Y,st),nr(st)}}).wrap(Y)}}),d0=Ke((r,e)=>{je(),ze(),$e();var t=Ka(),{ArrayPrototypeSlice:n,Error:s,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:l,ObjectDefineProperties:u,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:h,Symbol:d,SymbolHasInstance:m}=dr();e.exports=Ie,Ie.WritableState=se;var{EventEmitter:y}=(Qa(),Kt(zo)),_=f0().Stream,{Buffer:b}=(Kr(),Kt(Qr)),S=vu(),{addAbortSignal:T}=Kd(),{getHighWaterMark:N,getDefaultHighWaterMark:x}=Gd(),{ERR_INVALID_ARG_TYPE:k,ERR_METHOD_NOT_IMPLEMENTED:q,ERR_MULTIPLE_CALLBACK:H,ERR_STREAM_CANNOT_PIPE:$,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:V,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:W}=In().codes,{errorOrDestroy:O}=S;c(Ie.prototype,_.prototype),c(Ie,_);function F(){}var ye=d("kOnFinished");function se(ne,le,Ee){typeof Ee!="boolean"&&(Ee=le instanceof Vs()),this.objectMode=!!(ne&&ne.objectMode),Ee&&(this.objectMode=this.objectMode||!!(ne&&ne.writableObjectMode)),this.highWaterMark=ne?N(this,ne,"writableHighWaterMark",Ee):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Me=!!(ne&&ne.decodeStrings===!1);this.decodeStrings=!Me,this.defaultEncoding=ne&&ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,le),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ne(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ne||ne.emitClose!==!1,this.autoDestroy=!ne||ne.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ye]=[]}function Ne(ne){ne.buffered=[],ne.bufferedIndex=0,ne.allBuffers=!0,ne.allNoop=!0}se.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},l(se.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Ie(ne){let le=this instanceof Vs();if(!le&&!o(Ie,this))return new Ie(ne);this._writableState=new se(ne,this,le),ne&&(typeof ne.write=="function"&&(this._write=ne.write),typeof ne.writev=="function"&&(this._writev=ne.writev),typeof ne.destroy=="function"&&(this._destroy=ne.destroy),typeof ne.final=="function"&&(this._final=ne.final),typeof ne.construct=="function"&&(this._construct=ne.construct),ne.signal&&T(ne.signal,this)),_.call(this,ne),S.construct(this,()=>{let Ee=this._writableState;Ee.writing||Ge(this,Ee),me(this,Ee)})}l(Ie,m,{__proto__:null,value:function(ne){return o(this,ne)?!0:this!==Ie?!1:ne&&ne._writableState instanceof se}}),Ie.prototype.pipe=function(){O(this,new $)};function he(ne,le,Ee,Me){let ke=ne._writableState;if(typeof Ee=="function")Me=Ee,Ee=ke.defaultEncoding;else{if(!Ee)Ee=ke.defaultEncoding;else if(Ee!=="buffer"&&!b.isEncoding(Ee))throw new W(Ee);typeof Me!="function"&&(Me=F)}if(le===null)throw new V;if(!ke.objectMode)if(typeof le=="string")ke.decodeStrings!==!1&&(le=b.from(le,Ee),Ee="buffer");else if(le instanceof b)Ee="buffer";else if(_._isUint8Array(le))le=_._uint8ArrayToBuffer(le),Ee="buffer";else throw new k("chunk",["string","Buffer","Uint8Array"],le);let Ve;return ke.ending?Ve=new M:ke.destroyed&&(Ve=new P("write")),Ve?(t.nextTick(Me,Ve),O(ne,Ve,!0),Ve):(ke.pendingcb++,Re(ne,ke,le,Ee,Me))}Ie.prototype.write=function(ne,le,Ee){return he(this,ne,le,Ee)===!0},Ie.prototype.cork=function(){this._writableState.corked++},Ie.prototype.uncork=function(){let ne=this._writableState;ne.corked&&(ne.corked--,ne.writing||Ge(this,ne))},Ie.prototype.setDefaultEncoding=function(ne){if(typeof ne=="string"&&(ne=h(ne)),!b.isEncoding(ne))throw new W(ne);return this._writableState.defaultEncoding=ne,this};function Re(ne,le,Ee,Me,ke){let Ve=le.objectMode?1:Ee.length;le.length+=Ve;let ae=le.length<le.highWaterMark;return ae||(le.needDrain=!0),le.writing||le.corked||le.errored||!le.constructed?(le.buffered.push({chunk:Ee,encoding:Me,callback:ke}),le.allBuffers&&Me!=="buffer"&&(le.allBuffers=!1),le.allNoop&&ke!==F&&(le.allNoop=!1)):(le.writelen=Ve,le.writecb=ke,le.writing=!0,le.sync=!0,ne._write(Ee,Me,le.onwrite),le.sync=!1),ae&&!le.errored&&!le.destroyed}function B(ne,le,Ee,Me,ke,Ve,ae){le.writelen=Me,le.writecb=ae,le.writing=!0,le.sync=!0,le.destroyed?le.onwrite(new P("write")):Ee?ne._writev(ke,le.onwrite):ne._write(ke,Ve,le.onwrite),le.sync=!1}function ue(ne,le,Ee,Me){--le.pendingcb,Me(Ee),oe(le),O(ne,Ee)}function G(ne,le){let Ee=ne._writableState,Me=Ee.sync,ke=Ee.writecb;if(typeof ke!="function"){O(ne,new H);return}Ee.writing=!1,Ee.writecb=null,Ee.length-=Ee.writelen,Ee.writelen=0,le?(le.stack,Ee.errored||(Ee.errored=le),ne._readableState&&!ne._readableState.errored&&(ne._readableState.errored=le),Me?t.nextTick(ue,ne,Ee,le,ke):ue(ne,Ee,le,ke)):(Ee.buffered.length>Ee.bufferedIndex&&Ge(ne,Ee),Me?Ee.afterWriteTickInfo!==null&&Ee.afterWriteTickInfo.cb===ke?Ee.afterWriteTickInfo.count++:(Ee.afterWriteTickInfo={count:1,cb:ke,stream:ne,state:Ee},t.nextTick(we,Ee.afterWriteTickInfo)):De(ne,Ee,1,ke))}function we({stream:ne,state:le,count:Ee,cb:Me}){return le.afterWriteTickInfo=null,De(ne,le,Ee,Me)}function De(ne,le,Ee,Me){for(!le.ending&&!ne.destroyed&&le.length===0&&le.needDrain&&(le.needDrain=!1,ne.emit("drain"));Ee-- >0;)le.pendingcb--,Me();le.destroyed&&oe(le),me(ne,le)}function oe(ne){if(ne.writing)return;for(let ke=ne.bufferedIndex;ke<ne.buffered.length;++ke){var le;let{chunk:Ve,callback:ae}=ne.buffered[ke],Q=ne.objectMode?1:Ve.length;ne.length-=Q,ae((le=ne.errored)!==null&&le!==void 0?le:new P("write"))}let Ee=ne[ye].splice(0);for(let ke=0;ke<Ee.length;ke++){var Me;Ee[ke]((Me=ne.errored)!==null&&Me!==void 0?Me:new P("end"))}Ne(ne)}function Ge(ne,le){if(le.corked||le.bufferProcessing||le.destroyed||!le.constructed)return;let{buffered:Ee,bufferedIndex:Me,objectMode:ke}=le,Ve=Ee.length-Me;if(!Ve)return;let ae=Me;if(le.bufferProcessing=!0,Ve>1&&ne._writev){le.pendingcb-=Ve-1;let Q=le.allNoop?F:Z=>{for(let Ue=ae;Ue<Ee.length;++Ue)Ee[Ue].callback(Z)},re=le.allNoop&&ae===0?Ee:n(Ee,ae);re.allBuffers=le.allBuffers,B(ne,le,!0,le.length,re,"",Q),Ne(le)}else{do{let{chunk:Q,encoding:re,callback:Z}=Ee[ae];Ee[ae++]=null;let Ue=ke?1:Q.length;B(ne,le,!1,Ue,Q,re,Z)}while(ae<Ee.length&&!le.writing);ae===Ee.length?Ne(le):ae>256?(Ee.splice(0,ae),le.bufferedIndex=0):le.bufferedIndex=ae}le.bufferProcessing=!1}Ie.prototype._write=function(ne,le,Ee){if(this._writev)this._writev([{chunk:ne,encoding:le}],Ee);else throw new q("_write()")},Ie.prototype._writev=null,Ie.prototype.end=function(ne,le,Ee){let Me=this._writableState;typeof ne=="function"?(Ee=ne,ne=null,le=null):typeof le=="function"&&(Ee=le,le=null);let ke;if(ne!=null){let Ve=he(this,ne,le);Ve instanceof s&&(ke=Ve)}return Me.corked&&(Me.corked=1,this.uncork()),ke||(!Me.errored&&!Me.ending?(Me.ending=!0,me(this,Me,!0),Me.ended=!0):Me.finished?ke=new R("end"):Me.destroyed&&(ke=new P("end"))),typeof Ee=="function"&&(ke||Me.finished?t.nextTick(Ee,ke):Me[ye].push(Ee)),this};function ce(ne){return ne.ending&&!ne.destroyed&&ne.constructed&&ne.length===0&&!ne.errored&&ne.buffered.length===0&&!ne.finished&&!ne.writing&&!ne.errorEmitted&&!ne.closeEmitted}function ee(ne,le){let Ee=!1;function Me(ke){if(Ee){O(ne,ke??H());return}if(Ee=!0,le.pendingcb--,ke){let Ve=le[ye].splice(0);for(let ae=0;ae<Ve.length;ae++)Ve[ae](ke);O(ne,ke,le.sync)}else ce(le)&&(le.prefinished=!0,ne.emit("prefinish"),le.pendingcb++,t.nextTick(de,ne,le))}le.sync=!0,le.pendingcb++;try{ne._final(Me)}catch(ke){Me(ke)}le.sync=!1}function xe(ne,le){!le.prefinished&&!le.finalCalled&&(typeof ne._final=="function"&&!le.destroyed?(le.finalCalled=!0,ee(ne,le)):(le.prefinished=!0,ne.emit("prefinish")))}function me(ne,le,Ee){ce(le)&&(xe(ne,le),le.pendingcb===0&&(Ee?(le.pendingcb++,t.nextTick((Me,ke)=>{ce(ke)?de(Me,ke):ke.pendingcb--},ne,le)):ce(le)&&(le.pendingcb++,de(ne,le))))}function de(ne,le){le.pendingcb--,le.finished=!0;let Ee=le[ye].splice(0);for(let Me=0;Me<Ee.length;Me++)Ee[Me]();if(ne.emit("finish"),le.autoDestroy){let Me=ne._readableState;(!Me||Me.autoDestroy&&(Me.endEmitted||Me.readable===!1))&&ne.destroy()}}u(Ie.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(ne){this._writableState&&(this._writableState.destroyed=ne)}},writable:{__proto__:null,get(){let ne=this._writableState;return!!ne&&ne.writable!==!1&&!ne.destroyed&&!ne.errored&&!ne.ending&&!ne.ended},set(ne){this._writableState&&(this._writableState.writable=!!ne)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let ne=this._writableState;return ne?!ne.destroyed&&!ne.ending&&ne.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ve=S.destroy;Ie.prototype.destroy=function(ne,le){let Ee=this._writableState;return!Ee.destroyed&&(Ee.bufferedIndex<Ee.buffered.length||Ee[ye].length)&&t.nextTick(oe,Ee),ve.call(this,ne,le),this},Ie.prototype._undestroy=S.undestroy,Ie.prototype._destroy=function(ne,le){le(ne)},Ie.prototype[y.captureRejectionSymbol]=function(ne){this.destroy(ne)};var Fe;function Oe(){return Fe===void 0&&(Fe={}),Fe}Ie.fromWeb=function(ne,le){return Oe().newStreamWritableFromWritableStream(ne,le)},Ie.toWeb=function(ne){return Oe().newWritableStreamFromStreamWritable(ne)}}),sM=Ke((r,e)=>{je(),ze(),$e();var t=Ka(),n=(Kr(),Kt(Qr)),{isReadable:s,isWritable:o,isIterable:l,isNodeStream:u,isReadableNodeStream:c,isWritableNodeStream:h,isDuplexNodeStream:d,isReadableStream:m,isWritableStream:y}=Bs(),_=Wo(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:S,ERR_INVALID_RETURN_VALUE:T}}=In(),{destroyer:N}=vu(),x=Vs(),k=Yd(),q=d0(),{createDeferredPromise:H}=Bn(),$=Ux(),P=globalThis.Blob||n.Blob,R=typeof P<"u"?function(ye){return ye instanceof P}:function(ye){return!1},V=globalThis.AbortController||Mc().AbortController,{FunctionPrototypeCall:M}=dr(),W=class extends x{constructor(ye){super(ye),(ye==null?void 0:ye.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(ye==null?void 0:ye.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function ye(se,Ne){if(d(se))return se;if(c(se))return F({readable:se});if(h(se))return F({writable:se});if(u(se))return F({writable:!1,readable:!1});if(m(se))return F({readable:k.fromWeb(se)});if(y(se))return F({writable:q.fromWeb(se)});if(typeof se=="function"){let{value:he,write:Re,final:B,destroy:ue}=O(se);if(l(he))return $(W,he,{objectMode:!0,write:Re,final:B,destroy:ue});let G=he==null?void 0:he.then;if(typeof G=="function"){let we,De=M(G,he,oe=>{if(oe!=null)throw new T("nully","body",oe)},oe=>{N(we,oe)});return we=new W({objectMode:!0,readable:!1,write:Re,final(oe){B(async()=>{try{await De,t.nextTick(oe,null)}catch(Ge){t.nextTick(oe,Ge)}})},destroy:ue})}throw new T("Iterable, AsyncIterable or AsyncFunction",Ne,he)}if(R(se))return ye(se.arrayBuffer());if(l(se))return $(W,se,{objectMode:!0,writable:!1});if(m(se==null?void 0:se.readable)&&y(se==null?void 0:se.writable))return W.fromWeb(se);if(typeof(se==null?void 0:se.writable)=="object"||typeof(se==null?void 0:se.readable)=="object"){let he=se!=null&&se.readable?c(se==null?void 0:se.readable)?se==null?void 0:se.readable:ye(se.readable):void 0,Re=se!=null&&se.writable?h(se==null?void 0:se.writable)?se==null?void 0:se.writable:ye(se.writable):void 0;return F({readable:he,writable:Re})}let Ie=se==null?void 0:se.then;if(typeof Ie=="function"){let he;return M(Ie,se,Re=>{Re!=null&&he.push(Re),he.push(null)},Re=>{N(he,Re)}),he=new W({objectMode:!0,writable:!1,read(){}})}throw new S(Ne,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],se)};function O(ye){let{promise:se,resolve:Ne}=H(),Ie=new V,he=Ie.signal;return{value:ye(async function*(){for(;;){let Re=se;se=null;let{chunk:B,done:ue,cb:G}=await Re;if(t.nextTick(G),ue)return;if(he.aborted)throw new b(void 0,{cause:he.reason});({promise:se,resolve:Ne}=H()),yield B}}(),{signal:he}),write(Re,B,ue){let G=Ne;Ne=null,G({chunk:Re,done:!1,cb:ue})},final(Re){let B=Ne;Ne=null,B({done:!0,cb:Re})},destroy(Re,B){Ie.abort(),B(Re)}}}function F(ye){let se=ye.readable&&typeof ye.readable.read!="function"?k.wrap(ye.readable):ye.readable,Ne=ye.writable,Ie=!!s(se),he=!!o(Ne),Re,B,ue,G,we;function De(oe){let Ge=G;G=null,Ge?Ge(oe):oe&&we.destroy(oe)}return we=new W({readableObjectMode:!!(se!=null&&se.readableObjectMode),writableObjectMode:!!(Ne!=null&&Ne.writableObjectMode),readable:Ie,writable:he}),he&&(_(Ne,oe=>{he=!1,oe&&N(se,oe),De(oe)}),we._write=function(oe,Ge,ce){Ne.write(oe,Ge)?ce():Re=ce},we._final=function(oe){Ne.end(),B=oe},Ne.on("drain",function(){if(Re){let oe=Re;Re=null,oe()}}),Ne.on("finish",function(){if(B){let oe=B;B=null,oe()}})),Ie&&(_(se,oe=>{Ie=!1,oe&&N(se,oe),De(oe)}),se.on("readable",function(){if(ue){let oe=ue;ue=null,oe()}}),se.on("end",function(){we.push(null)}),we._read=function(){for(;;){let oe=se.read();if(oe===null){ue=we._read;return}if(!we.push(oe))return}}),we._destroy=function(oe,Ge){!oe&&G!==null&&(oe=new b),ue=null,Re=null,B=null,G===null?Ge(oe):(G=Ge,N(Ne,oe),N(se,oe))},we}}),Vs=Ke((r,e)=>{je(),ze(),$e();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:s,ObjectSetPrototypeOf:o}=dr();e.exports=c;var l=Yd(),u=d0();o(c.prototype,l.prototype),o(c,l);{let y=s(u.prototype);for(let _=0;_<y.length;_++){let b=y[_];c.prototype[b]||(c.prototype[b]=u.prototype[b])}}function c(y){if(!(this instanceof c))return new c(y);l.call(this,y),u.call(this,y),y?(this.allowHalfOpen=y.allowHalfOpen!==!1,y.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),y.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(c.prototype,{writable:{__proto__:null,...n(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(u.prototype,"writableLength")},writableFinished:{__proto__:null,...n(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(y){this._readableState&&this._writableState&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}}});var h;function d(){return h===void 0&&(h={}),h}c.fromWeb=function(y,_){return d().newStreamDuplexFromReadableWritablePair(y,_)},c.toWeb=function(y){return d().newReadableWritablePairFromDuplex(y)};var m;c.from=function(y){return m||(m=sM()),m(y,"body")}}),Bx=Ke((r,e)=>{je(),ze(),$e();var{ObjectSetPrototypeOf:t,Symbol:n}=dr();e.exports=c;var{ERR_METHOD_NOT_IMPLEMENTED:s}=In().codes,o=Vs(),{getHighWaterMark:l}=Gd();t(c.prototype,o.prototype),t(c,o);var u=n("kCallback");function c(m){if(!(this instanceof c))return new c(m);let y=m?l(this,m,"readableHighWaterMark",!0):null;y===0&&(m={...m,highWaterMark:null,readableHighWaterMark:y,writableHighWaterMark:m.writableHighWaterMark||0}),o.call(this,m),this._readableState.sync=!1,this[u]=null,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",d)}function h(m){typeof this._flush=="function"&&!this.destroyed?this._flush((y,_)=>{if(y){m?m(y):this.destroy(y);return}_!=null&&this.push(_),this.push(null),m&&m()}):(this.push(null),m&&m())}function d(){this._final!==h&&h.call(this)}c.prototype._final=h,c.prototype._transform=function(m,y,_){throw new s("_transform()")},c.prototype._write=function(m,y,_){let b=this._readableState,S=this._writableState,T=b.length;this._transform(m,y,(N,x)=>{if(N){_(N);return}x!=null&&this.push(x),S.ended||T===b.length||b.length<b.highWaterMark?_():this[u]=_})},c.prototype._read=function(){if(this[u]){let m=this[u];this[u]=null,m()}}}),jx=Ke((r,e)=>{je(),ze(),$e();var{ObjectSetPrototypeOf:t}=dr();e.exports=s;var n=Bx();t(s.prototype,n.prototype),t(s,n);function s(o){if(!(this instanceof s))return new s(o);n.call(this,o)}s.prototype._transform=function(o,l,u){u(null,o)}}),p0=Ke((r,e)=>{je(),ze(),$e();var t=Ka(),{ArrayIsArray:n,Promise:s,SymbolAsyncIterator:o,SymbolDispose:l}=dr(),u=Wo(),{once:c}=Bn(),h=vu(),d=Vs(),{aggregateTwoErrors:m,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:_,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:T},AbortError:N}=In(),{validateFunction:x,validateAbortSignal:k}=Xc(),{isIterable:q,isReadable:H,isReadableNodeStream:$,isNodeStream:P,isTransformStream:R,isWebStream:V,isReadableStream:M,isReadableFinished:W}=Bs(),O=globalThis.AbortController||Mc().AbortController,F,ye,se;function Ne(oe,Ge,ce){let ee=!1;oe.on("close",()=>{ee=!0});let xe=u(oe,{readable:Ge,writable:ce},me=>{ee=!me});return{destroy:me=>{ee||(ee=!0,h.destroyer(oe,me||new S("pipe")))},cleanup:xe}}function Ie(oe){return x(oe[oe.length-1],"streams[stream.length - 1]"),oe.pop()}function he(oe){if(q(oe))return oe;if($(oe))return Re(oe);throw new y("val",["Readable","Iterable","AsyncIterable"],oe)}async function*Re(oe){ye||(ye=Yd()),yield*ye.prototype[o].call(oe)}async function B(oe,Ge,ce,{end:ee}){let xe,me=null,de=Oe=>{if(Oe&&(xe=Oe),me){let ne=me;me=null,ne()}},ve=()=>new s((Oe,ne)=>{xe?ne(xe):me=()=>{xe?ne(xe):Oe()}});Ge.on("drain",de);let Fe=u(Ge,{readable:!1},de);try{Ge.writableNeedDrain&&await ve();for await(let Oe of oe)Ge.write(Oe)||await ve();ee&&(Ge.end(),await ve()),ce()}catch(Oe){ce(xe!==Oe?m(xe,Oe):Oe)}finally{Fe(),Ge.off("drain",de)}}async function ue(oe,Ge,ce,{end:ee}){R(Ge)&&(Ge=Ge.writable);let xe=Ge.getWriter();try{for await(let me of oe)await xe.ready,xe.write(me).catch(()=>{});await xe.ready,ee&&await xe.close(),ce()}catch(me){try{await xe.abort(me),ce(me)}catch(de){ce(de)}}}function G(...oe){return we(oe,c(Ie(oe)))}function we(oe,Ge,ce){if(oe.length===1&&n(oe[0])&&(oe=oe[0]),oe.length<2)throw new b("streams");let ee=new O,xe=ee.signal,me=ce==null?void 0:ce.signal,de=[];k(me,"options.signal");function ve(){ke(new N)}se=se||Bn().addAbortListener;let Fe;me&&(Fe=se(me,ve));let Oe,ne,le=[],Ee=0;function Me(re){ke(re,--Ee===0)}function ke(re,Z){var Ue;if(re&&(!Oe||Oe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Oe=re),!(!Oe&&!Z)){for(;le.length;)le.shift()(Oe);(Ue=Fe)===null||Ue===void 0||Ue[l](),ee.abort(),Z&&(Oe||de.forEach(v=>v()),t.nextTick(Ge,Oe,ne))}}let Ve;for(let re=0;re<oe.length;re++){let Z=oe[re],Ue=re<oe.length-1,v=re>0,w=Ue||(ce==null?void 0:ce.end)!==!1,A=re===oe.length-1;if(P(Z)){let U=function(J){J&&J.name!=="AbortError"&&J.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Me(J)};if(w){let{destroy:J,cleanup:ie}=Ne(Z,Ue,v);le.push(J),H(Z)&&A&&de.push(ie)}Z.on("error",U),H(Z)&&A&&de.push(()=>{Z.removeListener("error",U)})}if(re===0)if(typeof Z=="function"){if(Ve=Z({signal:xe}),!q(Ve))throw new _("Iterable, AsyncIterable or Stream","source",Ve)}else q(Z)||$(Z)||R(Z)?Ve=Z:Ve=d.from(Z);else if(typeof Z=="function"){if(R(Ve)){var ae;Ve=he((ae=Ve)===null||ae===void 0?void 0:ae.readable)}else Ve=he(Ve);if(Ve=Z(Ve,{signal:xe}),Ue){if(!q(Ve,!0))throw new _("AsyncIterable",`transform[${re-1}]`,Ve)}else{var Q;F||(F=jx());let U=new F({objectMode:!0}),J=(Q=Ve)===null||Q===void 0?void 0:Q.then;if(typeof J=="function")Ee++,J.call(Ve,Ze=>{ne=Ze,Ze!=null&&U.write(Ze),w&&U.end(),t.nextTick(Me)},Ze=>{U.destroy(Ze),t.nextTick(Me,Ze)});else if(q(Ve,!0))Ee++,B(Ve,U,Me,{end:w});else if(M(Ve)||R(Ve)){let Ze=Ve.readable||Ve;Ee++,B(Ze,U,Me,{end:w})}else throw new _("AsyncIterable or Promise","destination",Ve);Ve=U;let{destroy:ie,cleanup:_e}=Ne(Ve,!1,!0);le.push(ie),A&&de.push(_e)}}else if(P(Z)){if($(Ve)){Ee+=2;let U=De(Ve,Z,Me,{end:w});H(Z)&&A&&de.push(U)}else if(R(Ve)||M(Ve)){let U=Ve.readable||Ve;Ee++,B(U,Z,Me,{end:w})}else if(q(Ve))Ee++,B(Ve,Z,Me,{end:w});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ve);Ve=Z}else if(V(Z)){if($(Ve))Ee++,ue(he(Ve),Z,Me,{end:w});else if(M(Ve)||q(Ve))Ee++,ue(Ve,Z,Me,{end:w});else if(R(Ve))Ee++,ue(Ve.readable,Z,Me,{end:w});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ve);Ve=Z}else Ve=d.from(Z)}return(xe!=null&&xe.aborted||me!=null&&me.aborted)&&t.nextTick(ve),Ve}function De(oe,Ge,ce,{end:ee}){let xe=!1;if(Ge.on("close",()=>{xe||ce(new T)}),oe.pipe(Ge,{end:!1}),ee){let me=function(){xe=!0,Ge.end()};W(oe)?t.nextTick(me):oe.once("end",me)}else ce();return u(oe,{readable:!0,writable:!1},me=>{let de=oe._readableState;me&&me.code==="ERR_STREAM_PREMATURE_CLOSE"&&de&&de.ended&&!de.errored&&!de.errorEmitted?oe.once("end",ce).once("error",ce):ce(me)}),u(Ge,{readable:!1,writable:!0},ce)}e.exports={pipelineImpl:we,pipeline:G}}),$x=Ke((r,e)=>{je(),ze(),$e();var{pipeline:t}=p0(),n=Vs(),{destroyer:s}=vu(),{isNodeStream:o,isReadable:l,isWritable:u,isWebStream:c,isTransformStream:h,isWritableStream:d,isReadableStream:m}=Bs(),{AbortError:y,codes:{ERR_INVALID_ARG_VALUE:_,ERR_MISSING_ARGS:b}}=In(),S=Wo();e.exports=function(...T){if(T.length===0)throw new b("streams");if(T.length===1)return n.from(T[0]);let N=[...T];if(typeof T[0]=="function"&&(T[0]=n.from(T[0])),typeof T[T.length-1]=="function"){let O=T.length-1;T[O]=n.from(T[O])}for(let O=0;O<T.length;++O)if(!(!o(T[O])&&!c(T[O]))){if(O<T.length-1&&!(l(T[O])||m(T[O])||h(T[O])))throw new _(`streams[${O}]`,N[O],"must be readable");if(O>0&&!(u(T[O])||d(T[O])||h(T[O])))throw new _(`streams[${O}]`,N[O],"must be writable")}let x,k,q,H,$;function P(O){let F=H;H=null,F?F(O):O?$.destroy(O):!W&&!M&&$.destroy()}let R=T[0],V=t(T,P),M=!!(u(R)||d(R)||h(R)),W=!!(l(V)||m(V)||h(V));if($=new n({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(V!=null&&V.readableObjectMode),writable:M,readable:W}),M){if(o(R))$._write=function(F,ye,se){R.write(F,ye)?se():x=se},$._final=function(F){R.end(),k=F},R.on("drain",function(){if(x){let F=x;x=null,F()}});else if(c(R)){let F=(h(R)?R.writable:R).getWriter();$._write=async function(ye,se,Ne){try{await F.ready,F.write(ye).catch(()=>{}),Ne()}catch(Ie){Ne(Ie)}},$._final=async function(ye){try{await F.ready,F.close().catch(()=>{}),k=ye}catch(se){ye(se)}}}let O=h(V)?V.readable:V;S(O,()=>{if(k){let F=k;k=null,F()}})}if(W){if(o(V))V.on("readable",function(){if(q){let O=q;q=null,O()}}),V.on("end",function(){$.push(null)}),$._read=function(){for(;;){let O=V.read();if(O===null){q=$._read;return}if(!$.push(O))return}};else if(c(V)){let O=(h(V)?V.readable:V).getReader();$._read=async function(){for(;;)try{let{value:F,done:ye}=await O.read();if(!$.push(F))return;if(ye){$.push(null);return}}catch{return}}}}return $._destroy=function(O,F){!O&&H!==null&&(O=new y),q=null,x=null,k=null,H===null?F(O):(H=F,o(V)&&s(V,O))},$}}),oM=Ke((r,e)=>{je(),ze(),$e();var t=globalThis.AbortController||Mc().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:l},AbortError:u}=In(),{validateAbortSignal:c,validateInteger:h,validateObject:d}=Xc(),m=dr().Symbol("kWeak"),y=dr().Symbol("kResistStopPropagation"),{finished:_}=Wo(),b=$x(),{addAbortSignalNoValidate:S}=Kd(),{isWritable:T,isNodeStream:N}=Bs(),{deprecate:x}=Bn(),{ArrayPrototypePush:k,Boolean:q,MathFloor:H,Number:$,NumberIsNaN:P,Promise:R,PromiseReject:V,PromiseResolve:M,PromisePrototypeThen:W,Symbol:O}=dr(),F=O("kEmpty"),ye=O("kEof");function se(me,de){if(de!=null&&d(de,"options"),(de==null?void 0:de.signal)!=null&&c(de.signal,"options.signal"),N(me)&&!T(me))throw new n("stream",me,"must be writable");let ve=b(this,me);return de!=null&&de.signal&&S(de.signal,ve),ve}function Ne(me,de){if(typeof me!="function")throw new s("fn",["Function","AsyncFunction"],me);de!=null&&d(de,"options"),(de==null?void 0:de.signal)!=null&&c(de.signal,"options.signal");let ve=1;(de==null?void 0:de.concurrency)!=null&&(ve=H(de.concurrency));let Fe=ve-1;return(de==null?void 0:de.highWaterMark)!=null&&(Fe=H(de.highWaterMark)),h(ve,"options.concurrency",1),h(Fe,"options.highWaterMark",0),Fe+=ve,(async function*(){let Oe=Bn().AbortSignalAny([de==null?void 0:de.signal].filter(q)),ne=this,le=[],Ee={signal:Oe},Me,ke,Ve=!1,ae=0;function Q(){Ve=!0,re()}function re(){ae-=1,Z()}function Z(){ke&&!Ve&&ae<ve&&le.length<Fe&&(ke(),ke=null)}async function Ue(){try{for await(let v of ne){if(Ve)return;if(Oe.aborted)throw new u;try{if(v=me(v,Ee),v===F)continue;v=M(v)}catch(w){v=V(w)}ae+=1,W(v,re,Q),le.push(v),Me&&(Me(),Me=null),!Ve&&(le.length>=Fe||ae>=ve)&&await new R(w=>{ke=w})}le.push(ye)}catch(v){let w=V(v);W(w,re,Q),le.push(w)}finally{Ve=!0,Me&&(Me(),Me=null)}}Ue();try{for(;;){for(;le.length>0;){let v=await le[0];if(v===ye)return;if(Oe.aborted)throw new u;v!==F&&(yield v),le.shift(),Z()}await new R(v=>{Me=v})}}finally{Ve=!0,ke&&(ke(),ke=null)}}).call(this)}function Ie(me=void 0){return me!=null&&d(me,"options"),(me==null?void 0:me.signal)!=null&&c(me.signal,"options.signal"),(async function*(){let de=0;for await(let Fe of this){var ve;if(me!=null&&(ve=me.signal)!==null&&ve!==void 0&&ve.aborted)throw new u({cause:me.signal.reason});yield[de++,Fe]}}).call(this)}async function he(me,de=void 0){for await(let ve of G.call(this,me,de))return!0;return!1}async function Re(me,de=void 0){if(typeof me!="function")throw new s("fn",["Function","AsyncFunction"],me);return!await he.call(this,async(...ve)=>!await me(...ve),de)}async function B(me,de){for await(let ve of G.call(this,me,de))return ve}async function ue(me,de){if(typeof me!="function")throw new s("fn",["Function","AsyncFunction"],me);async function ve(Fe,Oe){return await me(Fe,Oe),F}for await(let Fe of Ne.call(this,ve,de));}function G(me,de){if(typeof me!="function")throw new s("fn",["Function","AsyncFunction"],me);async function ve(Fe,Oe){return await me(Fe,Oe)?Fe:F}return Ne.call(this,ve,de)}var we=class extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function De(me,de,ve){var Fe;if(typeof me!="function")throw new s("reducer",["Function","AsyncFunction"],me);ve!=null&&d(ve,"options"),(ve==null?void 0:ve.signal)!=null&&c(ve.signal,"options.signal");let Oe=arguments.length>1;if(ve!=null&&(Fe=ve.signal)!==null&&Fe!==void 0&&Fe.aborted){let ke=new u(void 0,{cause:ve.signal.reason});throw this.once("error",()=>{}),await _(this.destroy(ke)),ke}let ne=new t,le=ne.signal;if(ve!=null&&ve.signal){let ke={once:!0,[m]:this,[y]:!0};ve.signal.addEventListener("abort",()=>ne.abort(),ke)}let Ee=!1;try{for await(let ke of this){var Me;if(Ee=!0,ve!=null&&(Me=ve.signal)!==null&&Me!==void 0&&Me.aborted)throw new u;Oe?de=await me(de,ke,{signal:le}):(de=ke,Oe=!0)}if(!Ee&&!Oe)throw new we}finally{ne.abort()}return de}async function oe(me){me!=null&&d(me,"options"),(me==null?void 0:me.signal)!=null&&c(me.signal,"options.signal");let de=[];for await(let Fe of this){var ve;if(me!=null&&(ve=me.signal)!==null&&ve!==void 0&&ve.aborted)throw new u(void 0,{cause:me.signal.reason});k(de,Fe)}return de}function Ge(me,de){let ve=Ne.call(this,me,de);return(async function*(){for await(let Fe of ve)yield*Fe}).call(this)}function ce(me){if(me=$(me),P(me))return 0;if(me<0)throw new l("number",">= 0",me);return me}function ee(me,de=void 0){return de!=null&&d(de,"options"),(de==null?void 0:de.signal)!=null&&c(de.signal,"options.signal"),me=ce(me),(async function*(){var ve;if(de!=null&&(ve=de.signal)!==null&&ve!==void 0&&ve.aborted)throw new u;for await(let Oe of this){var Fe;if(de!=null&&(Fe=de.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new u;me--<=0&&(yield Oe)}}).call(this)}function xe(me,de=void 0){return de!=null&&d(de,"options"),(de==null?void 0:de.signal)!=null&&c(de.signal,"options.signal"),me=ce(me),(async function*(){var ve;if(de!=null&&(ve=de.signal)!==null&&ve!==void 0&&ve.aborted)throw new u;for await(let Oe of this){var Fe;if(de!=null&&(Fe=de.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new u;if(me-- >0&&(yield Oe),me<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:x(Ie,"readable.asIndexedPairs will be removed in a future version."),drop:ee,filter:G,flatMap:Ge,map:Ne,take:xe,compose:se},e.exports.promiseReturningOperators={every:Re,forEach:ue,reduce:De,toArray:oe,some:he,find:B}}),zx=Ke((r,e)=>{je(),ze(),$e();var{ArrayPrototypePop:t,Promise:n}=dr(),{isIterable:s,isNodeStream:o,isWebStream:l}=Bs(),{pipelineImpl:u}=p0(),{finished:c}=Wo();Wx();function h(...d){return new n((m,y)=>{let _,b,S=d[d.length-1];if(S&&typeof S=="object"&&!o(S)&&!s(S)&&!l(S)){let T=t(d);_=T.signal,b=T.end}u(d,(T,N)=>{T?y(T):m(N)},{signal:_,end:b})})}e.exports={finished:c,pipeline:h}}),Wx=Ke((r,e)=>{je(),ze(),$e();var{Buffer:t}=(Kr(),Kt(Qr)),{ObjectDefineProperty:n,ObjectKeys:s,ReflectApply:o}=dr(),{promisify:{custom:l}}=Bn(),{streamReturningOperators:u,promiseReturningOperators:c}=oM(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:h}}=In(),d=$x(),{setDefaultHighWaterMark:m,getDefaultHighWaterMark:y}=Gd(),{pipeline:_}=p0(),{destroyer:b}=vu(),S=Wo(),T=zx(),N=Bs(),x=e.exports=f0().Stream;x.isDestroyed=N.isDestroyed,x.isDisturbed=N.isDisturbed,x.isErrored=N.isErrored,x.isReadable=N.isReadable,x.isWritable=N.isWritable,x.Readable=Yd();for(let q of s(u)){let H=function(...P){if(new.target)throw h();return x.Readable.from(o($,this,P))},$=u[q];n(H,"name",{__proto__:null,value:$.name}),n(H,"length",{__proto__:null,value:$.length}),n(x.Readable.prototype,q,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}for(let q of s(c)){let H=function(...P){if(new.target)throw h();return o($,this,P)},$=c[q];n(H,"name",{__proto__:null,value:$.name}),n(H,"length",{__proto__:null,value:$.length}),n(x.Readable.prototype,q,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}x.Writable=d0(),x.Duplex=Vs(),x.Transform=Bx(),x.PassThrough=jx(),x.pipeline=_;var{addAbortSignal:k}=Kd();x.addAbortSignal=k,x.finished=S,x.destroy=b,x.compose=d,x.setDefaultHighWaterMark=m,x.getDefaultHighWaterMark=y,n(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return T}}),n(_,l,{__proto__:null,enumerable:!0,get(){return T.pipeline}}),n(S,l,{__proto__:null,enumerable:!0,get(){return T.finished}}),x.Stream=x,x._isUint8Array=function(q){return q instanceof Uint8Array},x._uint8ArrayToBuffer=function(q){return t.from(q.buffer,q.byteOffset,q.byteLength)}}),Ga=Ke((r,e)=>{je(),ze(),$e();var t=Wx(),n=zx(),s=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=s,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}),aM=Ke((r,e)=>{je(),ze(),$e(),typeof Object.create=="function"?e.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,n){if(n){t.super_=n;var s=function(){};s.prototype=n.prototype,t.prototype=new s,t.prototype.constructor=t}}}),lM=Ke((r,e)=>{je(),ze(),$e();var{Buffer:t}=(Kr(),Kt(Qr)),n=Symbol.for("BufferList");function s(o){if(!(this instanceof s))return new s(o);s._init.call(this,o)}s._init=function(o){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,o&&this.append(o)},s.prototype._new=function(o){return new s(o)},s.prototype._offset=function(o){if(o===0)return[0,0];let l=0;for(let u=0;u<this._bufs.length;u++){let c=l+this._bufs[u].length;if(o<c||u===this._bufs.length-1)return[u,o-l];l=c}},s.prototype._reverseOffset=function(o){let l=o[0],u=o[1];for(let c=0;c<l;c++)u+=this._bufs[c].length;return u},s.prototype.get=function(o){if(o>this.length||o<0)return;let l=this._offset(o);return this._bufs[l[0]][l[1]]},s.prototype.slice=function(o,l){return typeof o=="number"&&o<0&&(o+=this.length),typeof l=="number"&&l<0&&(l+=this.length),this.copy(null,0,o,l)},s.prototype.copy=function(o,l,u,c){if((typeof u!="number"||u<0)&&(u=0),(typeof c!="number"||c>this.length)&&(c=this.length),u>=this.length||c<=0)return o||t.alloc(0);let h=!!o,d=this._offset(u),m=c-u,y=m,_=h&&l||0,b=d[1];if(u===0&&c===this.length){if(!h)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let S=0;S<this._bufs.length;S++)this._bufs[S].copy(o,_),_+=this._bufs[S].length;return o}if(y<=this._bufs[d[0]].length-b)return h?this._bufs[d[0]].copy(o,l,b,b+y):this._bufs[d[0]].slice(b,b+y);h||(o=t.allocUnsafe(m));for(let S=d[0];S<this._bufs.length;S++){let T=this._bufs[S].length-b;if(y>T)this._bufs[S].copy(o,_,b),_+=T;else{this._bufs[S].copy(o,_,b,b+y),_+=T;break}y-=T,b&&(b=0)}return o.length>_?o.slice(0,_):o},s.prototype.shallowSlice=function(o,l){if(o=o||0,l=typeof l!="number"?this.length:l,o<0&&(o+=this.length),l<0&&(l+=this.length),o===l)return this._new();let u=this._offset(o),c=this._offset(l),h=this._bufs.slice(u[0],c[0]+1);return c[1]===0?h.pop():h[h.length-1]=h[h.length-1].slice(0,c[1]),u[1]!==0&&(h[0]=h[0].slice(u[1])),this._new(h)},s.prototype.toString=function(o,l,u){return this.slice(l,u).toString(o)},s.prototype.consume=function(o){if(o=Math.trunc(o),Number.isNaN(o)||o<=0)return this;for(;this._bufs.length;)if(o>=this._bufs[0].length)o-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(o),this.length-=o;break}return this},s.prototype.duplicate=function(){let o=this._new();for(let l=0;l<this._bufs.length;l++)o.append(this._bufs[l]);return o},s.prototype.append=function(o){if(o==null)return this;if(o.buffer)this._appendBuffer(t.from(o.buffer,o.byteOffset,o.byteLength));else if(Array.isArray(o))for(let l=0;l<o.length;l++)this.append(o[l]);else if(this._isBufferList(o))for(let l=0;l<o._bufs.length;l++)this.append(o._bufs[l]);else typeof o=="number"&&(o=o.toString()),this._appendBuffer(t.from(o));return this},s.prototype._appendBuffer=function(o){this._bufs.push(o),this.length+=o.length},s.prototype.indexOf=function(o,l,u){if(u===void 0&&typeof l=="string"&&(u=l,l=void 0),typeof o=="function"||Array.isArray(o))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof o=="number"?o=t.from([o]):typeof o=="string"?o=t.from(o,u):this._isBufferList(o)?o=o.slice():Array.isArray(o.buffer)?o=t.from(o.buffer,o.byteOffset,o.byteLength):t.isBuffer(o)||(o=t.from(o)),l=Number(l||0),isNaN(l)&&(l=0),l<0&&(l=this.length+l),l<0&&(l=0),o.length===0)return l>this.length?this.length:l;let c=this._offset(l),h=c[0],d=c[1];for(;h<this._bufs.length;h++){let m=this._bufs[h];for(;d<m.length;)if(m.length-d>=o.length){let y=m.indexOf(o,d);if(y!==-1)return this._reverseOffset([h,y]);d=m.length-o.length+1}else{let y=this._reverseOffset([h,d]);if(this._match(y,o))return y;d++}d=0}return-1},s.prototype._match=function(o,l){if(this.length-o<l.length)return!1;for(let u=0;u<l.length;u++)if(this.get(o+u)!==l[u])return!1;return!0},function(){let o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let l in o)(function(u){o[u]===null?s.prototype[u]=function(c,h){return this.slice(c,c+h)[u](0,h)}:s.prototype[u]=function(c=0){return this.slice(c,c+o[u])[u](0)}})(l)}(),s.prototype._isBufferList=function(o){return o instanceof s||s.isBufferList(o)},s.isBufferList=function(o){return o!=null&&o[n]},e.exports=s}),uM=Ke((r,e)=>{je(),ze(),$e();var t=Ga().Duplex,n=aM(),s=lM();function o(l){if(!(this instanceof o))return new o(l);if(typeof l=="function"){this._callback=l;let u=(function(c){this._callback&&(this._callback(c),this._callback=null)}).bind(this);this.on("pipe",function(c){c.on("error",u)}),this.on("unpipe",function(c){c.removeListener("error",u)}),l=null}s._init.call(this,l),t.call(this)}n(o,t),Object.assign(o.prototype,s.prototype),o.prototype._new=function(l){return new o(l)},o.prototype._write=function(l,u,c){this._appendBuffer(l),typeof c=="function"&&c()},o.prototype._read=function(l){if(!this.length)return this.push(null);l=Math.min(l,this.length),this.push(this.slice(0,l)),this.consume(l)},o.prototype.end=function(l){t.prototype.end.call(this,l),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(l,u){this._bufs.length=0,this.length=0,u(l)},o.prototype._isBufferList=function(l){return l instanceof o||l instanceof s||o.isBufferList(l)},o.isBufferList=s.isBufferList,e.exports=o,e.exports.BufferListStream=o,e.exports.BufferList=s}),cM=Ke((r,e)=>{je(),ze(),$e();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=t}),qx=Ke((r,e)=>{je(),ze(),$e();var t=e.exports,{Buffer:n}=(Kr(),Kt(Qr));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let o in t.requiredHeaderFlags){let l=t.requiredHeaderFlags[o];t.requiredHeaderFlagsErrors[o]="Invalid header flag bits, must be 0x"+l.toString(16)+" for "+t.types[o]+" packet"}t.codes={};for(let o in t.types){let l=t.types[o];t.codes[l]=o}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=n.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=n.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=n.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let o in t.properties){let l=t.properties[o];t.propertiesCodes[l]=o}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function s(o){return[0,1,2].map(l=>[0,1].map(u=>[0,1].map(c=>{let h=n.alloc(1);return h.writeUInt8(t.codes[o]<<t.CMD_SHIFT|(u?t.DUP_MASK:0)|l<<t.QOS_SHIFT|c,0,!0),h})))}t.PUBLISH_HEADER=s("publish"),t.SUBSCRIBE_HEADER=s("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=s("unsubscribe"),t.ACKS={unsuback:s("unsuback"),puback:s("puback"),pubcomp:s("pubcomp"),pubrel:s("pubrel"),pubrec:s("pubrec")},t.SUBACK_HEADER=n.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=n.from([3]),t.VERSION4=n.from([4]),t.VERSION5=n.from([5]),t.VERSION131=n.from([131]),t.VERSION132=n.from([132]),t.QOS=[0,1,2].map(o=>n.from([o])),t.EMPTY={pingreq:n.from([t.codes.pingreq<<4,0]),pingresp:n.from([t.codes.pingresp<<4,0]),disconnect:n.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),hM=Ke((r,e)=>{je(),ze(),$e();var t=1e3,n=t*60,s=n*60,o=s*24,l=o*7,u=o*365.25;e.exports=function(y,_){_=_||{};var b=typeof y;if(b==="string"&&y.length>0)return c(y);if(b==="number"&&isFinite(y))return _.long?d(y):h(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function c(y){if(y=String(y),!(y.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(_){var b=parseFloat(_[1]),S=(_[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return b*u;case"weeks":case"week":case"w":return b*l;case"days":case"day":case"d":return b*o;case"hours":case"hour":case"hrs":case"hr":case"h":return b*s;case"minutes":case"minute":case"mins":case"min":case"m":return b*n;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function h(y){var _=Math.abs(y);return _>=o?Math.round(y/o)+"d":_>=s?Math.round(y/s)+"h":_>=n?Math.round(y/n)+"m":_>=t?Math.round(y/t)+"s":y+"ms"}function d(y){var _=Math.abs(y);return _>=o?m(y,_,o,"day"):_>=s?m(y,_,s,"hour"):_>=n?m(y,_,n,"minute"):_>=t?m(y,_,t,"second"):y+" ms"}function m(y,_,b,S){var T=_>=b*1.5;return Math.round(y/b)+" "+S+(T?"s":"")}}),fM=Ke((r,e)=>{je(),ze(),$e();function t(n){o.debug=o,o.default=o,o.coerce=m,o.disable=h,o.enable=u,o.enabled=d,o.humanize=hM(),o.destroy=y,Object.keys(n).forEach(_=>{o[_]=n[_]}),o.names=[],o.skips=[],o.formatters={};function s(_){let b=0;for(let S=0;S<_.length;S++)b=(b<<5)-b+_.charCodeAt(S),b|=0;return o.colors[Math.abs(b)%o.colors.length]}o.selectColor=s;function o(_){let b,S=null,T,N;function x(...k){if(!x.enabled)return;let q=x,H=Number(new Date),$=H-(b||H);q.diff=$,q.prev=b,q.curr=H,b=H,k[0]=o.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let P=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(R,V)=>{if(R==="%%")return"%";P++;let M=o.formatters[V];if(typeof M=="function"){let W=k[P];R=M.call(q,W),k.splice(P,1),P--}return R}),o.formatArgs.call(q,k),(q.log||o.log).apply(q,k)}return x.namespace=_,x.useColors=o.useColors(),x.color=o.selectColor(_),x.extend=l,x.destroy=o.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(T!==o.namespaces&&(T=o.namespaces,N=o.enabled(_)),N),set:k=>{S=k}}),typeof o.init=="function"&&o.init(x),x}function l(_,b){let S=o(this.namespace+(typeof b>"u"?":":b)+_);return S.log=this.log,S}function u(_){o.save(_),o.namespaces=_,o.names=[],o.skips=[];let b=(typeof _=="string"?_:"").trim().replace(" ",",").split(",").filter(Boolean);for(let S of b)S[0]==="-"?o.skips.push(S.slice(1)):o.names.push(S)}function c(_,b){let S=0,T=0,N=-1,x=0;for(;S<_.length;)if(T<b.length&&(b[T]===_[S]||b[T]==="*"))b[T]==="*"?(N=T,x=S,T++):(S++,T++);else if(N!==-1)T=N+1,x++,S=x;else return!1;for(;T<b.length&&b[T]==="*";)T++;return T===b.length}function h(){let _=[...o.names,...o.skips.map(b=>"-"+b)].join(",");return o.enable(""),_}function d(_){for(let b of o.skips)if(c(_,b))return!1;for(let b of o.names)if(c(_,b))return!0;return!1}function m(_){return _ instanceof Error?_.stack||_.message:_}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}e.exports=t}),Us=Ke((r,e)=>{je(),ze(),$e(),r.formatArgs=n,r.save=s,r.load=o,r.useColors=t,r.storage=l(),r.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let h="color: "+this.color;c.splice(1,0,h,"color: inherit");let d=0,m=0;c[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(d++,y==="%c"&&(m=d))}),c.splice(m,0,h)}r.log=console.debug||console.log||(()=>{});function s(c){try{c?r.storage.setItem("debug",c):r.storage.removeItem("debug")}catch{}}function o(){let c;try{c=r.storage.getItem("debug")}catch{}return!c&&typeof Bt<"u"&&"env"in Bt&&(c=Bt.env.DEBUG),c}function l(){try{return localStorage}catch{}}e.exports=fM()(r);var{formatters:u}=e.exports;u.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}),dM=Ke((r,e)=>{je(),ze(),$e();var t=uM(),{EventEmitter:n}=(Qa(),Kt(zo)),s=cM(),o=qx(),l=Us()("mqtt-packet:parser"),u=class tv extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(h){return this instanceof tv?(this.settings=h||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new tv().parser(h)}_resetState(){l("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=t(),this._stateCounter=0}parse(h){for(this.error&&this._resetState(),this._list.append(h),l("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,l("parse: state complete. _stateCounter is now: %d",this._stateCounter),l("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return l("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let h=this._list.readUInt8(0),d=h>>o.CMD_SHIFT;this.packet.cmd=o.types[d];let m=h&15,y=o.requiredHeaderFlags[d];return y!=null&&m!==y?this._emitError(new Error(o.requiredHeaderFlagsErrors[d])):(this.packet.retain=(h&o.RETAIN_MASK)!==0,this.packet.qos=h>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(h&o.DUP_MASK)!==0,l("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let h=this._parseVarByteNum(!0);return h&&(this.packet.length=h.value,this._list.consume(h.bytes)),l("_parseLength %d",h.value),!!h}_parsePayload(){l("_parsePayload: payload %O",this._list);let h=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}h=!0}return l("_parsePayload complete result: %s",h),h}_parseConnect(){l("_parseConnect");let h,d,m,y,_={},b=this.packet,S=this._parseString();if(S===null)return this._emitError(new Error("Cannot parse protocolId"));if(S!=="MQTT"&&S!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=S,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));_.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,_.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,_.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let T=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),N=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(_.will)b.will={},b.will.retain=T,b.will.qos=N;else{if(T)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(N)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let k=this._parseProperties();Object.getOwnPropertyNames(k).length&&(b.properties=k)}let x=this._parseString();if(x===null)return this._emitError(new Error("Packet too short"));if(b.clientId=x,l("_parseConnect: packet.clientId: %s",b.clientId),_.will){if(b.protocolVersion===5){let k=this._parseProperties();Object.getOwnPropertyNames(k).length&&(b.will.properties=k)}if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=h,l("_parseConnect: packet.will.topic: %s",b.will.topic),d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=d,l("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(_.username){if(y=this._parseString(),y===null)return this._emitError(new Error("Cannot parse username"));b.username=y,l("_parseConnect: packet.username: %s",b.username)}if(_.password){if(m=this._parseBuffer(),m===null)return this._emitError(new Error("Cannot parse password"));b.password=m}return this.settings=b,l("_parseConnect: complete"),b}_parseConnack(){l("_parseConnack");let h=this.packet;if(this._list.length<1)return null;let d=this._list.readUInt8(this._pos++);if(d>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(h.sessionPresent=!!(d&o.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?h.reasonCode=this._list.readUInt8(this._pos++):h.reasonCode=0;else{if(this._list.length<2)return null;h.returnCode=this._list.readUInt8(this._pos++)}if(h.returnCode===-1||h.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let m=this._parseProperties();Object.getOwnPropertyNames(m).length&&(h.properties=m)}l("_parseConnack: complete")}_parsePublish(){l("_parsePublish");let h=this.packet;if(h.topic=this._parseString(),h.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(h.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}h.payload=this._list.slice(this._pos,h.length),l("_parsePublish: payload from buffer list: %o",h.payload)}}_parseSubscribe(){l("_parseSubscribe");let h=this.packet,d,m,y,_,b,S,T;if(h.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let N=this._parseProperties();Object.getOwnPropertyNames(N).length&&(h.properties=N)}if(h.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<h.length;){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(m=this._parseByte(),this.settings.protocolVersion===5){if(m&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(m&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(y=m&o.SUBSCRIBE_OPTIONS_QOS_MASK,y>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(S=(m>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(m>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,_=m>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,_>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));T={topic:d,qos:y},this.settings.protocolVersion===5?(T.nl=S,T.rap=b,T.rh=_):this.settings.bridgeMode&&(T.rh=0,T.rap=!0,T.nl=!0),l("_parseSubscribe: push subscription `%s` to subscription",T),h.subscriptions.push(T)}}}_parseSuback(){l("_parseSuback");let h=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}if(h.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!o.MQTT5_SUBACK_CODES[d])return this._emitError(new Error("Invalid suback code"))}else if(d>2&&d!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(d)}}}_parseUnsubscribe(){l("_parseUnsubscribe");let h=this.packet;if(h.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}if(h.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<h.length;){let d=this._parseString();if(d===null)return this._emitError(new Error("Cannot parse topic"));l("_parseUnsubscribe: push topic `%s` to unsubscriptions",d),h.unsubscriptions.push(d)}}}_parseUnsuback(){l("_parseUnsuback");let h=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&h.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(h.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let d=this._parseProperties();for(Object.getOwnPropertyNames(d).length&&(h.properties=d),h.granted=[];this._pos<this.packet.length;){let m=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[m])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(m)}}}_parseConfirmation(){l("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let h=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(h.length>2){switch(h.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}l("_parseConfirmation: packet.reasonCode `%d`",h.reasonCode)}else h.reasonCode=0;if(h.length>3){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}}return!0}_parseDisconnect(){let h=this.packet;if(l("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(h.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[h.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):h.reasonCode=0;let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}return l("_parseDisconnect result: true"),!0}_parseAuth(){l("_parseAuth");let h=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(h.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[h.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let d=this._parseProperties();return Object.getOwnPropertyNames(d).length&&(h.properties=d),l("_parseAuth: result: true"),!0}_parseMessageId(){let h=this.packet;return h.messageId=this._parseNum(),h.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(l("_parseMessageId: packet.messageId %d",h.messageId),!0)}_parseString(h){let d=this._parseNum(),m=d+this._pos;if(d===-1||m>this._list.length||m>this.packet.length)return null;let y=this._list.toString("utf8",this._pos,m);return this._pos+=d,l("_parseString: result: %s",y),y}_parseStringPair(){return l("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let h=this._parseNum(),d=h+this._pos;if(h===-1||d>this._list.length||d>this.packet.length)return null;let m=this._list.slice(this._pos,d);return this._pos+=h,l("_parseBuffer: result: %o",m),m}_parseNum(){if(this._list.length-this._pos<2)return-1;let h=this._list.readUInt16BE(this._pos);return this._pos+=2,l("_parseNum: result: %s",h),h}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let h=this._list.readUInt32BE(this._pos);return this._pos+=4,l("_parse4ByteNum: result: %s",h),h}_parseVarByteNum(h){l("_parseVarByteNum");let d=4,m=0,y=1,_=0,b=!1,S,T=this._pos?this._pos:0;for(;m<d&&T+m<this._list.length;){if(S=this._list.readUInt8(T+m++),_+=y*(S&o.VARBYTEINT_MASK),y*=128,(S&o.VARBYTEINT_FIN_MASK)===0){b=!0;break}if(this._list.length<=m)break}return!b&&m===d&&this._list.length>=m&&this._emitError(new Error("Invalid variable byte integer")),T&&(this._pos+=m),b?h?b={bytes:m,value:_}:b=_:b=!1,l("_parseVarByteNum: result: %o",b),b}_parseByte(){let h;return this._pos<this._list.length&&(h=this._list.readUInt8(this._pos),this._pos++),l("_parseByte: result: %o",h),h}_parseByType(h){switch(l("_parseByType: type: %s",h),h){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){l("_parseProperties");let h=this._parseVarByteNum(),d=this._pos+h,m={};for(;this._pos<d;){let y=this._parseByte();if(!y)return this._emitError(new Error("Cannot parse property code type")),!1;let _=o.propertiesCodes[y];if(!_)return this._emitError(new Error("Unknown property")),!1;if(_==="userProperties"){m[_]||(m[_]=Object.create(null));let b=this._parseByType(o.propertiesTypes[_]);if(m[_][b.name])if(Array.isArray(m[_][b.name]))m[_][b.name].push(b.value);else{let S=m[_][b.name];m[_][b.name]=[S],m[_][b.name].push(b.value)}else m[_][b.name]=b.value;continue}m[_]?Array.isArray(m[_])?m[_].push(this._parseByType(o.propertiesTypes[_])):(m[_]=[m[_]],m[_].push(this._parseByType(o.propertiesTypes[_]))):m[_]=this._parseByType(o.propertiesTypes[_])}return m}_newPacket(){return l("_newPacket"),this.packet&&(this._list.consume(this.packet.length),l("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),l("_newPacket: new packet"),this.packet=new s,this._pos=0,!0}_emitError(h){l("_emitError",h),this.error=h,this.emit("error",h)}};e.exports=u}),pM=Ke((r,e)=>{je(),ze(),$e();var{Buffer:t}=(Kr(),Kt(Qr)),n=65536,s={},o=t.isBuffer(t.from([1,2]).subarray(0,1));function l(d){let m=t.allocUnsafe(2);return m.writeUInt8(d>>8,0),m.writeUInt8(d&255,1),m}function u(){for(let d=0;d<n;d++)s[d]=l(d)}function c(d){let m=0,y=0,_=t.allocUnsafe(4);do m=d%128|0,d=d/128|0,d>0&&(m=m|128),_.writeUInt8(m,y++);while(d>0&&y<4);return d>0&&(y=0),o?_.subarray(0,y):_.slice(0,y)}function h(d){let m=t.allocUnsafe(4);return m.writeUInt32BE(d,0),m}e.exports={cache:s,generateCache:u,generateNumber:l,genBufVariableByteInt:c,generate4ByteBuffer:h}}),mM=Ke((r,e)=>{je(),ze(),$e(),typeof Bt>"u"||!Bt.version||Bt.version.indexOf("v0.")===0||Bt.version.indexOf("v1.")===0&&Bt.version.indexOf("v1.8.")!==0?e.exports={nextTick:t}:e.exports=Bt;function t(n,s,o,l){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var u=arguments.length,c,h;switch(u){case 0:case 1:return Bt.nextTick(n);case 2:return Bt.nextTick(function(){n.call(null,s)});case 3:return Bt.nextTick(function(){n.call(null,s,o)});case 4:return Bt.nextTick(function(){n.call(null,s,o,l)});default:for(c=new Array(u-1),h=0;h<c.length;)c[h++]=arguments[h];return Bt.nextTick(function(){n.apply(null,c)})}}}),Hx=Ke((r,e)=>{je(),ze(),$e();var t=qx(),{Buffer:n}=(Kr(),Kt(Qr)),s=n.allocUnsafe(0),o=n.from([0]),l=pM(),u=mM().nextTick,c=Us()("mqtt-packet:writeToStream"),h=l.cache,d=l.generateNumber,m=l.generateCache,y=l.genBufVariableByteInt,_=l.generate4ByteBuffer,b=Ie,S=!0;function T(ce,ee,xe){switch(c("generate called"),ee.cork&&(ee.cork(),u(N,ee)),S&&(S=!1,m()),c("generate: packet.cmd: %s",ce.cmd),ce.cmd){case"connect":return x(ce,ee);case"connack":return k(ce,ee,xe);case"publish":return q(ce,ee,xe);case"puback":case"pubrec":case"pubrel":case"pubcomp":return H(ce,ee,xe);case"subscribe":return $(ce,ee,xe);case"suback":return P(ce,ee,xe);case"unsubscribe":return R(ce,ee,xe);case"unsuback":return V(ce,ee,xe);case"pingreq":case"pingresp":return M(ce,ee);case"disconnect":return W(ce,ee,xe);case"auth":return O(ce,ee,xe);default:return ee.destroy(new Error("Unknown command")),!1}}Object.defineProperty(T,"cacheNumbers",{get(){return b===Ie},set(ce){ce?((!h||Object.keys(h).length===0)&&(S=!0),b=Ie):(S=!1,b=he)}});function N(ce){ce.uncork()}function x(ce,ee,xe){let me=ce||{},de=me.protocolId||"MQTT",ve=me.protocolVersion||4,Fe=me.will,Oe=me.clean,ne=me.keepalive||0,le=me.clientId||"",Ee=me.username,Me=me.password,ke=me.properties;Oe===void 0&&(Oe=!0);let Ve=0;if(typeof de!="string"&&!n.isBuffer(de))return ee.destroy(new Error("Invalid protocolId")),!1;if(Ve+=de.length+2,ve!==3&&ve!==4&&ve!==5)return ee.destroy(new Error("Invalid protocol version")),!1;if(Ve+=1,(typeof le=="string"||n.isBuffer(le))&&(le||ve>=4)&&(le||Oe))Ve+=n.byteLength(le)+2;else{if(ve<4)return ee.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(Oe*1===0)return ee.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof ne!="number"||ne<0||ne>65535||ne%1!==0)return ee.destroy(new Error("Invalid keepalive")),!1;Ve+=2,Ve+=1;let ae,Q;if(ve===5){if(ae=ue(ee,ke),!ae)return!1;Ve+=ae.length}if(Fe){if(typeof Fe!="object")return ee.destroy(new Error("Invalid will")),!1;if(!Fe.topic||typeof Fe.topic!="string")return ee.destroy(new Error("Invalid will topic")),!1;if(Ve+=n.byteLength(Fe.topic)+2,Ve+=2,Fe.payload)if(Fe.payload.length>=0)typeof Fe.payload=="string"?Ve+=n.byteLength(Fe.payload):Ve+=Fe.payload.length;else return ee.destroy(new Error("Invalid will payload")),!1;if(Q={},ve===5){if(Q=ue(ee,Fe.properties),!Q)return!1;Ve+=Q.length}}let re=!1;if(Ee!=null)if(Ge(Ee))re=!0,Ve+=n.byteLength(Ee)+2;else return ee.destroy(new Error("Invalid username")),!1;if(Me!=null){if(!re)return ee.destroy(new Error("Username is required to use password")),!1;if(Ge(Me))Ve+=oe(Me)+2;else return ee.destroy(new Error("Invalid password")),!1}ee.write(t.CONNECT_HEADER),ye(ee,Ve),B(ee,de),me.bridgeMode&&(ve+=128),ee.write(ve===131?t.VERSION131:ve===132?t.VERSION132:ve===4?t.VERSION4:ve===5?t.VERSION5:t.VERSION3);let Z=0;return Z|=Ee!=null?t.USERNAME_MASK:0,Z|=Me!=null?t.PASSWORD_MASK:0,Z|=Fe&&Fe.retain?t.WILL_RETAIN_MASK:0,Z|=Fe&&Fe.qos?Fe.qos<<t.WILL_QOS_SHIFT:0,Z|=Fe?t.WILL_FLAG_MASK:0,Z|=Oe?t.CLEAN_SESSION_MASK:0,ee.write(n.from([Z])),b(ee,ne),ve===5&&ae.write(),B(ee,le),Fe&&(ve===5&&Q.write(),se(ee,Fe.topic),B(ee,Fe.payload)),Ee!=null&&B(ee,Ee),Me!=null&&B(ee,Me),!0}function k(ce,ee,xe){let me=xe?xe.protocolVersion:4,de=ce||{},ve=me===5?de.reasonCode:de.returnCode,Fe=de.properties,Oe=2;if(typeof ve!="number")return ee.destroy(new Error("Invalid return code")),!1;let ne=null;if(me===5){if(ne=ue(ee,Fe),!ne)return!1;Oe+=ne.length}return ee.write(t.CONNACK_HEADER),ye(ee,Oe),ee.write(de.sessionPresent?t.SESSIONPRESENT_HEADER:o),ee.write(n.from([ve])),ne==null||ne.write(),!0}function q(ce,ee,xe){c("publish: packet: %o",ce);let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.qos||0,Fe=de.retain?t.RETAIN_MASK:0,Oe=de.topic,ne=de.payload||s,le=de.messageId,Ee=de.properties,Me=0;if(typeof Oe=="string")Me+=n.byteLength(Oe)+2;else if(n.isBuffer(Oe))Me+=Oe.length+2;else return ee.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(ne)?Me+=ne.length:Me+=n.byteLength(ne),ve&&typeof le!="number")return ee.destroy(new Error("Invalid messageId")),!1;ve&&(Me+=2);let ke=null;if(me===5){if(ke=ue(ee,Ee),!ke)return!1;Me+=ke.length}return ee.write(t.PUBLISH_HEADER[ve][de.dup?1:0][Fe?1:0]),ye(ee,Me),b(ee,oe(Oe)),ee.write(Oe),ve>0&&b(ee,le),ke==null||ke.write(),c("publish: payload: %o",ne),ee.write(ne)}function H(ce,ee,xe){let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.cmd||"puback",Fe=de.messageId,Oe=de.dup&&ve==="pubrel"?t.DUP_MASK:0,ne=0,le=de.reasonCode,Ee=de.properties,Me=me===5?3:2;if(ve==="pubrel"&&(ne=1),typeof Fe!="number")return ee.destroy(new Error("Invalid messageId")),!1;let ke=null;if(me===5&&typeof Ee=="object"){if(ke=G(ee,Ee,xe,Me),!ke)return!1;Me+=ke.length}return ee.write(t.ACKS[ve][ne][Oe][0]),Me===3&&(Me+=le!==0?1:-1),ye(ee,Me),b(ee,Fe),me===5&&Me!==2&&ee.write(n.from([le])),ke!==null?ke.write():Me===4&&ee.write(n.from([0])),!0}function $(ce,ee,xe){c("subscribe: packet: ");let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.dup?t.DUP_MASK:0,Fe=de.messageId,Oe=de.subscriptions,ne=de.properties,le=0;if(typeof Fe!="number")return ee.destroy(new Error("Invalid messageId")),!1;le+=2;let Ee=null;if(me===5){if(Ee=ue(ee,ne),!Ee)return!1;le+=Ee.length}if(typeof Oe=="object"&&Oe.length)for(let ke=0;ke<Oe.length;ke+=1){let Ve=Oe[ke].topic,ae=Oe[ke].qos;if(typeof Ve!="string")return ee.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof ae!="number")return ee.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(me===5){if(typeof(Oe[ke].nl||!1)!="boolean")return ee.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Oe[ke].rap||!1)!="boolean")return ee.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let Q=Oe[ke].rh||0;if(typeof Q!="number"||Q>2)return ee.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}le+=n.byteLength(Ve)+2+1}else return ee.destroy(new Error("Invalid subscriptions")),!1;c("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),ee.write(t.SUBSCRIBE_HEADER[1][ve?1:0][0]),ye(ee,le),b(ee,Fe),Ee!==null&&Ee.write();let Me=!0;for(let ke of Oe){let Ve=ke.topic,ae=ke.qos,Q=+ke.nl,re=+ke.rap,Z=ke.rh,Ue;se(ee,Ve),Ue=t.SUBSCRIBE_OPTIONS_QOS[ae],me===5&&(Ue|=Q?t.SUBSCRIBE_OPTIONS_NL:0,Ue|=re?t.SUBSCRIBE_OPTIONS_RAP:0,Ue|=Z?t.SUBSCRIBE_OPTIONS_RH[Z]:0),Me=ee.write(n.from([Ue]))}return Me}function P(ce,ee,xe){let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.messageId,Fe=de.granted,Oe=de.properties,ne=0;if(typeof ve!="number")return ee.destroy(new Error("Invalid messageId")),!1;if(ne+=2,typeof Fe=="object"&&Fe.length)for(let Ee=0;Ee<Fe.length;Ee+=1){if(typeof Fe[Ee]!="number")return ee.destroy(new Error("Invalid qos vector")),!1;ne+=1}else return ee.destroy(new Error("Invalid qos vector")),!1;let le=null;if(me===5){if(le=G(ee,Oe,xe,ne),!le)return!1;ne+=le.length}return ee.write(t.SUBACK_HEADER),ye(ee,ne),b(ee,ve),le!==null&&le.write(),ee.write(n.from(Fe))}function R(ce,ee,xe){let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.messageId,Fe=de.dup?t.DUP_MASK:0,Oe=de.unsubscriptions,ne=de.properties,le=0;if(typeof ve!="number")return ee.destroy(new Error("Invalid messageId")),!1;if(le+=2,typeof Oe=="object"&&Oe.length)for(let ke=0;ke<Oe.length;ke+=1){if(typeof Oe[ke]!="string")return ee.destroy(new Error("Invalid unsubscriptions")),!1;le+=n.byteLength(Oe[ke])+2}else return ee.destroy(new Error("Invalid unsubscriptions")),!1;let Ee=null;if(me===5){if(Ee=ue(ee,ne),!Ee)return!1;le+=Ee.length}ee.write(t.UNSUBSCRIBE_HEADER[1][Fe?1:0][0]),ye(ee,le),b(ee,ve),Ee!==null&&Ee.write();let Me=!0;for(let ke=0;ke<Oe.length;ke++)Me=se(ee,Oe[ke]);return Me}function V(ce,ee,xe){let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.messageId,Fe=de.dup?t.DUP_MASK:0,Oe=de.granted,ne=de.properties,le=de.cmd,Ee=0,Me=2;if(typeof ve!="number")return ee.destroy(new Error("Invalid messageId")),!1;if(me===5)if(typeof Oe=="object"&&Oe.length)for(let Ve=0;Ve<Oe.length;Ve+=1){if(typeof Oe[Ve]!="number")return ee.destroy(new Error("Invalid qos vector")),!1;Me+=1}else return ee.destroy(new Error("Invalid qos vector")),!1;let ke=null;if(me===5){if(ke=G(ee,ne,xe,Me),!ke)return!1;Me+=ke.length}return ee.write(t.ACKS[le][Ee][Fe][0]),ye(ee,Me),b(ee,ve),ke!==null&&ke.write(),me===5&&ee.write(n.from(Oe)),!0}function M(ce,ee,xe){return ee.write(t.EMPTY[ce.cmd])}function W(ce,ee,xe){let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.reasonCode,Fe=de.properties,Oe=me===5?1:0,ne=null;if(me===5){if(ne=G(ee,Fe,xe,Oe),!ne)return!1;Oe+=ne.length}return ee.write(n.from([t.codes.disconnect<<4])),ye(ee,Oe),me===5&&ee.write(n.from([ve])),ne!==null&&ne.write(),!0}function O(ce,ee,xe){let me=xe?xe.protocolVersion:4,de=ce||{},ve=de.reasonCode,Fe=de.properties,Oe=me===5?1:0;me!==5&&ee.destroy(new Error("Invalid mqtt version for auth packet"));let ne=G(ee,Fe,xe,Oe);return ne?(Oe+=ne.length,ee.write(n.from([t.codes.auth<<4])),ye(ee,Oe),ee.write(n.from([ve])),ne!==null&&ne.write(),!0):!1}var F={};function ye(ce,ee){if(ee>t.VARBYTEINT_MAX)return ce.destroy(new Error(`Invalid variable byte integer: ${ee}`)),!1;let xe=F[ee];return xe||(xe=y(ee),ee<16384&&(F[ee]=xe)),c("writeVarByteInt: writing to stream: %o",xe),ce.write(xe)}function se(ce,ee){let xe=n.byteLength(ee);return b(ce,xe),c("writeString: %s",ee),ce.write(ee,"utf8")}function Ne(ce,ee,xe){se(ce,ee),se(ce,xe)}function Ie(ce,ee){return c("writeNumberCached: number: %d",ee),c("writeNumberCached: %o",h[ee]),ce.write(h[ee])}function he(ce,ee){let xe=d(ee);return c("writeNumberGenerated: %o",xe),ce.write(xe)}function Re(ce,ee){let xe=_(ee);return c("write4ByteNumber: %o",xe),ce.write(xe)}function B(ce,ee){typeof ee=="string"?se(ce,ee):ee?(b(ce,ee.length),ce.write(ee)):b(ce,0)}function ue(ce,ee){if(typeof ee!="object"||ee.length!=null)return{length:1,write(){De(ce,{},0)}};let xe=0;function me(de,ve){let Fe=t.propertiesTypes[de],Oe=0;switch(Fe){case"byte":{if(typeof ve!="boolean")return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=2;break}case"int8":{if(typeof ve!="number"||ve<0||ve>255)return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=2;break}case"binary":{if(ve&&ve===null)return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=1+n.byteLength(ve)+2;break}case"int16":{if(typeof ve!="number"||ve<0||ve>65535)return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=3;break}case"int32":{if(typeof ve!="number"||ve<0||ve>4294967295)return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=5;break}case"var":{if(typeof ve!="number"||ve<0||ve>268435455)return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=1+n.byteLength(y(ve));break}case"string":{if(typeof ve!="string")return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=3+n.byteLength(ve.toString());break}case"pair":{if(typeof ve!="object")return ce.destroy(new Error(`Invalid ${de}: ${ve}`)),!1;Oe+=Object.getOwnPropertyNames(ve).reduce((ne,le)=>{let Ee=ve[le];return Array.isArray(Ee)?ne+=Ee.reduce((Me,ke)=>(Me+=3+n.byteLength(le.toString())+2+n.byteLength(ke.toString()),Me),0):ne+=3+n.byteLength(le.toString())+2+n.byteLength(ve[le].toString()),ne},0);break}default:return ce.destroy(new Error(`Invalid property ${de}: ${ve}`)),!1}return Oe}if(ee)for(let de in ee){let ve=0,Fe=0,Oe=ee[de];if(Oe!==void 0){if(Array.isArray(Oe))for(let ne=0;ne<Oe.length;ne++){if(Fe=me(de,Oe[ne]),!Fe)return!1;ve+=Fe}else{if(Fe=me(de,Oe),!Fe)return!1;ve=Fe}if(!ve)return!1;xe+=ve}}return{length:n.byteLength(y(xe))+xe,write(){De(ce,ee,xe)}}}function G(ce,ee,xe,me){let de=["reasonString","userProperties"],ve=xe&&xe.properties&&xe.properties.maximumPacketSize?xe.properties.maximumPacketSize:0,Fe=ue(ce,ee);if(ve)for(;me+Fe.length>ve;){let Oe=de.shift();if(Oe&&ee[Oe])delete ee[Oe],Fe=ue(ce,ee);else return!1}return Fe}function we(ce,ee,xe){switch(t.propertiesTypes[ee]){case"byte":{ce.write(n.from([t.properties[ee]])),ce.write(n.from([+xe]));break}case"int8":{ce.write(n.from([t.properties[ee]])),ce.write(n.from([xe]));break}case"binary":{ce.write(n.from([t.properties[ee]])),B(ce,xe);break}case"int16":{ce.write(n.from([t.properties[ee]])),b(ce,xe);break}case"int32":{ce.write(n.from([t.properties[ee]])),Re(ce,xe);break}case"var":{ce.write(n.from([t.properties[ee]])),ye(ce,xe);break}case"string":{ce.write(n.from([t.properties[ee]])),se(ce,xe);break}case"pair":{Object.getOwnPropertyNames(xe).forEach(me=>{let de=xe[me];Array.isArray(de)?de.forEach(ve=>{ce.write(n.from([t.properties[ee]])),Ne(ce,me.toString(),ve.toString())}):(ce.write(n.from([t.properties[ee]])),Ne(ce,me.toString(),de.toString()))});break}default:return ce.destroy(new Error(`Invalid property ${ee} value: ${xe}`)),!1}}function De(ce,ee,xe){ye(ce,xe);for(let me in ee)if(Object.prototype.hasOwnProperty.call(ee,me)&&ee[me]!=null){let de=ee[me];if(Array.isArray(de))for(let ve=0;ve<de.length;ve++)we(ce,me,de[ve]);else we(ce,me,de)}}function oe(ce){return ce?ce instanceof n?ce.length:n.byteLength(ce):0}function Ge(ce){return typeof ce=="string"||ce instanceof n}e.exports=T}),gM=Ke((r,e)=>{je(),ze(),$e();var t=Hx(),{EventEmitter:n}=(Qa(),Kt(zo)),{Buffer:s}=(Kr(),Kt(Qr));function o(u,c){let h=new l;return t(u,h,c),h.concat()}var l=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(u){return this._array[this._i++]=u,!0}concat(){let u=0,c=new Array(this._array.length),h=this._array,d=0,m;for(m=0;m<h.length&&h[m]!==void 0;m++)typeof h[m]!="string"?c[m]=h[m].length:c[m]=s.byteLength(h[m]),u+=c[m];let y=s.allocUnsafe(u);for(m=0;m<h.length&&h[m]!==void 0;m++)typeof h[m]!="string"?(h[m].copy(y,d),d+=c[m]):(y.write(h[m],d),d+=c[m]);return y}destroy(u){u&&this.emit("error",u)}};e.exports=o}),yM=Ke(r=>{je(),ze(),$e(),r.parser=dM().parser,r.generate=gM(),r.writeToStream=Hx()}),Qx=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};r.default=e}),vM=Ke((r,e)=>{je(),ze(),$e(),e.exports=n;function t(o){return o instanceof gd?gd.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}function n(o){if(o=o||{},o.circles)return s(o);let l=new Map;if(l.set(Date,m=>new Date(m)),l.set(Map,(m,y)=>new Map(c(Array.from(m),y))),l.set(Set,(m,y)=>new Set(c(Array.from(m),y))),o.constructorHandlers)for(let m of o.constructorHandlers)l.set(m[0],m[1]);let u=null;return o.proto?d:h;function c(m,y){let _=Object.keys(m),b=new Array(_.length);for(let S=0;S<_.length;S++){let T=_[S],N=m[T];typeof N!="object"||N===null?b[T]=N:N.constructor!==Object&&(u=l.get(N.constructor))?b[T]=u(N,y):ArrayBuffer.isView(N)?b[T]=t(N):b[T]=y(N)}return b}function h(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,h);if(m.constructor!==Object&&(u=l.get(m.constructor)))return u(m,h);let y={};for(let _ in m){if(Object.hasOwnProperty.call(m,_)===!1)continue;let b=m[_];typeof b!="object"||b===null?y[_]=b:b.constructor!==Object&&(u=l.get(b.constructor))?y[_]=u(b,h):ArrayBuffer.isView(b)?y[_]=t(b):y[_]=h(b)}return y}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,d);if(m.constructor!==Object&&(u=l.get(m.constructor)))return u(m,d);let y={};for(let _ in m){let b=m[_];typeof b!="object"||b===null?y[_]=b:b.constructor!==Object&&(u=l.get(b.constructor))?y[_]=u(b,d):ArrayBuffer.isView(b)?y[_]=t(b):y[_]=d(b)}return y}}function s(o){let l=[],u=[],c=new Map;if(c.set(Date,_=>new Date(_)),c.set(Map,(_,b)=>new Map(d(Array.from(_),b))),c.set(Set,(_,b)=>new Set(d(Array.from(_),b))),o.constructorHandlers)for(let _ of o.constructorHandlers)c.set(_[0],_[1]);let h=null;return o.proto?y:m;function d(_,b){let S=Object.keys(_),T=new Array(S.length);for(let N=0;N<S.length;N++){let x=S[N],k=_[x];if(typeof k!="object"||k===null)T[x]=k;else if(k.constructor!==Object&&(h=c.get(k.constructor)))T[x]=h(k,b);else if(ArrayBuffer.isView(k))T[x]=t(k);else{let q=l.indexOf(k);q!==-1?T[x]=u[q]:T[x]=b(k)}}return T}function m(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return d(_,m);if(_.constructor!==Object&&(h=c.get(_.constructor)))return h(_,m);let b={};l.push(_),u.push(b);for(let S in _){if(Object.hasOwnProperty.call(_,S)===!1)continue;let T=_[S];if(typeof T!="object"||T===null)b[S]=T;else if(T.constructor!==Object&&(h=c.get(T.constructor)))b[S]=h(T,m);else if(ArrayBuffer.isView(T))b[S]=t(T);else{let N=l.indexOf(T);N!==-1?b[S]=u[N]:b[S]=m(T)}}return l.pop(),u.pop(),b}function y(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return d(_,y);if(_.constructor!==Object&&(h=c.get(_.constructor)))return h(_,y);let b={};l.push(_),u.push(b);for(let S in _){let T=_[S];if(typeof T!="object"||T===null)b[S]=T;else if(T.constructor!==Object&&(h=c.get(T.constructor)))b[S]=h(T,y);else if(ArrayBuffer.isView(T))b[S]=t(T);else{let N=l.indexOf(T);N!==-1?b[S]=u[N]:b[S]=y(T)}}return l.pop(),u.pop(),b}}}),_M=Ke((r,e)=>{je(),ze(),$e(),e.exports=vM()()}),wM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=e,r.validateTopics=t;function e(n){let s=n.split("/");for(let o=0;o<s.length;o++)if(s[o]!=="+"){if(s[o]==="#")return o===s.length-1;if(s[o].indexOf("+")!==-1||s[o].indexOf("#")!==-1)return!1}return!0}function t(n){if(n.length===0)return"empty_topic_list";for(let s=0;s<n.length;s++)if(!e(n[s]))return n[s];return null}}),Kx=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=Ga(),t={objectMode:!0},n={clean:!0},s=class{constructor(o){this.options=o||{},this.options=Object.assign(Object.assign({},n),o),this._inflights=new Map}put(o,l){return this._inflights.set(o.messageId,o),l&&l(),this}createStream(){let o=new e.Readable(t),l=[],u=!1,c=0;return this._inflights.forEach((h,d)=>{l.push(h)}),o._read=()=>{!u&&c<l.length?o.push(l[c++]):o.push(null)},o.destroy=h=>{if(!u)return u=!0,setTimeout(()=>{o.emit("close")},0),o},o}del(o,l){let u=this._inflights.get(o.messageId);return u?(this._inflights.delete(o.messageId),l(null,u)):l&&l(new Error("missing packet")),this}get(o,l){let u=this._inflights.get(o.messageId);return u?l(null,u):l&&l(new Error("missing packet")),this}close(o){this.options.clean&&(this._inflights=null),o&&o()}};r.default=s}),bM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],t=(n,s,o)=>{n.log("handlePublish: packet %o",s),o=typeof o<"u"?o:n.noop;let l=s.topic.toString(),u=s.payload,{qos:c}=s,{messageId:h}=s,{options:d}=n;if(n.options.protocolVersion===5){let m;if(s.properties&&(m=s.properties.topicAlias),typeof m<"u")if(l.length===0)if(m>0&&m<=65535){let y=n.topicAliasRecv.getTopicByAlias(m);if(y)l=y,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",l,m);else{n.log("handlePublish :: unregistered topic alias. alias: %d",m),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",m),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(l,m))n.log("handlePublish :: registered topic: %s - alias: %d",l,m);else{n.log("handlePublish :: topic alias out of range. alias: %d",m),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",c),c){case 2:{d.customHandleAcks(l,u,s,(m,y)=>{if(typeof m=="number"&&(y=m,m=null),m)return n.emit("error",m);if(e.indexOf(y)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));y?n._sendPacket({cmd:"pubrec",messageId:h,reasonCode:y},o):n.incomingStore.put(s,()=>{n._sendPacket({cmd:"pubrec",messageId:h},o)})});break}case 1:{d.customHandleAcks(l,u,s,(m,y)=>{if(typeof m=="number"&&(y=m,m=null),m)return n.emit("error",m);if(e.indexOf(y)===-1)return n.emit("error",new Error("Wrong reason code for puback"));y||n.emit("message",l,u,s),n.handleMessage(s,_=>{if(_)return o&&o(_);n._sendPacket({cmd:"puback",messageId:h,reasonCode:y},o)})});break}case 0:n.emit("message",l,u,s),n.handleMessage(s,o);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=t}),EM=Ke((r,e)=>{e.exports={version:"5.11.0"}}),_u=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithReasonCode=void 0,r.applyMixin=t;var e=class Gx extends Error{constructor(s,o){super(s),this.code=o,Object.setPrototypeOf(this,Gx.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=e;function t(n,s,o=!1){var l;let u=[s];for(;;){let c=u[0],h=Object.getPrototypeOf(c);if(h!=null&&h.prototype)u.unshift(h);else break}for(let c of u)for(let h of Object.getOwnPropertyNames(c.prototype))(o||h!=="constructor")&&Object.defineProperty(n.prototype,h,(l=Object.getOwnPropertyDescriptor(c.prototype,h))!==null&&l!==void 0?l:Object.create(null))}r.nextTick=typeof(Bt==null?void 0:Bt.nextTick)=="function"?Bt.nextTick:n=>{setTimeout(n,0)},r.MQTTJS_VERSION=EM().version}),Jd=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var e=_u();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(n,s)=>{let{messageId:o}=s,l=s.cmd,u=null,c=n.outgoing[o]?n.outgoing[o].cb:null,h=null;if(!c){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",l),l){case"pubcomp":case"puback":{let d=s.reasonCode;d&&d>0&&d!==16?(h=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[d]}`,d),n._removeOutgoingAndStoreMessage(o,()=>{c(h,s)})):n._removeOutgoingAndStoreMessage(o,c);break}case"pubrec":{u={cmd:"pubrel",qos:2,messageId:o};let d=s.reasonCode;d&&d>0&&d!==16?(h=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[d]}`,d),n._removeOutgoingAndStoreMessage(o,()=>{c(h,s)})):n._sendPacket(u);break}case"suback":{delete n.outgoing[o],n.messageIdProvider.deallocate(o);let d=s.granted;for(let m=0;m<d.length;m++){let y=d[m];if((y&128)!==0){h=new Error(`Subscribe error: ${r.ReasonCodes[y]}`),h.code=y;let _=n.messageIdToTopic[o];_&&_.forEach(b=>{delete n._resubscribeTopics[b]})}}delete n.messageIdToTopic[o],n._invokeStoreProcessingQueue(),c(h,s);break}case"unsuback":{delete n.outgoing[o],n.messageIdProvider.deallocate(o),n._invokeStoreProcessingQueue(),c(null,s);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};r.default=t}),SM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=_u(),t=Jd(),n=(s,o)=>{let{options:l}=s,u=l.protocolVersion,c=u===5?o.reasonCode:o.returnCode;if(u!==5){let h=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${u}`,c);s.emit("error",h);return}s.handleAuth(o,(h,d)=>{if(h){s.emit("error",h);return}if(c===24)s.reconnecting=!1,s._sendPacket(d);else{let m=new e.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);s.emit("error",m)}})};r.default=n}),TM=Ke(r=>{var _,b,S,T,N,x,k,q,H,$,P,R,V,M,W,O,F,ye,se,Ne,Ie,he,Re,B,ue,G,we,De,oe,rv,ce,ee,xe,me,Yx,ve,Fe,Oe,go,yo,nv,jf,$f,tr,iv,pc,vo,sv,Ue;je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,n=typeof Bt=="object"&&Bt?Bt:{},s=(v,w,A,U)=>{typeof n.emitWarning=="function"?n.emitWarning(v,w,A,U):console.error(`[${A}] ${w}: ${v}`)},o=globalThis.AbortController,l=globalThis.AbortSignal;if(typeof o>"u"){l=class{constructor(){or(this,"onabort");or(this,"_onabort",[]);or(this,"reason");or(this,"aborted",!1)}addEventListener(A,U){this._onabort.push(U)}},o=class{constructor(){or(this,"signal",new l);w()}abort(A){var U,J;if(!this.signal.aborted){this.signal.reason=A,this.signal.aborted=!0;for(let ie of this.signal._onabort)ie(A);(J=(U=this.signal).onabort)==null||J.call(U,A)}}};let v=((_=n.env)==null?void 0:_.LRU_CACHE_IGNORE_AC_WARNING)!=="1",w=()=>{v&&(v=!1,s("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",w))}}var u=v=>!t.has(v),c=v=>v&&v===Math.floor(v)&&v>0&&isFinite(v),h=v=>c(v)?v<=Math.pow(2,8)?Uint8Array:v<=Math.pow(2,16)?Uint16Array:v<=Math.pow(2,32)?Uint32Array:v<=Number.MAX_SAFE_INTEGER?d:null:null,d=class extends Array{constructor(v){super(v),this.fill(0)}},m=(b=class{constructor(w,A){or(this,"heap");or(this,"length");if(!L(b,S))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new A(w),this.length=0}static create(w){let A=h(w);if(!A)return[];Be(b,S,!0);let U=new b(w,A);return Be(b,S,!1),U}push(w){this.heap[this.length++]=w}pop(){return this.heap[--this.length]}},S=new WeakMap,nt(b,S,!1),b),y=(Ue=class{constructor(w){nt(this,oe);nt(this,x);nt(this,k);nt(this,q);nt(this,H);nt(this,$);nt(this,P);or(this,"ttl");or(this,"ttlResolution");or(this,"ttlAutopurge");or(this,"updateAgeOnGet");or(this,"updateAgeOnHas");or(this,"allowStale");or(this,"noDisposeOnSet");or(this,"noUpdateTTL");or(this,"maxEntrySize");or(this,"sizeCalculation");or(this,"noDeleteOnFetchRejection");or(this,"noDeleteOnStaleGet");or(this,"allowStaleOnFetchAbort");or(this,"allowStaleOnFetchRejection");or(this,"ignoreFetchAbort");nt(this,R);nt(this,V);nt(this,M);nt(this,W);nt(this,O);nt(this,F);nt(this,ye);nt(this,se);nt(this,Ne);nt(this,Ie);nt(this,he);nt(this,Re);nt(this,B);nt(this,ue);nt(this,G);nt(this,we);nt(this,De);nt(this,ce,()=>{});nt(this,ee,()=>{});nt(this,xe,()=>{});nt(this,me,()=>!1);nt(this,ve,w=>{});nt(this,Fe,(w,A,U)=>{});nt(this,Oe,(w,A,U,J)=>{if(U||J)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});or(this,T,"LRUCache");let{max:A=0,ttl:U,ttlResolution:J=1,ttlAutopurge:ie,updateAgeOnGet:_e,updateAgeOnHas:Ze,allowStale:et,dispose:ft,disposeAfter:bt,noDisposeOnSet:mt,noUpdateTTL:_r,maxSize:wr=0,maxEntrySize:xr=0,sizeCalculation:Ct,fetchMethod:Wt,memoMethod:gt,noDeleteOnFetchRejection:Rt,noDeleteOnStaleGet:mr,allowStaleOnFetchRejection:Gt,allowStaleOnFetchAbort:br,ignoreFetchAbort:jr}=w;if(A!==0&&!c(A))throw new TypeError("max option must be a nonnegative integer");let Y=A?h(A):Array;if(!Y)throw new Error("invalid max value: "+A);if(Be(this,x,A),Be(this,k,wr),this.maxEntrySize=xr||L(this,k),this.sizeCalculation=Ct,this.sizeCalculation){if(!L(this,k)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(gt!==void 0&&typeof gt!="function")throw new TypeError("memoMethod must be a function if defined");if(Be(this,P,gt),Wt!==void 0&&typeof Wt!="function")throw new TypeError("fetchMethod must be a function if specified");if(Be(this,$,Wt),Be(this,we,!!Wt),Be(this,M,new Map),Be(this,W,new Array(A).fill(void 0)),Be(this,O,new Array(A).fill(void 0)),Be(this,F,new Y(A)),Be(this,ye,new Y(A)),Be(this,se,0),Be(this,Ne,0),Be(this,Ie,m.create(A)),Be(this,R,0),Be(this,V,0),typeof ft=="function"&&Be(this,q,ft),typeof bt=="function"?(Be(this,H,bt),Be(this,he,[])):(Be(this,H,void 0),Be(this,he,void 0)),Be(this,G,!!L(this,q)),Be(this,De,!!L(this,H)),this.noDisposeOnSet=!!mt,this.noUpdateTTL=!!_r,this.noDeleteOnFetchRejection=!!Rt,this.allowStaleOnFetchRejection=!!Gt,this.allowStaleOnFetchAbort=!!br,this.ignoreFetchAbort=!!jr,this.maxEntrySize!==0){if(L(this,k)!==0&&!c(L(this,k)))throw new TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");qe(this,oe,Yx).call(this)}if(this.allowStale=!!et,this.noDeleteOnStaleGet=!!mr,this.updateAgeOnGet=!!_e,this.updateAgeOnHas=!!Ze,this.ttlResolution=c(J)||J===0?J:1,this.ttlAutopurge=!!ie,this.ttl=U||0,this.ttl){if(!c(this.ttl))throw new TypeError("ttl must be a positive integer if specified");qe(this,oe,rv).call(this)}if(L(this,x)===0&&this.ttl===0&&L(this,k)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!L(this,x)&&!L(this,k)){let X="LRU_CACHE_UNBOUNDED";u(X)&&(t.add(X),s("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",X,Ue))}}static unsafeExposeInternals(w){return{starts:L(w,B),ttls:L(w,ue),sizes:L(w,Re),keyMap:L(w,M),keyList:L(w,W),valList:L(w,O),next:L(w,F),prev:L(w,ye),get head(){return L(w,se)},get tail(){return L(w,Ne)},free:L(w,Ie),isBackgroundFetch:A=>{var U;return qe(U=w,oe,tr).call(U,A)},backgroundFetch:(A,U,J,ie)=>{var _e;return qe(_e=w,oe,$f).call(_e,A,U,J,ie)},moveToTail:A=>{var U;return qe(U=w,oe,pc).call(U,A)},indexes:A=>{var U;return qe(U=w,oe,go).call(U,A)},rindexes:A=>{var U;return qe(U=w,oe,yo).call(U,A)},isStale:A=>{var U;return L(U=w,me).call(U,A)}}}get max(){return L(this,x)}get maxSize(){return L(this,k)}get calculatedSize(){return L(this,V)}get size(){return L(this,R)}get fetchMethod(){return L(this,$)}get memoMethod(){return L(this,P)}get dispose(){return L(this,q)}get disposeAfter(){return L(this,H)}getRemainingTTL(w){return L(this,M).has(w)?1/0:0}*entries(){for(let w of qe(this,oe,go).call(this))L(this,O)[w]!==void 0&&L(this,W)[w]!==void 0&&!qe(this,oe,tr).call(this,L(this,O)[w])&&(yield[L(this,W)[w],L(this,O)[w]])}*rentries(){for(let w of qe(this,oe,yo).call(this))L(this,O)[w]!==void 0&&L(this,W)[w]!==void 0&&!qe(this,oe,tr).call(this,L(this,O)[w])&&(yield[L(this,W)[w],L(this,O)[w]])}*keys(){for(let w of qe(this,oe,go).call(this)){let A=L(this,W)[w];A!==void 0&&!qe(this,oe,tr).call(this,L(this,O)[w])&&(yield A)}}*rkeys(){for(let w of qe(this,oe,yo).call(this)){let A=L(this,W)[w];A!==void 0&&!qe(this,oe,tr).call(this,L(this,O)[w])&&(yield A)}}*values(){for(let w of qe(this,oe,go).call(this))L(this,O)[w]!==void 0&&!qe(this,oe,tr).call(this,L(this,O)[w])&&(yield L(this,O)[w])}*rvalues(){for(let w of qe(this,oe,yo).call(this))L(this,O)[w]!==void 0&&!qe(this,oe,tr).call(this,L(this,O)[w])&&(yield L(this,O)[w])}[(N=Symbol.iterator,T=Symbol.toStringTag,N)](){return this.entries()}find(w,A={}){for(let U of qe(this,oe,go).call(this)){let J=L(this,O)[U],ie=qe(this,oe,tr).call(this,J)?J.__staleWhileFetching:J;if(ie!==void 0&&w(ie,L(this,W)[U],this))return this.get(L(this,W)[U],A)}}forEach(w,A=this){for(let U of qe(this,oe,go).call(this)){let J=L(this,O)[U],ie=qe(this,oe,tr).call(this,J)?J.__staleWhileFetching:J;ie!==void 0&&w.call(A,ie,L(this,W)[U],this)}}rforEach(w,A=this){for(let U of qe(this,oe,yo).call(this)){let J=L(this,O)[U],ie=qe(this,oe,tr).call(this,J)?J.__staleWhileFetching:J;ie!==void 0&&w.call(A,ie,L(this,W)[U],this)}}purgeStale(){let w=!1;for(let A of qe(this,oe,yo).call(this,{allowStale:!0}))L(this,me).call(this,A)&&(qe(this,oe,vo).call(this,L(this,W)[A],"expire"),w=!0);return w}info(w){let A=L(this,M).get(w);if(A===void 0)return;let U=L(this,O)[A],J=qe(this,oe,tr).call(this,U)?U.__staleWhileFetching:U;if(J===void 0)return;let ie={value:J};if(L(this,ue)&&L(this,B)){let _e=L(this,ue)[A],Ze=L(this,B)[A];if(_e&&Ze){let et=_e-(e.now()-Ze);ie.ttl=et,ie.start=Date.now()}}return L(this,Re)&&(ie.size=L(this,Re)[A]),ie}dump(){let w=[];for(let A of qe(this,oe,go).call(this,{allowStale:!0})){let U=L(this,W)[A],J=L(this,O)[A],ie=qe(this,oe,tr).call(this,J)?J.__staleWhileFetching:J;if(ie===void 0||U===void 0)continue;let _e={value:ie};if(L(this,ue)&&L(this,B)){_e.ttl=L(this,ue)[A];let Ze=e.now()-L(this,B)[A];_e.start=Math.floor(Date.now()-Ze)}L(this,Re)&&(_e.size=L(this,Re)[A]),w.unshift([U,_e])}return w}load(w){this.clear();for(let[A,U]of w){if(U.start){let J=Date.now()-U.start;U.start=e.now()-J}this.set(A,U.value,U)}}set(w,A,U={}){var _r,wr,xr,Ct,Wt;if(A===void 0)return this.delete(w),this;let{ttl:J=this.ttl,start:ie,noDisposeOnSet:_e=this.noDisposeOnSet,sizeCalculation:Ze=this.sizeCalculation,status:et}=U,{noUpdateTTL:ft=this.noUpdateTTL}=U,bt=L(this,Oe).call(this,w,A,U.size||0,Ze);if(this.maxEntrySize&&bt>this.maxEntrySize)return et&&(et.set="miss",et.maxEntrySizeExceeded=!0),qe(this,oe,vo).call(this,w,"set"),this;let mt=L(this,R)===0?void 0:L(this,M).get(w);if(mt===void 0)mt=L(this,R)===0?L(this,Ne):L(this,Ie).length!==0?L(this,Ie).pop():L(this,R)===L(this,x)?qe(this,oe,jf).call(this,!1):L(this,R),L(this,W)[mt]=w,L(this,O)[mt]=A,L(this,M).set(w,mt),L(this,F)[L(this,Ne)]=mt,L(this,ye)[mt]=L(this,Ne),Be(this,Ne,mt),fa(this,R)._++,L(this,Fe).call(this,mt,bt,et),et&&(et.set="add"),ft=!1;else{qe(this,oe,pc).call(this,mt);let gt=L(this,O)[mt];if(A!==gt){if(L(this,we)&&qe(this,oe,tr).call(this,gt)){gt.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Rt}=gt;Rt!==void 0&&!_e&&(L(this,G)&&((_r=L(this,q))==null||_r.call(this,Rt,w,"set")),L(this,De)&&((wr=L(this,he))==null||wr.push([Rt,w,"set"])))}else _e||(L(this,G)&&((xr=L(this,q))==null||xr.call(this,gt,w,"set")),L(this,De)&&((Ct=L(this,he))==null||Ct.push([gt,w,"set"])));if(L(this,ve).call(this,mt),L(this,Fe).call(this,mt,bt,et),L(this,O)[mt]=A,et){et.set="replace";let Rt=gt&&qe(this,oe,tr).call(this,gt)?gt.__staleWhileFetching:gt;Rt!==void 0&&(et.oldValue=Rt)}}else et&&(et.set="update")}if(J!==0&&!L(this,ue)&&qe(this,oe,rv).call(this),L(this,ue)&&(ft||L(this,xe).call(this,mt,J,ie),et&&L(this,ee).call(this,et,mt)),!_e&&L(this,De)&&L(this,he)){let gt=L(this,he),Rt;for(;Rt=gt==null?void 0:gt.shift();)(Wt=L(this,H))==null||Wt.call(this,...Rt)}return this}pop(){var w;try{for(;L(this,R);){let A=L(this,O)[L(this,se)];if(qe(this,oe,jf).call(this,!0),qe(this,oe,tr).call(this,A)){if(A.__staleWhileFetching)return A.__staleWhileFetching}else if(A!==void 0)return A}}finally{if(L(this,De)&&L(this,he)){let A=L(this,he),U;for(;U=A==null?void 0:A.shift();)(w=L(this,H))==null||w.call(this,...U)}}}has(w,A={}){let{updateAgeOnHas:U=this.updateAgeOnHas,status:J}=A,ie=L(this,M).get(w);if(ie!==void 0){let _e=L(this,O)[ie];if(qe(this,oe,tr).call(this,_e)&&_e.__staleWhileFetching===void 0)return!1;if(L(this,me).call(this,ie))J&&(J.has="stale",L(this,ee).call(this,J,ie));else return U&&L(this,ce).call(this,ie),J&&(J.has="hit",L(this,ee).call(this,J,ie)),!0}else J&&(J.has="miss");return!1}peek(w,A={}){let{allowStale:U=this.allowStale}=A,J=L(this,M).get(w);if(J===void 0||!U&&L(this,me).call(this,J))return;let ie=L(this,O)[J];return qe(this,oe,tr).call(this,ie)?ie.__staleWhileFetching:ie}async fetch(w,A={}){let{allowStale:U=this.allowStale,updateAgeOnGet:J=this.updateAgeOnGet,noDeleteOnStaleGet:ie=this.noDeleteOnStaleGet,ttl:_e=this.ttl,noDisposeOnSet:Ze=this.noDisposeOnSet,size:et=0,sizeCalculation:ft=this.sizeCalculation,noUpdateTTL:bt=this.noUpdateTTL,noDeleteOnFetchRejection:mt=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:_r=this.allowStaleOnFetchRejection,ignoreFetchAbort:wr=this.ignoreFetchAbort,allowStaleOnFetchAbort:xr=this.allowStaleOnFetchAbort,context:Ct,forceRefresh:Wt=!1,status:gt,signal:Rt}=A;if(!L(this,we))return gt&&(gt.fetch="get"),this.get(w,{allowStale:U,updateAgeOnGet:J,noDeleteOnStaleGet:ie,status:gt});let mr={allowStale:U,updateAgeOnGet:J,noDeleteOnStaleGet:ie,ttl:_e,noDisposeOnSet:Ze,size:et,sizeCalculation:ft,noUpdateTTL:bt,noDeleteOnFetchRejection:mt,allowStaleOnFetchRejection:_r,allowStaleOnFetchAbort:xr,ignoreFetchAbort:wr,status:gt,signal:Rt},Gt=L(this,M).get(w);if(Gt===void 0){gt&&(gt.fetch="miss");let br=qe(this,oe,$f).call(this,w,Gt,mr,Ct);return br.__returned=br}else{let br=L(this,O)[Gt];if(qe(this,oe,tr).call(this,br)){let Ye=U&&br.__staleWhileFetching!==void 0;return gt&&(gt.fetch="inflight",Ye&&(gt.returnedStale=!0)),Ye?br.__staleWhileFetching:br.__returned=br}let jr=L(this,me).call(this,Gt);if(!Wt&&!jr)return gt&&(gt.fetch="hit"),qe(this,oe,pc).call(this,Gt),J&&L(this,ce).call(this,Gt),gt&&L(this,ee).call(this,gt,Gt),br;let Y=qe(this,oe,$f).call(this,w,Gt,mr,Ct),X=Y.__staleWhileFetching!==void 0&&U;return gt&&(gt.fetch=jr?"stale":"refresh",X&&jr&&(gt.returnedStale=!0)),X?Y.__staleWhileFetching:Y.__returned=Y}}async forceFetch(w,A={}){let U=await this.fetch(w,A);if(U===void 0)throw new Error("fetch() returned undefined");return U}memo(w,A={}){let U=L(this,P);if(!U)throw new Error("no memoMethod provided to constructor");let{context:J,forceRefresh:ie,..._e}=A,Ze=this.get(w,_e);if(!ie&&Ze!==void 0)return Ze;let et=U(w,Ze,{options:_e,context:J});return this.set(w,et,_e),et}get(w,A={}){let{allowStale:U=this.allowStale,updateAgeOnGet:J=this.updateAgeOnGet,noDeleteOnStaleGet:ie=this.noDeleteOnStaleGet,status:_e}=A,Ze=L(this,M).get(w);if(Ze!==void 0){let et=L(this,O)[Ze],ft=qe(this,oe,tr).call(this,et);return _e&&L(this,ee).call(this,_e,Ze),L(this,me).call(this,Ze)?(_e&&(_e.get="stale"),ft?(_e&&U&&et.__staleWhileFetching!==void 0&&(_e.returnedStale=!0),U?et.__staleWhileFetching:void 0):(ie||qe(this,oe,vo).call(this,w,"expire"),_e&&U&&(_e.returnedStale=!0),U?et:void 0)):(_e&&(_e.get="hit"),ft?et.__staleWhileFetching:(qe(this,oe,pc).call(this,Ze),J&&L(this,ce).call(this,Ze),et))}else _e&&(_e.get="miss")}delete(w){return qe(this,oe,vo).call(this,w,"delete")}clear(){return qe(this,oe,sv).call(this,"delete")}},x=new WeakMap,k=new WeakMap,q=new WeakMap,H=new WeakMap,$=new WeakMap,P=new WeakMap,R=new WeakMap,V=new WeakMap,M=new WeakMap,W=new WeakMap,O=new WeakMap,F=new WeakMap,ye=new WeakMap,se=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,he=new WeakMap,Re=new WeakMap,B=new WeakMap,ue=new WeakMap,G=new WeakMap,we=new WeakMap,De=new WeakMap,oe=new WeakSet,rv=function(){let w=new d(L(this,x)),A=new d(L(this,x));Be(this,ue,w),Be(this,B,A),Be(this,xe,(ie,_e,Ze=e.now())=>{if(A[ie]=_e!==0?Ze:0,w[ie]=_e,_e!==0&&this.ttlAutopurge){let et=setTimeout(()=>{L(this,me).call(this,ie)&&qe(this,oe,vo).call(this,L(this,W)[ie],"expire")},_e+1);et.unref&&et.unref()}}),Be(this,ce,ie=>{A[ie]=w[ie]!==0?e.now():0}),Be(this,ee,(ie,_e)=>{if(w[_e]){let Ze=w[_e],et=A[_e];if(!Ze||!et)return;ie.ttl=Ze,ie.start=et,ie.now=U||J();let ft=ie.now-et;ie.remainingTTL=Ze-ft}});let U=0,J=()=>{let ie=e.now();if(this.ttlResolution>0){U=ie;let _e=setTimeout(()=>U=0,this.ttlResolution);_e.unref&&_e.unref()}return ie};this.getRemainingTTL=ie=>{let _e=L(this,M).get(ie);if(_e===void 0)return 0;let Ze=w[_e],et=A[_e];if(!Ze||!et)return 1/0;let ft=(U||J())-et;return Ze-ft},Be(this,me,ie=>{let _e=A[ie],Ze=w[ie];return!!Ze&&!!_e&&(U||J())-_e>Ze})},ce=new WeakMap,ee=new WeakMap,xe=new WeakMap,me=new WeakMap,Yx=function(){let w=new d(L(this,x));Be(this,V,0),Be(this,Re,w),Be(this,ve,A=>{Be(this,V,L(this,V)-w[A]),w[A]=0}),Be(this,Oe,(A,U,J,ie)=>{if(qe(this,oe,tr).call(this,U))return 0;if(!c(J))if(ie){if(typeof ie!="function")throw new TypeError("sizeCalculation must be a function");if(J=ie(U,A),!c(J))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return J}),Be(this,Fe,(A,U,J)=>{if(w[A]=U,L(this,k)){let ie=L(this,k)-w[A];for(;L(this,V)>ie;)qe(this,oe,jf).call(this,!0)}Be(this,V,L(this,V)+w[A]),J&&(J.entrySize=U,J.totalCalculatedSize=L(this,V))})},ve=new WeakMap,Fe=new WeakMap,Oe=new WeakMap,go=function*({allowStale:w=this.allowStale}={}){if(L(this,R))for(let A=L(this,Ne);!(!qe(this,oe,nv).call(this,A)||((w||!L(this,me).call(this,A))&&(yield A),A===L(this,se)));)A=L(this,ye)[A]},yo=function*({allowStale:w=this.allowStale}={}){if(L(this,R))for(let A=L(this,se);!(!qe(this,oe,nv).call(this,A)||((w||!L(this,me).call(this,A))&&(yield A),A===L(this,Ne)));)A=L(this,F)[A]},nv=function(w){return w!==void 0&&L(this,M).get(L(this,W)[w])===w},jf=function(w){var ie,_e;let A=L(this,se),U=L(this,W)[A],J=L(this,O)[A];return L(this,we)&&qe(this,oe,tr).call(this,J)?J.__abortController.abort(new Error("evicted")):(L(this,G)||L(this,De))&&(L(this,G)&&((ie=L(this,q))==null||ie.call(this,J,U,"evict")),L(this,De)&&((_e=L(this,he))==null||_e.push([J,U,"evict"]))),L(this,ve).call(this,A),w&&(L(this,W)[A]=void 0,L(this,O)[A]=void 0,L(this,Ie).push(A)),L(this,R)===1?(Be(this,se,Be(this,Ne,0)),L(this,Ie).length=0):Be(this,se,L(this,F)[A]),L(this,M).delete(U),fa(this,R)._--,A},$f=function(w,A,U,J){let ie=A===void 0?void 0:L(this,O)[A];if(qe(this,oe,tr).call(this,ie))return ie;let _e=new o,{signal:Ze}=U;Ze==null||Ze.addEventListener("abort",()=>_e.abort(Ze.reason),{signal:_e.signal});let et={signal:_e.signal,options:U,context:J},ft=(Ct,Wt=!1)=>{let{aborted:gt}=_e.signal,Rt=U.ignoreFetchAbort&&Ct!==void 0;if(U.status&&(gt&&!Wt?(U.status.fetchAborted=!0,U.status.fetchError=_e.signal.reason,Rt&&(U.status.fetchAbortIgnored=!0)):U.status.fetchResolved=!0),gt&&!Rt&&!Wt)return mt(_e.signal.reason);let mr=wr;return L(this,O)[A]===wr&&(Ct===void 0?mr.__staleWhileFetching?L(this,O)[A]=mr.__staleWhileFetching:qe(this,oe,vo).call(this,w,"fetch"):(U.status&&(U.status.fetchUpdated=!0),this.set(w,Ct,et.options))),Ct},bt=Ct=>(U.status&&(U.status.fetchRejected=!0,U.status.fetchError=Ct),mt(Ct)),mt=Ct=>{let{aborted:Wt}=_e.signal,gt=Wt&&U.allowStaleOnFetchAbort,Rt=gt||U.allowStaleOnFetchRejection,mr=Rt||U.noDeleteOnFetchRejection,Gt=wr;if(L(this,O)[A]===wr&&(!mr||Gt.__staleWhileFetching===void 0?qe(this,oe,vo).call(this,w,"fetch"):gt||(L(this,O)[A]=Gt.__staleWhileFetching)),Rt)return U.status&&Gt.__staleWhileFetching!==void 0&&(U.status.returnedStale=!0),Gt.__staleWhileFetching;if(Gt.__returned===Gt)throw Ct},_r=(Ct,Wt)=>{var Rt;let gt=(Rt=L(this,$))==null?void 0:Rt.call(this,w,ie,et);gt&&gt instanceof Promise&&gt.then(mr=>Ct(mr===void 0?void 0:mr),Wt),_e.signal.addEventListener("abort",()=>{(!U.ignoreFetchAbort||U.allowStaleOnFetchAbort)&&(Ct(void 0),U.allowStaleOnFetchAbort&&(Ct=mr=>ft(mr,!0)))})};U.status&&(U.status.fetchDispatched=!0);let wr=new Promise(_r).then(ft,bt),xr=Object.assign(wr,{__abortController:_e,__staleWhileFetching:ie,__returned:void 0});return A===void 0?(this.set(w,xr,{...et.options,status:void 0}),A=L(this,M).get(w)):L(this,O)[A]=xr,xr},tr=function(w){if(!L(this,we))return!1;let A=w;return!!A&&A instanceof Promise&&A.hasOwnProperty("__staleWhileFetching")&&A.__abortController instanceof o},iv=function(w,A){L(this,ye)[A]=w,L(this,F)[w]=A},pc=function(w){w!==L(this,Ne)&&(w===L(this,se)?Be(this,se,L(this,F)[w]):qe(this,oe,iv).call(this,L(this,ye)[w],L(this,F)[w]),qe(this,oe,iv).call(this,L(this,Ne),w),Be(this,Ne,w))},vo=function(w,A){var J,ie,_e,Ze;let U=!1;if(L(this,R)!==0){let et=L(this,M).get(w);if(et!==void 0)if(U=!0,L(this,R)===1)qe(this,oe,sv).call(this,A);else{L(this,ve).call(this,et);let ft=L(this,O)[et];if(qe(this,oe,tr).call(this,ft)?ft.__abortController.abort(new Error("deleted")):(L(this,G)||L(this,De))&&(L(this,G)&&((J=L(this,q))==null||J.call(this,ft,w,A)),L(this,De)&&((ie=L(this,he))==null||ie.push([ft,w,A]))),L(this,M).delete(w),L(this,W)[et]=void 0,L(this,O)[et]=void 0,et===L(this,Ne))Be(this,Ne,L(this,ye)[et]);else if(et===L(this,se))Be(this,se,L(this,F)[et]);else{let bt=L(this,ye)[et];L(this,F)[bt]=L(this,F)[et];let mt=L(this,F)[et];L(this,ye)[mt]=L(this,ye)[et]}fa(this,R)._--,L(this,Ie).push(et)}}if(L(this,De)&&((_e=L(this,he))!=null&&_e.length)){let et=L(this,he),ft;for(;ft=et==null?void 0:et.shift();)(Ze=L(this,H))==null||Ze.call(this,...ft)}return U},sv=function(w){var A,U,J;for(let ie of qe(this,oe,yo).call(this,{allowStale:!0})){let _e=L(this,O)[ie];if(qe(this,oe,tr).call(this,_e))_e.__abortController.abort(new Error("deleted"));else{let Ze=L(this,W)[ie];L(this,G)&&((A=L(this,q))==null||A.call(this,_e,Ze,w)),L(this,De)&&((U=L(this,he))==null||U.push([_e,Ze,w]))}}if(L(this,M).clear(),L(this,O).fill(void 0),L(this,W).fill(void 0),L(this,ue)&&L(this,B)&&(L(this,ue).fill(0),L(this,B).fill(0)),L(this,Re)&&L(this,Re).fill(0),Be(this,se,0),Be(this,Ne,0),L(this,Ie).length=0,Be(this,V,0),Be(this,R,0),L(this,De)&&L(this,he)){let ie=L(this,he),_e;for(;_e=ie==null?void 0:ie.shift();)(J=L(this,H))==null||J.call(this,..._e)}},Ue);r.LRUCache=y}),js=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var e=class{constructor(s=0){this.iteratorType=s}equals(s){return this.o===s.o}};r.ContainerIterator=e;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=t;var n=class extends t{};r.Container=n}),xM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=js(),t=class extends e.Base{constructor(s=[]){super(),this.S=[];let o=this;s.forEach(function(l){o.push(l)})}clear(){this.i=0,this.S=[]}push(s){return this.S.push(s),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=t;r.default=n}),AM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=js(),t=class extends e.Base{constructor(s=[]){super(),this.j=0,this.q=[];let o=this;s.forEach(function(l){o.push(l)})}clear(){this.q=[],this.i=this.j=0}push(s){let o=this.q.length;if(this.j/o>.5&&this.j+this.i>=o&&o>4096){let l=this.i;for(let u=0;u<l;++u)this.q[u]=this.q[this.j+u];this.j=0,this.q[this.i]=s}else this.q[this.j+this.i]=s;return++this.i}pop(){if(this.i===0)return;let s=this.q[this.j++];return this.i-=1,s}front(){if(this.i!==0)return this.q[this.j]}},n=t;r.default=n}),IM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=js(),t=class extends e.Base{constructor(s=[],o=function(u,c){return u>c?-1:u<c?1:0},l=!0){if(super(),this.v=o,Array.isArray(s))this.C=l?[...s]:s;else{this.C=[];let c=this;s.forEach(function(h){c.C.push(h)})}this.i=this.C.length;let u=this.i>>1;for(let c=this.i-1>>1;c>=0;--c)this.k(c,u)}m(s){let o=this.C[s];for(;s>0;){let l=s-1>>1,u=this.C[l];if(this.v(u,o)<=0)break;this.C[s]=u,s=l}this.C[s]=o}k(s,o){let l=this.C[s];for(;s<o;){let u=s<<1|1,c=u+1,h=this.C[u];if(c<this.i&&this.v(h,this.C[c])>0&&(u=c,h=this.C[c]),this.v(h,l)>=0)break;this.C[s]=h,s=u}this.C[s]=l}clear(){this.i=0,this.C.length=0}push(s){this.C.push(s),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let s=this.C[0],o=this.C.pop();return this.i-=1,this.i&&(this.C[0]=o,this.k(0,this.i>>1)),s}top(){return this.C[0]}find(s){return this.C.indexOf(s)>=0}remove(s){let o=this.C.indexOf(s);return o<0?!1:(o===0?this.pop():o===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(o,1,this.C.pop()),this.i-=1,this.m(o),this.k(o,this.i>>1)),!0)}updateItem(s){let o=this.C.indexOf(s);return o<0?!1:(this.m(o),this.k(o,this.i>>1),!0)}toArray(){return[...this.C]}},n=t;r.default=n}),m0=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=js(),t=class extends e.Container{},n=t;r.default=n}),$s=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),Jx=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var e=js(),t=$s(),n=class extends e.ContainerIterator{constructor(s,o){super(o),this.o=s,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(s){this.container.setElementByPos(this.o,s)}};r.RandomIterator=n}),CM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(m0()),t=Jx();function n(u){return u&&u.t?u:{default:u}}var s=class Xx extends t.RandomIterator{constructor(c,h,d){super(c,d),this.container=h}copy(){return new Xx(this.o,this.container,this.iteratorType)}},o=class extends e.default{constructor(u=[],c=!0){if(super(),Array.isArray(u))this.J=c?[...u]:u,this.i=u.length;else{this.J=[];let h=this;u.forEach(function(d){h.pushBack(d)})}}clear(){this.i=0,this.J.length=0}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;return this.J[u]}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;return this.J.splice(u,1),this.i-=1,this.i}eraseElementByValue(u){let c=0;for(let h=0;h<this.i;++h)this.J[h]!==u&&(this.J[c++]=this.J[h]);return this.i=this.J.length=c,this.i}eraseElementByIterator(u){let c=u.o;return u=u.next(),this.eraseElementByPos(c),u}pushBack(u){return this.J.push(u),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(u,c){if(u<0||u>this.i-1)throw new RangeError;this.J[u]=c}insert(u,c,h=1){if(u<0||u>this.i)throw new RangeError;return this.J.splice(u,0,...new Array(h).fill(c)),this.i+=h,this.i}find(u){for(let c=0;c<this.i;++c)if(this.J[c]===u)return new s(c,this);return this.end()}reverse(){this.J.reverse()}unique(){let u=1;for(let c=1;c<this.i;++c)this.J[c]!==this.J[c-1]&&(this.J[u++]=this.J[c]);return this.i=this.J.length=u,this.i}sort(u){this.J.sort(u)}forEach(u){for(let c=0;c<this.i;++c)u(this.J[c],c,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},l=o;r.default=l}),RM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=s(m0()),t=js(),n=$s();function s(c){return c&&c.t?c:{default:c}}var o=class Zx extends t.ContainerIterator{constructor(h,d,m,y){super(y),this.o=h,this.h=d,this.container=m,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(h){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=h}copy(){return new Zx(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.default{constructor(c=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let h=this;c.forEach(function(d){h.pushBack(d)})}V(c){let{L:h,B:d}=c;h.B=d,d.L=h,c===this.p&&(this.p=d),c===this._&&(this._=h),this.i-=1}G(c,h){let d=h.B,m={l:c,L:h,B:d};h.B=m,d.L=m,h===this.h&&(this.p=m),d===this.h&&(this._=m),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(c){if(c<0||c>this.i-1)throw new RangeError;let h=this.p;for(;c--;)h=h.B;return h.l}eraseElementByPos(c){if(c<0||c>this.i-1)throw new RangeError;let h=this.p;for(;c--;)h=h.B;return this.V(h),this.i}eraseElementByValue(c){let h=this.p;for(;h!==this.h;)h.l===c&&this.V(h),h=h.B;return this.i}eraseElementByIterator(c){let h=c.o;return h===this.h&&(0,n.throwIteratorAccessError)(),c=c.next(),this.V(h),c}pushBack(c){return this.G(c,this._),this.i}popBack(){if(this.i===0)return;let c=this._.l;return this.V(this._),c}pushFront(c){return this.G(c,this.h),this.i}popFront(){if(this.i===0)return;let c=this.p.l;return this.V(this.p),c}setElementByPos(c,h){if(c<0||c>this.i-1)throw new RangeError;let d=this.p;for(;c--;)d=d.B;d.l=h}insert(c,h,d=1){if(c<0||c>this.i)throw new RangeError;if(d<=0)return this.i;if(c===0)for(;d--;)this.pushFront(h);else if(c===this.i)for(;d--;)this.pushBack(h);else{let m=this.p;for(let _=1;_<c;++_)m=m.B;let y=m.B;for(this.i+=d;d--;)m.B={l:h,L:m},m.B.L=m,m=m.B;m.B=y,y.L=m}return this.i}find(c){let h=this.p;for(;h!==this.h;){if(h.l===c)return new o(h,this.h,this);h=h.B}return this.end()}reverse(){if(this.i<=1)return;let c=this.p,h=this._,d=0;for(;d<<1<this.i;){let m=c.l;c.l=h.l,h.l=m,c=c.B,h=h.L,d+=1}}unique(){if(this.i<=1)return this.i;let c=this.p;for(;c!==this.h;){let h=c;for(;h.B!==this.h&&h.l===h.B.l;)h=h.B,this.i-=1;c.B=h.B,c.B.L=c,c=c.B}return this.i}sort(c){if(this.i<=1)return;let h=[];this.forEach(function(m){h.push(m)}),h.sort(c);let d=this.p;h.forEach(function(m){d.l=m,d=d.B})}merge(c){let h=this;if(this.i===0)c.forEach(function(d){h.pushBack(d)});else{let d=this.p;c.forEach(function(m){for(;d!==h.h&&d.l<=m;)d=d.B;h.G(m,d.L)})}return this.i}forEach(c){let h=this.p,d=0;for(;h!==this.h;)c(h.l,d++,this),h=h.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let c=this.p;for(;c!==this.h;)yield c.l,c=c.B}).bind(this)()}},u=l;r.default=u}),kM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(m0()),t=Jx();function n(u){return u&&u.t?u:{default:u}}var s=class eA extends t.RandomIterator{constructor(c,h,d){super(c,d),this.container=h}copy(){return new eA(this.o,this.container,this.iteratorType)}},o=class extends e.default{constructor(u=[],c=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let h=(()=>{if(typeof u.length=="number")return u.length;if(typeof u.size=="number")return u.size;if(typeof u.size=="function")return u.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=c,this.P=Math.max(Math.ceil(h/this.F),1);for(let y=0;y<this.P;++y)this.A.push(new Array(this.F));let d=Math.ceil(h/this.F);this.j=this.R=(this.P>>1)-(d>>1),this.D=this.N=this.F-h%this.F>>1;let m=this;u.forEach(function(y){m.pushBack(y)})}T(){let u=[],c=Math.max(this.P>>1,1);for(let h=0;h<c;++h)u[h]=new Array(this.F);for(let h=this.j;h<this.P;++h)u[u.length]=this.A[h];for(let h=0;h<this.R;++h)u[u.length]=this.A[h];u[u.length]=[...this.A[this.R]],this.j=c,this.R=u.length-1;for(let h=0;h<c;++h)u[u.length]=new Array(this.F);this.A=u,this.P=u.length}O(u){let c=this.D+u+1,h=c%this.F,d=h-1,m=this.j+(c-h)/this.F;return h===0&&(m-=1),m%=this.P,d<0&&(d+=this.F),{curNodeBucketIndex:m,curNodePointerIndex:d}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(u){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=u,this.i}popBack(){if(this.i===0)return;let u=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,u}pushFront(u){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=u,this.i}popFront(){if(this.i===0)return;let u=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,u}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:h}=this.O(u);return this.A[c][h]}setElementByPos(u,c){if(u<0||u>this.i-1)throw new RangeError;let{curNodeBucketIndex:h,curNodePointerIndex:d}=this.O(u);this.A[h][d]=c}insert(u,c,h=1){if(u<0||u>this.i)throw new RangeError;if(u===0)for(;h--;)this.pushFront(c);else if(u===this.i)for(;h--;)this.pushBack(c);else{let d=[];for(let m=u;m<this.i;++m)d.push(this.getElementByPos(m));this.cut(u-1);for(let m=0;m<h;++m)this.pushBack(c);for(let m=0;m<d.length;++m)this.pushBack(d[m])}return this.i}cut(u){if(u<0)return this.clear(),0;let{curNodeBucketIndex:c,curNodePointerIndex:h}=this.O(u);return this.R=c,this.N=h,this.i=u+1,this.i}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;if(u===0)this.popFront();else if(u===this.i-1)this.popBack();else{let c=[];for(let d=u+1;d<this.i;++d)c.push(this.getElementByPos(d));this.cut(u),this.popBack();let h=this;c.forEach(function(d){h.pushBack(d)})}return this.i}eraseElementByValue(u){if(this.i===0)return 0;let c=[];for(let d=0;d<this.i;++d){let m=this.getElementByPos(d);m!==u&&c.push(m)}let h=c.length;for(let d=0;d<h;++d)this.setElementByPos(d,c[d]);return this.cut(h-1)}eraseElementByIterator(u){let c=u.o;return this.eraseElementByPos(c),u=u.next(),u}find(u){for(let c=0;c<this.i;++c)if(this.getElementByPos(c)===u)return new s(c,this);return this.end()}reverse(){let u=0,c=this.i-1;for(;u<c;){let h=this.getElementByPos(u);this.setElementByPos(u,this.getElementByPos(c)),this.setElementByPos(c,h),u+=1,c-=1}}unique(){if(this.i<=1)return this.i;let u=1,c=this.getElementByPos(0);for(let h=1;h<this.i;++h){let d=this.getElementByPos(h);d!==c&&(c=d,this.setElementByPos(u++,d))}for(;this.i>u;)this.popBack();return this.i}sort(u){let c=[];for(let h=0;h<this.i;++h)c.push(this.getElementByPos(h));c.sort(u);for(let h=0;h<this.i;++h)this.setElementByPos(h,c[h])}shrinkToFit(){if(this.i===0)return;let u=[];this.forEach(function(c){u.push(c)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let c=0;c<this.P;++c)this.A.push(new Array(this.F));for(let c=0;c<u.length;++c)this.pushBack(u[c])}forEach(u){for(let c=0;c<this.i;++c)u(this.getElementByPos(c),c,this)}[Symbol.iterator](){return(function*(){for(let u=0;u<this.i;++u)yield this.getElementByPos(u)}).bind(this)()}},l=o;r.default=l}),PM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var e=class{constructor(n,s){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=s}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let s=n.tt;for(;s.U===n;)n=s,s=n.tt;n=s}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let s=n.tt;for(;s.W===n;)n=s,s=n.tt;return n.W!==s?s:n}}te(){let n=this.tt,s=this.W,o=s.U;return n.tt===this?n.tt=s:n.U===this?n.U=s:n.W=s,s.tt=n,s.U=this,this.tt=s,this.W=o,o&&(o.tt=this),s}se(){let n=this.tt,s=this.U,o=s.W;return n.tt===this?n.tt=s:n.U===this?n.U=s:n.W=s,s.tt=n,s.W=this,this.tt=s,this.U=o,o&&(o.tt=this),s}};r.TreeNode=e;var t=class extends e{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=t}),tA=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=PM(),t=js(),n=$s(),s=class extends t.Container{constructor(l=function(c,h){return c<h?-1:c>h?1:0},u=!1){super(),this.Y=void 0,this.v=l,u?(this.re=e.TreeNodeEnableIndex,this.M=function(c,h,d){let m=this.ne(c,h,d);if(m){let y=m.tt;for(;y!==this.h;)y.rt+=1,y=y.tt;let _=this.he(m);if(_){let{parentNode:b,grandParent:S,curNode:T}=_;b.ie(),S.ie(),T.ie()}}return this.i},this.V=function(c){let h=this.fe(c);for(;h!==this.h;)h.rt-=1,h=h.tt}):(this.re=e.TreeNode,this.M=function(c,h,d){let m=this.ne(c,h,d);return m&&this.he(m),this.i},this.V=this.fe),this.h=new this.re}X(l,u){let c=this.h;for(;l;){let h=this.v(l.u,u);if(h<0)l=l.W;else if(h>0)c=l,l=l.U;else return l}return c}Z(l,u){let c=this.h;for(;l;)this.v(l.u,u)<=0?l=l.W:(c=l,l=l.U);return c}$(l,u){let c=this.h;for(;l;){let h=this.v(l.u,u);if(h<0)c=l,l=l.W;else if(h>0)l=l.U;else return l}return c}rr(l,u){let c=this.h;for(;l;)this.v(l.u,u)<0?(c=l,l=l.W):l=l.U;return c}ue(l){for(;;){let u=l.tt;if(u===this.h)return;if(l.ee===1){l.ee=0;return}if(l===u.U){let c=u.W;if(c.ee===1)c.ee=0,u.ee=1,u===this.Y?this.Y=u.te():u.te();else if(c.W&&c.W.ee===1){c.ee=u.ee,u.ee=0,c.W.ee=0,u===this.Y?this.Y=u.te():u.te();return}else c.U&&c.U.ee===1?(c.ee=1,c.U.ee=0,c.se()):(c.ee=1,l=u)}else{let c=u.U;if(c.ee===1)c.ee=0,u.ee=1,u===this.Y?this.Y=u.se():u.se();else if(c.U&&c.U.ee===1){c.ee=u.ee,u.ee=0,c.U.ee=0,u===this.Y?this.Y=u.se():u.se();return}else c.W&&c.W.ee===1?(c.ee=1,c.W.ee=0,c.te()):(c.ee=1,l=u)}}}fe(l){if(this.i===1)return this.clear(),this.h;let u=l;for(;u.U||u.W;){if(u.W)for(u=u.W;u.U;)u=u.U;else u=u.U;[l.u,u.u]=[u.u,l.u],[l.l,u.l]=[u.l,l.l],l=u}this.h.U===u?this.h.U=u.tt:this.h.W===u&&(this.h.W=u.tt),this.ue(u);let c=u.tt;return u===c.U?c.U=void 0:c.W=void 0,this.i-=1,this.Y.ee=0,c}oe(l,u){return l===void 0?!1:this.oe(l.U,u)||u(l)?!0:this.oe(l.W,u)}he(l){for(;;){let u=l.tt;if(u.ee===0)return;let c=u.tt;if(u===c.U){let h=c.W;if(h&&h.ee===1){if(h.ee=u.ee=0,c===this.Y)return;c.ee=1,l=c;continue}else if(l===u.W){if(l.ee=0,l.U&&(l.U.tt=u),l.W&&(l.W.tt=c),u.W=l.U,c.U=l.W,l.U=u,l.W=c,c===this.Y)this.Y=l,this.h.tt=l;else{let d=c.tt;d.U===c?d.U=l:d.W=l}return l.tt=c.tt,u.tt=l,c.tt=l,c.ee=1,{parentNode:u,grandParent:c,curNode:l}}else u.ee=0,c===this.Y?this.Y=c.se():c.se(),c.ee=1}else{let h=c.U;if(h&&h.ee===1){if(h.ee=u.ee=0,c===this.Y)return;c.ee=1,l=c;continue}else if(l===u.U){if(l.ee=0,l.U&&(l.U.tt=c),l.W&&(l.W.tt=u),c.W=l.U,u.U=l.W,l.U=c,l.W=u,c===this.Y)this.Y=l,this.h.tt=l;else{let d=c.tt;d.U===c?d.U=l:d.W=l}return l.tt=c.tt,u.tt=l,c.tt=l,c.ee=1,{parentNode:u,grandParent:c,curNode:l}}else u.ee=0,c===this.Y?this.Y=c.te():c.te(),c.ee=1}return}}ne(l,u,c){if(this.Y===void 0){this.i+=1,this.Y=new this.re(l,u),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let h,d=this.h.U,m=this.v(d.u,l);if(m===0){d.l=u;return}else if(m>0)d.U=new this.re(l,u),d.U.tt=d,h=d.U,this.h.U=h;else{let y=this.h.W,_=this.v(y.u,l);if(_===0){y.l=u;return}else if(_<0)y.W=new this.re(l,u),y.W.tt=y,h=y.W,this.h.W=h;else{if(c!==void 0){let b=c.o;if(b!==this.h){let S=this.v(b.u,l);if(S===0){b.l=u;return}else if(S>0){let T=b.L(),N=this.v(T.u,l);if(N===0){T.l=u;return}else N<0&&(h=new this.re(l,u),T.W===void 0?(T.W=h,h.tt=T):(b.U=h,h.tt=b))}}}if(h===void 0)for(h=this.Y;;){let b=this.v(h.u,l);if(b>0){if(h.U===void 0){h.U=new this.re(l,u),h.U.tt=h,h=h.U;break}h=h.U}else if(b<0){if(h.W===void 0){h.W=new this.re(l,u),h.W.tt=h,h=h.W;break}h=h.W}else{h.l=u;return}}}}return this.i+=1,h}I(l,u){for(;l;){let c=this.v(l.u,u);if(c<0)l=l.W;else if(c>0)l=l.U;else return l}return l||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(l,u){let c=l.o;if(c===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return c.u=u,!0;if(c===this.h.U)return this.v(c.B().u,u)>0?(c.u=u,!0):!1;if(c===this.h.W)return this.v(c.L().u,u)<0?(c.u=u,!0):!1;let h=c.L().u;if(this.v(h,u)>=0)return!1;let d=c.B().u;return this.v(d,u)<=0?!1:(c.u=u,!0)}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u=0,c=this;return this.oe(this.Y,function(h){return l===u?(c.V(h),!0):(u+=1,!1)}),this.i}eraseElementByKey(l){if(this.i===0)return!1;let u=this.I(this.Y,l);return u===this.h?!1:(this.V(u),!0)}eraseElementByIterator(l){let u=l.o;u===this.h&&(0,n.throwIteratorAccessError)();let c=u.W===void 0;return l.iteratorType===0?c&&l.next():(!c||u.U===void 0)&&l.next(),this.V(u),l}forEach(l){let u=0;for(let c of this)l(c,u++,this)}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u,c=0;for(let h of this){if(c===l){u=h;break}c+=1}return u}getHeight(){if(this.i===0)return 0;let l=function(u){return u?Math.max(l(u.U),l(u.W))+1:0};return l(this.Y)}},o=s;r.default=o}),rA=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=js(),t=$s(),n=class extends e.ContainerIterator{constructor(o,l,u){super(u),this.o=o,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let o=this.o,l=this.h.tt;if(o===this.h)return l?l.rt-1:0;let u=0;for(o.U&&(u+=o.U.rt);o!==l;){let c=o.tt;o===c.W&&(u+=1,c.U&&(u+=c.U.rt)),o=c}return u}},s=n;r.default=s}),NM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=s(tA()),t=s(rA()),n=$s();function s(c){return c&&c.t?c:{default:c}}var o=class nA extends t.default{constructor(h,d,m,y){super(h,d,y),this.container=m}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new nA(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.default{constructor(c=[],h,d){super(h,d);let m=this;c.forEach(function(y){m.insert(y)})}*K(c){c!==void 0&&(yield*this.K(c.U),yield c.u,yield*this.K(c.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(c,h){return this.M(c,void 0,h)}find(c){let h=this.I(this.Y,c);return new o(h,this.h,this)}lowerBound(c){let h=this.X(this.Y,c);return new o(h,this.h,this)}upperBound(c){let h=this.Z(this.Y,c);return new o(h,this.h,this)}reverseLowerBound(c){let h=this.$(this.Y,c);return new o(h,this.h,this)}reverseUpperBound(c){let h=this.rr(this.Y,c);return new o(h,this.h,this)}union(c){let h=this;return c.forEach(function(d){h.insert(d)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},u=l;r.default=u}),OM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=s(tA()),t=s(rA()),n=$s();function s(c){return c&&c.t?c:{default:c}}var o=class iA extends t.default{constructor(h,d,m,y){super(h,d,y),this.container=m}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(d,m){if(m==="0")return h.o.u;if(m==="1")return h.o.l},set(d,m,y){if(m!=="1")throw new TypeError("props must be 1");return h.o.l=y,!0}})}copy(){return new iA(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.default{constructor(c=[],h,d){super(h,d);let m=this;c.forEach(function(y){m.setElement(y[0],y[1])})}*K(c){c!==void 0&&(yield*this.K(c.U),yield[c.u,c.l],yield*this.K(c.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i===0)return;let c=this.h.U;return[c.u,c.l]}back(){if(this.i===0)return;let c=this.h.W;return[c.u,c.l]}lowerBound(c){let h=this.X(this.Y,c);return new o(h,this.h,this)}upperBound(c){let h=this.Z(this.Y,c);return new o(h,this.h,this)}reverseLowerBound(c){let h=this.$(this.Y,c);return new o(h,this.h,this)}reverseUpperBound(c){let h=this.rr(this.Y,c);return new o(h,this.h,this)}setElement(c,h,d){return this.M(c,h,d)}find(c){let h=this.I(this.Y,c);return new o(h,this.h,this)}getElementByKey(c){return this.I(this.Y,c).l}union(c){let h=this;return c.forEach(function(d){h.setElement(d[0],d[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},u=l;r.default=u}),sA=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=e;function e(t){let n=typeof t;return n==="object"&&t!==null||n==="function"}}),oA=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var e=js(),t=s(sA()),n=$s();function s(u){return u&&u.t?u:{default:u}}var o=class extends e.ContainerIterator{constructor(u,c,h){super(h),this.o=u,this.h=c,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=o;var l=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(u){let{L:c,B:h}=u;c.B=h,h.L=c,u===this.p&&(this.p=h),u===this._&&(this._=c),this.i-=1}M(u,c,h){h===void 0&&(h=(0,t.default)(u));let d;if(h){let m=u[this.HASH_TAG];if(m!==void 0)return this.H[m].l=c,this.i;Object.defineProperty(u,this.HASH_TAG,{value:this.H.length,configurable:!0}),d={u,l:c,L:this._,B:this.h},this.H.push(d)}else{let m=this.g[u];if(m)return m.l=c,this.i;d={u,l:c,L:this._,B:this.h},this.g[u]=d}return this.i===0?(this.p=d,this.h.B=d):this._.B=d,this._=d,this.h.L=d,++this.i}I(u,c){if(c===void 0&&(c=(0,t.default)(u)),c){let h=u[this.HASH_TAG];return h===void 0?this.h:this.H[h]}else return this.g[u]||this.h}clear(){let u=this.HASH_TAG;this.H.forEach(function(c){delete c.u[u]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(u,c){let h;if(c===void 0&&(c=(0,t.default)(u)),c){let d=u[this.HASH_TAG];if(d===void 0)return!1;delete u[this.HASH_TAG],h=this.H[d],delete this.H[d]}else{if(h=this.g[u],h===void 0)return!1;delete this.g[u]}return this.V(h),!0}eraseElementByIterator(u){let c=u.o;return c===this.h&&(0,n.throwIteratorAccessError)(),this.V(c),u.next()}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return this.V(c),this.i}};r.HashContainer=l}),DM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=oA(),t=$s(),n=class aA extends e.HashContainerIterator{constructor(u,c,h,d){super(u,c,d),this.container=h}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new aA(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.HashContainer{constructor(l=[]){super();let u=this;l.forEach(function(c){u.insert(c)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(l,u){return this.M(l,void 0,u)}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u=this.p;for(;l--;)u=u.B;return u.u}find(l,u){let c=this.I(l,u);return new n(c,this.h,this)}forEach(l){let u=0,c=this.p;for(;c!==this.h;)l(c.u,u++,this),c=c.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield l.u,l=l.B}).bind(this)()}},o=s;r.default=o}),LM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=oA(),t=s(sA()),n=$s();function s(c){return c&&c.t?c:{default:c}}var o=class lA extends e.HashContainerIterator{constructor(h,d,m,y){super(h,d,y),this.container=m}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(d,m){if(m==="0")return h.o.u;if(m==="1")return h.o.l},set(d,m,y){if(m!=="1")throw new TypeError("props must be 1");return h.o.l=y,!0}})}copy(){return new lA(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.HashContainer{constructor(c=[]){super();let h=this;c.forEach(function(d){h.setElement(d[0],d[1])})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(c,h,d){return this.M(c,h,d)}getElementByKey(c,h){if(h===void 0&&(h=(0,t.default)(c)),h){let m=c[this.HASH_TAG];return m!==void 0?this.H[m].l:void 0}let d=this.g[c];return d?d.l:void 0}getElementByPos(c){if(c<0||c>this.i-1)throw new RangeError;let h=this.p;for(;c--;)h=h.B;return[h.u,h.l]}find(c,h){let d=this.I(c,h);return new o(d,this.h,this)}forEach(c){let h=0,d=this.p;for(;d!==this.h;)c([d.u,d.l],h++,this),d=d.B}[Symbol.iterator](){return(function*(){let c=this.p;for(;c!==this.h;)yield[c.u,c.l],c=c.B}).bind(this)()}},u=l;r.default=u}),MM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return s.default}});var e=m(xM()),t=m(AM()),n=m(IM()),s=m(CM()),o=m(RM()),l=m(kM()),u=m(NM()),c=m(OM()),h=m(DM()),d=m(LM());function m(y){return y&&y.t?y:{default:y}}}),FM=Ke((r,e)=>{je(),ze(),$e();var t=MM().OrderedSet,n=Us()("number-allocator:trace"),s=Us()("number-allocator:error");function o(u,c){this.low=u,this.high=c}o.prototype.equals=function(u){return this.low===u.low&&this.high===u.high},o.prototype.compare=function(u){return this.low<u.low&&this.high<u.low?-1:u.low<this.low&&u.high<this.low?1:0};function l(u,c){if(!(this instanceof l))return new l(u,c);this.min=u,this.max=c,this.ss=new t([],(h,d)=>h.compare(d)),n("Create"),this.clear()}l.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},l.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let u=this.ss.begin(),c=u.pointer.low,h=u.pointer.high,d=c;return d+1<=h?this.ss.updateKeyByIterator(u,new o(c+1,h)):this.ss.eraseElementByPos(0),n("alloc():"+d),d},l.prototype.use=function(u){let c=new o(u,u),h=this.ss.lowerBound(c);if(!h.equals(this.ss.end())){let d=h.pointer.low,m=h.pointer.high;return h.pointer.equals(c)?(this.ss.eraseElementByIterator(h),n("use():"+u),!0):d>u?!1:d===u?(this.ss.updateKeyByIterator(h,new o(d+1,m)),n("use():"+u),!0):m===u?(this.ss.updateKeyByIterator(h,new o(d,m-1)),n("use():"+u),!0):(this.ss.updateKeyByIterator(h,new o(u+1,m)),this.ss.insert(new o(d,u-1)),n("use():"+u),!0)}return n("use():failed"),!1},l.prototype.free=function(u){if(u<this.min||u>this.max){s("free():"+u+" is out of range");return}let c=new o(u,u),h=this.ss.upperBound(c);if(h.equals(this.ss.end())){if(h.equals(this.ss.begin())){this.ss.insert(c);return}h.pre();let d=h.pointer.high;h.pointer.high+1===u?this.ss.updateKeyByIterator(h,new o(d,u)):this.ss.insert(c)}else if(h.equals(this.ss.begin()))if(u+1===h.pointer.low){let d=h.pointer.high;this.ss.updateKeyByIterator(h,new o(u,d))}else this.ss.insert(c);else{let d=h.pointer.low,m=h.pointer.high;h.pre();let y=h.pointer.low;h.pointer.high+1===u?u+1===d?(this.ss.eraseElementByIterator(h),this.ss.updateKeyByIterator(h,new o(y,m))):this.ss.updateKeyByIterator(h,new o(y,u)):u+1===d?(this.ss.eraseElementByIterator(h.next()),this.ss.insert(new o(u,m))):this.ss.insert(c)}n("free():"+u)},l.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},l.prototype.intervalCount=function(){return this.ss.size()},l.prototype.dump=function(){console.log("length:"+this.ss.size());for(let u of this.ss)console.log(u)},e.exports=l}),uA=Ke((r,e)=>{je(),ze(),$e();var t=FM();e.exports.NumberAllocator=t}),VM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=TM(),t=uA(),n=class{constructor(s){s>0&&(this.aliasToTopic=new e.LRUCache({max:s}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,s),this.max=s,this.length=0)}put(s,o){if(o===0||o>this.max)return!1;let l=this.aliasToTopic.get(o);return l&&delete this.topicToAlias[l],this.aliasToTopic.set(o,s),this.topicToAlias[s]=o,this.numberAllocator.use(o),this.length=this.aliasToTopic.size,!0}getTopicByAlias(s){return this.aliasToTopic.get(s)}getAliasByTopic(s){let o=this.topicToAlias[s];return typeof o<"u"&&this.aliasToTopic.get(o),o}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=n}),UM=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,"__esModule",{value:!0});var t=Jd(),n=e(VM()),s=_u(),o=(l,u)=>{l.log("_handleConnack");let{options:c}=l,h=c.protocolVersion===5?u.reasonCode:u.returnCode;if(clearTimeout(l.connackTimer),delete l.topicAliasSend,u.properties){if(u.properties.topicAliasMaximum){if(u.properties.topicAliasMaximum>65535){l.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}u.properties.topicAliasMaximum>0&&(l.topicAliasSend=new n.default(u.properties.topicAliasMaximum))}u.properties.serverKeepAlive&&c.keepalive&&(c.keepalive=u.properties.serverKeepAlive),u.properties.maximumPacketSize&&(c.properties||(c.properties={}),c.properties.maximumPacketSize=u.properties.maximumPacketSize)}if(h===0)l.reconnecting=!1,l._onConnect(u);else if(h>0){let d=new s.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[h]}`,h);l.emit("error",d),l.options.reconnectOnConnackError&&l._cleanUp(!0)}};r.default=o}),BM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=(t,n,s)=>{t.log("handling pubrel packet");let o=typeof s<"u"?s:t.noop,{messageId:l}=n,u={cmd:"pubcomp",messageId:l};t.incomingStore.get(n,(c,h)=>{c?t._sendPacket(u,o):(t.emit("message",h.topic,h.payload,h),t.handleMessage(h,d=>{if(d)return o(d);t.incomingStore.del(h,t.noop),t._sendPacket(u,o)}))})};r.default=e}),jM=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(bM()),n=e(SM()),s=e(UM()),o=e(Jd()),l=e(BM()),u=(c,h,d)=>{let{options:m}=c;if(m.protocolVersion===5&&m.properties&&m.properties.maximumPacketSize&&m.properties.maximumPacketSize<h.length)return c.emit("error",new Error(`exceeding packets size ${h.cmd}`)),c.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),c;switch(c.log("_handlePacket :: emitting packetreceive"),c.emit("packetreceive",h),h.cmd){case"publish":(0,t.default)(c,h,d);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":c.reschedulePing(),(0,o.default)(c,h),d();break;case"pubrel":c.reschedulePing(),(0,l.default)(c,h,d);break;case"connack":(0,s.default)(c,h),d();break;case"auth":c.reschedulePing(),(0,n.default)(c,h),d();break;case"pingresp":c.log("_handlePacket :: received pingresp"),c.reschedulePing(!0),d();break;case"disconnect":c.emit("disconnect",h),d();break;default:c.log("_handlePacket :: unknown command"),d();break}};r.default=u}),$M=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var t=e((Qa(),Kt(zo))),n=_u(),s=class{};r.TypedEventEmitter=s,(0,n.applyMixin)(s,t.default)}),Xd=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var e=()=>{var o;return typeof window<"u"?typeof navigator<"u"&&((o=navigator.userAgent)===null||o===void 0?void 0:o.toLowerCase().indexOf(" electron/"))>-1&&Bt!=null&&Bt.versions?!Object.prototype.hasOwnProperty.call(Bt.versions,"electron"):typeof window.document<"u":!1},t=()=>{var o,l;return!!(typeof self=="object"&&!((l=(o=self==null?void 0:self.constructor)===null||o===void 0?void 0:o.name)===null||l===void 0)&&l.includes("WorkerGlobalScope"))},n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",s=e()||t()||n();r.isWebWorker=t(),r.isReactNativeBrowser=n(),r.default=s}),zM=Ke((r,e)=>{je(),ze(),$e(),function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.fastUniqueNumbers={}))}(r,function(t){var n=function(_){return function(b){var S=_(b);return b.add(S),S}},s=function(_){return function(b,S){return _.set(b,S),S}},o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,l=536870912,u=l*2,c=function(_,b){return function(S){var T=b.get(S),N=T===void 0?S.size:T<u?T+1:0;if(!S.has(N))return _(S,N);if(S.size<l){for(;S.has(N);)N=Math.floor(Math.random()*u);return _(S,N)}if(S.size>o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;S.has(N);)N=Math.floor(Math.random()*o);return _(S,N)}},h=new WeakMap,d=s(h),m=c(d,h),y=n(m);t.addUniqueNumber=y,t.generateUniqueNumber=m})}),WM=Ke((r,e)=>{je(),ze(),$e(),function(t,n){typeof r=="object"&&typeof e<"u"?n(r,zM()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimersBroker={},t.fastUniqueNumbers))}(r,function(t,n){var s=function(u){return u.method!==void 0&&u.method==="call"},o=function(u){return u.error===null&&typeof u.id=="number"},l=function(u){var c=new Map([[0,function(){}]]),h=new Map([[0,function(){}]]),d=new Map,m=new Worker(u);m.addEventListener("message",function(T){var N=T.data;if(s(N)){var x=N.params,k=x.timerId,q=x.timerType;if(q==="interval"){var H=c.get(k);if(typeof H=="number"){var $=d.get(H);if($===void 0||$.timerId!==k||$.timerType!==q)throw new Error("The timer is in an undefined state.")}else if(typeof H<"u")H();else throw new Error("The timer is in an undefined state.")}else if(q==="timeout"){var P=h.get(k);if(typeof P=="number"){var R=d.get(P);if(R===void 0||R.timerId!==k||R.timerType!==q)throw new Error("The timer is in an undefined state.")}else if(typeof P<"u")P(),h.delete(k);else throw new Error("The timer is in an undefined state.")}}else if(o(N)){var V=N.id,M=d.get(V);if(M===void 0)throw new Error("The timer is in an undefined state.");var W=M.timerId,O=M.timerType;d.delete(V),O==="interval"?c.delete(W):h.delete(W)}else{var F=N.error.message;throw new Error(F)}});var y=function(T){var N=n.generateUniqueNumber(d);d.set(N,{timerId:T,timerType:"interval"}),c.set(T,N),m.postMessage({id:N,method:"clear",params:{timerId:T,timerType:"interval"}})},_=function(T){var N=n.generateUniqueNumber(d);d.set(N,{timerId:T,timerType:"timeout"}),h.set(T,N),m.postMessage({id:N,method:"clear",params:{timerId:T,timerType:"timeout"}})},b=function(T){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=n.generateUniqueNumber(c);return c.set(x,function(){T(),typeof c.get(x)=="function"&&m.postMessage({id:null,method:"set",params:{delay:N,now:performance.now(),timerId:x,timerType:"interval"}})}),m.postMessage({id:null,method:"set",params:{delay:N,now:performance.now(),timerId:x,timerType:"interval"}}),x},S=function(T){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=n.generateUniqueNumber(h);return h.set(x,T),m.postMessage({id:null,method:"set",params:{delay:N,now:performance.now(),timerId:x,timerType:"timeout"}}),x};return{clearInterval:y,clearTimeout:_,setInterval:b,setTimeout:S}};t.load=l})}),qM=Ke((r,e)=>{je(),ze(),$e(),function(t,n){typeof r=="object"&&typeof e<"u"?n(r,WM()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimers={},t.workerTimersBroker))}(r,function(t,n){var s=function(m,y){var _=null;return function(){if(_!==null)return _;var b=new Blob([y],{type:"application/javascript; charset=utf-8"}),S=URL.createObjectURL(b);return _=m(S),setTimeout(function(){return URL.revokeObjectURL(S)}),_}},o=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,l=s(n.load,o),u=function(m){return l().clearInterval(m)},c=function(m){return l().clearTimeout(m)},h=function(){var m;return(m=l()).setInterval.apply(m,arguments)},d=function(){var m;return(m=l()).setTimeout.apply(m,arguments)};t.clearInterval=u,t.clearTimeout=c,t.setInterval=h,t.setTimeout=d})}),HM=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(h,d,m,y){y===void 0&&(y=m);var _=Object.getOwnPropertyDescriptor(d,m);(!_||("get"in _?!d.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return d[m]}}),Object.defineProperty(h,y,_)}:function(h,d,m,y){y===void 0&&(y=m),h[y]=d[m]}),t=r&&r.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),n=r&&r.__importStar||function(){var h=function(d){return h=Object.getOwnPropertyNames||function(m){var y=[];for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(y[y.length]=_);return y},h(d)};return function(d){if(d&&d.__esModule)return d;var m={};if(d!=null)for(var y=h(d),_=0;_<y.length;_++)y[_]!=="default"&&e(m,d,y[_]);return t(m,d),m}}();Object.defineProperty(r,"__esModule",{value:!0});var s=n(Xd()),o=qM(),l={set:o.setInterval,clear:o.clearInterval},u={set:(h,d)=>setInterval(h,d),clear:h=>clearInterval(h)},c=h=>{switch(h){case"native":return u;case"worker":return l;case"auto":default:return s.default&&!s.isWebWorker&&!s.isReactNativeBrowser?l:u}};r.default=c}),cA=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(HM()),n=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(s,o){this.destroyed=!1,this.client=s,this.timer=typeof o=="object"&&"set"in o&&"clear"in o?o:(0,t.default)(o),this.setKeepalive(s.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(s){if(s*=1e3,isNaN(s)||s<=0||s>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${s}`);this._keepalive=s,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${s}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let s=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+s,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=n}),ov=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(H,$,P,R){R===void 0&&(R=P);var V=Object.getOwnPropertyDescriptor($,P);(!V||("get"in V?!$.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return $[P]}}),Object.defineProperty(H,R,V)}:function(H,$,P,R){R===void 0&&(R=P),H[R]=$[P]}),t=r&&r.__setModuleDefault||(Object.create?function(H,$){Object.defineProperty(H,"default",{enumerable:!0,value:$})}:function(H,$){H.default=$}),n=r&&r.__importStar||function(){var H=function($){return H=Object.getOwnPropertyNames||function(P){var R=[];for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&(R[R.length]=V);return R},H($)};return function($){if($&&$.__esModule)return $;var P={};if($!=null)for(var R=H($),V=0;V<R.length;V++)R[V]!=="default"&&e(P,$,R[V]);return t(P,$),P}}(),s=r&&r.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(r,"__esModule",{value:!0});var o=s(eM()),l=s(yM()),u=s(Qx()),c=Ga(),h=s(_M()),d=n(wM()),m=s(Us()),y=s(Kx()),_=s(jM()),b=_u(),S=$M(),T=s(cA()),N=n(Xd()),x=globalThis.setImmediate||((...H)=>{let $=H.shift();(0,b.nextTick)(()=>{$(...H)})}),k={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},q=class av extends S.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor($,P){super(),this.options=P||{};for(let R in k)typeof this.options[R]>"u"?this.options[R]=k[R]:this.options[R]=P[R];this.log=this.options.log||(0,m.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",av.VERSION),N.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",N.default?"browser":"node"),this.log("MqttClient :: options.protocol",P.protocol),this.log("MqttClient :: options.protocolVersion",P.protocolVersion),this.log("MqttClient :: options.username",P.username),this.log("MqttClient :: options.keepalive",P.keepalive),this.log("MqttClient :: options.reconnectPeriod",P.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",P.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",P.properties?P.properties.topicAliasMaximum:void 0),this.options.clientId=typeof P.clientId=="string"?P.clientId:av.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=P.protocolVersion===5&&P.customHandleAcks?P.customHandleAcks:(...R)=>{R[3](null,0)},this.options.writeCache||(l.default.writeToStream.cacheNumbers=!1),this.streamBuilder=$,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new u.default:this.options.messageIdProvider,this.outgoingStore=P.outgoingStore||new y.default,this.incomingStore=P.incomingStore||new y.default,this.queueQoSZero=P.queueQoSZero===void 0?!0:P.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,P.properties&&P.properties.topicAliasMaximum>0&&(P.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new o.default(P.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:R}=this,V=()=>{let M=R.shift();this.log("deliver :: entry %o",M);let W=null;if(!M){this._resubscribe();return}W=M.packet,this.log("deliver :: call _sendPacket for %o",W);let O=!0;W.messageId&&W.messageId!==0&&(this.messageIdProvider.register(W.messageId)||(O=!1)),O?this._sendPacket(W,F=>{M.cb&&M.cb(F),V()}):(this.log("messageId: %d has already used. The message is skipped and removed.",W.messageId),V())};this.log("connect :: sending queued packets"),V()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth($,P){P()}handleMessage($,P){P()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var $;let P=new c.Writable,R=l.default.parser(this.options),V=null,M=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new y.default,this.outgoingStore=this.options.outgoingStore||new y.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),R.on("packet",se=>{this.log("parser :: on packet push to packets array."),M.push(se)});let W=()=>{this.log("work :: getting next packet in queue");let se=M.shift();if(se)this.log("work :: packet pulled from queue"),(0,_.default)(this,se,O);else{this.log("work :: no packets in queue");let Ne=V;V=null,this.log("work :: done flag is %s",!!Ne),Ne&&Ne()}},O=()=>{if(M.length)(0,b.nextTick)(W);else{let se=V;V=null,se()}};P._write=(se,Ne,Ie)=>{V=Ie,this.log("writable stream :: parsing buffer"),R.parse(se),W()};let F=se=>{this.log("streamErrorHandler :: error",se.message),se.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",se)):this.noop(se)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(P),this.stream.on("error",F),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let ye={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(ye.will=Object.assign(Object.assign({},this.options.will),{payload:($=this.options.will)===null||$===void 0?void 0:$.payload})),this.topicAliasRecv&&(ye.properties||(ye.properties={}),this.topicAliasRecv&&(ye.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(ye),R.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let se=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(se)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish($,P,R,V){this.log("publish :: message `%s` to topic `%s`",P,$);let{options:M}=this;typeof R=="function"&&(V=R,R=null),R=R||{},R=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),R);let{qos:W,retain:O,dup:F,properties:ye,cbStorePut:se}=R;if(this._checkDisconnecting(V))return this;let Ne=()=>{let Ie=0;if((W===1||W===2)&&(Ie=this._nextId(),Ie===null))return this.log("No messageId left"),!1;let he={cmd:"publish",topic:$,payload:P,qos:W,retain:O,messageId:Ie,dup:F};switch(M.protocolVersion===5&&(he.properties=ye),this.log("publish :: qos",W),W){case 1:case 2:this.outgoing[he.messageId]={volatile:!1,cb:V||this.noop},this.log("MqttClient:publish: packet cmd: %s",he.cmd),this._sendPacket(he,void 0,se);break;default:this.log("MqttClient:publish: packet cmd: %s",he.cmd),this._sendPacket(he,V,se);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Ne())&&this._storeProcessingQueue.push({invoke:Ne,cbStorePut:R.cbStorePut,callback:V}),this}publishAsync($,P,R){return new Promise((V,M)=>{this.publish($,P,R,(W,O)=>{W?M(W):V(O)})})}subscribe($,P,R){let V=this.options.protocolVersion;typeof P=="function"&&(R=P),R=R||this.noop;let M=!1,W=[];typeof $=="string"?($=[$],W=$):Array.isArray($)?W=$:typeof $=="object"&&(M=$.resubscribe,delete $.resubscribe,W=Object.keys($));let O=d.validateTopics(W);if(O!==null)return x(R,new Error(`Invalid topic ${O}`)),this;if(this._checkDisconnecting(R))return this.log("subscribe: discconecting true"),this;let F={qos:0};V===5&&(F.nl=!1,F.rap=!1,F.rh=0),P=Object.assign(Object.assign({},F),P);let ye=P.properties,se=[],Ne=(he,Re)=>{if(Re=Re||P,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,he)||this._resubscribeTopics[he].qos<Re.qos||M){let B={topic:he,qos:Re.qos};V===5&&(B.nl=Re.nl,B.rap=Re.rap,B.rh=Re.rh,B.properties=ye),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",B.topic,B.qos),se.push(B)}};if(Array.isArray($)?$.forEach(he=>{this.log("subscribe: array topic %s",he),Ne(he)}):Object.keys($).forEach(he=>{this.log("subscribe: object topic %s, %o",he,$[he]),Ne(he,$[he])}),!se.length)return R(null,[]),this;let Ie=()=>{let he=this._nextId();if(he===null)return this.log("No messageId left"),!1;let Re={cmd:"subscribe",subscriptions:se,messageId:he};if(ye&&(Re.properties=ye),this.options.resubscribe){this.log("subscribe :: resubscribe true");let B=[];se.forEach(ue=>{if(this.options.reconnectPeriod>0){let G={qos:ue.qos};V===5&&(G.nl=ue.nl||!1,G.rap=ue.rap||!1,G.rh=ue.rh||0,G.properties=ue.properties),this._resubscribeTopics[ue.topic]=G,B.push(ue.topic)}}),this.messageIdToTopic[Re.messageId]=B}return this.outgoing[Re.messageId]={volatile:!0,cb(B,ue){if(!B){let{granted:G}=ue;for(let we=0;we<G.length;we+=1)se[we].qos=G[we]}R(B,se,ue)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(Re),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Ie())&&this._storeProcessingQueue.push({invoke:Ie,callback:R}),this}subscribeAsync($,P){return new Promise((R,V)=>{this.subscribe($,P,(M,W)=>{M?V(M):R(W)})})}unsubscribe($,P,R){typeof $=="string"&&($=[$]),typeof P=="function"&&(R=P),R=R||this.noop;let V=d.validateTopics($);if(V!==null)return x(R,new Error(`Invalid topic ${V}`)),this;if(this._checkDisconnecting(R))return this;let M=()=>{let W=this._nextId();if(W===null)return this.log("No messageId left"),!1;let O={cmd:"unsubscribe",messageId:W,unsubscriptions:[]};return typeof $=="string"?O.unsubscriptions=[$]:Array.isArray($)&&(O.unsubscriptions=$),this.options.resubscribe&&O.unsubscriptions.forEach(F=>{delete this._resubscribeTopics[F]}),typeof P=="object"&&P.properties&&(O.properties=P.properties),this.outgoing[O.messageId]={volatile:!0,cb:R},this.log("unsubscribe: call _sendPacket"),this._sendPacket(O),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!M())&&this._storeProcessingQueue.push({invoke:M,callback:R}),this}unsubscribeAsync($,P){return new Promise((R,V)=>{this.unsubscribe($,P,(M,W)=>{M?V(M):R(W)})})}end($,P,R){this.log("end :: (%s)",this.options.clientId),($==null||typeof $!="boolean")&&(R=R||P,P=$,$=!1),typeof P!="object"&&(R=R||P,P=null),this.log("end :: cb? %s",!!R),(!R||typeof R!="function")&&(R=this.noop);let V=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(W=>{this.outgoingStore.close(O=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),R){let F=W||O;this.log("end :: closeStores: invoking callback with args"),R(F)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},M=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,$),this._cleanUp($,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(V)},P)};return this.disconnecting?(R(),this):(this._clearReconnect(),this.disconnecting=!0,!$&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,M,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),M()),this)}endAsync($,P){return new Promise((R,V)=>{this.end($,P,M=>{M?V(M):R()})})}removeOutgoingMessage($){if(this.outgoing[$]){let{cb:P}=this.outgoing[$];this._removeOutgoingAndStoreMessage($,()=>{P(new Error("Message removed"))})}return this}reconnect($){this.log("client reconnect");let P=()=>{$?(this.options.incomingStore=$.incomingStore,this.options.outgoingStore=$.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new y.default,this.outgoingStore=this.options.outgoingStore||new y.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=P:P(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach($=>{this.outgoing[$].volatile&&typeof this.outgoing[$].cb=="function"&&(this.outgoing[$].cb(new Error("Connection closed")),delete this.outgoing[$])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach($=>{typeof this.outgoing[$].cb=="function"&&(this.outgoing[$].cb(new Error("Connection closed")),delete this.outgoing[$])}))}_removeTopicAliasAndRecoverTopicName($){let P;$.properties&&(P=$.properties.topicAlias);let R=$.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",P,R),R.length===0){if(typeof P>"u")return new Error("Unregistered Topic Alias");if(R=this.topicAliasSend.getTopicByAlias(P),typeof R>"u")return new Error("Unregistered Topic Alias");$.topic=R}P&&delete $.properties.topicAlias}_checkDisconnecting($){return this.disconnecting&&($&&$!==this.noop?$(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp($,P,R={}){if(P&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",P)),this.log("_cleanUp :: forced? %s",$),$)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let V=Object.assign({cmd:"disconnect"},R);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(V,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),x(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),P&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",P),P())}_storeAndSend($,P,R){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",$.cmd);let V=$,M;if(V.cmd==="publish"&&(V=(0,h.default)($),M=this._removeTopicAliasAndRecoverTopicName(V),M))return P&&P(M);this.outgoingStore.put(V,W=>{if(W)return P&&P(W);R(),this._writePacket($,P)})}_applyTopicAlias($){if(this.options.protocolVersion===5&&$.cmd==="publish"){let P;$.properties&&(P=$.properties.topicAlias);let R=$.topic.toString();if(this.topicAliasSend)if(P){if(R.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",R,P),!this.topicAliasSend.put(R,P)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",R,P),new Error("Sending Topic Alias out of range")}else R.length!==0&&(this.options.autoAssignTopicAlias?(P=this.topicAliasSend.getAliasByTopic(R),P?($.topic="",$.properties=Object.assign(Object.assign({},$.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",R,P)):(P=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(R,P),$.properties=Object.assign(Object.assign({},$.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",R,P))):this.options.autoUseTopicAlias&&(P=this.topicAliasSend.getAliasByTopic(R),P&&($.topic="",$.properties=Object.assign(Object.assign({},$.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",R,P))));else if(P)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",R,P),new Error("Sending Topic Alias out of range")}}_noop($){this.log("noop ::",$)}_writePacket($,P){this.log("_writePacket :: packet: %O",$),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",$),this.log("_writePacket :: writing to stream");let R=l.default.writeToStream($,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",R),!R&&P&&P!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",P)):P&&(this.log("_writePacket :: invoking cb"),P())}_sendPacket($,P,R,V){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),R=R||this.noop,P=P||this.noop;let M=this._applyTopicAlias($);if(M){P(M);return}if(!this.connected){if($.cmd==="auth"){this._writePacket($,P);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket($,P,R);return}if(V){this._writePacket($,P);return}switch($.cmd){case"publish":break;case"pubrel":this._storeAndSend($,P,R);return;default:this._writePacket($,P);return}switch($.qos){case 2:case 1:this._storeAndSend($,P,R);break;case 0:default:this._writePacket($,P);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket($,P,R){this.log("_storePacket :: packet: %o",$),this.log("_storePacket :: cb? %s",!!P),R=R||this.noop;let V=$;if(V.cmd==="publish"){V=(0,h.default)($);let W=this._removeTopicAliasAndRecoverTopicName(V);if(W)return P&&P(W)}let M=V.qos||0;M===0&&this.queueQoSZero||V.cmd!=="publish"?this.queue.push({packet:V,cb:P}):M>0?(P=this.outgoing[V.messageId]?this.outgoing[V.messageId].cb:null,this.outgoingStore.put(V,W=>{if(W)return P&&P(W);R()})):P&&P(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new T.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing($=!1){this.keepaliveManager&&this.options.keepalive&&($||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let $=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&$.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let P=0;P<$.length;P++){let R={};R[$[P]]=this._resubscribeTopics[$[P]],R.resubscribe=!0,this.subscribe(R,{properties:R[$[P]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect($){if(this.disconnected){this.emit("connect",$);return}this.connackPacket=$,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let P=()=>{let R=this.outgoingStore.createStream(),V=()=>{R.destroy(),R=null,this._flushStoreProcessingQueue(),M()},M=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",V),R.on("error",O=>{M(),this._flushStoreProcessingQueue(),this.removeListener("close",V),this.emit("error",O)});let W=()=>{if(!R)return;let O=R.read(1),F;if(!O){R.once("readable",W);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[O.messageId]){W();return}!this.disconnecting&&!this.reconnectTimer?(F=this.outgoing[O.messageId]?this.outgoing[O.messageId].cb:null,this.outgoing[O.messageId]={volatile:!1,cb(ye,se){F&&F(ye,se),W()}},this._packetIdsDuringStoreProcessing[O.messageId]=!0,this.messageIdProvider.register(O.messageId)?this._sendPacket(O,void 0,void 0,!0):this.log("messageId: %d has already used.",O.messageId)):R.destroy&&R.destroy()};R.on("end",()=>{let O=!0;for(let F in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[F]){O=!1;break}this.removeListener("close",V),O?(M(),this._invokeAllStoreProcessingQueue(),this.emit("connect",$)):P()}),W()};P()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let $=this._storeProcessingQueue[0];if($&&$.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let $ of this._storeProcessingQueue)$.cbStorePut&&$.cbStorePut(new Error("Connection closed")),$.callback&&$.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage($,P){delete this.outgoing[$],this.outgoingStore.del({messageId:$},(R,V)=>{P(R,V),this.messageIdProvider.deallocate($),this._invokeStoreProcessingQueue()})}};q.VERSION=b.MQTTJS_VERSION,r.default=q}),QM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=uA(),t=class{constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};r.default=t});function pa(r){throw new RangeError(fA[r])}function OE(r,e){let t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]);let s=function(o,l){let u=[],c=o.length;for(;c--;)u[c]=l(o[c]);return u}((r=r.replace(hA,".")).split("."),e).join(".");return n+s}function DE(r){let e=[],t=0,n=r.length;for(;t<n;){let s=r.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){let o=r.charCodeAt(t++);(64512&o)==56320?e.push(((1023&s)<<10)+(1023&o)+65536):(e.push(s),t--)}else e.push(s)}return e}var LE,ME,hA,fA,Si,bf,Gm,Ym,Jm,Xm,_o,KM=An(()=>{je(),ze(),$e(),LE=/^xn--/,ME=/[^\0-\x7E]/,hA=/[\x2E\u3002\uFF0E\uFF61]/g,fA={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Si=Math.floor,bf=String.fromCharCode,Gm=function(r,e){return r+22+75*(r<26)-((e!=0)<<5)},Ym=function(r,e,t){let n=0;for(r=t?Si(r/700):r>>1,r+=Si(r/e);r>455;n+=36)r=Si(r/35);return Si(n+36*r/(r+38))},Jm=function(r){let e=[],t=r.length,n=0,s=128,o=72,l=r.lastIndexOf("-");l<0&&(l=0);for(let c=0;c<l;++c)r.charCodeAt(c)>=128&&pa("not-basic"),e.push(r.charCodeAt(c));for(let c=l>0?l+1:0;c<t;){let h=n;for(let m=1,y=36;;y+=36){c>=t&&pa("invalid-input");let _=(u=r.charCodeAt(c++))-48<10?u-22:u-65<26?u-65:u-97<26?u-97:36;(_>=36||_>Si((2147483647-n)/m))&&pa("overflow"),n+=_*m;let b=y<=o?1:y>=o+26?26:y-o;if(_<b)break;let S=36-b;m>Si(2147483647/S)&&pa("overflow"),m*=S}let d=e.length+1;o=Ym(n-h,d,h==0),Si(n/d)>2147483647-s&&pa("overflow"),s+=Si(n/d),n%=d,e.splice(n++,0,s)}var u;return String.fromCodePoint(...e)},Xm=function(r){let e=[],t=(r=DE(r)).length,n=128,s=0,o=72;for(let c of r)c<128&&e.push(bf(c));let l=e.length,u=l;for(l&&e.push("-");u<t;){let c=2147483647;for(let d of r)d>=n&&d<c&&(c=d);let h=u+1;c-n>Si((2147483647-s)/h)&&pa("overflow"),s+=(c-n)*h,n=c;for(let d of r)if(d<n&&++s>2147483647&&pa("overflow"),d==n){let m=s;for(let y=36;;y+=36){let _=y<=o?1:y>=o+26?26:y-o;if(m<_)break;let b=m-_,S=36-_;e.push(bf(Gm(_+b%S,0))),m=Si(b/S)}e.push(bf(Gm(m,0))),o=Ym(s,h,u==l),s=0,++u}++s,++n}return e.join("")},_o={version:"2.1.0",ucs2:{decode:DE,encode:r=>String.fromCodePoint(...r)},decode:Jm,encode:Xm,toASCII:function(r){return OE(r,function(e){return ME.test(e)?"xn--"+Xm(e):e})},toUnicode:function(r){return OE(r,function(e){return LE.test(e)?Jm(e.slice(4).toLowerCase()):e})}},_o.decode,_o.encode,_o.toASCII,_o.toUnicode,_o.ucs2,_o.version});function GM(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var FE,kl,VE,Qi,YM=An(()=>{je(),ze(),$e(),FE=function(r,e,t,n){e=e||"&",t=t||"=";var s={};if(typeof r!="string"||r.length===0)return s;var o=/\+/g;r=r.split(e);var l=1e3;n&&typeof n.maxKeys=="number"&&(l=n.maxKeys);var u=r.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var h,d,m,y,_=r[c].replace(o,"%20"),b=_.indexOf(t);b>=0?(h=_.substr(0,b),d=_.substr(b+1)):(h=_,d=""),m=decodeURIComponent(h),y=decodeURIComponent(d),GM(s,m)?Array.isArray(s[m])?s[m].push(y):s[m]=[s[m],y]:s[m]=y}return s},kl=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},VE=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(s){var o=encodeURIComponent(kl(s))+t;return Array.isArray(r[s])?r[s].map(function(l){return o+encodeURIComponent(kl(l))}).join(e):o+encodeURIComponent(kl(r[s]))}).join(e):n?encodeURIComponent(kl(n))+t+encodeURIComponent(kl(r)):""},Qi={},Qi.decode=Qi.parse=FE,Qi.encode=Qi.stringify=VE,Qi.decode,Qi.encode,Qi.parse,Qi.stringify});function lv(){throw new Error("setTimeout has not been defined")}function uv(){throw new Error("clearTimeout has not been defined")}function dA(r){if(xs===setTimeout)return setTimeout(r,0);if((xs===lv||!xs)&&setTimeout)return xs=setTimeout,setTimeout(r,0);try{return xs(r,0)}catch{try{return xs.call(null,r,0)}catch{return xs.call(this||La,r,0)}}}function JM(){Ma&&ba&&(Ma=!1,ba.length?es=ba.concat(es):bc=-1,es.length&&pA())}function pA(){if(!Ma){var r=dA(JM);Ma=!0;for(var e=es.length;e;){for(ba=es,es=[];++bc<e;)ba&&ba[bc].run();bc=-1,e=es.length}ba=null,Ma=!1,function(t){if(As===clearTimeout)return clearTimeout(t);if((As===uv||!As)&&clearTimeout)return As=clearTimeout,clearTimeout(t);try{As(t)}catch{try{return As.call(null,t)}catch{return As.call(this||La,t)}}}(r)}}function UE(r,e){(this||La).fun=r,(this||La).array=e}function ws(){}var BE,xs,As,La,yr,ba,es,Ma,bc,fr,XM=An(()=>{je(),ze(),$e(),La=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,yr=BE={},function(){try{xs=typeof setTimeout=="function"?setTimeout:lv}catch{xs=lv}try{As=typeof clearTimeout=="function"?clearTimeout:uv}catch{As=uv}}(),es=[],Ma=!1,bc=-1,yr.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];es.push(new UE(r,e)),es.length!==1||Ma||dA(pA)},UE.prototype.run=function(){(this||La).fun.apply(null,(this||La).array)},yr.title="browser",yr.browser=!0,yr.env={},yr.argv=[],yr.version="",yr.versions={},yr.on=ws,yr.addListener=ws,yr.once=ws,yr.off=ws,yr.removeListener=ws,yr.removeAllListeners=ws,yr.emit=ws,yr.prependListener=ws,yr.prependOnceListener=ws,yr.listeners=function(r){return[]},yr.binding=function(r){throw new Error("process.binding is not supported")},yr.cwd=function(){return"/"},yr.chdir=function(r){throw new Error("process.chdir is not supported")},yr.umask=function(){return 0},fr=BE,fr.addListener,fr.argv,fr.binding,fr.browser,fr.chdir,fr.cwd,fr.emit,fr.env,fr.listeners,fr.nextTick,fr.off,fr.on,fr.once,fr.prependListener,fr.prependOnceListener,fr.removeAllListeners,fr.removeListener,fr.title,fr.umask,fr.version,fr.versions});function ZM(){if(cv)return zf;cv=!0;var r=zf={},e,t;function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=s}catch{t=s}})();function o(S){if(e===setTimeout)return setTimeout(S,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(S,0);try{return e(S,0)}catch{try{return e.call(null,S,0)}catch{return e.call(this||ya,S,0)}}}function l(S){if(t===clearTimeout)return clearTimeout(S);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(S);try{return t(S)}catch{try{return t.call(null,S)}catch{return t.call(this||ya,S)}}}var u=[],c=!1,h,d=-1;function m(){!c||!h||(c=!1,h.length?u=h.concat(u):d=-1,u.length&&y())}function y(){if(!c){var S=o(m);c=!0;for(var T=u.length;T;){for(h=u,u=[];++d<T;)h&&h[d].run();d=-1,T=u.length}h=null,c=!1,l(S)}}r.nextTick=function(S){var T=new Array(arguments.length-1);if(arguments.length>1)for(var N=1;N<arguments.length;N++)T[N-1]=arguments[N];u.push(new _(S,T)),u.length===1&&!c&&o(y)};function _(S,T){(this||ya).fun=S,(this||ya).array=T}_.prototype.run=function(){(this||ya).fun.apply(null,(this||ya).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}return r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(S){return[]},r.binding=function(S){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(S){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},zf}var zf,cv,ya,ar,mA=An(()=>{je(),ze(),$e(),zf={},cv=!1,ya=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,ar=ZM(),ar.platform="browser",ar.addListener,ar.argv,ar.binding,ar.browser,ar.chdir,ar.cwd,ar.emit,ar.env,ar.listeners,ar.nextTick,ar.off,ar.on,ar.once,ar.prependListener,ar.prependOnceListener,ar.removeAllListeners,ar.removeListener,ar.title,ar.umask,ar.version,ar.versions});function eF(){if(hv)return Wf;hv=!0;var r=ar;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,l){for(var u="",c=0,h=-1,d=0,m,y=0;y<=o.length;++y){if(y<o.length)m=o.charCodeAt(y);else{if(m===47)break;m=47}if(m===47){if(!(h===y-1||d===1))if(h!==y-1&&d===2){if(u.length<2||c!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var _=u.lastIndexOf("/");if(_!==u.length-1){_===-1?(u="",c=0):(u=u.slice(0,_),c=u.length-1-u.lastIndexOf("/")),h=y,d=0;continue}}else if(u.length===2||u.length===1){u="",c=0,h=y,d=0;continue}}l&&(u.length>0?u+="/..":u="..",c=2)}else u.length>0?u+="/"+o.slice(h+1,y):u=o.slice(h+1,y),c=y-h-1;h=y,d=0}else m===46&&d!==-1?++d:d=-1}return u}function n(o,l){var u=l.dir||l.root,c=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+c:u+o+c:c}var s={resolve:function(){for(var o="",l=!1,u,c=arguments.length-1;c>=-1&&!l;c--){var h;c>=0?h=arguments[c]:(u===void 0&&(u=r.cwd()),h=u),e(h),h.length!==0&&(o=h+"/"+o,l=h.charCodeAt(0)===47)}return o=t(o,!l),l?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(e(o),o.length===0)return".";var l=o.charCodeAt(0)===47,u=o.charCodeAt(o.length-1)===47;return o=t(o,!l),o.length===0&&!l&&(o="."),o.length>0&&u&&(o+="/"),l?"/"+o:o},isAbsolute:function(o){return e(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,l=0;l<arguments.length;++l){var u=arguments[l];e(u),u.length>0&&(o===void 0?o=u:o+="/"+u)}return o===void 0?".":s.normalize(o)},relative:function(o,l){if(e(o),e(l),o===l||(o=s.resolve(o),l=s.resolve(l),o===l))return"";for(var u=1;u<o.length&&o.charCodeAt(u)===47;++u);for(var c=o.length,h=c-u,d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var m=l.length,y=m-d,_=h<y?h:y,b=-1,S=0;S<=_;++S){if(S===_){if(y>_){if(l.charCodeAt(d+S)===47)return l.slice(d+S+1);if(S===0)return l.slice(d+S)}else h>_&&(o.charCodeAt(u+S)===47?b=S:S===0&&(b=0));break}var T=o.charCodeAt(u+S),N=l.charCodeAt(d+S);if(T!==N)break;T===47&&(b=S)}var x="";for(S=u+b+1;S<=c;++S)(S===c||o.charCodeAt(S)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+l.slice(d+b):(d+=b,l.charCodeAt(d)===47&&++d,l.slice(d))},_makeLong:function(o){return o},dirname:function(o){if(e(o),o.length===0)return".";for(var l=o.charCodeAt(0),u=l===47,c=-1,h=!0,d=o.length-1;d>=1;--d)if(l=o.charCodeAt(d),l===47){if(!h){c=d;break}}else h=!1;return c===-1?u?"/":".":u&&c===1?"//":o.slice(0,c)},basename:function(o,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');e(o);var u=0,c=-1,h=!0,d;if(l!==void 0&&l.length>0&&l.length<=o.length){if(l.length===o.length&&l===o)return"";var m=l.length-1,y=-1;for(d=o.length-1;d>=0;--d){var _=o.charCodeAt(d);if(_===47){if(!h){u=d+1;break}}else y===-1&&(h=!1,y=d+1),m>=0&&(_===l.charCodeAt(m)?--m===-1&&(c=d):(m=-1,c=y))}return u===c?c=y:c===-1&&(c=o.length),o.slice(u,c)}else{for(d=o.length-1;d>=0;--d)if(o.charCodeAt(d)===47){if(!h){u=d+1;break}}else c===-1&&(h=!1,c=d+1);return c===-1?"":o.slice(u,c)}},extname:function(o){e(o);for(var l=-1,u=0,c=-1,h=!0,d=0,m=o.length-1;m>=0;--m){var y=o.charCodeAt(m);if(y===47){if(!h){u=m+1;break}continue}c===-1&&(h=!1,c=m+1),y===46?l===-1?l=m:d!==1&&(d=1):l!==-1&&(d=-1)}return l===-1||c===-1||d===0||d===1&&l===c-1&&l===u+1?"":o.slice(l,c)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return n("/",o)},parse:function(o){e(o);var l={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return l;var u=o.charCodeAt(0),c=u===47,h;c?(l.root="/",h=1):h=0;for(var d=-1,m=0,y=-1,_=!0,b=o.length-1,S=0;b>=h;--b){if(u=o.charCodeAt(b),u===47){if(!_){m=b+1;break}continue}y===-1&&(_=!1,y=b+1),u===46?d===-1?d=b:S!==1&&(S=1):d!==-1&&(S=-1)}return d===-1||y===-1||S===0||S===1&&d===y-1&&d===m+1?y!==-1&&(m===0&&c?l.base=l.name=o.slice(1,y):l.base=l.name=o.slice(m,y)):(m===0&&c?(l.name=o.slice(1,d),l.base=o.slice(1,y)):(l.name=o.slice(m,d),l.base=o.slice(m,y)),l.ext=o.slice(d,y)),m>0?l.dir=o.slice(0,m-1):c&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,Wf=s,Wf}var Wf,hv,fv,tF=An(()=>{je(),ze(),$e(),mA(),Wf={},hv=!1,fv=eF()}),gA={};yu(gA,{URL:()=>DA,Url:()=>RA,default:()=>Ht,fileURLToPath:()=>yA,format:()=>kA,parse:()=>OA,pathToFileURL:()=>vA,resolve:()=>PA,resolveObject:()=>NA});function oi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function ic(r,e,t){if(r&&Ti.isObject(r)&&r instanceof oi)return r;var n=new oi;return n.parse(r,e,t),n}function rF(){if(dv)return qf;dv=!0;var r=fr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,l){for(var u="",c=0,h=-1,d=0,m,y=0;y<=o.length;++y){if(y<o.length)m=o.charCodeAt(y);else{if(m===47)break;m=47}if(m===47){if(!(h===y-1||d===1))if(h!==y-1&&d===2){if(u.length<2||c!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var _=u.lastIndexOf("/");if(_!==u.length-1){_===-1?(u="",c=0):(u=u.slice(0,_),c=u.length-1-u.lastIndexOf("/")),h=y,d=0;continue}}else if(u.length===2||u.length===1){u="",c=0,h=y,d=0;continue}}l&&(u.length>0?u+="/..":u="..",c=2)}else u.length>0?u+="/"+o.slice(h+1,y):u=o.slice(h+1,y),c=y-h-1;h=y,d=0}else m===46&&d!==-1?++d:d=-1}return u}function n(o,l){var u=l.dir||l.root,c=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+c:u+o+c:c}var s={resolve:function(){for(var o="",l=!1,u,c=arguments.length-1;c>=-1&&!l;c--){var h;c>=0?h=arguments[c]:(u===void 0&&(u=r.cwd()),h=u),e(h),h.length!==0&&(o=h+"/"+o,l=h.charCodeAt(0)===47)}return o=t(o,!l),l?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(e(o),o.length===0)return".";var l=o.charCodeAt(0)===47,u=o.charCodeAt(o.length-1)===47;return o=t(o,!l),o.length===0&&!l&&(o="."),o.length>0&&u&&(o+="/"),l?"/"+o:o},isAbsolute:function(o){return e(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,l=0;l<arguments.length;++l){var u=arguments[l];e(u),u.length>0&&(o===void 0?o=u:o+="/"+u)}return o===void 0?".":s.normalize(o)},relative:function(o,l){if(e(o),e(l),o===l||(o=s.resolve(o),l=s.resolve(l),o===l))return"";for(var u=1;u<o.length&&o.charCodeAt(u)===47;++u);for(var c=o.length,h=c-u,d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var m=l.length,y=m-d,_=h<y?h:y,b=-1,S=0;S<=_;++S){if(S===_){if(y>_){if(l.charCodeAt(d+S)===47)return l.slice(d+S+1);if(S===0)return l.slice(d+S)}else h>_&&(o.charCodeAt(u+S)===47?b=S:S===0&&(b=0));break}var T=o.charCodeAt(u+S),N=l.charCodeAt(d+S);if(T!==N)break;T===47&&(b=S)}var x="";for(S=u+b+1;S<=c;++S)(S===c||o.charCodeAt(S)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+l.slice(d+b):(d+=b,l.charCodeAt(d)===47&&++d,l.slice(d))},_makeLong:function(o){return o},dirname:function(o){if(e(o),o.length===0)return".";for(var l=o.charCodeAt(0),u=l===47,c=-1,h=!0,d=o.length-1;d>=1;--d)if(l=o.charCodeAt(d),l===47){if(!h){c=d;break}}else h=!1;return c===-1?u?"/":".":u&&c===1?"//":o.slice(0,c)},basename:function(o,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');e(o);var u=0,c=-1,h=!0,d;if(l!==void 0&&l.length>0&&l.length<=o.length){if(l.length===o.length&&l===o)return"";var m=l.length-1,y=-1;for(d=o.length-1;d>=0;--d){var _=o.charCodeAt(d);if(_===47){if(!h){u=d+1;break}}else y===-1&&(h=!1,y=d+1),m>=0&&(_===l.charCodeAt(m)?--m===-1&&(c=d):(m=-1,c=y))}return u===c?c=y:c===-1&&(c=o.length),o.slice(u,c)}else{for(d=o.length-1;d>=0;--d)if(o.charCodeAt(d)===47){if(!h){u=d+1;break}}else c===-1&&(h=!1,c=d+1);return c===-1?"":o.slice(u,c)}},extname:function(o){e(o);for(var l=-1,u=0,c=-1,h=!0,d=0,m=o.length-1;m>=0;--m){var y=o.charCodeAt(m);if(y===47){if(!h){u=m+1;break}continue}c===-1&&(h=!1,c=m+1),y===46?l===-1?l=m:d!==1&&(d=1):l!==-1&&(d=-1)}return l===-1||c===-1||d===0||d===1&&l===c-1&&l===u+1?"":o.slice(l,c)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return n("/",o)},parse:function(o){e(o);var l={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return l;var u=o.charCodeAt(0),c=u===47,h;c?(l.root="/",h=1):h=0;for(var d=-1,m=0,y=-1,_=!0,b=o.length-1,S=0;b>=h;--b){if(u=o.charCodeAt(b),u===47){if(!_){m=b+1;break}continue}y===-1&&(_=!1,y=b+1),u===46?d===-1?d=b:S!==1&&(S=1):d!==-1&&(S=-1)}return d===-1||y===-1||S===0||S===1&&d===y-1&&d===m+1?y!==-1&&(m===0&&c?l.base=l.name=o.slice(1,y):l.base=l.name=o.slice(m,y)):(m===0&&c?(l.name=o.slice(1,d),l.base=o.slice(1,y)):(l.name=o.slice(m,d),l.base=o.slice(m,y)),l.ext=o.slice(d,y)),m>0?l.dir=o.slice(0,m-1):c&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,qf=s,qf}function nF(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return yd?iF(r):sF(r)}function iF(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let s=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&s===102||t[n+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(SA,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,s=t[2];if(n<bA||n>EA||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function sF(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function oF(r){let e=pv.resolve(r),t=r.charCodeAt(r.length-1);(t===wA||yd&&t===_A)&&e[e.length-1]!==pv.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(TA,"%25")),!yd&&e.includes("\\")&&(e=e.replace(xA,"%5C")),e.includes(`
`)&&(e=e.replace(AA,"%0A")),e.includes("\r")&&(e=e.replace(IA,"%0D")),e.includes("	")&&(e=e.replace(CA,"%09")),n.pathname=e,n}function yA(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return vd?aF(r):lF(r)}function aF(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let s=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&s===102||t[n+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(UA,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,s=t[2];if(n<FA||n>VA||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function lF(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function vA(r){let e=fv.resolve(r),t=r.charCodeAt(r.length-1);(t===MA||vd&&t===LA)&&e[e.length-1]!==fv.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(BA,"%25")),!vd&&e.includes("\\")&&(e=e.replace(jA,"%5C")),e.includes(`
`)&&(e=e.replace($A,"%0A")),e.includes("\r")&&(e=e.replace(zA,"%0D")),e.includes("	")&&(e=e.replace(WA,"%09")),n.pathname=e,n}var Ht,jE,Ti,$E,zE,WE,qE,Ef,Zm,eg,tg,HE,QE,Sf,ma,Tf,qf,dv,pv,KE,_A,wA,bA,EA,yd,SA,TA,xA,AA,IA,CA,GE,RA,kA,PA,NA,OA,DA,LA,MA,FA,VA,vd,UA,BA,jA,$A,zA,WA,uF=An(()=>{je(),ze(),$e(),KM(),YM(),XM(),tF(),mA(),Ht={},jE=_o,Ti={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Ht.parse=ic,Ht.resolve=function(r,e){return ic(r,!1,!0).resolve(e)},Ht.resolveObject=function(r,e){return r?ic(r,!1,!0).resolveObject(e):e},Ht.format=function(r){return Ti.isString(r)&&(r=ic(r)),r instanceof oi?r.format():oi.prototype.format.call(r)},Ht.Url=oi,$E=/^([a-z0-9.+-]+:)/i,zE=/:[0-9]*$/,WE=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,qE=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Ef=["'"].concat(qE),Zm=["%","/","?",";","#"].concat(Ef),eg=["/","?","#"],tg=/^[+a-z0-9A-Z_-]{0,63}$/,HE=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,QE={javascript:!0,"javascript:":!0},Sf={javascript:!0,"javascript:":!0},ma={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Tf=Qi,oi.prototype.parse=function(r,e,t){if(!Ti.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),s=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(s);o[0]=o[0].replace(/\\/g,"/");var l=r=o.join(s);if(l=l.trim(),!t&&r.split("#").length===1){var u=WE.exec(l);if(u)return this.path=l,this.href=l,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?Tf.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=$E.exec(l);if(c){var h=(c=c[0]).toLowerCase();this.protocol=h,l=l.substr(c.length)}if(t||c||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=l.substr(0,2)==="//";!d||c&&Sf[c]||(l=l.substr(2),this.slashes=!0)}if(!Sf[c]&&(d||c&&!ma[c])){for(var m,y,_=-1,b=0;b<eg.length;b++)(S=l.indexOf(eg[b]))!==-1&&(_===-1||S<_)&&(_=S);for((y=_===-1?l.lastIndexOf("@"):l.lastIndexOf("@",_))!==-1&&(m=l.slice(0,y),l=l.slice(y+1),this.auth=decodeURIComponent(m)),_=-1,b=0;b<Zm.length;b++){var S;(S=l.indexOf(Zm[b]))!==-1&&(_===-1||S<_)&&(_=S)}_===-1&&(_=l.length),this.host=l.slice(0,_),l=l.slice(_),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var N=this.hostname.split(/\./),x=(b=0,N.length);b<x;b++){var k=N[b];if(k&&!k.match(tg)){for(var q="",H=0,$=k.length;H<$;H++)k.charCodeAt(H)>127?q+="x":q+=k[H];if(!q.match(tg)){var P=N.slice(0,b),R=N.slice(b+1),V=k.match(HE);V&&(P.push(V[1]),R.unshift(V[2])),R.length&&(l="/"+R.join(".")+l),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=jE.toASCII(this.hostname));var M=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+M,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!QE[h])for(b=0,x=Ef.length;b<x;b++){var O=Ef[b];if(l.indexOf(O)!==-1){var F=encodeURIComponent(O);F===O&&(F=escape(O)),l=l.split(O).join(F)}}var ye=l.indexOf("#");ye!==-1&&(this.hash=l.substr(ye),l=l.slice(0,ye));var se=l.indexOf("?");if(se!==-1?(this.search=l.substr(se),this.query=l.substr(se+1),e&&(this.query=Tf.parse(this.query)),l=l.slice(0,se)):e&&(this.search="",this.query={}),l&&(this.pathname=l),ma[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var Ne=this.search||"";this.path=M+Ne}return this.href=this.format(),this},oi.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&Ti.isObject(this.query)&&Object.keys(this.query).length&&(o=Tf.stringify(this.query));var l=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ma[e])&&s!==!1?(s="//"+(s||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),l&&l.charAt(0)!=="?"&&(l="?"+l),e+s+(t=t.replace(/[?#]/g,function(u){return encodeURIComponent(u)}))+(l=l.replace("#","%23"))+n},oi.prototype.resolve=function(r){return this.resolveObject(ic(r,!1,!0)).format()},oi.prototype.resolveObject=function(r){if(Ti.isString(r)){var e=new oi;e.parse(r,!1,!0),r=e}for(var t=new oi,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var l=Object.keys(r),u=0;u<l.length;u++){var c=l[u];c!=="protocol"&&(t[c]=r[c])}return ma[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!ma[r.protocol]){for(var h=Object.keys(r),d=0;d<h.length;d++){var m=h[d];t[m]=r[m]}return t.href=t.format(),t}if(t.protocol=r.protocol,r.host||Sf[r.protocol])t.pathname=r.pathname;else{for(var y=(r.pathname||"").split("/");y.length&&!(r.host=y.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var _=t.pathname||"",b=t.search||"";t.path=_+b}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var S=t.pathname&&t.pathname.charAt(0)==="/",T=r.host||r.pathname&&r.pathname.charAt(0)==="/",N=T||S||t.host&&r.pathname,x=N,k=t.pathname&&t.pathname.split("/")||[],q=(y=r.pathname&&r.pathname.split("/")||[],t.protocol&&!ma[t.protocol]);if(q&&(t.hostname="",t.port=null,t.host&&(k[0]===""?k[0]=t.host:k.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host=null),N=N&&(y[0]===""||k[0]==="")),T)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,k=y;else if(y.length)k||(k=[]),k.pop(),k=k.concat(y),t.search=r.search,t.query=r.query;else if(!Ti.isNullOrUndefined(r.search))return q&&(t.hostname=t.host=k.shift(),(V=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=V.shift(),t.host=t.hostname=V.shift())),t.search=r.search,t.query=r.query,Ti.isNull(t.pathname)&&Ti.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!k.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var H=k.slice(-1)[0],$=(t.host||r.host||k.length>1)&&(H==="."||H==="..")||H==="",P=0,R=k.length;R>=0;R--)(H=k[R])==="."?k.splice(R,1):H===".."?(k.splice(R,1),P++):P&&(k.splice(R,1),P--);if(!N&&!x)for(;P--;P)k.unshift("..");!N||k[0]===""||k[0]&&k[0].charAt(0)==="/"||k.unshift(""),$&&k.join("/").substr(-1)!=="/"&&k.push("");var V,M=k[0]===""||k[0]&&k[0].charAt(0)==="/";return q&&(t.hostname=t.host=M?"":k.length?k.shift():"",(V=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=V.shift(),t.host=t.hostname=V.shift())),(N=N||t.host&&k.length)&&!M&&k.unshift(""),k.length?t.pathname=k.join("/"):(t.pathname=null,t.path=null),Ti.isNull(t.pathname)&&Ti.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t},oi.prototype.parseHost=function(){var r=this.host,e=zE.exec(r);e&&((e=e[0])!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)},Ht.Url,Ht.format,Ht.resolve,Ht.resolveObject,qf={},dv=!1,pv=rF(),KE=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ht.URL=typeof URL<"u"?URL:null,Ht.pathToFileURL=oF,Ht.fileURLToPath=nF,Ht.Url,Ht.format,Ht.resolve,Ht.resolveObject,Ht.URL,_A=92,wA=47,bA=97,EA=122,yd=KE==="win32",SA=/\//g,TA=/%/g,xA=/\\/g,AA=/\n/g,IA=/\r/g,CA=/\t/g,GE=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ht.URL=typeof URL<"u"?URL:null,Ht.pathToFileURL=vA,Ht.fileURLToPath=yA,RA=Ht.Url,kA=Ht.format,PA=Ht.resolve,NA=Ht.resolveObject,OA=Ht.parse,DA=Ht.URL,LA=92,MA=47,FA=97,VA=122,vd=GE==="win32",UA=/\//g,BA=/%/g,jA=/\\/g,$A=/\n/g,zA=/\r/g,WA=/\t/g}),cF=Ke((r,e)=>{je(),ze(),$e(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),g0=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=n;var e=Ga(),t=(Kr(),Kt(Qr));function n(o,l){let u=new Array(o.length);for(let c=0;c<o.length;c++)typeof o[c].chunk=="string"?u[c]=t.Buffer.from(o[c].chunk,"utf8"):u[c]=o[c].chunk;this._write(t.Buffer.concat(u),"binary",l)}var s=class extends e.Duplex{constructor(o,l,u){super({objectMode:!0}),this.proxy=l,this.socket=u,this.writeQueue=[],o.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",c=>{!this.destroyed&&this.readable&&this.push(c)})}_read(o){this.proxy.read(o)}_write(o,l,u){this.isSocketOpen?this.writeToProxy(o,l,u):this.writeQueue.push({chunk:o,encoding:l,cb:u})}_final(o){this.writeQueue=[],this.proxy.end(o)}_destroy(o,l){this.writeQueue=[],this.proxy.destroy(),l(o)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(o,l,u){this.proxy.write(o,l)===!1?this.proxy.once("drain",u):u()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:o,encoding:l,cb:u}=this.writeQueue.shift();this.writeToProxy(o,l,u)}}};r.BufferedDuplex=s}),xf=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var t=(Kr(),Kt(Qr)),n=e(cF()),s=e(Us()),o=Ga(),l=e(Xd()),u=g0(),c=(0,s.default)("mqttjs:ws"),h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function d(N,x){let k=`${N.protocol}://${N.hostname}:${N.port}${N.path}`;return typeof N.transformWsUrl=="function"&&(k=N.transformWsUrl(k,N,x)),k}function m(N){let x=N;return N.port||(N.protocol==="wss"?x.port=443:x.port=80),N.path||(x.path="/"),N.wsOptions||(x.wsOptions={}),!l.default&&!N.forceNativeWebSocket&&N.protocol==="wss"&&h.forEach(k=>{Object.prototype.hasOwnProperty.call(N,k)&&!Object.prototype.hasOwnProperty.call(N.wsOptions,k)&&(x.wsOptions[k]=N[k])}),x}function y(N){let x=m(N);if(x.hostname||(x.hostname=x.host),!x.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let k=new URL(document.URL);x.hostname=k.hostname,x.port||(x.port=Number(k.port))}return x.objectMode===void 0&&(x.objectMode=!(x.binary===!0||x.binary===void 0)),x}function _(N,x,k){c("createWebSocket"),c(`protocol: ${k.protocolId} ${k.protocolVersion}`);let q=k.protocolId==="MQIsdp"&&k.protocolVersion===3?"mqttv3.1":"mqtt";c(`creating new Websocket for url: ${x} and protocol: ${q}`);let H;return k.createWebsocket?H=k.createWebsocket(x,[q],k):H=new n.default(x,[q],k.wsOptions),H}function b(N,x){let k=x.protocolId==="MQIsdp"&&x.protocolVersion===3?"mqttv3.1":"mqtt",q=d(x,N),H;return x.createWebsocket?H=x.createWebsocket(q,[k],x):H=new WebSocket(q,[k]),H.binaryType="arraybuffer",H}var S=(N,x)=>{c("streamBuilder");let k=m(x);k.hostname=k.hostname||k.host||"localhost";let q=d(k,N),H=_(N,q,k),$=n.default.createWebSocketStream(H,k.wsOptions);return $.url=q,H.on("close",()=>{$.destroy()}),$};r.streamBuilder=S;var T=(N,x)=>{c("browserStreamBuilder");let k,q=y(x).browserBufferSize||1024*512,H=x.browserBufferTimeout||1e3,$=!x.objectMode,P=b(N,x),R=M(x,se,Ne);x.objectMode||(R._writev=u.writev.bind(R)),R.on("close",()=>{P.close()});let V=typeof P.addEventListener<"u";P.readyState===P.OPEN?(k=R,k.socket=P):(k=new u.BufferedDuplex(x,R,P),V?P.addEventListener("open",W):P.onopen=W),V?(P.addEventListener("close",O),P.addEventListener("error",F),P.addEventListener("message",ye)):(P.onclose=O,P.onerror=F,P.onmessage=ye);function M(Ie,he,Re){let B=new o.Transform({objectMode:Ie.objectMode});return B._write=he,B._flush=Re,B}function W(){c("WebSocket onOpen"),k instanceof u.BufferedDuplex&&k.socketReady()}function O(Ie){c("WebSocket onClose",Ie),k.end(),k.destroy()}function F(Ie){c("WebSocket onError",Ie);let he=new Error("WebSocket error");he.event=Ie,k.destroy(he)}async function ye(Ie){if(!R||R.destroyed||!R.readable)return;let{data:he}=Ie;he instanceof ArrayBuffer?he=t.Buffer.from(he):he instanceof Blob?he=t.Buffer.from(await new Response(he).arrayBuffer()):he=t.Buffer.from(he,"utf8"),R.push(he)}function se(Ie,he,Re){if(P.bufferedAmount>q){setTimeout(se,H,Ie,he,Re);return}$&&typeof Ie=="string"&&(Ie=t.Buffer.from(Ie,"utf8"));try{P.send(Ie)}catch(B){return Re(B)}Re()}function Ne(Ie){P.close(),Ie()}return k};r.browserStreamBuilder=T}),y0={};yu(y0,{Server:()=>lr,Socket:()=>lr,Stream:()=>lr,_createServerHandle:()=>lr,_normalizeArgs:()=>lr,_setSimultaneousAccepts:()=>lr,connect:()=>lr,createConnection:()=>lr,createServer:()=>lr,default:()=>qA,isIP:()=>lr,isIPv4:()=>lr,isIPv6:()=>lr});function lr(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var qA,HA=An(()=>{je(),ze(),$e(),qA={_createServerHandle:lr,_normalizeArgs:lr,_setSimultaneousAccepts:lr,connect:lr,createConnection:lr,createServer:lr,isIP:lr,isIPv4:lr,isIPv6:lr,Server:lr,Socket:lr,Stream:lr}}),QA=Ke((r,e)=>{je(),ze(),$e(),e.exports={}}),YE=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0});var t=e((HA(),Kt(y0))),n=e(Us()),s=e(QA()),o=(0,n.default)("mqttjs:tcp"),l=(u,c)=>{if(c.port=c.port||1883,c.hostname=c.hostname||c.host||"localhost",c.socksProxy)return(0,s.default)(c.hostname,c.port,c.socksProxy,{timeout:c.socksTimeout});let{port:h,path:d}=c,m=c.hostname;return o("port %d and host %s",h,m),t.default.createConnection({port:h,host:m,path:d})};r.default=l}),KA={};yu(KA,{default:()=>GA});var GA,hF=An(()=>{je(),ze(),$e(),GA={}}),JE=Ke(r=>{je(),ze(),$e();var e=r&&r.__rest||function(d,m){var y={};for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&m.indexOf(_)<0&&(y[_]=d[_]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,_=Object.getOwnPropertySymbols(d);b<_.length;b++)m.indexOf(_[b])<0&&Object.prototype.propertyIsEnumerable.call(d,_[b])&&(y[_[b]]=d[_[b]]);return y},t=r&&r.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0});var n=t((hF(),Kt(KA))),s=t((HA(),Kt(y0))),o=t(Us()),l=t(QA()),u=(0,o.default)("mqttjs:tls");function c(d){let{host:m,port:y,socksProxy:_}=d,b=e(d,["host","port","socksProxy"]);return n.default.connect(_?Object.assign(Object.assign({},b),{socket:(0,l.default)(m,y,_,{timeout:d.socksTimeout})}):d)}var h=(d,m)=>{m.port=m.port||8883,m.host=m.hostname||m.host||"localhost",s.default.isIP(m.host)===0&&(m.servername=m.host),m.rejectUnauthorized=m.rejectUnauthorized!==!1,delete m.path,u("port %d host %s rejectUnauthorized %b",m.port,m.host,m.rejectUnauthorized);let y=c(m);y.on("secureConnect",()=>{m.rejectUnauthorized&&!y.authorized?y.emit("error",new Error("TLS not authorized")):y.removeListener("error",_)});function _(b){m.rejectUnauthorized&&d.emit("error",b),y.end()}return y.on("error",_),y};r.default=h}),XE=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=(Kr(),Kt(Qr)),t=Ga(),n=g0(),s,o,l;function u(){let y=new t.Transform;return y._write=(_,b,S)=>{s.send({data:_.buffer,success(){S()},fail(T){S(new Error(T))}})},y._flush=_=>{s.close({success(){_()}})},y}function c(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function h(y,_){let b=y.protocol==="wxs"?"wss":"ws",S=`${b}://${y.hostname}${y.path}`;return y.port&&y.port!==80&&y.port!==443&&(S=`${b}://${y.hostname}:${y.port}${y.path}`),typeof y.transformWsUrl=="function"&&(S=y.transformWsUrl(S,y,_)),S}function d(){s.onOpen(()=>{l.socketReady()}),s.onMessage(y=>{let{data:_}=y;_ instanceof ArrayBuffer?_=e.Buffer.from(_):_=e.Buffer.from(_,"utf8"),o.push(_)}),s.onClose(()=>{l.emit("close"),l.end(),l.destroy()}),s.onError(y=>{let _=new Error(y.errMsg);l.destroy(_)})}var m=(y,_)=>{if(_.hostname=_.hostname||_.host,!_.hostname)throw new Error("Could not determine host. Specify host manually.");let b=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";c(_);let S=h(_,y);s=wx.connectSocket({url:S,protocols:[b]}),o=u(),l=new n.BufferedDuplex(_,o,s),l._destroy=(N,x)=>{s.close({success(){x&&x(N)}})};let T=l.destroy;return l.destroy=(N,x)=>(l.destroy=T,setTimeout(()=>{s.close({fail(){l._destroy(N,x)}})},0),l),d(),l};r.default=m}),ZE=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=(Kr(),Kt(Qr)),t=Ga(),n=g0(),s,o,l,u=!1;function c(){let _=new t.Transform;return _._write=(b,S,T)=>{s.sendSocketMessage({data:b.buffer,success(){T()},fail(){T(new Error)}})},_._flush=b=>{s.closeSocket({success(){b()}})},_}function h(_){_.hostname||(_.hostname="localhost"),_.path||(_.path="/"),_.wsOptions||(_.wsOptions={})}function d(_,b){let S=_.protocol==="alis"?"wss":"ws",T=`${S}://${_.hostname}${_.path}`;return _.port&&_.port!==80&&_.port!==443&&(T=`${S}://${_.hostname}:${_.port}${_.path}`),typeof _.transformWsUrl=="function"&&(T=_.transformWsUrl(T,_,b)),T}function m(){u||(u=!0,s.onSocketOpen(()=>{l.socketReady()}),s.onSocketMessage(_=>{if(typeof _.data=="string"){let b=e.Buffer.from(_.data,"base64");o.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let S=b.result;S instanceof ArrayBuffer?S=e.Buffer.from(S):S=e.Buffer.from(S,"utf8"),o.push(S)}),b.readAsArrayBuffer(_.data)}}),s.onSocketClose(()=>{l.end(),l.destroy()}),s.onSocketError(_=>{l.destroy(_)}))}var y=(_,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let S=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";h(b);let T=d(b,_);return s=b.my,s.connectSocket({url:T,protocols:S}),o=c(),l=new n.BufferedDuplex(b,o,s),m(),l};r.default=y}),fF=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=d;var t=e(Us()),n=e((uF(),Kt(gA))),s=e(ov()),o=e(Xd());typeof(Bt==null?void 0:Bt.nextTick)!="function"&&(Bt.nextTick=setImmediate);var l=(0,t.default)("mqttjs"),u=null;function c(m){let y;m.auth&&(y=m.auth.match(/^(.+):(.+)$/),y?(m.username=y[1],m.password=y[2]):m.username=m.auth)}function h(m,y){var _,b,S;if(l("connecting to an MQTT broker..."),typeof m=="object"&&!y&&(y=m,m=""),y=y||{},m&&typeof m=="string"){let x=n.default.parse(m,!0),k={};if(x.port!=null&&(k.port=Number(x.port)),k.host=x.hostname,k.query=x.query,k.auth=x.auth,k.protocol=x.protocol,k.path=x.path,y=Object.assign(Object.assign({},k),y),!y.protocol)throw new Error("Missing protocol");y.protocol=y.protocol.replace(/:$/,"")}if(y.unixSocket=y.unixSocket||((_=y.protocol)===null||_===void 0?void 0:_.includes("+unix")),y.unixSocket?y.protocol=y.protocol.replace("+unix",""):!(!((b=y.protocol)===null||b===void 0)&&b.startsWith("ws"))&&!(!((S=y.protocol)===null||S===void 0)&&S.startsWith("wx"))&&delete y.path,c(y),y.query&&typeof y.query.clientId=="string"&&(y.clientId=y.query.clientId),o.default||y.unixSocket?y.socksProxy=void 0:y.socksProxy===void 0&&typeof Bt<"u"&&(y.socksProxy=Bt.env.MQTTJS_SOCKS_PROXY),y.cert&&y.key)if(y.protocol){if(["mqtts","wss","wxs","alis"].indexOf(y.protocol)===-1)switch(y.protocol){case"mqtt":y.protocol="mqtts";break;case"ws":y.protocol="wss";break;case"wx":y.protocol="wxs";break;case"ali":y.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${y.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(u||(u={},!o.default&&!y.forceNativeWebSocket?(u.ws=xf().streamBuilder,u.wss=xf().streamBuilder,u.mqtt=YE().default,u.tcp=YE().default,u.ssl=JE().default,u.tls=u.ssl,u.mqtts=JE().default):(u.ws=xf().browserStreamBuilder,u.wss=xf().browserStreamBuilder,u.wx=XE().default,u.wxs=XE().default,u.ali=ZE().default,u.alis=ZE().default)),!u[y.protocol]){let x=["mqtts","wss"].indexOf(y.protocol)!==-1;y.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((k,q)=>x&&q%2===0?!1:typeof u[k]=="function")[0]}if(y.clean===!1&&!y.clientId)throw new Error("Missing clientId for unclean clients");y.protocol&&(y.defaultProtocol=y.protocol);function T(x){return y.servers&&((!x._reconnectCount||x._reconnectCount===y.servers.length)&&(x._reconnectCount=0),y.host=y.servers[x._reconnectCount].host,y.port=y.servers[x._reconnectCount].port,y.protocol=y.servers[x._reconnectCount].protocol?y.servers[x._reconnectCount].protocol:y.defaultProtocol,y.hostname=y.host,x._reconnectCount++),l("calling streambuilder for",y.protocol),u[y.protocol](x,y)}let N=new s.default(T,y);return N.on("error",()=>{}),N}function d(m,y,_=!0){return new Promise((b,S)=>{let T=h(m,y),N={connect:k=>{x(),b(T)},end:()=>{x(),b(T)},error:k=>{x(),T.end(),S(k)}};_===!1&&(N.close=()=>{N.error(new Error("Couldn't connect to server"))});function x(){Object.keys(N).forEach(k=>{T.off(k,N[k])})}Object.keys(N).forEach(k=>{T.on(k,N[k])})})}r.default=h}),e1=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(_,b,S,T){T===void 0&&(T=S);var N=Object.getOwnPropertyDescriptor(b,S);(!N||("get"in N?!b.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return b[S]}}),Object.defineProperty(_,T,N)}:function(_,b,S,T){T===void 0&&(T=S),_[T]=b[S]}),t=r&&r.__setModuleDefault||(Object.create?function(_,b){Object.defineProperty(_,"default",{enumerable:!0,value:b})}:function(_,b){_.default=b}),n=r&&r.__importStar||function(){var _=function(b){return _=Object.getOwnPropertyNames||function(S){var T=[];for(var N in S)Object.prototype.hasOwnProperty.call(S,N)&&(T[T.length]=N);return T},_(b)};return function(b){if(b&&b.__esModule)return b;var S={};if(b!=null)for(var T=_(b),N=0;N<T.length;N++)T[N]!=="default"&&e(S,b,T[N]);return t(S,b),S}}(),s=r&&r.__exportStar||function(_,b){for(var S in _)S!=="default"&&!Object.prototype.hasOwnProperty.call(b,S)&&e(b,_,S)},o=r&&r.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var l=o(ov());r.MqttClient=l.default;var u=o(Qx());r.DefaultMessageIdProvider=u.default;var c=o(QM());r.UniqueMessageIdProvider=c.default;var h=o(Kx());r.Store=h.default;var d=n(fF());r.connect=d.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return d.connectAsync}});var m=o(cA());r.KeepaliveManager=m.default,r.Client=l.default,s(ov(),r),s(_u(),r);var y=Jd();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return y.ReasonCodes}})}),dF=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(l,u,c,h){h===void 0&&(h=c);var d=Object.getOwnPropertyDescriptor(u,c);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(l,h,d)}:function(l,u,c,h){h===void 0&&(h=c),l[h]=u[c]}),t=r&&r.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),n=r&&r.__importStar||function(){var l=function(u){return l=Object.getOwnPropertyNames||function(c){var h=[];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(h[h.length]=d);return h},l(u)};return function(u){if(u&&u.__esModule)return u;var c={};if(u!=null)for(var h=l(u),d=0;d<h.length;d++)h[d]!=="default"&&e(c,u,h[d]);return t(c,u),c}}(),s=r&&r.__exportStar||function(l,u){for(var c in l)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&e(u,l,c)};Object.defineProperty(r,"__esModule",{value:!0});var o=n(e1());r.default=o,s(e1(),r)});const pF=dF();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/function mF(){const[r,e]=pe.useState([]),[t,n]=pe.useState(""),s=pe.useRef(null),o=pe.useRef("client-"+Math.random().toString(16).substr(2,8)),l=pe.useRef(new Set),u=pe.useRef(null),c="r2s",h="wss://devapi.uniscore.vn:443/mqtt",[d,m]=pe.useState(null),[y,_]=pe.useState(!1);pe.useEffect(()=>{const S=JSON.parse(localStorage.getItem("user")||"null");S&&(m(S),S.roles&&S.roles[0]==="ADMIN"&&_(!0))},[]),pe.useEffect(()=>{if(!d)return;const S=BL(bE(xE,"messages"),T=>{const x=T.docs.map(k=>{const q=k.data();return{text:q.text,sender:q.sender,isMine:q.sender===d.email,beAdmin:q.beAdmin,timestamp:q.timestamp.toDate()}}).sort((k,q)=>k.timestamp.getTime()-q.timestamp.getTime());e(x)});return()=>S()},[d]),pe.useEffect(()=>{if(!d||s.current)return;const S=pF.connect(h,{clientId:o.current,username:"football",password:"football123"});return s.current=S,S.on("connect",()=>{console.log("Connected to MQTT broker"),S.subscribe(c,T=>{T&&console.error("Subscribe error:",T)})}),S.on("message",async(T,N)=>{const x=N.toString(),[k,q,H]=x.split("::");var $;if(H==="true"?$=!0:$=!1,d!=null&&d.email){const P=k===d.email;(!P||!l.current.has(q))&&e(R=>[...R,{text:q,isMine:P,beAdmin:$,sender:k,timestamp:new Date}])}else console.log("User is not loaded yet")}),()=>{var T;(T=s.current)!=null&&T.connected&&(s.current.end(),s.current=null)}},[d]),pe.useEffect(()=>{u.current&&setTimeout(()=>{var S;(S=u.current)==null||S.scrollIntoView({behavior:"smooth",block:"end"})},100)},[r]);const b=async()=>{var T;if((T=s.current)!=null&&T.connected&&t.trim()){var S;y?S=(d==null?void 0:d.email)+"::"+t+"::true":S=(d==null?void 0:d.email)+"::"+t+"::false",s.current.publish(c,S,{qos:0,retain:!1}),e(N=>[...N,{text:t,isMine:!0,beAdmin:y,sender:(d==null?void 0:d.email)||"unknown",timestamp:new Date}]),l.current.add(t),n(""),await UL(bE(xE,"messages"),{sender:d==null?void 0:d.email,text:t,beAdmin:y,timestamp:new Date})}};return be("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",minHeight:"90vh"},children:[z("h1",{className:"text-[36px] font-semibold mb-4 mt-4",children:"Community Chat"}),z("div",{style:{width:"100%",backgroundColor:"white",boxShadow:"0px 2px 10px rgba(0, 0, 0, 0.1)",borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",gap:"8px",overflowY:"auto",height:"350px"},children:be("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[r.map((S,T)=>be("div",{style:{display:"flex",flexDirection:"column",alignItems:S.isMine?"flex-end":"flex-start",maxWidth:"100%"},className:`px-4 ${S.isMine?"pl-28 sm:pl-60 md:pl-80 lg:pl-[30rem] xl:pl-[40rem] pr-0":"pl-0 pr-28 sm:pr-60 md:pr-80 lg:pr-[30rem] xl:pr-[40rem]"}`,children:[!S.isMine&&S.beAdmin&&z("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px",marginTop:"4px",color:"black"},children:"ADMIN"}),!S.isMine&&!S.beAdmin&&z("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px",marginTop:"4px",color:"black"},children:S.sender}),z("div",{style:{backgroundColor:S.isMine?"#3b82f6":"#f472b6",color:"white",padding:"10px",borderRadius:"8px",maxWidth:"100%"},children:S.text})]},T)),z("div",{ref:u})]})}),be("div",{style:{width:"100%",marginTop:"16px"},children:[z("textarea",{value:t,onChange:S=>n(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),b())},placeholder:"Enter message...",rows:1,className:"w-full resize-none border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{overflow:"hidden"},ref:S=>{S&&(S.style.height="auto",S.style.height=S.scrollHeight+"px")}}),z("div",{style:{textAlign:"center",marginTop:"0px"},children:z("button",{onClick:b,style:{backgroundColor:"#3b82f6",color:"white",padding:"8px 16px",borderRadius:"4px",marginTop:"12px",cursor:"pointer",border:"none"},children:"Send"})})]})]})}var Zc=r=>r.type==="checkbox",Ea=r=>r instanceof Date,Tn=r=>r==null;const YA=r=>typeof r=="object";var Tr=r=>!Tn(r)&&!Array.isArray(r)&&YA(r)&&!Ea(r),gF=r=>Tr(r)&&r.target?Zc(r.target)?r.target.checked:r.target.value:r,yF=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,vF=(r,e)=>r.has(yF(e)),_F=r=>{const e=r.constructor&&r.constructor.prototype;return Tr(e)&&e.hasOwnProperty("isPrototypeOf")},v0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cn(r){let e;const t=Array.isArray(r),n=typeof FileList<"u"?r instanceof FileList:!1;if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(v0&&(r instanceof Blob||n))&&(t||Tr(r)))if(e=t?[]:{},!t&&!_F(r))e=r;else for(const s in r)r.hasOwnProperty(s)&&(e[s]=cn(r[s]));else return r;return e}var Zd=r=>Array.isArray(r)?r.filter(Boolean):[],Rr=r=>r===void 0,ht=(r,e,t)=>{if(!e||!Tr(r))return t;const n=Zd(e.split(/[,[\].]+?/)).reduce((s,o)=>Tn(s)?s:s[o],r);return Rr(n)||n===r?Rr(r[e])?t:r[e]:n},Gi=r=>typeof r=="boolean",_0=r=>/^\w*$/.test(r),JA=r=>Zd(r.replace(/["|']|\]/g,"").split(/\.|\[/)),rr=(r,e,t)=>{let n=-1;const s=_0(e)?[e]:JA(e),o=s.length,l=o-1;for(;++n<o;){const u=s[n];let c=t;if(n!==l){const h=r[u];c=Tr(h)||Array.isArray(h)?h:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;r[u]=c,r=r[u]}};const t1={BLUR:"blur",FOCUS_OUT:"focusout"},Ci={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Pt.createContext(null);var wF=(r,e,t,n=!0)=>{const s={defaultValues:e._defaultValues};for(const o in r)Object.defineProperty(s,o,{get:()=>{const l=o;return e._proxyFormState[l]!==Ci.all&&(e._proxyFormState[l]=!n||Ci.all),r[l]}});return s},ts=r=>typeof r=="string",bF=(r,e,t,n,s)=>ts(r)?(n&&e.watch.add(r),ht(t,r,s)):Array.isArray(r)?r.map(o=>(n&&e.watch.add(o),ht(t,o))):(n&&(e.watchAll=!0),t),EF=(r,e,t,n,s)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:s||!0}}:{},Ec=r=>Array.isArray(r)?r:[r],r1=()=>{let r=[];return{get observers(){return r},next:s=>{for(const o of r)o.next&&o.next(s)},subscribe:s=>(r.push(s),{unsubscribe:()=>{r=r.filter(o=>o!==s)}}),unsubscribe:()=>{r=[]}}},mv=r=>Tn(r)||!YA(r);function wo(r,e){if(mv(r)||mv(e))return r===e;if(Ea(r)&&Ea(e))return r.getTime()===e.getTime();const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t){const o=r[s];if(!n.includes(s))return!1;if(s!=="ref"){const l=e[s];if(Ea(o)&&Ea(l)||Tr(o)&&Tr(l)||Array.isArray(o)&&Array.isArray(l)?!wo(o,l):o!==l)return!1}}return!0}var Sn=r=>Tr(r)&&!Object.keys(r).length,w0=r=>r.type==="file",Ri=r=>typeof r=="function",_d=r=>{if(!v0)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},XA=r=>r.type==="select-multiple",b0=r=>r.type==="radio",SF=r=>b0(r)||Zc(r),rg=r=>_d(r)&&r.isConnected;function TF(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=Rr(r)?n++:r[e[n++]];return r}function xF(r){for(const e in r)if(r.hasOwnProperty(e)&&!Rr(r[e]))return!1;return!0}function Mr(r,e){const t=Array.isArray(e)?e:_0(e)?[e]:JA(e),n=t.length===1?r:TF(r,t),s=t.length-1,o=t[s];return n&&delete n[o],s!==0&&(Tr(n)&&Sn(n)||Array.isArray(n)&&xF(n))&&Mr(r,t.slice(0,-1)),r}var ZA=r=>{for(const e in r)if(Ri(r[e]))return!0;return!1};function wd(r,e={}){const t=Array.isArray(r);if(Tr(r)||t)for(const n in r)Array.isArray(r[n])||Tr(r[n])&&!ZA(r[n])?(e[n]=Array.isArray(r[n])?[]:{},wd(r[n],e[n])):Tn(r[n])||(e[n]=!0);return e}function eI(r,e,t){const n=Array.isArray(r);if(Tr(r)||n)for(const s in r)Array.isArray(r[s])||Tr(r[s])&&!ZA(r[s])?Rr(e)||mv(t[s])?t[s]=Array.isArray(r[s])?wd(r[s],[]):{...wd(r[s])}:eI(r[s],Tn(e)?{}:e[s],t[s]):t[s]=!wo(r[s],e[s]);return t}var sc=(r,e)=>eI(r,e,wd(e));const n1={value:!1,isValid:!1},i1={value:!0,isValid:!0};var tI=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!Rr(r[0].attributes.value)?Rr(r[0].value)||r[0].value===""?i1:{value:r[0].value,isValid:!0}:i1:n1}return n1},rI=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>Rr(r)?r:e?r===""?NaN:r&&+r:t&&ts(r)?new Date(r):n?n(r):r;const s1={isValid:!1,value:null};var nI=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,s1):s1;function o1(r){const e=r.ref;return w0(e)?e.files:b0(e)?nI(r.refs).value:XA(e)?[...e.selectedOptions].map(({value:t})=>t):Zc(e)?tI(r.refs).value:rI(Rr(e.value)?r.ref.value:e.value,r)}var AF=(r,e,t,n)=>{const s={};for(const o of r){const l=ht(e,o);l&&rr(s,o,l._f)}return{criteriaMode:t,names:[...r],fields:s,shouldUseNativeValidation:n}},bd=r=>r instanceof RegExp,oc=r=>Rr(r)?r:bd(r)?r.source:Tr(r)?bd(r.value)?r.value.source:r.value:r,a1=r=>({isOnSubmit:!r||r===Ci.onSubmit,isOnBlur:r===Ci.onBlur,isOnChange:r===Ci.onChange,isOnAll:r===Ci.all,isOnTouch:r===Ci.onTouched});const l1="AsyncFunction";var IF=r=>!!r&&!!r.validate&&!!(Ri(r.validate)&&r.validate.constructor.name===l1||Tr(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===l1)),CF=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),u1=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const Sc=(r,e,t,n)=>{for(const s of t||Object.keys(r)){const o=ht(r,s);if(o){const{_f:l,...u}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],s)&&!n)return!0;if(l.ref&&e(l.ref,l.name)&&!n)return!0;if(Sc(u,e))break}else if(Tr(u)&&Sc(u,e))break}}};function c1(r,e,t){const n=ht(r,t);if(n||_0(t))return{error:n,name:t};const s=t.split(".");for(;s.length;){const o=s.join("."),l=ht(e,o),u=ht(r,o);if(l&&!Array.isArray(l)&&t!==o)return{name:t};if(u&&u.type)return{name:o,error:u};s.pop()}return{name:t}}var RF=(r,e,t,n)=>{t(r);const{name:s,...o}=r;return Sn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===(!n||Ci.all))},kF=(r,e,t)=>!r||!e||r===e||Ec(r).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),PF=(r,e,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||r):(t?n.isOnBlur:s.isOnBlur)?!r:(t?n.isOnChange:s.isOnChange)?r:!0,NF=(r,e)=>!Zd(ht(r,e)).length&&Mr(r,e),OF=(r,e,t)=>{const n=Ec(ht(r,t));return rr(n,"root",e[t]),rr(r,t,n),r},Hf=r=>ts(r);function h1(r,e,t="validate"){if(Hf(r)||Array.isArray(r)&&r.every(Hf)||Gi(r)&&!r)return{type:t,message:Hf(r)?r:"",ref:e}}var Pl=r=>Tr(r)&&!bd(r)?r:{value:r,message:""},f1=async(r,e,t,n,s,o)=>{const{ref:l,refs:u,required:c,maxLength:h,minLength:d,min:m,max:y,pattern:_,validate:b,name:S,valueAsNumber:T,mount:N}=r._f,x=ht(t,S);if(!N||e.has(S))return{};const k=u?u[0]:l,q=O=>{s&&k.reportValidity&&(k.setCustomValidity(Gi(O)?"":O||""),k.reportValidity())},H={},$=b0(l),P=Zc(l),R=$||P,V=(T||w0(l))&&Rr(l.value)&&Rr(x)||_d(l)&&l.value===""||x===""||Array.isArray(x)&&!x.length,M=EF.bind(null,S,n,H),W=(O,F,ye,se=bs.maxLength,Ne=bs.minLength)=>{const Ie=O?F:ye;H[S]={type:O?se:Ne,message:Ie,ref:l,...M(O?se:Ne,Ie)}};if(o?!Array.isArray(x)||!x.length:c&&(!R&&(V||Tn(x))||Gi(x)&&!x||P&&!tI(u).isValid||$&&!nI(u).isValid)){const{value:O,message:F}=Hf(c)?{value:!!c,message:c}:Pl(c);if(O&&(H[S]={type:bs.required,message:F,ref:k,...M(bs.required,F)},!n))return q(F),H}if(!V&&(!Tn(m)||!Tn(y))){let O,F;const ye=Pl(y),se=Pl(m);if(!Tn(x)&&!isNaN(x)){const Ne=l.valueAsNumber||x&&+x;Tn(ye.value)||(O=Ne>ye.value),Tn(se.value)||(F=Ne<se.value)}else{const Ne=l.valueAsDate||new Date(x),Ie=B=>new Date(new Date().toDateString()+" "+B),he=l.type=="time",Re=l.type=="week";ts(ye.value)&&x&&(O=he?Ie(x)>Ie(ye.value):Re?x>ye.value:Ne>new Date(ye.value)),ts(se.value)&&x&&(F=he?Ie(x)<Ie(se.value):Re?x<se.value:Ne<new Date(se.value))}if((O||F)&&(W(!!O,ye.message,se.message,bs.max,bs.min),!n))return q(H[S].message),H}if((h||d)&&!V&&(ts(x)||o&&Array.isArray(x))){const O=Pl(h),F=Pl(d),ye=!Tn(O.value)&&x.length>+O.value,se=!Tn(F.value)&&x.length<+F.value;if((ye||se)&&(W(ye,O.message,F.message),!n))return q(H[S].message),H}if(_&&!V&&ts(x)){const{value:O,message:F}=Pl(_);if(bd(O)&&!x.match(O)&&(H[S]={type:bs.pattern,message:F,ref:l,...M(bs.pattern,F)},!n))return q(F),H}if(b){if(Ri(b)){const O=await b(x,t),F=h1(O,k);if(F&&(H[S]={...F,...M(bs.validate,F.message)},!n))return q(F.message),H}else if(Tr(b)){let O={};for(const F in b){if(!Sn(O)&&!n)break;const ye=h1(await b[F](x,t),k,F);ye&&(O={...ye,...M(F,ye.message)},q(ye.message),n&&(H[S]=O))}if(!Sn(O)&&(H[S]={ref:k,...O},!n))return H}}return q(!0),H};const DF={mode:Ci.onSubmit,reValidateMode:Ci.onChange,shouldFocusError:!0};function LF(r={}){let e={...DF,...r},t={submitCount:0,isDirty:!1,isLoading:Ri(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let s=Tr(e.defaultValues)||Tr(e.values)?cn(e.values||e.defaultValues)||{}:{},o=e.shouldUnregister?{}:cn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,h=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...d};const y={array:r1(),state:r1()},_=a1(e.mode),b=a1(e.reValidateMode),S=e.criteriaMode===Ci.all,T=Q=>re=>{clearTimeout(h),h=setTimeout(Q,re)},N=async Q=>{if(!e.disabled&&(d.isValid||m.isValid||Q)){const re=e.resolver?Sn((await V()).errors):await W(n,!0);re!==t.isValid&&y.state.next({isValid:re})}},x=(Q,re)=>{!e.disabled&&(d.isValidating||d.validatingFields||m.isValidating||m.validatingFields)&&((Q||Array.from(u.mount)).forEach(Z=>{Z&&(re?rr(t.validatingFields,Z,re):Mr(t.validatingFields,Z))}),y.state.next({validatingFields:t.validatingFields,isValidating:!Sn(t.validatingFields)}))},k=(Q,re=[],Z,Ue,v=!0,w=!0)=>{if(Ue&&Z&&!e.disabled){if(l.action=!0,w&&Array.isArray(ht(n,Q))){const A=Z(ht(n,Q),Ue.argA,Ue.argB);v&&rr(n,Q,A)}if(w&&Array.isArray(ht(t.errors,Q))){const A=Z(ht(t.errors,Q),Ue.argA,Ue.argB);v&&rr(t.errors,Q,A),NF(t.errors,Q)}if((d.touchedFields||m.touchedFields)&&w&&Array.isArray(ht(t.touchedFields,Q))){const A=Z(ht(t.touchedFields,Q),Ue.argA,Ue.argB);v&&rr(t.touchedFields,Q,A)}(d.dirtyFields||m.dirtyFields)&&(t.dirtyFields=sc(s,o)),y.state.next({name:Q,isDirty:F(Q,re),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else rr(o,Q,re)},q=(Q,re)=>{rr(t.errors,Q,re),y.state.next({errors:t.errors})},H=Q=>{t.errors=Q,y.state.next({errors:t.errors,isValid:!1})},$=(Q,re,Z,Ue)=>{const v=ht(n,Q);if(v){const w=ht(o,Q,Rr(Z)?ht(s,Q):Z);Rr(w)||Ue&&Ue.defaultChecked||re?rr(o,Q,re?w:o1(v._f)):Ne(Q,w),l.mount&&N()}},P=(Q,re,Z,Ue,v)=>{let w=!1,A=!1;const U={name:Q};if(!e.disabled){if(!Z||Ue){(d.isDirty||m.isDirty)&&(A=t.isDirty,t.isDirty=U.isDirty=F(),w=A!==U.isDirty);const J=wo(ht(s,Q),re);A=!!ht(t.dirtyFields,Q),J?Mr(t.dirtyFields,Q):rr(t.dirtyFields,Q,!0),U.dirtyFields=t.dirtyFields,w=w||(d.dirtyFields||m.dirtyFields)&&A!==!J}if(Z){const J=ht(t.touchedFields,Q);J||(rr(t.touchedFields,Q,Z),U.touchedFields=t.touchedFields,w=w||(d.touchedFields||m.touchedFields)&&J!==Z)}w&&v&&y.state.next(U)}return w?U:{}},R=(Q,re,Z,Ue)=>{const v=ht(t.errors,Q),w=(d.isValid||m.isValid)&&Gi(re)&&t.isValid!==re;if(e.delayError&&Z?(c=T(()=>q(Q,Z)),c(e.delayError)):(clearTimeout(h),c=null,Z?rr(t.errors,Q,Z):Mr(t.errors,Q)),(Z?!wo(v,Z):v)||!Sn(Ue)||w){const A={...Ue,...w&&Gi(re)?{isValid:re}:{},errors:t.errors,name:Q};t={...t,...A},y.state.next(A)}},V=async Q=>{x(Q,!0);const re=await e.resolver(o,e.context,AF(Q||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return x(Q),re},M=async Q=>{const{errors:re}=await V(Q);if(Q)for(const Z of Q){const Ue=ht(re,Z);Ue?rr(t.errors,Z,Ue):Mr(t.errors,Z)}else t.errors=re;return re},W=async(Q,re,Z={valid:!0})=>{for(const Ue in Q){const v=Q[Ue];if(v){const{_f:w,...A}=v;if(w){const U=u.array.has(w.name),J=v._f&&IF(v._f);J&&d.validatingFields&&x([Ue],!0);const ie=await f1(v,u.disabled,o,S,e.shouldUseNativeValidation&&!re,U);if(J&&d.validatingFields&&x([Ue]),ie[w.name]&&(Z.valid=!1,re))break;!re&&(ht(ie,w.name)?U?OF(t.errors,ie,w.name):rr(t.errors,w.name,ie[w.name]):Mr(t.errors,w.name))}!Sn(A)&&await W(A,re,Z)}}return Z.valid},O=()=>{for(const Q of u.unMount){const re=ht(n,Q);re&&(re._f.refs?re._f.refs.every(Z=>!rg(Z)):!rg(re._f.ref))&&xe(Q)}u.unMount=new Set},F=(Q,re)=>!e.disabled&&(Q&&re&&rr(o,Q,re),!wo(G(),s)),ye=(Q,re,Z)=>bF(Q,u,{...l.mount?o:Rr(re)?s:ts(Q)?{[Q]:re}:re},Z,re),se=Q=>Zd(ht(l.mount?o:s,Q,e.shouldUnregister?ht(s,Q,[]):[])),Ne=(Q,re,Z={})=>{const Ue=ht(n,Q);let v=re;if(Ue){const w=Ue._f;w&&(!w.disabled&&rr(o,Q,rI(re,w)),v=_d(w.ref)&&Tn(re)?"":re,XA(w.ref)?[...w.ref.options].forEach(A=>A.selected=v.includes(A.value)):w.refs?Zc(w.ref)?w.refs.length>1?w.refs.forEach(A=>(!A.defaultChecked||!A.disabled)&&(A.checked=Array.isArray(v)?!!v.find(U=>U===A.value):v===A.value)):w.refs[0]&&(w.refs[0].checked=!!v):w.refs.forEach(A=>A.checked=A.value===v):w0(w.ref)?w.ref.value="":(w.ref.value=v,w.ref.type||y.state.next({name:Q,values:cn(o)})))}(Z.shouldDirty||Z.shouldTouch)&&P(Q,v,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&ue(Q)},Ie=(Q,re,Z)=>{for(const Ue in re){const v=re[Ue],w=`${Q}.${Ue}`,A=ht(n,w);(u.array.has(Q)||Tr(v)||A&&!A._f)&&!Ea(v)?Ie(w,v,Z):Ne(w,v,Z)}},he=(Q,re,Z={})=>{const Ue=ht(n,Q),v=u.array.has(Q),w=cn(re);rr(o,Q,w),v?(y.array.next({name:Q,values:cn(o)}),(d.isDirty||d.dirtyFields||m.isDirty||m.dirtyFields)&&Z.shouldDirty&&y.state.next({name:Q,dirtyFields:sc(s,o),isDirty:F(Q,w)})):Ue&&!Ue._f&&!Tn(w)?Ie(Q,w,Z):Ne(Q,w,Z),u1(Q,u)&&y.state.next({...t}),y.state.next({name:l.mount?Q:void 0,values:cn(o)})},Re=async Q=>{l.mount=!0;const re=Q.target;let Z=re.name,Ue=!0;const v=ht(n,Z),w=A=>{Ue=Number.isNaN(A)||Ea(A)&&isNaN(A.getTime())||wo(A,ht(o,Z,A))};if(v){let A,U;const J=re.type?o1(v._f):gF(Q),ie=Q.type===t1.BLUR||Q.type===t1.FOCUS_OUT,_e=!CF(v._f)&&!e.resolver&&!ht(t.errors,Z)&&!v._f.deps||PF(ie,ht(t.touchedFields,Z),t.isSubmitted,b,_),Ze=u1(Z,u,ie);rr(o,Z,J),ie?(v._f.onBlur&&v._f.onBlur(Q),c&&c(0)):v._f.onChange&&v._f.onChange(Q);const et=P(Z,J,ie),ft=!Sn(et)||Ze;if(!ie&&y.state.next({name:Z,type:Q.type,values:cn(o)}),_e)return(d.isValid||m.isValid)&&(e.mode==="onBlur"?ie&&N():ie||N()),ft&&y.state.next({name:Z,...Ze?{}:et});if(!ie&&Ze&&y.state.next({...t}),e.resolver){const{errors:bt}=await V([Z]);if(w(J),Ue){const mt=c1(t.errors,n,Z),_r=c1(bt,n,mt.name||Z);A=_r.error,Z=_r.name,U=Sn(bt)}}else x([Z],!0),A=(await f1(v,u.disabled,o,S,e.shouldUseNativeValidation))[Z],x([Z]),w(J),Ue&&(A?U=!1:(d.isValid||m.isValid)&&(U=await W(n,!0)));Ue&&(v._f.deps&&ue(v._f.deps),R(Z,U,A,et))}},B=(Q,re)=>{if(ht(t.errors,re)&&Q.focus)return Q.focus(),1},ue=async(Q,re={})=>{let Z,Ue;const v=Ec(Q);if(e.resolver){const w=await M(Rr(Q)?Q:v);Z=Sn(w),Ue=Q?!v.some(A=>ht(w,A)):Z}else Q?(Ue=(await Promise.all(v.map(async w=>{const A=ht(n,w);return await W(A&&A._f?{[w]:A}:A)}))).every(Boolean),!(!Ue&&!t.isValid)&&N()):Ue=Z=await W(n);return y.state.next({...!ts(Q)||(d.isValid||m.isValid)&&Z!==t.isValid?{}:{name:Q},...e.resolver||!Q?{isValid:Z}:{},errors:t.errors}),re.shouldFocus&&!Ue&&Sc(n,B,Q?v:u.mount),Ue},G=Q=>{const re={...l.mount?o:s};return Rr(Q)?re:ts(Q)?ht(re,Q):Q.map(Z=>ht(re,Z))},we=(Q,re)=>({invalid:!!ht((re||t).errors,Q),isDirty:!!ht((re||t).dirtyFields,Q),error:ht((re||t).errors,Q),isValidating:!!ht(t.validatingFields,Q),isTouched:!!ht((re||t).touchedFields,Q)}),De=Q=>{Q&&Ec(Q).forEach(re=>Mr(t.errors,re)),y.state.next({errors:Q?t.errors:{}})},oe=(Q,re,Z)=>{const Ue=(ht(n,Q,{_f:{}})._f||{}).ref,v=ht(t.errors,Q)||{},{ref:w,message:A,type:U,...J}=v;rr(t.errors,Q,{...J,...re,ref:Ue}),y.state.next({name:Q,errors:t.errors,isValid:!1}),Z&&Z.shouldFocus&&Ue&&Ue.focus&&Ue.focus()},Ge=(Q,re)=>Ri(Q)?y.state.subscribe({next:Z=>Q(ye(void 0,re),Z)}):ye(Q,re,!0),ce=Q=>y.state.subscribe({next:re=>{kF(Q.name,re.name,Q.exact)&&RF(re,Q.formState||d,ke,Q.reRenderRoot)&&Q.callback({values:{...o},...t,...re})}}).unsubscribe,ee=Q=>(l.mount=!0,m={...m,...Q.formState},ce({...Q,formState:m})),xe=(Q,re={})=>{for(const Z of Q?Ec(Q):u.mount)u.mount.delete(Z),u.array.delete(Z),re.keepValue||(Mr(n,Z),Mr(o,Z)),!re.keepError&&Mr(t.errors,Z),!re.keepDirty&&Mr(t.dirtyFields,Z),!re.keepTouched&&Mr(t.touchedFields,Z),!re.keepIsValidating&&Mr(t.validatingFields,Z),!e.shouldUnregister&&!re.keepDefaultValue&&Mr(s,Z);y.state.next({values:cn(o)}),y.state.next({...t,...re.keepDirty?{isDirty:F()}:{}}),!re.keepIsValid&&N()},me=({disabled:Q,name:re})=>{(Gi(Q)&&l.mount||Q||u.disabled.has(re))&&(Q?u.disabled.add(re):u.disabled.delete(re))},de=(Q,re={})=>{let Z=ht(n,Q);const Ue=Gi(re.disabled)||Gi(e.disabled);return rr(n,Q,{...Z||{},_f:{...Z&&Z._f?Z._f:{ref:{name:Q}},name:Q,mount:!0,...re}}),u.mount.add(Q),Z?me({disabled:Gi(re.disabled)?re.disabled:e.disabled,name:Q}):$(Q,!0,re.value),{...Ue?{disabled:re.disabled||e.disabled}:{},...e.progressive?{required:!!re.required,min:oc(re.min),max:oc(re.max),minLength:oc(re.minLength),maxLength:oc(re.maxLength),pattern:oc(re.pattern)}:{},name:Q,onChange:Re,onBlur:Re,ref:v=>{if(v){de(Q,re),Z=ht(n,Q);const w=Rr(v.value)&&v.querySelectorAll&&v.querySelectorAll("input,select,textarea")[0]||v,A=SF(w),U=Z._f.refs||[];if(A?U.find(J=>J===w):w===Z._f.ref)return;rr(n,Q,{_f:{...Z._f,...A?{refs:[...U.filter(rg),w,...Array.isArray(ht(s,Q))?[{}]:[]],ref:{type:w.type,name:Q}}:{ref:w}}}),$(Q,!1,void 0,w)}else Z=ht(n,Q,{}),Z._f&&(Z._f.mount=!1),(e.shouldUnregister||re.shouldUnregister)&&!(vF(u.array,Q)&&l.action)&&u.unMount.add(Q)}}},ve=()=>e.shouldFocusError&&Sc(n,B,u.mount),Fe=Q=>{Gi(Q)&&(y.state.next({disabled:Q}),Sc(n,(re,Z)=>{const Ue=ht(n,Z);Ue&&(re.disabled=Ue._f.disabled||Q,Array.isArray(Ue._f.refs)&&Ue._f.refs.forEach(v=>{v.disabled=Ue._f.disabled||Q}))},0,!1))},Oe=(Q,re)=>async Z=>{let Ue;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let v=cn(o);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:w,values:A}=await V();t.errors=w,v=A}else await W(n);if(u.disabled.size)for(const w of u.disabled)rr(v,w,void 0);if(Mr(t.errors,"root"),Sn(t.errors)){y.state.next({errors:{}});try{await Q(v,Z)}catch(w){Ue=w}}else re&&await re({...t.errors},Z),ve(),setTimeout(ve);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Sn(t.errors)&&!Ue,submitCount:t.submitCount+1,errors:t.errors}),Ue)throw Ue},ne=(Q,re={})=>{ht(n,Q)&&(Rr(re.defaultValue)?he(Q,cn(ht(s,Q))):(he(Q,re.defaultValue),rr(s,Q,cn(re.defaultValue))),re.keepTouched||Mr(t.touchedFields,Q),re.keepDirty||(Mr(t.dirtyFields,Q),t.isDirty=re.defaultValue?F(Q,cn(ht(s,Q))):F()),re.keepError||(Mr(t.errors,Q),d.isValid&&N()),y.state.next({...t}))},le=(Q,re={})=>{const Z=Q?cn(Q):s,Ue=cn(Z),v=Sn(Q),w=v?s:Ue;if(re.keepDefaultValues||(s=Z),!re.keepValues){if(re.keepDirtyValues){const A=new Set([...u.mount,...Object.keys(sc(s,o))]);for(const U of Array.from(A))ht(t.dirtyFields,U)?rr(w,U,ht(o,U)):he(U,ht(w,U))}else{if(v0&&Rr(Q))for(const A of u.mount){const U=ht(n,A);if(U&&U._f){const J=Array.isArray(U._f.refs)?U._f.refs[0]:U._f.ref;if(_d(J)){const ie=J.closest("form");if(ie){ie.reset();break}}}}for(const A of u.mount)he(A,ht(w,A))}o=cn(w),y.array.next({values:{...w}}),y.state.next({values:{...w}})}u={mount:re.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!d.isValid||!!re.keepIsValid||!!re.keepDirtyValues,l.watch=!!e.shouldUnregister,y.state.next({submitCount:re.keepSubmitCount?t.submitCount:0,isDirty:v?!1:re.keepDirty?t.isDirty:!!(re.keepDefaultValues&&!wo(Q,s)),isSubmitted:re.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:v?{}:re.keepDirtyValues?re.keepDefaultValues&&o?sc(s,o):t.dirtyFields:re.keepDefaultValues&&Q?sc(s,Q):re.keepDirty?t.dirtyFields:{},touchedFields:re.keepTouched?t.touchedFields:{},errors:re.keepErrors?t.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ee=(Q,re)=>le(Ri(Q)?Q(o):Q,re),Me=(Q,re={})=>{const Z=ht(n,Q),Ue=Z&&Z._f;if(Ue){const v=Ue.refs?Ue.refs[0]:Ue.ref;v.focus&&(v.focus(),re.shouldSelect&&Ri(v.select)&&v.select())}},ke=Q=>{t={...t,...Q}},ae={control:{register:de,unregister:xe,getFieldState:we,handleSubmit:Oe,setError:oe,_subscribe:ce,_runSchema:V,_getWatch:ye,_getDirty:F,_setValid:N,_setFieldArray:k,_setDisabledField:me,_setErrors:H,_getFieldArray:se,_reset:le,_resetDefaultValues:()=>Ri(e.defaultValues)&&e.defaultValues().then(Q=>{Ee(Q,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:Fe,_subjects:y,_proxyFormState:d,get _fields(){return n},get _formValues(){return o},get _state(){return l},set _state(Q){l=Q},get _defaultValues(){return s},get _names(){return u},set _names(Q){u=Q},get _formState(){return t},get _options(){return e},set _options(Q){e={...e,...Q}}},subscribe:ee,trigger:ue,register:de,handleSubmit:Oe,watch:Ge,setValue:he,getValues:G,reset:Ee,resetField:ne,clearErrors:De,unregister:xe,setError:oe,setFocus:Me,getFieldState:we};return{...ae,formControl:ae}}function MF(r={}){const e=Pt.useRef(void 0),t=Pt.useRef(void 0),[n,s]=Pt.useState({isDirty:!1,isValidating:!1,isLoading:Ri(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,defaultValues:Ri(r.defaultValues)?void 0:r.defaultValues});e.current||(e.current={...r.formControl?r.formControl:LF(r),formState:n},r.formControl&&r.defaultValues&&!Ri(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions));const o=e.current.control;return o._options=r,Pt.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0}),[o]),Pt.useEffect(()=>o._disableForm(r.disabled),[o,r.disabled]),Pt.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==n.isDirty&&o._subjects.state.next({isDirty:l})}},[o,n.isDirty]),Pt.useEffect(()=>{r.values&&!wo(r.values,t.current)?(o._reset(r.values,o._options.resetOptions),t.current=r.values,s(l=>({...l}))):o._resetDefaultValues()},[r.values,o]),Pt.useEffect(()=>{r.errors&&!Sn(r.errors)&&o._setErrors(r.errors)},[r.errors,o]),Pt.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),Pt.useEffect(()=>{r.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[r.shouldUnregister,o]),e.current.formState=wF(n,o),e.current}const FF=()=>{var b,S,T,N,x;const[r,e]=pe.useState([]),[t,n]=pe.useState("cash"),[s,o]=pe.useState(!1),[l,u]=pe.useState(!1),c=Di();pe.useEffect(()=>{const k=JSON.parse(localStorage.getItem("cart")||"[]");e(k);const q=JSON.parse(localStorage.getItem("checkoutInfo")||"{}");Object.keys(q).length>0&&(y(q),o(!0));const H=localStorage.getItem("user");if(H){const $=JSON.parse(H);$.roles&&$.roles[0]==="ADMIN"&&u(!0)}},[]);const{register:h,handleSubmit:d,formState:{errors:m},reset:y}=MF();return be("div",{className:"container mx-auto py-12",children:[be("div",{className:"flex items-center space-x-2 text-gray-500 text-[14px] mb-8",children:[z("a",{href:l?"/productmanage":"/",className:"hover:underline",children:"Home"}),z("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),z("a",{href:"/cart",className:"hover:underline",children:"Cart"}),z("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),z("span",{className:"font-normal text-black",children:"CheckOut"})]}),z("form",{onSubmit:d(async k=>{try{const H={userId:JSON.parse(localStorage.getItem("user")||"{}").id,name:k.fullName,address:k.stAddress+", "+k.townCity,items:r.map(R=>({productId:R.id,quantity:R.quantity}))},$=localStorage.getItem("accessToken");if(console.log("Token:",$),!$){pt.error("You need to log in first!");return}if(!(await fetch("https://devapi.uniscore.vn/uri/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify(H)})).ok)throw new Error("Failed to place order");pt.success("Order placed successfully!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),e([]),localStorage.removeItem("cart"),s?localStorage.setItem("checkoutInfo",JSON.stringify(k)):localStorage.removeItem("checkoutInfo"),c("/cart"),setTimeout(()=>{window.location.reload()},1500)}catch(q){pt.error(q.message)}}),className:"space-y-4",children:be("div",{className:"sm:grid grid-cols-2 gap-10 lg:ml-14 ml-4 mr-4 xl:ml-32",children:[be("div",{children:[z("h2",{className:"text-[36px] font-medium mb-6 font-[Inter]",children:"Billing Details"}),be("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins]",children:[be("label",{children:["Full Name",z("a",{className:"text-red-500",children:"*"})]}),z("input",{...h("fullName",{required:"Full Name is required"}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.fullName&&z("p",{className:"text-red-500 text-sm",children:typeof((b=m.fullName)==null?void 0:b.message)=="string"?m.fullName.message:""})]}),be("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[z("label",{children:"Company Name"}),z("input",{...h("companyName"),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"})]}),be("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[be("label",{children:["Street Address",z("a",{className:"text-red-500",children:"*"})]}),z("input",{...h("stAddress",{required:"Street Address is required"}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.stAddress&&z("p",{className:"text-red-500 text-sm",children:typeof((S=m.stAddress)==null?void 0:S.message)=="string"?m.stAddress.message:""})]}),be("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[z("label",{children:"Apartment, floor, etc. (optional)"}),z("input",{...h("apartment"),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"})]}),be("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[be("label",{children:["Town/City",z("a",{className:"text-red-500",children:"*"})]}),z("input",{...h("townCity",{required:"Town or City is required"}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.townCity&&z("p",{className:"text-red-500 text-sm",children:typeof((T=m.townCity)==null?void 0:T.message)=="string"?m.townCity.message:""})]}),be("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[be("label",{children:["Phone Number",z("a",{className:"text-red-500",children:"*"})]}),z("input",{...h("phone",{required:"Phone number is required",pattern:{value:/^[0-9]{10}$/,message:"Enter a valid 10-digit phone number"}}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.phone&&z("p",{className:"text-red-500 text-sm",children:typeof((N=m.phone)==null?void 0:N.message)=="string"?m.phone.message:""})]}),be("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[be("label",{children:["Email Address",z("a",{className:"text-red-500",children:"*"})]}),z("input",{...h("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email"}}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.email&&z("p",{className:"text-red-500 text-sm",children:typeof((x=m.email)==null?void 0:x.message)=="string"?m.email.message:""})]}),be("div",{className:"flex items-center text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[z("input",{type:"checkbox",checked:s,onChange:k=>o(k.target.checked),className:"w-6 h-6 accent-red-500 rounded-lg border-gray-400 cursor-pointer mr-2"}),z("label",{className:"text-gray-700 text-[15px] sm:text-[16px] font-[Poppins]",children:"Save this information for faster checkout next time"})]})]}),be("div",{className:"rounded w-full sd:max-w-[400px] w-full mt-10 sm:mt-28",children:[r.map(k=>be("div",{className:"flex items-center justify-between mb-2 text-[16px] font-[Poppins]",children:[z("img",{src:k.image,alt:k.name,className:"flex sm:hidden md:flex w-32 h-32 md:w-16 md:h-16"}),z("span",{className:"flex-1 text-left ml-4 sm:ml-0 md:ml-4",children:k.name}),be("span",{className:"ml-4",children:["$",(k.price*k.quantity).toFixed(2)]})]},k.id)),be("div",{className:"flex justify-between mt-4 mb-3 pt-2 text-[16px] font-[Poppins]",children:[z("span",{children:"Subtotal:"}),be("span",{children:["$",r.reduce((k,q)=>k+q.price*q.quantity,0).toFixed(2)]})]}),be("div",{className:"flex justify-between border-t border-black mb-3 pt-2 text-[16px] font-[Poppins]",children:[z("span",{children:"Shipping:"}),z("span",{children:"Free"})]}),be("div",{className:"flex justify-between border-t border-black  pt-2 text-[16px] font-[Poppins]",children:[z("span",{children:"Total:"}),be("span",{children:["$",r.reduce((k,q)=>k+q.price*q.quantity,0).toFixed(2)]})]}),z("div",{className:"mt-4 text-[16px] font-[Poppins]",children:be("div",{className:"flex flex-col",children:[be("div",{className:"flex items-center justify-between w-full",children:[be("label",{className:"flex items-center mb-4",children:[z("input",{type:"radio",name:"payment",value:"bank",checked:t==="bank",onChange:()=>n("bank"),className:"mr-2 w-5 h-5 accent-black"}),"Bank"]}),z("img",{src:"/R2S-Client/Bank.svg",alt:"Bank SVG",className:"sm:hidden md:flex w-full max-w-[192px] mb-4"})]}),be("label",{className:"flex items-center",children:[z("input",{type:"radio",name:"payment",value:"cash",checked:t==="cash",onChange:()=>n("cash"),className:"mr-2 w-5 h-5 accent-black"}),"Cash on delivery"]})]})}),be("div",{className:"mt-8 text-[16px] font-[Poppins] flex gap-4",children:[z("input",{type:"text",placeholder:"Coupon Code",className:"border border-black rounded p-4 w-full max-w-[300px] h-[56px] sm:text-[12px] md:text-[16px]"}),z("button",{className:"bg-red-500 border-red-500 border rounded text-white sm:text-[12px] md:text-[16px] w-full max-w-[211px] h-[56px]",children:"Apply Coupon"})]}),z("button",{type:"submit",className:"w-full max-w-[190px] h-[56px] mt-8 bg-red-500 text-white py-2 rounded",children:"Place Order"})]})]})})]})},VF=async r=>{const e=r?`https://devapi.uniscore.vn/uri/api/products/search?name=${r}`:"https://devapi.uniscore.vn/uri/api/products",{data:t}=await jt.get(e);return Array.isArray(t.data)?t.data:[]},UF=()=>{const r=Di(),[e,t]=pe.useState(""),[n,s]=pe.useState(!1),{data:o=[],isLoading:l,error:u,refetch:c}=qc({queryKey:["products",e],queryFn:()=>VF(e)}),[h,d]=pe.useState(null),[m,y]=pe.useState(null),_={id:0,name:"",price:0,description:"",images:[],category:"",brand:"",stock:0,rate:0,is_active:!0},b=M=>{const W=JSON.parse(localStorage.getItem("cart")||"[]"),O=W.find(F=>F.id===M.id);O?O.quantity+=1:W.push({id:M.id,name:M.name,price:M.price,image:M.images[0],quantity:1,color:"red",size:null}),localStorage.setItem("cart",JSON.stringify(W)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500}),setTimeout(()=>window.location.reload(),1500)},S=M=>{d(M)},T=M=>{y(M)},[N,x]=pe.useState(null),k=M=>{M.target.files&&x(M.target.files)},[q,H]=pe.useState(null),$=M=>{M.target.files&&H(M.target.files)},P=async()=>{if(!h)return;const{name:M,price:W,description:O}=h;if(!M.trim()||!O.trim()||!W){pt.error("All fields are required!");return}try{const F=new FormData;F.append("name",M.trim()),F.append("price",W.toString()),F.append("description",O.trim()),N&&Array.from(N).forEach(ye=>{F.append("images",ye)}),console.log("form data:",F),await jt.put(`https://devapi.uniscore.vn/uri/api/products/${h.id}`,F,{headers:{"Content-Type":"multipart/form-data"}}),pt.success("Product updated successfully!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),d(null),c()}catch(F){console.error("Error updating product:",F),pt.error("Failed to update product")}},R=async()=>{if(!m)return;const{name:M,price:W,description:O,category:F,brand:ye}=m;if(!M.trim()||!O.trim()||!W||!F.trim()||!ye.trim()){pt.error("All fields are required!");return}try{const se=new FormData;se.append("name",M.trim()),se.append("price",W.toString()),se.append("description",O.trim()),se.append("category",F.trim()),se.append("brand",ye.trim()),q&&Array.from(q).forEach(Ne=>{se.append("images",Ne)}),await jt.post("https://devapi.uniscore.vn/uri/api/products",se,{headers:{"Content-Type":"multipart/form-data"}}),pt.success("Product created successfully!",{position:"top-right",autoClose:1500}),y(null),c()}catch(se){console.error("Error creating product:",se),pt.error("Failed to create product")}},V=async M=>{try{const W=`https://devapi.uniscore.vn/uri/api/products/${M}`;console.log("Deleting product at:",W);const O=await fetch(`https://devapi.uniscore.vn/uri/api/products/${M}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDeleted:!0})});if(!O.ok){const F=await O.text();throw new Error(`Error ${O.status}: ${F}`)}pt.success("Product deleted successfully!"),c()}catch(W){pt.error("Failed to delete product!"),console.error("Delete error:",W)}};return Array.isArray(o)?be("div",{className:"mx-auto py-12 w-full px-4",children:[z("h2",{className:"text-[36px] font-semibold mb-8 font-[Inter]",children:"Manage Products"}),z("button",{className:"bg-yellow-300 text-[16px] text-black px-3 py-1 rounded mb-6",onClick:()=>T(_),children:"+ Create Product"}),be("div",{className:"relative w-full max-w-md mb-6",children:[be("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden shadow-sm",children:[z("span",{className:"px-3",children:z("img",{src:"/R2S-Client/SearchIcon.svg",alt:"Search",className:"w-4 h-4 cursor-pointer"})}),z("input",{type:"text",placeholder:"Search products...",value:e,onChange:M=>{t(M.target.value),s(M.target.value.length>0)},onBlur:()=>setTimeout(()=>s(!1),200),className:"w-full p-2 outline-none"})]}),n&&e.length>0&&o.length>0&&z("ul",{className:"absolute w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-10",children:o.map(M=>z("li",{onClick:()=>{t(M.name),s(!1)},className:"p-3 hover:bg-gray-100 cursor-pointer transition",children:M.name},M.id))})]}),z("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 min-h-[100px]",children:l?z("p",{className:"col-span-4 text-center",children:"Loading..."}):u?z("p",{className:"col-span-4 text-center text-red-500",children:"Error loading products"}):o.length>0?o.slice().sort((M,W)=>M.id-W.id).map(M=>be("div",{className:"group rounded-lg bg-white transition duration-300 sm:w-full md:max-w-[270px] lg:max-w-[270px] xl:max-w-[270px] 2xl:max-w-[270px]",children:[z("div",{className:"w-full h-[250px] bg-[#F5F5F5] flex flex-col items-center overflow-hidden rounded-md relative",children:be("div",{className:"w-full h-full flex items-center justify-center relative",onMouseEnter:W=>{var O;return(O=W.currentTarget.querySelector("button"))==null?void 0:O.classList.add("opacity-100","translate-y-0")},onMouseLeave:W=>{var O;return(O=W.currentTarget.querySelector("button"))==null?void 0:O.classList.remove("opacity-100","translate-y-0")},children:[z("img",{src:M.images[0],alt:M.name,className:"max-h-[180px] object-contain"}),z("button",{onClick:W=>{W.stopPropagation(),b(M)},className:"absolute bottom-0 left-0 w-full bg-black text-white py-3 text-center opacity-0 translate-y-2 transition-all duration-300",children:"Add To Cart"})]})}),z("h3",{className:"text-[16px] font-medium mt-3",children:M.name}),be("div",{className:"flex items-center gap-3",children:[be("a",{className:"text-red-500 text-[16px] font-medium",children:["$",M.price]}),be("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((W,O)=>O<(M.rate||4)?z("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},O):z("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},O)),be("span",{className:"text-gray-500 text-[14px] font-medium",children:["(",M.stock||50,")"]})]})]}),be("div",{className:"flex gap-2 mt-2",children:[z("button",{className:"bg-green-500 text-white px-3 py-1 rounded",onClick:()=>r(`/detail/${M.id}`),children:"View"}),z("button",{className:"bg-blue-500 text-white px-3 py-1 rounded",onClick:()=>S(M),children:"Edit"}),z("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:()=>V(M.id),children:"Delete"})]})]},M.id)):z("div",{className:"col-span-4 flex items-center justify-center",children:"No products found"})}),h&&z("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:be("div",{className:"bg-white p-6 rounded-lg",children:[z("h3",{className:"text-xl font-bold mb-4",children:"Edit Product"}),z("label",{className:"block mb-2",children:"Current Image:"}),z("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:h.images.filter(M=>M).map((M,W)=>z("img",{src:M,alt:`Product ${W+1}`,className:"w-[200px] h-[150px] object-contain border rounded-md"},W))}),z("label",{className:"block mb-2",children:"New Image:"}),z("input",{type:"file",multiple:!0,className:"border p-2 w-full mb-4",onChange:k}),z("a",{children:"Name:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(h==null?void 0:h.name)||"",onChange:M=>d(W=>W?{...W,name:M.target.value}:null)}),z("a",{children:"Price:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"number",value:(h==null?void 0:h.price)||"",min:1,onChange:M=>{const W=Math.max(1,Number(M.target.value));d(O=>O?{...O,price:W}:null)}}),z("a",{children:"Description:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(h==null?void 0:h.description)||"",onChange:M=>{d(W=>W?{...W,description:M.target.value}:null)},required:!0}),be("div",{className:"flex justify-end gap-2",children:[z("button",{className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>d(null),children:"Cancel"}),z("button",{className:"bg-green-500 text-white px-4 py-2 rounded",onClick:P,children:"Save"})]})]})}),m&&z("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:be("div",{className:"bg-white p-6 rounded-lg",children:[z("h3",{className:"text-xl font-bold mb-4",children:"Create Product"}),z("label",{className:"block mb-2",children:"Image:"}),z("input",{type:"file",multiple:!0,className:"border p-2 w-full mb-4",onChange:$}),z("a",{children:"Name:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.name)||"",onChange:M=>y(W=>W?{...W,name:M.target.value}:null)}),z("a",{children:"Price:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"number",value:(m==null?void 0:m.price)||"",min:1,onChange:M=>{const W=Math.max(1,Number(M.target.value));y(O=>O?{...O,price:W}:null)}}),z("a",{children:"Description:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.description)||"",onChange:M=>{y(W=>W?{...W,description:M.target.value}:null)},required:!0}),z("a",{children:"Category:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.category)||"",onChange:M=>{y(W=>W?{...W,category:M.target.value}:null)},required:!0}),z("a",{children:"Brand:"}),z("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.brand)||"",onChange:M=>{y(W=>W?{...W,brand:M.target.value}:null)},required:!0}),be("div",{className:"flex justify-end gap-2",children:[z("button",{className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>y(null),children:"Cancel"}),z("button",{className:"bg-green-500 text-white px-4 py-2 rounded",onClick:R,children:"Save"})]})]})})]}):z("p",{children:"No products available"})},E0="https://devapi.uniscore.vn/uri/api/orders",S0=()=>{const r=localStorage.getItem("accessToken");return r?{Authorization:`Bearer ${r}`}:{}},BF=async()=>{const{data:r}=await jt.get(E0,{headers:S0()});return r??[]},jF=async({orderId:r,status:e})=>{await jt.put(`${E0}/${r}`,{status:e},{headers:S0()})},$F=async r=>{await jt.delete(`${E0}/${r}`,{headers:S0()})},zF=()=>{const r=Cv(),[e,t]=pe.useState(null),{data:n=[],isLoading:s,error:o}=qc({queryKey:["orders"],queryFn:BF}),l=Yf({mutationFn:jF,onMutate:async({orderId:c,status:h})=>{t(c),await r.cancelQueries({queryKey:["orders"]});const d=r.getQueryData(["orders"]);return d&&r.setQueryData(["orders"],d.map(m=>m.id===c?{...m,status:h}:m)),{previousOrders:d}},onSuccess:()=>{pt.success("Order updated successfully",{autoClose:1500})},onError:(c,h,d)=>{pt.error("Failed to update order"),d!=null&&d.previousOrders&&r.setQueryData(["orders"],d.previousOrders)},onSettled:()=>{t(null)}}),u=Yf({mutationFn:$F,onMutate:c=>t(c),onSuccess:()=>{window.location.reload()},onError:()=>{pt.error("Failed to delete order"),t(null)}});return be("div",{className:"container mx-auto py-12",children:[z("h2",{className:"text-[36px] font-semibold mb-8 font-[Inter]",children:"Order Management"}),s?z("p",{className:"col-span-4 text-center text-[12px] md:text-[16px]",children:"Loading..."}):o?z("p",{className:"col-span-4 text-center text-red-500",children:"Error loading orders"}):be("table",{className:"min-w-full border-separate border-spacing-y-4",children:[z("thead",{className:"shadow-md rounded",children:be("tr",{children:[z("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"ID"}),z("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"User"}),z("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Name"}),z("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Address"}),z("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-left",children:"Total Amount"}),z("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Status"}),z("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Actions"})]})}),z("tbody",{children:n.length===0?z("tr",{children:z("td",{colSpan:5,className:"border p-2 text-center",children:"No orders available"})}):n.sort((c,h)=>c.status==="pending"&&h.status!=="pending"?-1:c.status!=="pending"&&h.status==="pending"?1:h.id-c.id).map(c=>be("tr",{className:"shadow-md rounded",children:[z("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-center",children:c.id}),z("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-center",children:c.user_id}),z("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:c.name}),z("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:c.address}),be("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:["$",c.total_amount]}),z("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-center",children:c.status}),be("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] space-x-2",children:[c.status==="pending"&&z("button",{className:"bg-green-500 text-white px-3 py-1 rounded",onClick:()=>l.mutate({orderId:c.id,status:"done"}),children:"Approve"}),z("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:()=>u.mutate(c.id),children:"Delete"})]})]},c.id))})]})]})},d1=({children:r})=>{const e=localStorage.getItem("isLoggedIn"),t=JSON.parse(localStorage.getItem("user")||"{}");return e&&t.roles[0]==="ADMIN"?r:z(lR,{to:"/login"})},WF=[{path:"/",element:z(O2,{})},{path:"/signup",element:z(D2,{})},{path:"/login",element:z(L2,{})},{path:"/detail/:id",element:z(j2,{})},{path:"/cart",element:z($2,{})},{path:"/profile",element:z(z2,{})},{path:"/chat",element:z(mF,{})},{path:"/checkout",element:z(FF,{})},{path:"/productmanage",element:z(d1,{children:z(UF,{})})},{path:"/ordermanage",element:z(d1,{children:z(zF,{})})}],qF=()=>GC(WF),HF=()=>z(NR,{basename:"/R2S-Client",children:z(qF,{})}),QF=()=>be("footer",{className:"bg-black text-white py-10",children:[be("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-5 gap-8",children:[be("div",{children:[z("h2",{className:"text-[24px] font-semibold",children:"Exclusive"}),z("p",{className:"mt-3 text-[20px] py-4",children:"Subscribe"}),z("p",{className:"text-[16px] text-gray-300",children:"Get 10% off your first order"}),be("div",{className:"hidden lg:flex items-center mt-3 border border-white rounded px-3 py-2 relative w-full max-w-[300px]",children:[z("input",{type:"email",placeholder:"Enter your email",className:"bg-transparent outline-none flex-1 text-sm pr-10"}),z("button",{className:"text-white absolute right-3 top-1/2 -translate-y-1/2",children:""})]})]}),be("div",{className:"space-y-4",children:[z("h2",{className:"text-[20px]",children:"Support"}),z("p",{className:"mt-3 text-[16px] text-gray-300",children:"111 Bijoy sarani, Dhaka, DH 1515, Bangladesh."}),z("p",{className:"hidden lg:flex text-[16px] mt-2 text-gray-300",children:"exclusive@gmail.com"}),z("p",{className:"text-[16px] mt-2 text-gray-300",children:"+88015-88888-9999"})]}),be("div",{children:[z("h2",{className:"text-[20px]",children:"Account"}),be("ul",{className:"mt-3 space-y-4 text-[16px] text-gray-300",children:[z("li",{children:"My Account"}),z("li",{children:"Login / Register"}),z("li",{children:"Cart"}),z("li",{children:"Wishlist"}),z("li",{children:"Shop"})]})]}),be("div",{children:[z("h2",{className:"text-[20px]",children:"Quick Link"}),be("ul",{className:"mt-3 space-y-4 text-[16px] text-gray-300",children:[z("li",{children:"Privacy Policy"}),z("li",{children:"Terms Of Use"}),z("li",{children:"FAQ"}),z("li",{children:"Contact"})]})]}),be("div",{children:[z("h2",{className:"text-[20px]",children:"Download App"}),z("p",{className:"mt-3 text-[12px] text-gray-300",children:"Save $3 with App New User Only"}),be("div",{className:"mt-3 flex items-center space-x-2",children:[z("img",{src:"/R2S-Client/QRCode.svg",alt:"QR Code",className:"w-[76px] h-[76px]"}),be("div",{className:"flex flex-col space-y-2",children:[z("img",{src:"/R2S-Client/GGPlay.svg",alt:"Google Play",className:"w-28"}),z("img",{src:"/R2S-Client/AppStore.svg",alt:"App Store",className:"w-28"})]})]}),be("div",{className:"hidden lg:flex justify-left space-x-7 ml-2 mt-6",children:[z("img",{src:"/R2S-Client/Facebook.svg",alt:"Facebook",className:"w-[10.5px] h-[18px] cursor-pointer"}),z("img",{src:"/R2S-Client/Twitter.svg",alt:"Twitter",className:"h-[19px] cursor-pointer"}),z("img",{src:"/R2S-Client/Instagram.svg",alt:"Instagram",className:"w-[18px] h-[18px] cursor-pointer"}),z("img",{src:"/R2S-Client/Linkedin.svg",alt:"Facebook",className:"w-[17.5px] h-[17.5px] cursor-pointer"})]})]})]}),z("div",{className:"mt-10 pt-6 text-center text-sm text-gray-500",children:z("p",{children:" Copyright Rimel 2022. All rights reserved"})})]}),KF=({children:r})=>be("div",{className:"min-h-screen w-full bg-white",children:[z("main",{className:"flex-grow",children:r}),z(QF,{})]});var GF=function(){return null};const YF=new Vk;vC.createRoot(document.getElementById("root")).render(z(Pt.StrictMode,{children:be(zk,{client:YF,children:[z(GF,{initialIsOpen:!1}),z(KF,{children:z(HF,{})}),z(Ek,{})]})}));
