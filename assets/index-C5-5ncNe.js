var zA=Object.defineProperty;var Sw=r=>{throw TypeError(r)};var qA=(r,e,t)=>e in r?zA(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var or=(r,e,t)=>qA(r,typeof e!="symbol"?e+"":e,t),mm=(r,e,t)=>e.has(r)||Sw("Cannot "+t);var D=(r,e,t)=>(mm(r,e,"read from private field"),t?t.call(r):e.get(r)),nt=(r,e,t)=>e.has(r)?Sw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Ue=(r,e,t,n)=>(mm(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),qe=(r,e,t)=>(mm(r,e,"access private method"),t);var la=(r,e,t,n)=>({set _(s){Ue(r,e,s,t)},get _(){return D(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function WA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gm={exports:{}},Ju={},ym={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function HA(){if(Tw)return Ct;Tw=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function y(J){return J===null||typeof J!="object"?null:(J=m&&J[m]||J["@@iterator"],typeof J=="function"?J:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function T(J,z,be){this.props=J,this.context=z,this.refs=S,this.updater=be||_}T.prototype.isReactComponent={},T.prototype.setState=function(J,z){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,z,"setState")},T.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function V(){}V.prototype=T.prototype;function I(J,z,be){this.props=J,this.context=z,this.refs=S,this.updater=be||_}var k=I.prototype=new V;k.constructor=I,E(k,T.prototype),k.isPureReactComponent=!0;var W=Array.isArray,H=Object.prototype.hasOwnProperty,j={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(J,z,be){var Le,oe={},We=null,ce=null;if(z!=null)for(Le in z.ref!==void 0&&(ce=z.ref),z.key!==void 0&&(We=""+z.key),z)H.call(z,Le)&&!P.hasOwnProperty(Le)&&(oe[Le]=z[Le]);var te=arguments.length-2;if(te===1)oe.children=be;else if(1<te){for(var xe=Array(te),de=0;de<te;de++)xe[de]=arguments[de+2];oe.children=xe}if(J&&J.defaultProps)for(Le in te=J.defaultProps,te)oe[Le]===void 0&&(oe[Le]=te[Le]);return{$$typeof:r,type:J,key:We,ref:ce,props:oe,_owner:j.current}}function M(J,z){return{$$typeof:r,type:J.type,key:z,ref:J.ref,props:J.props,_owner:J._owner}}function F(J){return typeof J=="object"&&J!==null&&J.$$typeof===r}function $(J){var z={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(be){return z[be]})}var N=/\/+/g;function L(J,z){return typeof J=="object"&&J!==null&&J.key!=null?$(""+J.key):z.toString(36)}function ve(J,z,be,Le,oe){var We=typeof J;(We==="undefined"||We==="boolean")&&(J=null);var ce=!1;if(J===null)ce=!0;else switch(We){case"string":case"number":ce=!0;break;case"object":switch(J.$$typeof){case r:case e:ce=!0}}if(ce)return ce=J,oe=oe(ce),J=Le===""?"."+L(ce,0):Le,W(oe)?(be="",J!=null&&(be=J.replace(N,"$&/")+"/"),ve(oe,z,be,"",function(de){return de})):oe!=null&&(F(oe)&&(oe=M(oe,be+(!oe.key||ce&&ce.key===oe.key?"":(""+oe.key).replace(N,"$&/")+"/")+J)),z.push(oe)),1;if(ce=0,Le=Le===""?".":Le+":",W(J))for(var te=0;te<J.length;te++){We=J[te];var xe=Le+L(We,te);ce+=ve(We,z,be,xe,oe)}else if(xe=y(J),typeof xe=="function")for(J=xe.call(J),te=0;!(We=J.next()).done;)We=We.value,xe=Le+L(We,te++),ce+=ve(We,z,be,xe,oe);else if(We==="object")throw z=String(J),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ce}function ae(J,z,be){if(J==null)return J;var Le=[],oe=0;return ve(J,Le,"","",function(We){return z.call(be,We,oe++)}),Le}function De(J){if(J._status===-1){var z=J._result;z=z(),z.then(function(be){(J._status===0||J._status===-1)&&(J._status=1,J._result=be)},function(be){(J._status===0||J._status===-1)&&(J._status=2,J._result=be)}),J._status===-1&&(J._status=0,J._result=z)}if(J._status===1)return J._result.default;throw J._result}var Re={current:null},fe={transition:null},Ne={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:fe,ReactCurrentOwner:j};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:ae,forEach:function(J,z,be){ae(J,function(){z.apply(this,arguments)},be)},count:function(J){var z=0;return ae(J,function(){z++}),z},toArray:function(J){return ae(J,function(z){return z})||[]},only:function(J){if(!F(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Ct.Component=T,Ct.Fragment=t,Ct.Profiler=s,Ct.PureComponent=I,Ct.StrictMode=n,Ct.Suspense=c,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,Ct.act=ie,Ct.cloneElement=function(J,z,be){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var Le=E({},J.props),oe=J.key,We=J.ref,ce=J._owner;if(z!=null){if(z.ref!==void 0&&(We=z.ref,ce=j.current),z.key!==void 0&&(oe=""+z.key),J.type&&J.type.defaultProps)var te=J.type.defaultProps;for(xe in z)H.call(z,xe)&&!P.hasOwnProperty(xe)&&(Le[xe]=z[xe]===void 0&&te!==void 0?te[xe]:z[xe])}var xe=arguments.length-2;if(xe===1)Le.children=be;else if(1<xe){te=Array(xe);for(var de=0;de<xe;de++)te[de]=arguments[de+2];Le.children=te}return{$$typeof:r,type:J.type,key:oe,ref:We,props:Le,_owner:ce}},Ct.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:o,_context:J},J.Consumer=J},Ct.createElement=R,Ct.createFactory=function(J){var z=R.bind(null,J);return z.type=J,z},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(J){return{$$typeof:u,render:J}},Ct.isValidElement=F,Ct.lazy=function(J){return{$$typeof:d,_payload:{_status:-1,_result:J},_init:De}},Ct.memo=function(J,z){return{$$typeof:h,type:J,compare:z===void 0?null:z}},Ct.startTransition=function(J){var z=fe.transition;fe.transition={};try{J()}finally{fe.transition=z}},Ct.unstable_act=ie,Ct.useCallback=function(J,z){return Re.current.useCallback(J,z)},Ct.useContext=function(J){return Re.current.useContext(J)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(J){return Re.current.useDeferredValue(J)},Ct.useEffect=function(J,z){return Re.current.useEffect(J,z)},Ct.useId=function(){return Re.current.useId()},Ct.useImperativeHandle=function(J,z,be){return Re.current.useImperativeHandle(J,z,be)},Ct.useInsertionEffect=function(J,z){return Re.current.useInsertionEffect(J,z)},Ct.useLayoutEffect=function(J,z){return Re.current.useLayoutEffect(J,z)},Ct.useMemo=function(J,z){return Re.current.useMemo(J,z)},Ct.useReducer=function(J,z,be){return Re.current.useReducer(J,z,be)},Ct.useRef=function(J){return Re.current.useRef(J)},Ct.useState=function(J){return Re.current.useState(J)},Ct.useSyncExternalStore=function(J,z,be){return Re.current.useSyncExternalStore(J,z,be)},Ct.useTransition=function(){return Re.current.useTransition()},Ct.version="18.3.1",Ct}var xw;function cv(){return xw||(xw=1,ym.exports=HA()),ym.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function QA(){if(Iw)return Ju;Iw=1;var r=cv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,h){var d,m={},y=null,_=null;h!==void 0&&(y=""+h),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(_=c.ref);for(d in c)n.call(c,d)&&!o.hasOwnProperty(d)&&(m[d]=c[d]);if(u&&u.defaultProps)for(d in c=u.defaultProps,c)m[d]===void 0&&(m[d]=c[d]);return{$$typeof:e,type:u,key:y,ref:_,props:m,_owner:s.current}}return Ju.Fragment=t,Ju.jsx=l,Ju.jsxs=l,Ju}var Aw;function KA(){return Aw||(Aw=1,gm.exports=QA()),gm.exports}var m1=KA();const B=m1.jsx,Se=m1.jsxs;var Pe=cv();const Rt=WA(Pe);var lf={},vm={exports:{}},On={},_m={exports:{}},wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function GA(){return Cw||(Cw=1,function(r){function e(fe,Ne){var ie=fe.length;fe.push(Ne);e:for(;0<ie;){var J=ie-1>>>1,z=fe[J];if(0<s(z,Ne))fe[J]=Ne,fe[ie]=z,ie=J;else break e}}function t(fe){return fe.length===0?null:fe[0]}function n(fe){if(fe.length===0)return null;var Ne=fe[0],ie=fe.pop();if(ie!==Ne){fe[0]=ie;e:for(var J=0,z=fe.length,be=z>>>1;J<be;){var Le=2*(J+1)-1,oe=fe[Le],We=Le+1,ce=fe[We];if(0>s(oe,ie))We<z&&0>s(ce,oe)?(fe[J]=ce,fe[We]=ie,J=We):(fe[J]=oe,fe[Le]=ie,J=Le);else if(We<z&&0>s(ce,ie))fe[J]=ce,fe[We]=ie,J=We;else break e}}return Ne}function s(fe,Ne){var ie=fe.sortIndex-Ne.sortIndex;return ie!==0?ie:fe.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var c=[],h=[],d=1,m=null,y=3,_=!1,E=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(fe){for(var Ne=t(h);Ne!==null;){if(Ne.callback===null)n(h);else if(Ne.startTime<=fe)n(h),Ne.sortIndex=Ne.expirationTime,e(c,Ne);else break;Ne=t(h)}}function W(fe){if(S=!1,k(fe),!E)if(t(c)!==null)E=!0,De(H);else{var Ne=t(h);Ne!==null&&Re(W,Ne.startTime-fe)}}function H(fe,Ne){E=!1,S&&(S=!1,V(R),R=-1),_=!0;var ie=y;try{for(k(Ne),m=t(c);m!==null&&(!(m.expirationTime>Ne)||fe&&!$());){var J=m.callback;if(typeof J=="function"){m.callback=null,y=m.priorityLevel;var z=J(m.expirationTime<=Ne);Ne=r.unstable_now(),typeof z=="function"?m.callback=z:m===t(c)&&n(c),k(Ne)}else n(c);m=t(c)}if(m!==null)var be=!0;else{var Le=t(h);Le!==null&&Re(W,Le.startTime-Ne),be=!1}return be}finally{m=null,y=ie,_=!1}}var j=!1,P=null,R=-1,M=5,F=-1;function $(){return!(r.unstable_now()-F<M)}function N(){if(P!==null){var fe=r.unstable_now();F=fe;var Ne=!0;try{Ne=P(!0,fe)}finally{Ne?L():(j=!1,P=null)}}else j=!1}var L;if(typeof I=="function")L=function(){I(N)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ae=ve.port2;ve.port1.onmessage=N,L=function(){ae.postMessage(null)}}else L=function(){T(N,0)};function De(fe){P=fe,j||(j=!0,L())}function Re(fe,Ne){R=T(function(){fe(r.unstable_now())},Ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(fe){fe.callback=null},r.unstable_continueExecution=function(){E||_||(E=!0,De(H))},r.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<fe?Math.floor(1e3/fe):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(fe){switch(y){case 1:case 2:case 3:var Ne=3;break;default:Ne=y}var ie=y;y=Ne;try{return fe()}finally{y=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(fe,Ne){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var ie=y;y=fe;try{return Ne()}finally{y=ie}},r.unstable_scheduleCallback=function(fe,Ne,ie){var J=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?J+ie:J):ie=J,fe){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ie+z,fe={id:d++,callback:Ne,priorityLevel:fe,startTime:ie,expirationTime:z,sortIndex:-1},ie>J?(fe.sortIndex=ie,e(h,fe),t(c)===null&&fe===t(h)&&(S?(V(R),R=-1):S=!0,Re(W,ie-J))):(fe.sortIndex=z,e(c,fe),E||_||(E=!0,De(H))),fe},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(fe){var Ne=y;return function(){var ie=y;y=Ne;try{return fe.apply(this,arguments)}finally{y=ie}}}}(wm)),wm}var Rw;function YA(){return Rw||(Rw=1,_m.exports=GA()),_m.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function JA(){if(kw)return On;kw=1;var r=cv(),e=YA();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,f=1;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)n.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function y(i){return c.call(m,i)?!0:c.call(d,i)?!1:h.test(i)?m[i]=!0:(d[i]=!0,!1)}function _(i,a,f,g){if(f!==null&&f.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,a,f,g){if(a===null||typeof a>"u"||_(i,a,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(i,a,f,g,w,A,U){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=f,this.propertyName=i,this.type=a,this.sanitizeURL=A,this.removeEmptyString=U}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){T[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];T[a]=new S(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){T[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){T[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){T[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){T[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){T[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){T[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){T[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(V,I);T[a]=new S(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(V,I);T[a]=new S(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(V,I);T[a]=new S(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function k(i,a,f,g){var w=T.hasOwnProperty(a)?T[a]:null;(w!==null?w.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(E(a,f,w,g)&&(f=null),g||w===null?y(a)&&(f===null?i.removeAttribute(a):i.setAttribute(a,""+f)):w.mustUseProperty?i[w.propertyName]=f===null?w.type===3?!1:"":f:(a=w.attributeName,g=w.attributeNamespace,f===null?i.removeAttribute(a):(w=w.type,f=w===3||w===4&&f===!0?"":""+f,g?i.setAttributeNS(g,a,f):i.setAttribute(a,f))))}var W=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),j=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),$=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),fe=Symbol.iterator;function Ne(i){return i===null||typeof i!="object"?null:(i=fe&&i[fe]||i["@@iterator"],typeof i=="function"?i:null)}var ie=Object.assign,J;function z(i){if(J===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);J=a&&a[1]||""}return`
`+J+i}var be=!1;function Le(i,a){if(!i||be)return"";be=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ke){var g=ke}Reflect.construct(i,[],a)}else{try{a.call()}catch(ke){g=ke}i.call(a.prototype)}else{try{throw Error()}catch(ke){g=ke}i()}}catch(ke){if(ke&&g&&typeof ke.stack=="string"){for(var w=ke.stack.split(`
`),A=g.stack.split(`
`),U=w.length-1,re=A.length-1;1<=U&&0<=re&&w[U]!==A[re];)re--;for(;1<=U&&0<=re;U--,re--)if(w[U]!==A[re]){if(U!==1||re!==1)do if(U--,re--,0>re||w[U]!==A[re]){var he=`
`+w[U].replace(" at new "," at ");return i.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",i.displayName)),he}while(1<=U&&0<=re);break}}}finally{be=!1,Error.prepareStackTrace=f}return(i=i?i.displayName||i.name:"")?z(i):""}function oe(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=Le(i.type,!1),i;case 11:return i=Le(i.type.render,!1),i;case 1:return i=Le(i.type,!0),i;default:return""}}function We(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case j:return"Portal";case M:return"Profiler";case R:return"StrictMode";case L:return"Suspense";case ve:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $:return(i.displayName||"Context")+".Consumer";case F:return(i._context.displayName||"Context")+".Provider";case N:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ae:return a=i.displayName||null,a!==null?a:We(i.type)||"Memo";case De:a=i._payload,i=i._init;try{return We(i(a))}catch{}}return null}function ce(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(a);case 8:return a===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function de(i){var a=xe(i)?"checked":"value",f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),g=""+i[a];if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var w=f.get,A=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return w.call(this)},set:function(U){g=""+U,A.call(this,U)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(U){g=""+U},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function me(i){i._valueTracker||(i._valueTracker=de(i))}function _e(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var f=a.getValue(),g="";return i&&(g=xe(i)?i.checked?"true":"false":i.value),i=g,i!==f?(a.setValue(i),!0):!1}function Ve(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Me(i,a){var f=a.checked;return ie({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??i._wrapperState.initialChecked})}function se(i,a){var f=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;f=te(a.value!=null?a.value:f),i._wrapperState={initialChecked:g,initialValue:f,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ue(i,a){a=a.checked,a!=null&&k(i,"checked",a,!1)}function Ie(i,a){ue(i,a);var f=te(a.value),g=a.type;if(f!=null)g==="number"?(f===0&&i.value===""||i.value!=f)&&(i.value=""+f):i.value!==""+f&&(i.value=""+f);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?X(i,a.type,f):a.hasOwnProperty("defaultValue")&&X(i,a.type,te(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Q(i,a,f){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,f||a===i.value||(i.value=a),i.defaultValue=a}f=i.name,f!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,f!==""&&(i.name=f)}function X(i,a,f){(a!=="number"||Ve(i.ownerDocument)!==i)&&(f==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+f&&(i.defaultValue=""+f))}var ne=Array.isArray;function Y(i,a,f,g){if(i=i.options,a){a={};for(var w=0;w<f.length;w++)a["$"+f[w]]=!0;for(f=0;f<i.length;f++)w=a.hasOwnProperty("$"+i[f].value),i[f].selected!==w&&(i[f].selected=w),w&&g&&(i[f].defaultSelected=!0)}else{for(f=""+te(f),a=null,w=0;w<i.length;w++){if(i[w].value===f){i[w].selected=!0,g&&(i[w].defaultSelected=!0);return}a!==null||i[w].disabled||(a=i[w])}a!==null&&(a.selected=!0)}}function pe(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function we(i,a){var f=a.value;if(f==null){if(f=a.children,a=a.defaultValue,f!=null){if(a!=null)throw Error(t(92));if(ne(f)){if(1<f.length)throw Error(t(93));f=f[0]}a=f}a==null&&(a=""),f=a}i._wrapperState={initialValue:te(f)}}function ge(i,a){var f=te(a.value),g=te(a.defaultValue);f!=null&&(f=""+f,f!==i.value&&(i.value=f),a.defaultValue==null&&i.defaultValue!==f&&(i.defaultValue=f)),g!=null&&(i.defaultValue=""+g)}function Xe(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function v(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?v(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var C,q=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,f,g,w){MSApp.execUnsafeLocalFunction(function(){return i(a,f,g,w)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(C=C||document.createElement("div"),C.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=C.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function ee(i,a){if(a){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=a;return}}i.textContent=a}var le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ee=["Webkit","ms","Moz","O"];Object.keys(le).forEach(function(i){Ee.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),le[a]=le[i]})});function Ze(i,a,f){return a==null||typeof a=="boolean"||a===""?"":f||typeof a!="number"||a===0||le.hasOwnProperty(i)&&le[i]?(""+a).trim():a+"px"}function et(i,a){i=i.style;for(var f in a)if(a.hasOwnProperty(f)){var g=f.indexOf("--")===0,w=Ze(f,a[f],g);f==="float"&&(f="cssFloat"),g?i.setProperty(f,w):i[f]=w}}var ft=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(i,a){if(a){if(ft[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function gt(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ur=null;function _r(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Tr=null,kt=null,qt=null;function mt(i){if(i=Mu(i)){if(typeof Tr!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Eh(a),Tr(i.stateNode,i.type,a))}}function Pt(i){kt?qt?qt.push(i):qt=[i]:kt=i}function mr(){if(kt){var i=kt,a=qt;if(qt=kt=null,mt(i),a)for(i=0;i<a.length;i++)mt(a[i])}}function Gt(i,a){return i(a)}function wr(){}var Br=!1;function G(i,a,f){if(Br)return i(a,f);Br=!0;try{return Gt(i,a,f)}finally{Br=!1,(kt!==null||qt!==null)&&(wr(),mr())}}function Z(i,a){var f=i.stateNode;if(f===null)return null;var g=Eh(f);if(g===null)return null;f=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(t(231,a,typeof f));return f}var Ge=!1;if(u)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Ge=!1}function st(i,a,f,g,w,A,U,re,he){var ke=Array.prototype.slice.call(arguments,3);try{a.apply(f,ke)}catch(Qe){this.onError(Qe)}}var nr=!1,Rr=null,kr=!1,Bs=null,yu={onError:function(i){nr=!0,Rr=i}};function is(i,a,f,g,w,A,U,re,he){nr=!1,Rr=null,st.apply(yu,arguments)}function jo(i,a,f,g,w,A,U,re,he){if(is.apply(this,arguments),nr){if(nr){var ke=Rr;nr=!1,Rr=null}else throw Error(t(198));kr||(kr=!0,Bs=ke)}}function pn(i){var a=i,f=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(f=a.return),i=a.return;while(i)}return a.tag===3?f:null}function hi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function mn(i){if(pn(i)!==i)throw Error(t(188))}function Pi(i){var a=i.alternate;if(!a){if(a=pn(i),a===null)throw Error(t(188));return a!==i?null:i}for(var f=i,g=a;;){var w=f.return;if(w===null)break;var A=w.alternate;if(A===null){if(g=w.return,g!==null){f=g;continue}break}if(w.child===A.child){for(A=w.child;A;){if(A===f)return mn(w),i;if(A===g)return mn(w),a;A=A.sibling}throw Error(t(188))}if(f.return!==g.return)f=w,g=A;else{for(var U=!1,re=w.child;re;){if(re===f){U=!0,f=w,g=A;break}if(re===g){U=!0,g=w,f=A;break}re=re.sibling}if(!U){for(re=A.child;re;){if(re===f){U=!0,f=A,g=w;break}if(re===g){U=!0,g=A,f=w;break}re=re.sibling}if(!U)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?i:a}function Bn(i){return i=Pi(i),i!==null?rn(i):null}function rn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=rn(i);if(a!==null)return a;i=i.sibling}return null}var Qa=e.unstable_scheduleCallback,vu=e.unstable_cancelCallback,Gc=e.unstable_shouldYield,qd=e.unstable_requestPaint,Jt=e.unstable_now,Yc=e.unstable_getCurrentPriorityLevel,$o=e.unstable_ImmediatePriority,js=e.unstable_UserBlockingPriority,Yn=e.unstable_NormalPriority,_u=e.unstable_LowPriority,Jc=e.unstable_IdlePriority,zo=null,jn=null;function Xc(i){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(zo,i,void 0,(i.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:eh,wu=Math.log,Zc=Math.LN2;function eh(i){return i>>>=0,i===0?32:31-(wu(i)/Zc|0)|0}var Ka=64,Ga=4194304;function $s(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function qo(i,a){var f=i.pendingLanes;if(f===0)return 0;var g=0,w=i.suspendedLanes,A=i.pingedLanes,U=f&268435455;if(U!==0){var re=U&~w;re!==0?g=$s(re):(A&=U,A!==0&&(g=$s(A)))}else U=f&~w,U!==0?g=$s(U):A!==0&&(g=$s(A));if(g===0)return 0;if(a!==0&&a!==g&&(a&w)===0&&(w=g&-g,A=a&-a,w>=A||w===16&&(A&4194240)!==0))return a;if((g&4)!==0&&(g|=f&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=g;0<a;)f=31-gn(a),w=1<<f,g|=i[f],a&=~w;return g}function Wd(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(i,a){for(var f=i.suspendedLanes,g=i.pingedLanes,w=i.expirationTimes,A=i.pendingLanes;0<A;){var U=31-gn(A),re=1<<U,he=w[U];he===-1?((re&f)===0||(re&g)!==0)&&(w[U]=Wd(re,a)):he<=a&&(i.expiredLanes|=re),A&=~re}}function $n(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Wo(){var i=Ka;return Ka<<=1,(Ka&4194240)===0&&(Ka=64),i}function zs(i){for(var a=[],f=0;31>f;f++)a.push(i);return a}function qs(i,a,f){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-gn(a),i[a]=f}function Yt(i,a){var f=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<f;){var w=31-gn(f),A=1<<w;a[w]=0,g[w]=-1,i[w]=-1,f&=~A}}function Ws(i,a){var f=i.entangledLanes|=a;for(i=i.entanglements;f;){var g=31-gn(f),w=1<<g;w&a|i[g]&a&&(i[g]|=a),f&=~w}}var Ot=0;function Hs(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var th,Ya,rh,nh,ih,bu=!1,Ni=[],Kr=null,fi=null,di=null,Qs=new Map,Jn=new Map,Oi=[],Hd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sh(i,a){switch(i){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Qs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(a.pointerId)}}function In(i,a,f,g,w,A){return i===null||i.nativeEvent!==A?(i={blockedOn:a,domEventName:f,eventSystemFlags:g,nativeEvent:A,targetContainers:[w]},a!==null&&(a=Mu(a),a!==null&&Ya(a)),i):(i.eventSystemFlags|=g,a=i.targetContainers,w!==null&&a.indexOf(w)===-1&&a.push(w),i)}function Qd(i,a,f,g,w){switch(a){case"focusin":return Kr=In(Kr,i,a,f,g,w),!0;case"dragenter":return fi=In(fi,i,a,f,g,w),!0;case"mouseover":return di=In(di,i,a,f,g,w),!0;case"pointerover":var A=w.pointerId;return Qs.set(A,In(Qs.get(A)||null,i,a,f,g,w)),!0;case"gotpointercapture":return A=w.pointerId,Jn.set(A,In(Jn.get(A)||null,i,a,f,g,w)),!0}return!1}function oh(i){var a=Yo(i.target);if(a!==null){var f=pn(a);if(f!==null){if(a=f.tag,a===13){if(a=hi(f),a!==null){i.blockedOn=a,ih(i.priority,function(){rh(f)});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function os(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var f=Ja(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(f===null){f=i.nativeEvent;var g=new f.constructor(f.type,f);Ur=g,f.target.dispatchEvent(g),Ur=null}else return a=Mu(f),a!==null&&Ya(a),i.blockedOn=f,!1;a.shift()}return!0}function Ho(i,a,f){os(i)&&f.delete(a)}function ah(){bu=!1,Kr!==null&&os(Kr)&&(Kr=null),fi!==null&&os(fi)&&(fi=null),di!==null&&os(di)&&(di=null),Qs.forEach(Ho),Jn.forEach(Ho)}function pi(i,a){i.blockedOn===a&&(i.blockedOn=null,bu||(bu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ah)))}function mi(i){function a(w){return pi(w,i)}if(0<Ni.length){pi(Ni[0],i);for(var f=1;f<Ni.length;f++){var g=Ni[f];g.blockedOn===i&&(g.blockedOn=null)}}for(Kr!==null&&pi(Kr,i),fi!==null&&pi(fi,i),di!==null&&pi(di,i),Qs.forEach(a),Jn.forEach(a),f=0;f<Oi.length;f++)g=Oi[f],g.blockedOn===i&&(g.blockedOn=null);for(;0<Oi.length&&(f=Oi[0],f.blockedOn===null);)oh(f),f.blockedOn===null&&Oi.shift()}var as=W.ReactCurrentBatchConfig,Ks=!0;function ir(i,a,f,g){var w=Ot,A=as.transition;as.transition=null;try{Ot=1,Eu(i,a,f,g)}finally{Ot=w,as.transition=A}}function Kd(i,a,f,g){var w=Ot,A=as.transition;as.transition=null;try{Ot=4,Eu(i,a,f,g)}finally{Ot=w,as.transition=A}}function Eu(i,a,f,g){if(Ks){var w=Ja(i,a,f,g);if(w===null)sp(i,a,g,Qo,f),sh(i,g);else if(Qd(w,i,a,f,g))g.stopPropagation();else if(sh(i,g),a&4&&-1<Hd.indexOf(i)){for(;w!==null;){var A=Mu(w);if(A!==null&&th(A),A=Ja(i,a,f,g),A===null&&sp(i,a,g,Qo,f),A===w)break;w=A}w!==null&&g.stopPropagation()}else sp(i,a,g,null,f)}}var Qo=null;function Ja(i,a,f,g){if(Qo=null,i=_r(g),i=Yo(i),i!==null)if(a=pn(i),a===null)i=null;else if(f=a.tag,f===13){if(i=hi(a),i!==null)return i;i=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Qo=i,null}function Su(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yc()){case $o:return 1;case js:return 4;case Yn:case _u:return 16;case Jc:return 536870912;default:return 16}default:return 16}}var zn=null,Xa=null,An=null;function Tu(){if(An)return An;var i,a=Xa,f=a.length,g,w="value"in zn?zn.value:zn.textContent,A=w.length;for(i=0;i<f&&a[i]===w[i];i++);var U=f-i;for(g=1;g<=U&&a[f-g]===w[A-g];g++);return An=w.slice(i,1<g?1-g:void 0)}function Za(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Di(){return!0}function xu(){return!1}function Gr(i){function a(f,g,w,A,U){this._reactName=f,this._targetInst=w,this.type=g,this.nativeEvent=A,this.target=U,this.currentTarget=null;for(var re in i)i.hasOwnProperty(re)&&(f=i[re],this[re]=f?f(A):A[re]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Di:xu,this.isPropagationStopped=xu,this}return ie(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),a}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=Gr(gi),Li=ie({},gi,{view:0,detail:0}),Gd=Gr(Li),tl,ls,Gs,Ko=ie({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mi,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Gs&&(Gs&&i.type==="mousemove"?(tl=i.screenX-Gs.screenX,ls=i.screenY-Gs.screenY):ls=tl=0,Gs=i),tl)},movementY:function(i){return"movementY"in i?i.movementY:ls}}),rl=Gr(Ko),Iu=ie({},Ko,{dataTransfer:0}),lh=Gr(Iu),nl=ie({},Li,{relatedTarget:0}),il=Gr(nl),uh=ie({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),us=Gr(uh),ch=ie({},gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hh=Gr(ch),fh=ie({},gi,{data:0}),Au=Gr(fh),sl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ph(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=dh[i])?!!a[i]:!1}function Mi(){return ph}var p=ie({},Li,{key:function(i){if(i.key){var a=sl[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Za(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mi,charCode:function(i){return i.type==="keypress"?Za(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Za(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),x=Gr(p),O=ie({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=Gr(O),Te=ie({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mi}),Oe=Gr(Te),it=ie({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wt=Gr(it),Pr=ie({},Ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Lt=Gr(Pr),jr=[9,13,27,32],xr=u&&"CompositionEvent"in window,Xn=null;u&&"documentMode"in document&&(Xn=document.documentMode);var qn=u&&"TextEvent"in window&&!Xn,Go=u&&(!xr||Xn&&8<Xn&&11>=Xn),ol=" ",y0=!1;function v0(i,a){switch(i){case"keyup":return jr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var al=!1;function BI(i,a){switch(i){case"compositionend":return _0(a);case"keypress":return a.which!==32?null:(y0=!0,ol);case"textInput":return i=a.data,i===ol&&y0?null:i;default:return null}}function jI(i,a){if(al)return i==="compositionend"||!xr&&v0(i,a)?(i=Tu(),An=Xa=zn=null,al=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Go&&a.locale!=="ko"?null:a.data;default:return null}}var $I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w0(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!$I[i.type]:a==="textarea"}function b0(i,a,f,g){Pt(g),a=_h(a,"onChange"),0<a.length&&(f=new el("onChange","change",null,f,g),i.push({event:f,listeners:a}))}var Cu=null,Ru=null;function zI(i){U0(i,0)}function mh(i){var a=fl(i);if(_e(a))return i}function qI(i,a){if(i==="change")return a}var E0=!1;if(u){var Yd;if(u){var Jd="oninput"in document;if(!Jd){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),Jd=typeof S0.oninput=="function"}Yd=Jd}else Yd=!1;E0=Yd&&(!document.documentMode||9<document.documentMode)}function T0(){Cu&&(Cu.detachEvent("onpropertychange",x0),Ru=Cu=null)}function x0(i){if(i.propertyName==="value"&&mh(Ru)){var a=[];b0(a,Ru,i,_r(i)),G(zI,a)}}function WI(i,a,f){i==="focusin"?(T0(),Cu=a,Ru=f,Cu.attachEvent("onpropertychange",x0)):i==="focusout"&&T0()}function HI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mh(Ru)}function QI(i,a){if(i==="click")return mh(a)}function KI(i,a){if(i==="input"||i==="change")return mh(a)}function GI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var yi=typeof Object.is=="function"?Object.is:GI;function ku(i,a){if(yi(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var f=Object.keys(i),g=Object.keys(a);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var w=f[g];if(!c.call(a,w)||!yi(i[w],a[w]))return!1}return!0}function I0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function A0(i,a){var f=I0(i);i=0;for(var g;f;){if(f.nodeType===3){if(g=i+f.textContent.length,i<=a&&g>=a)return{node:f,offset:a-i};i=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=I0(f)}}function C0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?C0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function R0(){for(var i=window,a=Ve();a instanceof i.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)i=a.contentWindow;else break;a=Ve(i.document)}return a}function Xd(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function YI(i){var a=R0(),f=i.focusedElem,g=i.selectionRange;if(a!==f&&f&&f.ownerDocument&&C0(f.ownerDocument.documentElement,f)){if(g!==null&&Xd(f)){if(a=g.start,i=g.end,i===void 0&&(i=a),"selectionStart"in f)f.selectionStart=a,f.selectionEnd=Math.min(i,f.value.length);else if(i=(a=f.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var w=f.textContent.length,A=Math.min(g.start,w);g=g.end===void 0?A:Math.min(g.end,w),!i.extend&&A>g&&(w=g,g=A,A=w),w=A0(f,A);var U=A0(f,g);w&&U&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==U.node||i.focusOffset!==U.offset)&&(a=a.createRange(),a.setStart(w.node,w.offset),i.removeAllRanges(),A>g?(i.addRange(a),i.extend(U.node,U.offset)):(a.setEnd(U.node,U.offset),i.addRange(a)))}}for(a=[],i=f;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<a.length;f++)i=a[f],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var JI=u&&"documentMode"in document&&11>=document.documentMode,ll=null,Zd=null,Pu=null,ep=!1;function k0(i,a,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ep||ll==null||ll!==Ve(g)||(g=ll,"selectionStart"in g&&Xd(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Pu&&ku(Pu,g)||(Pu=g,g=_h(Zd,"onSelect"),0<g.length&&(a=new el("onSelect","select",null,a,f),i.push({event:a,listeners:g}),a.target=ll)))}function gh(i,a){var f={};return f[i.toLowerCase()]=a.toLowerCase(),f["Webkit"+i]="webkit"+a,f["Moz"+i]="moz"+a,f}var ul={animationend:gh("Animation","AnimationEnd"),animationiteration:gh("Animation","AnimationIteration"),animationstart:gh("Animation","AnimationStart"),transitionend:gh("Transition","TransitionEnd")},tp={},P0={};u&&(P0=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function yh(i){if(tp[i])return tp[i];if(!ul[i])return i;var a=ul[i],f;for(f in a)if(a.hasOwnProperty(f)&&f in P0)return tp[i]=a[f];return i}var N0=yh("animationend"),O0=yh("animationiteration"),D0=yh("animationstart"),L0=yh("transitionend"),M0=new Map,F0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(i,a){M0.set(i,a),o(a,[i])}for(var rp=0;rp<F0.length;rp++){var np=F0[rp],XI=np.toLowerCase(),ZI=np[0].toUpperCase()+np.slice(1);Ys(XI,"on"+ZI)}Ys(N0,"onAnimationEnd"),Ys(O0,"onAnimationIteration"),Ys(D0,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(L0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nu));function V0(i,a,f){var g=i.type||"unknown-event";i.currentTarget=f,jo(g,a,void 0,i),i.currentTarget=null}function U0(i,a){a=(a&4)!==0;for(var f=0;f<i.length;f++){var g=i[f],w=g.event;g=g.listeners;e:{var A=void 0;if(a)for(var U=g.length-1;0<=U;U--){var re=g[U],he=re.instance,ke=re.currentTarget;if(re=re.listener,he!==A&&w.isPropagationStopped())break e;V0(w,re,ke),A=he}else for(U=0;U<g.length;U++){if(re=g[U],he=re.instance,ke=re.currentTarget,re=re.listener,he!==A&&w.isPropagationStopped())break e;V0(w,re,ke),A=he}}}if(kr)throw i=Bs,kr=!1,Bs=null,i}function Zt(i,a){var f=a[hp];f===void 0&&(f=a[hp]=new Set);var g=i+"__bubble";f.has(g)||(B0(a,i,2,!1),f.add(g))}function ip(i,a,f){var g=0;a&&(g|=4),B0(f,i,g,a)}var vh="_reactListening"+Math.random().toString(36).slice(2);function Ou(i){if(!i[vh]){i[vh]=!0,n.forEach(function(f){f!=="selectionchange"&&(eA.has(f)||ip(f,!1,i),ip(f,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[vh]||(a[vh]=!0,ip("selectionchange",!1,a))}}function B0(i,a,f,g){switch(Su(a)){case 1:var w=ir;break;case 4:w=Kd;break;default:w=Eu}f=w.bind(null,a,f,i),w=void 0,!Ge||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(w=!0),g?w!==void 0?i.addEventListener(a,f,{capture:!0,passive:w}):i.addEventListener(a,f,!0):w!==void 0?i.addEventListener(a,f,{passive:w}):i.addEventListener(a,f,!1)}function sp(i,a,f,g,w){var A=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var U=g.tag;if(U===3||U===4){var re=g.stateNode.containerInfo;if(re===w||re.nodeType===8&&re.parentNode===w)break;if(U===4)for(U=g.return;U!==null;){var he=U.tag;if((he===3||he===4)&&(he=U.stateNode.containerInfo,he===w||he.nodeType===8&&he.parentNode===w))return;U=U.return}for(;re!==null;){if(U=Yo(re),U===null)return;if(he=U.tag,he===5||he===6){g=A=U;continue e}re=re.parentNode}}g=g.return}G(function(){var ke=A,Qe=_r(f),Je=[];e:{var He=M0.get(i);if(He!==void 0){var ot=el,ut=i;switch(i){case"keypress":if(Za(f)===0)break e;case"keydown":case"keyup":ot=x;break;case"focusin":ut="focus",ot=il;break;case"focusout":ut="blur",ot=il;break;case"beforeblur":case"afterblur":ot=il;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Oe;break;case N0:case O0:case D0:ot=us;break;case L0:ot=Wt;break;case"scroll":ot=Gd;break;case"wheel":ot=Lt;break;case"copy":case"cut":case"paste":ot=hh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=K}var ht=(a&4)!==0,br=!ht&&i==="scroll",Ae=ht?He!==null?He+"Capture":null:He;ht=[];for(var ye=ke,Ce;ye!==null;){Ce=ye;var tt=Ce.stateNode;if(Ce.tag===5&&tt!==null&&(Ce=tt,Ae!==null&&(tt=Z(ye,Ae),tt!=null&&ht.push(Du(ye,tt,Ce)))),br)break;ye=ye.return}0<ht.length&&(He=new ot(He,ut,null,f,Qe),Je.push({event:He,listeners:ht}))}}if((a&7)===0){e:{if(He=i==="mouseover"||i==="pointerover",ot=i==="mouseout"||i==="pointerout",He&&f!==Ur&&(ut=f.relatedTarget||f.fromElement)&&(Yo(ut)||ut[cs]))break e;if((ot||He)&&(He=Qe.window===Qe?Qe:(He=Qe.ownerDocument)?He.defaultView||He.parentWindow:window,ot?(ut=f.relatedTarget||f.toElement,ot=ke,ut=ut?Yo(ut):null,ut!==null&&(br=pn(ut),ut!==br||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(ot=null,ut=ke),ot!==ut)){if(ht=rl,tt="onMouseLeave",Ae="onMouseEnter",ye="mouse",(i==="pointerout"||i==="pointerover")&&(ht=K,tt="onPointerLeave",Ae="onPointerEnter",ye="pointer"),br=ot==null?He:fl(ot),Ce=ut==null?He:fl(ut),He=new ht(tt,ye+"leave",ot,f,Qe),He.target=br,He.relatedTarget=Ce,tt=null,Yo(Qe)===ke&&(ht=new ht(Ae,ye+"enter",ut,f,Qe),ht.target=Ce,ht.relatedTarget=br,tt=ht),br=tt,ot&&ut)t:{for(ht=ot,Ae=ut,ye=0,Ce=ht;Ce;Ce=cl(Ce))ye++;for(Ce=0,tt=Ae;tt;tt=cl(tt))Ce++;for(;0<ye-Ce;)ht=cl(ht),ye--;for(;0<Ce-ye;)Ae=cl(Ae),Ce--;for(;ye--;){if(ht===Ae||Ae!==null&&ht===Ae.alternate)break t;ht=cl(ht),Ae=cl(Ae)}ht=null}else ht=null;ot!==null&&j0(Je,He,ot,ht,!1),ut!==null&&br!==null&&j0(Je,br,ut,ht,!0)}}e:{if(He=ke?fl(ke):window,ot=He.nodeName&&He.nodeName.toLowerCase(),ot==="select"||ot==="input"&&He.type==="file")var dt=qI;else if(w0(He))if(E0)dt=KI;else{dt=HI;var vt=WI}else(ot=He.nodeName)&&ot.toLowerCase()==="input"&&(He.type==="checkbox"||He.type==="radio")&&(dt=QI);if(dt&&(dt=dt(i,ke))){b0(Je,dt,f,Qe);break e}vt&&vt(i,He,ke),i==="focusout"&&(vt=He._wrapperState)&&vt.controlled&&He.type==="number"&&X(He,"number",He.value)}switch(vt=ke?fl(ke):window,i){case"focusin":(w0(vt)||vt.contentEditable==="true")&&(ll=vt,Zd=ke,Pu=null);break;case"focusout":Pu=Zd=ll=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,k0(Je,f,Qe);break;case"selectionchange":if(JI)break;case"keydown":case"keyup":k0(Je,f,Qe)}var _t;if(xr)e:{switch(i){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else al?v0(i,f)&&(St="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(St="onCompositionStart");St&&(Go&&f.locale!=="ko"&&(al||St!=="onCompositionStart"?St==="onCompositionEnd"&&al&&(_t=Tu()):(zn=Qe,Xa="value"in zn?zn.value:zn.textContent,al=!0)),vt=_h(ke,St),0<vt.length&&(St=new Au(St,i,null,f,Qe),Je.push({event:St,listeners:vt}),_t?St.data=_t:(_t=_0(f),_t!==null&&(St.data=_t)))),(_t=qn?BI(i,f):jI(i,f))&&(ke=_h(ke,"onBeforeInput"),0<ke.length&&(Qe=new Au("onBeforeInput","beforeinput",null,f,Qe),Je.push({event:Qe,listeners:ke}),Qe.data=_t))}U0(Je,a)})}function Du(i,a,f){return{instance:i,listener:a,currentTarget:f}}function _h(i,a){for(var f=a+"Capture",g=[];i!==null;){var w=i,A=w.stateNode;w.tag===5&&A!==null&&(w=A,A=Z(i,f),A!=null&&g.unshift(Du(i,A,w)),A=Z(i,a),A!=null&&g.push(Du(i,A,w))),i=i.return}return g}function cl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function j0(i,a,f,g,w){for(var A=a._reactName,U=[];f!==null&&f!==g;){var re=f,he=re.alternate,ke=re.stateNode;if(he!==null&&he===g)break;re.tag===5&&ke!==null&&(re=ke,w?(he=Z(f,A),he!=null&&U.unshift(Du(f,he,re))):w||(he=Z(f,A),he!=null&&U.push(Du(f,he,re)))),f=f.return}U.length!==0&&i.push({event:a,listeners:U})}var tA=/\r\n?/g,rA=/\u0000|\uFFFD/g;function $0(i){return(typeof i=="string"?i:""+i).replace(tA,`
`).replace(rA,"")}function wh(i,a,f){if(a=$0(a),$0(i)!==a&&f)throw Error(t(425))}function bh(){}var op=null,ap=null;function lp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var up=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,iA=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(i){return z0.resolve(null).then(i).catch(sA)}:up;function sA(i){setTimeout(function(){throw i})}function cp(i,a){var f=a,g=0;do{var w=f.nextSibling;if(i.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(g===0){i.removeChild(w),mi(a);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=w}while(f);mi(a)}function Js(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function q0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return i;a--}else f==="/$"&&a++}i=i.previousSibling}return null}var hl=Math.random().toString(36).slice(2),Fi="__reactFiber$"+hl,Lu="__reactProps$"+hl,cs="__reactContainer$"+hl,hp="__reactEvents$"+hl,oA="__reactListeners$"+hl,aA="__reactHandles$"+hl;function Yo(i){var a=i[Fi];if(a)return a;for(var f=i.parentNode;f;){if(a=f[cs]||f[Fi]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(i=q0(i);i!==null;){if(f=i[Fi])return f;i=q0(i)}return a}i=f,f=i.parentNode}return null}function Mu(i){return i=i[Fi]||i[cs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function fl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Eh(i){return i[Lu]||null}var fp=[],dl=-1;function Xs(i){return{current:i}}function er(i){0>dl||(i.current=fp[dl],fp[dl]=null,dl--)}function Xt(i,a){dl++,fp[dl]=i.current,i.current=a}var Zs={},nn=Xs(Zs),Cn=Xs(!1),Jo=Zs;function pl(i,a){var f=i.type.contextTypes;if(!f)return Zs;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var w={},A;for(A in f)w[A]=a[A];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=w),w}function Rn(i){return i=i.childContextTypes,i!=null}function Sh(){er(Cn),er(nn)}function W0(i,a,f){if(nn.current!==Zs)throw Error(t(168));Xt(nn,a),Xt(Cn,f)}function H0(i,a,f){var g=i.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var w in g)if(!(w in a))throw Error(t(108,ce(i)||"Unknown",w));return ie({},f,g)}function Th(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Zs,Jo=nn.current,Xt(nn,i),Xt(Cn,Cn.current),!0}function Q0(i,a,f){var g=i.stateNode;if(!g)throw Error(t(169));f?(i=H0(i,a,Jo),g.__reactInternalMemoizedMergedChildContext=i,er(Cn),er(nn),Xt(nn,i)):er(Cn),Xt(Cn,f)}var hs=null,xh=!1,dp=!1;function K0(i){hs===null?hs=[i]:hs.push(i)}function lA(i){xh=!0,K0(i)}function eo(){if(!dp&&hs!==null){dp=!0;var i=0,a=Ot;try{var f=hs;for(Ot=1;i<f.length;i++){var g=f[i];do g=g(!0);while(g!==null)}hs=null,xh=!1}catch(w){throw hs!==null&&(hs=hs.slice(i+1)),Qa($o,eo),w}finally{Ot=a,dp=!1}}return null}var ml=[],gl=0,Ih=null,Ah=0,Zn=[],ei=0,Xo=null,fs=1,ds="";function Zo(i,a){ml[gl++]=Ah,ml[gl++]=Ih,Ih=i,Ah=a}function G0(i,a,f){Zn[ei++]=fs,Zn[ei++]=ds,Zn[ei++]=Xo,Xo=i;var g=fs;i=ds;var w=32-gn(g)-1;g&=~(1<<w),f+=1;var A=32-gn(a)+w;if(30<A){var U=w-w%5;A=(g&(1<<U)-1).toString(32),g>>=U,w-=U,fs=1<<32-gn(a)+w|f<<w|g,ds=A+i}else fs=1<<A|f<<w|g,ds=i}function pp(i){i.return!==null&&(Zo(i,1),G0(i,1,0))}function mp(i){for(;i===Ih;)Ih=ml[--gl],ml[gl]=null,Ah=ml[--gl],ml[gl]=null;for(;i===Xo;)Xo=Zn[--ei],Zn[ei]=null,ds=Zn[--ei],Zn[ei]=null,fs=Zn[--ei],Zn[ei]=null}var Wn=null,Hn=null,sr=!1,vi=null;function Y0(i,a){var f=ii(5,null,null,0);f.elementType="DELETED",f.stateNode=a,f.return=i,a=i.deletions,a===null?(i.deletions=[f],i.flags|=16):a.push(f)}function J0(i,a){switch(i.tag){case 5:var f=i.type;return a=a.nodeType!==1||f.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Wn=i,Hn=Js(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Wn=i,Hn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(f=Xo!==null?{id:fs,overflow:ds}:null,i.memoizedState={dehydrated:a,treeContext:f,retryLane:1073741824},f=ii(18,null,null,0),f.stateNode=a,f.return=i,i.child=f,Wn=i,Hn=null,!0):!1;default:return!1}}function gp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function yp(i){if(sr){var a=Hn;if(a){var f=a;if(!J0(i,a)){if(gp(i))throw Error(t(418));a=Js(f.nextSibling);var g=Wn;a&&J0(i,a)?Y0(g,f):(i.flags=i.flags&-4097|2,sr=!1,Wn=i)}}else{if(gp(i))throw Error(t(418));i.flags=i.flags&-4097|2,sr=!1,Wn=i}}}function X0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Wn=i}function Ch(i){if(i!==Wn)return!1;if(!sr)return X0(i),sr=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!lp(i.type,i.memoizedProps)),a&&(a=Hn)){if(gp(i))throw Z0(),Error(t(418));for(;a;)Y0(i,a),a=Js(a.nextSibling)}if(X0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"){if(a===0){Hn=Js(i.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++}i=i.nextSibling}Hn=null}}else Hn=Wn?Js(i.stateNode.nextSibling):null;return!0}function Z0(){for(var i=Hn;i;)i=Js(i.nextSibling)}function yl(){Hn=Wn=null,sr=!1}function vp(i){vi===null?vi=[i]:vi.push(i)}var uA=W.ReactCurrentBatchConfig;function Fu(i,a,f){if(i=f.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,i));var w=g,A=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===A?a.ref:(a=function(U){var re=w.refs;U===null?delete re[A]:re[A]=U},a._stringRef=A,a)}if(typeof i!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,i))}return i}function Rh(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function e_(i){var a=i._init;return a(i._payload)}function t_(i){function a(Ae,ye){if(i){var Ce=Ae.deletions;Ce===null?(Ae.deletions=[ye],Ae.flags|=16):Ce.push(ye)}}function f(Ae,ye){if(!i)return null;for(;ye!==null;)a(Ae,ye),ye=ye.sibling;return null}function g(Ae,ye){for(Ae=new Map;ye!==null;)ye.key!==null?Ae.set(ye.key,ye):Ae.set(ye.index,ye),ye=ye.sibling;return Ae}function w(Ae,ye){return Ae=lo(Ae,ye),Ae.index=0,Ae.sibling=null,Ae}function A(Ae,ye,Ce){return Ae.index=Ce,i?(Ce=Ae.alternate,Ce!==null?(Ce=Ce.index,Ce<ye?(Ae.flags|=2,ye):Ce):(Ae.flags|=2,ye)):(Ae.flags|=1048576,ye)}function U(Ae){return i&&Ae.alternate===null&&(Ae.flags|=2),Ae}function re(Ae,ye,Ce,tt){return ye===null||ye.tag!==6?(ye=um(Ce,Ae.mode,tt),ye.return=Ae,ye):(ye=w(ye,Ce),ye.return=Ae,ye)}function he(Ae,ye,Ce,tt){var dt=Ce.type;return dt===P?Qe(Ae,ye,Ce.props.children,tt,Ce.key):ye!==null&&(ye.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===De&&e_(dt)===ye.type)?(tt=w(ye,Ce.props),tt.ref=Fu(Ae,ye,Ce),tt.return=Ae,tt):(tt=Zh(Ce.type,Ce.key,Ce.props,null,Ae.mode,tt),tt.ref=Fu(Ae,ye,Ce),tt.return=Ae,tt)}function ke(Ae,ye,Ce,tt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ce.containerInfo||ye.stateNode.implementation!==Ce.implementation?(ye=cm(Ce,Ae.mode,tt),ye.return=Ae,ye):(ye=w(ye,Ce.children||[]),ye.return=Ae,ye)}function Qe(Ae,ye,Ce,tt,dt){return ye===null||ye.tag!==7?(ye=aa(Ce,Ae.mode,tt,dt),ye.return=Ae,ye):(ye=w(ye,Ce),ye.return=Ae,ye)}function Je(Ae,ye,Ce){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=um(""+ye,Ae.mode,Ce),ye.return=Ae,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case H:return Ce=Zh(ye.type,ye.key,ye.props,null,Ae.mode,Ce),Ce.ref=Fu(Ae,null,ye),Ce.return=Ae,Ce;case j:return ye=cm(ye,Ae.mode,Ce),ye.return=Ae,ye;case De:var tt=ye._init;return Je(Ae,tt(ye._payload),Ce)}if(ne(ye)||Ne(ye))return ye=aa(ye,Ae.mode,Ce,null),ye.return=Ae,ye;Rh(Ae,ye)}return null}function He(Ae,ye,Ce,tt){var dt=ye!==null?ye.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return dt!==null?null:re(Ae,ye,""+Ce,tt);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case H:return Ce.key===dt?he(Ae,ye,Ce,tt):null;case j:return Ce.key===dt?ke(Ae,ye,Ce,tt):null;case De:return dt=Ce._init,He(Ae,ye,dt(Ce._payload),tt)}if(ne(Ce)||Ne(Ce))return dt!==null?null:Qe(Ae,ye,Ce,tt,null);Rh(Ae,Ce)}return null}function ot(Ae,ye,Ce,tt,dt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Ae=Ae.get(Ce)||null,re(ye,Ae,""+tt,dt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case H:return Ae=Ae.get(tt.key===null?Ce:tt.key)||null,he(ye,Ae,tt,dt);case j:return Ae=Ae.get(tt.key===null?Ce:tt.key)||null,ke(ye,Ae,tt,dt);case De:var vt=tt._init;return ot(Ae,ye,Ce,vt(tt._payload),dt)}if(ne(tt)||Ne(tt))return Ae=Ae.get(Ce)||null,Qe(ye,Ae,tt,dt,null);Rh(ye,tt)}return null}function ut(Ae,ye,Ce,tt){for(var dt=null,vt=null,_t=ye,St=ye=0,qr=null;_t!==null&&St<Ce.length;St++){_t.index>St?(qr=_t,_t=null):qr=_t.sibling;var Ut=He(Ae,_t,Ce[St],tt);if(Ut===null){_t===null&&(_t=qr);break}i&&_t&&Ut.alternate===null&&a(Ae,_t),ye=A(Ut,ye,St),vt===null?dt=Ut:vt.sibling=Ut,vt=Ut,_t=qr}if(St===Ce.length)return f(Ae,_t),sr&&Zo(Ae,St),dt;if(_t===null){for(;St<Ce.length;St++)_t=Je(Ae,Ce[St],tt),_t!==null&&(ye=A(_t,ye,St),vt===null?dt=_t:vt.sibling=_t,vt=_t);return sr&&Zo(Ae,St),dt}for(_t=g(Ae,_t);St<Ce.length;St++)qr=ot(_t,Ae,St,Ce[St],tt),qr!==null&&(i&&qr.alternate!==null&&_t.delete(qr.key===null?St:qr.key),ye=A(qr,ye,St),vt===null?dt=qr:vt.sibling=qr,vt=qr);return i&&_t.forEach(function(uo){return a(Ae,uo)}),sr&&Zo(Ae,St),dt}function ht(Ae,ye,Ce,tt){var dt=Ne(Ce);if(typeof dt!="function")throw Error(t(150));if(Ce=dt.call(Ce),Ce==null)throw Error(t(151));for(var vt=dt=null,_t=ye,St=ye=0,qr=null,Ut=Ce.next();_t!==null&&!Ut.done;St++,Ut=Ce.next()){_t.index>St?(qr=_t,_t=null):qr=_t.sibling;var uo=He(Ae,_t,Ut.value,tt);if(uo===null){_t===null&&(_t=qr);break}i&&_t&&uo.alternate===null&&a(Ae,_t),ye=A(uo,ye,St),vt===null?dt=uo:vt.sibling=uo,vt=uo,_t=qr}if(Ut.done)return f(Ae,_t),sr&&Zo(Ae,St),dt;if(_t===null){for(;!Ut.done;St++,Ut=Ce.next())Ut=Je(Ae,Ut.value,tt),Ut!==null&&(ye=A(Ut,ye,St),vt===null?dt=Ut:vt.sibling=Ut,vt=Ut);return sr&&Zo(Ae,St),dt}for(_t=g(Ae,_t);!Ut.done;St++,Ut=Ce.next())Ut=ot(_t,Ae,St,Ut.value,tt),Ut!==null&&(i&&Ut.alternate!==null&&_t.delete(Ut.key===null?St:Ut.key),ye=A(Ut,ye,St),vt===null?dt=Ut:vt.sibling=Ut,vt=Ut);return i&&_t.forEach(function($A){return a(Ae,$A)}),sr&&Zo(Ae,St),dt}function br(Ae,ye,Ce,tt){if(typeof Ce=="object"&&Ce!==null&&Ce.type===P&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case H:e:{for(var dt=Ce.key,vt=ye;vt!==null;){if(vt.key===dt){if(dt=Ce.type,dt===P){if(vt.tag===7){f(Ae,vt.sibling),ye=w(vt,Ce.props.children),ye.return=Ae,Ae=ye;break e}}else if(vt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===De&&e_(dt)===vt.type){f(Ae,vt.sibling),ye=w(vt,Ce.props),ye.ref=Fu(Ae,vt,Ce),ye.return=Ae,Ae=ye;break e}f(Ae,vt);break}else a(Ae,vt);vt=vt.sibling}Ce.type===P?(ye=aa(Ce.props.children,Ae.mode,tt,Ce.key),ye.return=Ae,Ae=ye):(tt=Zh(Ce.type,Ce.key,Ce.props,null,Ae.mode,tt),tt.ref=Fu(Ae,ye,Ce),tt.return=Ae,Ae=tt)}return U(Ae);case j:e:{for(vt=Ce.key;ye!==null;){if(ye.key===vt)if(ye.tag===4&&ye.stateNode.containerInfo===Ce.containerInfo&&ye.stateNode.implementation===Ce.implementation){f(Ae,ye.sibling),ye=w(ye,Ce.children||[]),ye.return=Ae,Ae=ye;break e}else{f(Ae,ye);break}else a(Ae,ye);ye=ye.sibling}ye=cm(Ce,Ae.mode,tt),ye.return=Ae,Ae=ye}return U(Ae);case De:return vt=Ce._init,br(Ae,ye,vt(Ce._payload),tt)}if(ne(Ce))return ut(Ae,ye,Ce,tt);if(Ne(Ce))return ht(Ae,ye,Ce,tt);Rh(Ae,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,ye!==null&&ye.tag===6?(f(Ae,ye.sibling),ye=w(ye,Ce),ye.return=Ae,Ae=ye):(f(Ae,ye),ye=um(Ce,Ae.mode,tt),ye.return=Ae,Ae=ye),U(Ae)):f(Ae,ye)}return br}var vl=t_(!0),r_=t_(!1),kh=Xs(null),Ph=null,_l=null,_p=null;function wp(){_p=_l=Ph=null}function bp(i){var a=kh.current;er(kh),i._currentValue=a}function Ep(i,a,f){for(;i!==null;){var g=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),i===f)break;i=i.return}}function wl(i,a){Ph=i,_p=_l=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(kn=!0),i.firstContext=null)}function ti(i){var a=i._currentValue;if(_p!==i)if(i={context:i,memoizedValue:a,next:null},_l===null){if(Ph===null)throw Error(t(308));_l=i,Ph.dependencies={lanes:0,firstContext:i}}else _l=_l.next=i;return a}var ea=null;function Sp(i){ea===null?ea=[i]:ea.push(i)}function n_(i,a,f,g){var w=a.interleaved;return w===null?(f.next=f,Sp(a)):(f.next=w.next,w.next=f),a.interleaved=f,ps(i,g)}function ps(i,a){i.lanes|=a;var f=i.alternate;for(f!==null&&(f.lanes|=a),f=i,i=i.return;i!==null;)i.childLanes|=a,f=i.alternate,f!==null&&(f.childLanes|=a),f=i,i=i.return;return f.tag===3?f.stateNode:null}var to=!1;function Tp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ms(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ro(i,a,f){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Vt&2)!==0){var w=g.pending;return w===null?a.next=a:(a.next=w.next,w.next=a),g.pending=a,ps(i,f)}return w=g.interleaved,w===null?(a.next=a,Sp(g)):(a.next=w.next,w.next=a),g.interleaved=a,ps(i,f)}function Nh(i,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194240)!==0)){var g=a.lanes;g&=i.pendingLanes,f|=g,a.lanes=f,Ws(i,f)}}function s_(i,a){var f=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var w=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var U={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};A===null?w=A=U:A=A.next=U,f=f.next}while(f!==null);A===null?w=A=a:A=A.next=a}else w=A=a;f={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:A,shared:g.shared,effects:g.effects},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=a:i.next=a,f.lastBaseUpdate=a}function Oh(i,a,f,g){var w=i.updateQueue;to=!1;var A=w.firstBaseUpdate,U=w.lastBaseUpdate,re=w.shared.pending;if(re!==null){w.shared.pending=null;var he=re,ke=he.next;he.next=null,U===null?A=ke:U.next=ke,U=he;var Qe=i.alternate;Qe!==null&&(Qe=Qe.updateQueue,re=Qe.lastBaseUpdate,re!==U&&(re===null?Qe.firstBaseUpdate=ke:re.next=ke,Qe.lastBaseUpdate=he))}if(A!==null){var Je=w.baseState;U=0,Qe=ke=he=null,re=A;do{var He=re.lane,ot=re.eventTime;if((g&He)===He){Qe!==null&&(Qe=Qe.next={eventTime:ot,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var ut=i,ht=re;switch(He=a,ot=f,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){Je=ut.call(ot,Je,He);break e}Je=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,He=typeof ut=="function"?ut.call(ot,Je,He):ut,He==null)break e;Je=ie({},Je,He);break e;case 2:to=!0}}re.callback!==null&&re.lane!==0&&(i.flags|=64,He=w.effects,He===null?w.effects=[re]:He.push(re))}else ot={eventTime:ot,lane:He,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Qe===null?(ke=Qe=ot,he=Je):Qe=Qe.next=ot,U|=He;if(re=re.next,re===null){if(re=w.shared.pending,re===null)break;He=re,re=He.next,He.next=null,w.lastBaseUpdate=He,w.shared.pending=null}}while(!0);if(Qe===null&&(he=Je),w.baseState=he,w.firstBaseUpdate=ke,w.lastBaseUpdate=Qe,a=w.shared.interleaved,a!==null){w=a;do U|=w.lane,w=w.next;while(w!==a)}else A===null&&(w.shared.lanes=0);na|=U,i.lanes=U,i.memoizedState=Je}}function o_(i,a,f){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var g=i[a],w=g.callback;if(w!==null){if(g.callback=null,g=f,typeof w!="function")throw Error(t(191,w));w.call(g)}}}var Vu={},Vi=Xs(Vu),Uu=Xs(Vu),Bu=Xs(Vu);function ta(i){if(i===Vu)throw Error(t(174));return i}function xp(i,a){switch(Xt(Bu,a),Xt(Uu,i),Xt(Vi,Vu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:b(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=b(a,i)}er(Vi),Xt(Vi,a)}function bl(){er(Vi),er(Uu),er(Bu)}function a_(i){ta(Bu.current);var a=ta(Vi.current),f=b(a,i.type);a!==f&&(Xt(Uu,i),Xt(Vi,f))}function Ip(i){Uu.current===i&&(er(Vi),er(Uu))}var cr=Xs(0);function Dh(i){for(var a=i;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ap=[];function Cp(){for(var i=0;i<Ap.length;i++)Ap[i]._workInProgressVersionPrimary=null;Ap.length=0}var Lh=W.ReactCurrentDispatcher,Rp=W.ReactCurrentBatchConfig,ra=0,hr=null,Nr=null,$r=null,Mh=!1,ju=!1,$u=0,cA=0;function sn(){throw Error(t(321))}function kp(i,a){if(a===null)return!1;for(var f=0;f<a.length&&f<i.length;f++)if(!yi(i[f],a[f]))return!1;return!0}function Pp(i,a,f,g,w,A){if(ra=A,hr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Lh.current=i===null||i.memoizedState===null?pA:mA,i=f(g,w),ju){A=0;do{if(ju=!1,$u=0,25<=A)throw Error(t(301));A+=1,$r=Nr=null,a.updateQueue=null,Lh.current=gA,i=f(g,w)}while(ju)}if(Lh.current=Uh,a=Nr!==null&&Nr.next!==null,ra=0,$r=Nr=hr=null,Mh=!1,a)throw Error(t(300));return i}function Np(){var i=$u!==0;return $u=0,i}function Ui(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?hr.memoizedState=$r=i:$r=$r.next=i,$r}function ri(){if(Nr===null){var i=hr.alternate;i=i!==null?i.memoizedState:null}else i=Nr.next;var a=$r===null?hr.memoizedState:$r.next;if(a!==null)$r=a,Nr=i;else{if(i===null)throw Error(t(310));Nr=i,i={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},$r===null?hr.memoizedState=$r=i:$r=$r.next=i}return $r}function zu(i,a){return typeof a=="function"?a(i):a}function Op(i){var a=ri(),f=a.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=i;var g=Nr,w=g.baseQueue,A=f.pending;if(A!==null){if(w!==null){var U=w.next;w.next=A.next,A.next=U}g.baseQueue=w=A,f.pending=null}if(w!==null){A=w.next,g=g.baseState;var re=U=null,he=null,ke=A;do{var Qe=ke.lane;if((ra&Qe)===Qe)he!==null&&(he=he.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),g=ke.hasEagerState?ke.eagerState:i(g,ke.action);else{var Je={lane:Qe,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};he===null?(re=he=Je,U=g):he=he.next=Je,hr.lanes|=Qe,na|=Qe}ke=ke.next}while(ke!==null&&ke!==A);he===null?U=g:he.next=re,yi(g,a.memoizedState)||(kn=!0),a.memoizedState=g,a.baseState=U,a.baseQueue=he,f.lastRenderedState=g}if(i=f.interleaved,i!==null){w=i;do A=w.lane,hr.lanes|=A,na|=A,w=w.next;while(w!==i)}else w===null&&(f.lanes=0);return[a.memoizedState,f.dispatch]}function Dp(i){var a=ri(),f=a.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=i;var g=f.dispatch,w=f.pending,A=a.memoizedState;if(w!==null){f.pending=null;var U=w=w.next;do A=i(A,U.action),U=U.next;while(U!==w);yi(A,a.memoizedState)||(kn=!0),a.memoizedState=A,a.baseQueue===null&&(a.baseState=A),f.lastRenderedState=A}return[A,g]}function l_(){}function u_(i,a){var f=hr,g=ri(),w=a(),A=!yi(g.memoizedState,w);if(A&&(g.memoizedState=w,kn=!0),g=g.queue,Lp(f_.bind(null,f,g,i),[i]),g.getSnapshot!==a||A||$r!==null&&$r.memoizedState.tag&1){if(f.flags|=2048,qu(9,h_.bind(null,f,g,w,a),void 0,null),zr===null)throw Error(t(349));(ra&30)!==0||c_(f,a,w)}return w}function c_(i,a,f){i.flags|=16384,i={getSnapshot:a,value:f},a=hr.updateQueue,a===null?(a={lastEffect:null,stores:null},hr.updateQueue=a,a.stores=[i]):(f=a.stores,f===null?a.stores=[i]:f.push(i))}function h_(i,a,f,g){a.value=f,a.getSnapshot=g,d_(a)&&p_(i)}function f_(i,a,f){return f(function(){d_(a)&&p_(i)})}function d_(i){var a=i.getSnapshot;i=i.value;try{var f=a();return!yi(i,f)}catch{return!0}}function p_(i){var a=ps(i,1);a!==null&&Ei(a,i,1,-1)}function m_(i){var a=Ui();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zu,lastRenderedState:i},a.queue=i,i=i.dispatch=dA.bind(null,hr,i),[a.memoizedState,i]}function qu(i,a,f,g){return i={tag:i,create:a,destroy:f,deps:g,next:null},a=hr.updateQueue,a===null?(a={lastEffect:null,stores:null},hr.updateQueue=a,a.lastEffect=i.next=i):(f=a.lastEffect,f===null?a.lastEffect=i.next=i:(g=f.next,f.next=i,i.next=g,a.lastEffect=i)),i}function g_(){return ri().memoizedState}function Fh(i,a,f,g){var w=Ui();hr.flags|=i,w.memoizedState=qu(1|a,f,void 0,g===void 0?null:g)}function Vh(i,a,f,g){var w=ri();g=g===void 0?null:g;var A=void 0;if(Nr!==null){var U=Nr.memoizedState;if(A=U.destroy,g!==null&&kp(g,U.deps)){w.memoizedState=qu(a,f,A,g);return}}hr.flags|=i,w.memoizedState=qu(1|a,f,A,g)}function y_(i,a){return Fh(8390656,8,i,a)}function Lp(i,a){return Vh(2048,8,i,a)}function v_(i,a){return Vh(4,2,i,a)}function __(i,a){return Vh(4,4,i,a)}function w_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function b_(i,a,f){return f=f!=null?f.concat([i]):null,Vh(4,4,w_.bind(null,a,i),f)}function Mp(){}function E_(i,a){var f=ri();a=a===void 0?null:a;var g=f.memoizedState;return g!==null&&a!==null&&kp(a,g[1])?g[0]:(f.memoizedState=[i,a],i)}function S_(i,a){var f=ri();a=a===void 0?null:a;var g=f.memoizedState;return g!==null&&a!==null&&kp(a,g[1])?g[0]:(i=i(),f.memoizedState=[i,a],i)}function T_(i,a,f){return(ra&21)===0?(i.baseState&&(i.baseState=!1,kn=!0),i.memoizedState=f):(yi(f,a)||(f=Wo(),hr.lanes|=f,na|=f,i.baseState=!0),a)}function hA(i,a){var f=Ot;Ot=f!==0&&4>f?f:4,i(!0);var g=Rp.transition;Rp.transition={};try{i(!1),a()}finally{Ot=f,Rp.transition=g}}function x_(){return ri().memoizedState}function fA(i,a,f){var g=oo(i);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},I_(i))A_(a,f);else if(f=n_(i,a,f,g),f!==null){var w=_n();Ei(f,i,g,w),C_(f,a,g)}}function dA(i,a,f){var g=oo(i),w={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(I_(i))A_(a,w);else{var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=a.lastRenderedReducer,A!==null))try{var U=a.lastRenderedState,re=A(U,f);if(w.hasEagerState=!0,w.eagerState=re,yi(re,U)){var he=a.interleaved;he===null?(w.next=w,Sp(a)):(w.next=he.next,he.next=w),a.interleaved=w;return}}catch{}finally{}f=n_(i,a,w,g),f!==null&&(w=_n(),Ei(f,i,g,w),C_(f,a,g))}}function I_(i){var a=i.alternate;return i===hr||a!==null&&a===hr}function A_(i,a){ju=Mh=!0;var f=i.pending;f===null?a.next=a:(a.next=f.next,f.next=a),i.pending=a}function C_(i,a,f){if((f&4194240)!==0){var g=a.lanes;g&=i.pendingLanes,f|=g,a.lanes=f,Ws(i,f)}}var Uh={readContext:ti,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},pA={readContext:ti,useCallback:function(i,a){return Ui().memoizedState=[i,a===void 0?null:a],i},useContext:ti,useEffect:y_,useImperativeHandle:function(i,a,f){return f=f!=null?f.concat([i]):null,Fh(4194308,4,w_.bind(null,a,i),f)},useLayoutEffect:function(i,a){return Fh(4194308,4,i,a)},useInsertionEffect:function(i,a){return Fh(4,2,i,a)},useMemo:function(i,a){var f=Ui();return a=a===void 0?null:a,i=i(),f.memoizedState=[i,a],i},useReducer:function(i,a,f){var g=Ui();return a=f!==void 0?f(a):a,g.memoizedState=g.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},g.queue=i,i=i.dispatch=fA.bind(null,hr,i),[g.memoizedState,i]},useRef:function(i){var a=Ui();return i={current:i},a.memoizedState=i},useState:m_,useDebugValue:Mp,useDeferredValue:function(i){return Ui().memoizedState=i},useTransition:function(){var i=m_(!1),a=i[0];return i=hA.bind(null,i[1]),Ui().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,f){var g=hr,w=Ui();if(sr){if(f===void 0)throw Error(t(407));f=f()}else{if(f=a(),zr===null)throw Error(t(349));(ra&30)!==0||c_(g,a,f)}w.memoizedState=f;var A={value:f,getSnapshot:a};return w.queue=A,y_(f_.bind(null,g,A,i),[i]),g.flags|=2048,qu(9,h_.bind(null,g,A,f,a),void 0,null),f},useId:function(){var i=Ui(),a=zr.identifierPrefix;if(sr){var f=ds,g=fs;f=(g&~(1<<32-gn(g)-1)).toString(32)+f,a=":"+a+"R"+f,f=$u++,0<f&&(a+="H"+f.toString(32)),a+=":"}else f=cA++,a=":"+a+"r"+f.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},mA={readContext:ti,useCallback:E_,useContext:ti,useEffect:Lp,useImperativeHandle:b_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:S_,useReducer:Op,useRef:g_,useState:function(){return Op(zu)},useDebugValue:Mp,useDeferredValue:function(i){var a=ri();return T_(a,Nr.memoizedState,i)},useTransition:function(){var i=Op(zu)[0],a=ri().memoizedState;return[i,a]},useMutableSource:l_,useSyncExternalStore:u_,useId:x_,unstable_isNewReconciler:!1},gA={readContext:ti,useCallback:E_,useContext:ti,useEffect:Lp,useImperativeHandle:b_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:S_,useReducer:Dp,useRef:g_,useState:function(){return Dp(zu)},useDebugValue:Mp,useDeferredValue:function(i){var a=ri();return Nr===null?a.memoizedState=i:T_(a,Nr.memoizedState,i)},useTransition:function(){var i=Dp(zu)[0],a=ri().memoizedState;return[i,a]},useMutableSource:l_,useSyncExternalStore:u_,useId:x_,unstable_isNewReconciler:!1};function _i(i,a){if(i&&i.defaultProps){a=ie({},a),i=i.defaultProps;for(var f in i)a[f]===void 0&&(a[f]=i[f]);return a}return a}function Fp(i,a,f,g){a=i.memoizedState,f=f(g,a),f=f==null?a:ie({},a,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var Bh={isMounted:function(i){return(i=i._reactInternals)?pn(i)===i:!1},enqueueSetState:function(i,a,f){i=i._reactInternals;var g=_n(),w=oo(i),A=ms(g,w);A.payload=a,f!=null&&(A.callback=f),a=ro(i,A,w),a!==null&&(Ei(a,i,w,g),Nh(a,i,w))},enqueueReplaceState:function(i,a,f){i=i._reactInternals;var g=_n(),w=oo(i),A=ms(g,w);A.tag=1,A.payload=a,f!=null&&(A.callback=f),a=ro(i,A,w),a!==null&&(Ei(a,i,w,g),Nh(a,i,w))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var f=_n(),g=oo(i),w=ms(f,g);w.tag=2,a!=null&&(w.callback=a),a=ro(i,w,g),a!==null&&(Ei(a,i,g,f),Nh(a,i,g))}};function R_(i,a,f,g,w,A,U){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,A,U):a.prototype&&a.prototype.isPureReactComponent?!ku(f,g)||!ku(w,A):!0}function k_(i,a,f){var g=!1,w=Zs,A=a.contextType;return typeof A=="object"&&A!==null?A=ti(A):(w=Rn(a)?Jo:nn.current,g=a.contextTypes,A=(g=g!=null)?pl(i,w):Zs),a=new a(f,A),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Bh,i.stateNode=a,a._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=A),a}function P_(i,a,f,g){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,g),a.state!==i&&Bh.enqueueReplaceState(a,a.state,null)}function Vp(i,a,f,g){var w=i.stateNode;w.props=f,w.state=i.memoizedState,w.refs={},Tp(i);var A=a.contextType;typeof A=="object"&&A!==null?w.context=ti(A):(A=Rn(a)?Jo:nn.current,w.context=pl(i,A)),w.state=i.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Fp(i,a,A,f),w.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(a=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),a!==w.state&&Bh.enqueueReplaceState(w,w.state,null),Oh(i,f,w,g),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function El(i,a){try{var f="",g=a;do f+=oe(g),g=g.return;while(g);var w=f}catch(A){w=`
Error generating stack: `+A.message+`
`+A.stack}return{value:i,source:a,stack:w,digest:null}}function Up(i,a,f){return{value:i,source:null,stack:f??null,digest:a??null}}function Bp(i,a){try{console.error(a.value)}catch(f){setTimeout(function(){throw f})}}var yA=typeof WeakMap=="function"?WeakMap:Map;function N_(i,a,f){f=ms(-1,f),f.tag=3,f.payload={element:null};var g=a.value;return f.callback=function(){Qh||(Qh=!0,tm=g),Bp(i,a)},f}function O_(i,a,f){f=ms(-1,f),f.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var w=a.value;f.payload=function(){return g(w)},f.callback=function(){Bp(i,a)}}var A=i.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(f.callback=function(){Bp(i,a),typeof g!="function"&&(io===null?io=new Set([this]):io.add(this));var U=a.stack;this.componentDidCatch(a.value,{componentStack:U!==null?U:""})}),f}function D_(i,a,f){var g=i.pingCache;if(g===null){g=i.pingCache=new yA;var w=new Set;g.set(a,w)}else w=g.get(a),w===void 0&&(w=new Set,g.set(a,w));w.has(f)||(w.add(f),i=PA.bind(null,i,a,f),a.then(i,i))}function L_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function M_(i,a,f,g,w){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(a=ms(-1,1),a.tag=2,ro(f,a,1))),f.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var vA=W.ReactCurrentOwner,kn=!1;function vn(i,a,f,g){a.child=i===null?r_(a,null,f,g):vl(a,i.child,f,g)}function F_(i,a,f,g,w){f=f.render;var A=a.ref;return wl(a,w),g=Pp(i,a,f,g,A,w),f=Np(),i!==null&&!kn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~w,gs(i,a,w)):(sr&&f&&pp(a),a.flags|=1,vn(i,a,g,w),a.child)}function V_(i,a,f,g,w){if(i===null){var A=f.type;return typeof A=="function"&&!lm(A)&&A.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(a.tag=15,a.type=A,U_(i,a,A,g,w)):(i=Zh(f.type,null,g,a,a.mode,w),i.ref=a.ref,i.return=a,a.child=i)}if(A=i.child,(i.lanes&w)===0){var U=A.memoizedProps;if(f=f.compare,f=f!==null?f:ku,f(U,g)&&i.ref===a.ref)return gs(i,a,w)}return a.flags|=1,i=lo(A,g),i.ref=a.ref,i.return=a,a.child=i}function U_(i,a,f,g,w){if(i!==null){var A=i.memoizedProps;if(ku(A,g)&&i.ref===a.ref)if(kn=!1,a.pendingProps=g=A,(i.lanes&w)!==0)(i.flags&131072)!==0&&(kn=!0);else return a.lanes=i.lanes,gs(i,a,w)}return jp(i,a,f,g,w)}function B_(i,a,f){var g=a.pendingProps,w=g.children,A=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(Tl,Qn),Qn|=f;else{if((f&1073741824)===0)return i=A!==null?A.baseLanes|f:f,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Xt(Tl,Qn),Qn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=A!==null?A.baseLanes:f,Xt(Tl,Qn),Qn|=g}else A!==null?(g=A.baseLanes|f,a.memoizedState=null):g=f,Xt(Tl,Qn),Qn|=g;return vn(i,a,w,f),a.child}function j_(i,a){var f=a.ref;(i===null&&f!==null||i!==null&&i.ref!==f)&&(a.flags|=512,a.flags|=2097152)}function jp(i,a,f,g,w){var A=Rn(f)?Jo:nn.current;return A=pl(a,A),wl(a,w),f=Pp(i,a,f,g,A,w),g=Np(),i!==null&&!kn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~w,gs(i,a,w)):(sr&&g&&pp(a),a.flags|=1,vn(i,a,f,w),a.child)}function $_(i,a,f,g,w){if(Rn(f)){var A=!0;Th(a)}else A=!1;if(wl(a,w),a.stateNode===null)$h(i,a),k_(a,f,g),Vp(a,f,g,w),g=!0;else if(i===null){var U=a.stateNode,re=a.memoizedProps;U.props=re;var he=U.context,ke=f.contextType;typeof ke=="object"&&ke!==null?ke=ti(ke):(ke=Rn(f)?Jo:nn.current,ke=pl(a,ke));var Qe=f.getDerivedStateFromProps,Je=typeof Qe=="function"||typeof U.getSnapshotBeforeUpdate=="function";Je||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(re!==g||he!==ke)&&P_(a,U,g,ke),to=!1;var He=a.memoizedState;U.state=He,Oh(a,g,U,w),he=a.memoizedState,re!==g||He!==he||Cn.current||to?(typeof Qe=="function"&&(Fp(a,f,Qe,g),he=a.memoizedState),(re=to||R_(a,f,re,g,He,he,ke))?(Je||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(a.flags|=4194308)):(typeof U.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=he),U.props=g,U.state=he,U.context=ke,g=re):(typeof U.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{U=a.stateNode,i_(i,a),re=a.memoizedProps,ke=a.type===a.elementType?re:_i(a.type,re),U.props=ke,Je=a.pendingProps,He=U.context,he=f.contextType,typeof he=="object"&&he!==null?he=ti(he):(he=Rn(f)?Jo:nn.current,he=pl(a,he));var ot=f.getDerivedStateFromProps;(Qe=typeof ot=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(re!==Je||He!==he)&&P_(a,U,g,he),to=!1,He=a.memoizedState,U.state=He,Oh(a,g,U,w);var ut=a.memoizedState;re!==Je||He!==ut||Cn.current||to?(typeof ot=="function"&&(Fp(a,f,ot,g),ut=a.memoizedState),(ke=to||R_(a,f,ke,g,He,ut,he)||!1)?(Qe||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(g,ut,he),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(g,ut,he)),typeof U.componentDidUpdate=="function"&&(a.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof U.componentDidUpdate!="function"||re===i.memoizedProps&&He===i.memoizedState||(a.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||re===i.memoizedProps&&He===i.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=ut),U.props=g,U.state=ut,U.context=he,g=ke):(typeof U.componentDidUpdate!="function"||re===i.memoizedProps&&He===i.memoizedState||(a.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||re===i.memoizedProps&&He===i.memoizedState||(a.flags|=1024),g=!1)}return $p(i,a,f,g,A,w)}function $p(i,a,f,g,w,A){j_(i,a);var U=(a.flags&128)!==0;if(!g&&!U)return w&&Q0(a,f,!1),gs(i,a,A);g=a.stateNode,vA.current=a;var re=U&&typeof f.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,i!==null&&U?(a.child=vl(a,i.child,null,A),a.child=vl(a,null,re,A)):vn(i,a,re,A),a.memoizedState=g.state,w&&Q0(a,f,!0),a.child}function z_(i){var a=i.stateNode;a.pendingContext?W0(i,a.pendingContext,a.pendingContext!==a.context):a.context&&W0(i,a.context,!1),xp(i,a.containerInfo)}function q_(i,a,f,g,w){return yl(),vp(w),a.flags|=256,vn(i,a,f,g),a.child}var zp={dehydrated:null,treeContext:null,retryLane:0};function qp(i){return{baseLanes:i,cachePool:null,transitions:null}}function W_(i,a,f){var g=a.pendingProps,w=cr.current,A=!1,U=(a.flags&128)!==0,re;if((re=U)||(re=i!==null&&i.memoizedState===null?!1:(w&2)!==0),re?(A=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),Xt(cr,w&1),i===null)return yp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(U=g.children,i=g.fallback,A?(g=a.mode,A=a.child,U={mode:"hidden",children:U},(g&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=U):A=ef(U,g,0,null),i=aa(i,g,f,null),A.return=a,i.return=a,A.sibling=i,a.child=A,a.child.memoizedState=qp(f),a.memoizedState=zp,i):Wp(a,U));if(w=i.memoizedState,w!==null&&(re=w.dehydrated,re!==null))return _A(i,a,U,g,re,w,f);if(A){A=g.fallback,U=a.mode,w=i.child,re=w.sibling;var he={mode:"hidden",children:g.children};return(U&1)===0&&a.child!==w?(g=a.child,g.childLanes=0,g.pendingProps=he,a.deletions=null):(g=lo(w,he),g.subtreeFlags=w.subtreeFlags&14680064),re!==null?A=lo(re,A):(A=aa(A,U,f,null),A.flags|=2),A.return=a,g.return=a,g.sibling=A,a.child=g,g=A,A=a.child,U=i.child.memoizedState,U=U===null?qp(f):{baseLanes:U.baseLanes|f,cachePool:null,transitions:U.transitions},A.memoizedState=U,A.childLanes=i.childLanes&~f,a.memoizedState=zp,g}return A=i.child,i=A.sibling,g=lo(A,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=f),g.return=a,g.sibling=null,i!==null&&(f=a.deletions,f===null?(a.deletions=[i],a.flags|=16):f.push(i)),a.child=g,a.memoizedState=null,g}function Wp(i,a){return a=ef({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function jh(i,a,f,g){return g!==null&&vp(g),vl(a,i.child,null,f),i=Wp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function _A(i,a,f,g,w,A,U){if(f)return a.flags&256?(a.flags&=-257,g=Up(Error(t(422))),jh(i,a,U,g)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(A=g.fallback,w=a.mode,g=ef({mode:"visible",children:g.children},w,0,null),A=aa(A,w,U,null),A.flags|=2,g.return=a,A.return=a,g.sibling=A,a.child=g,(a.mode&1)!==0&&vl(a,i.child,null,U),a.child.memoizedState=qp(U),a.memoizedState=zp,A);if((a.mode&1)===0)return jh(i,a,U,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var re=g.dgst;return g=re,A=Error(t(419)),g=Up(A,g,void 0),jh(i,a,U,g)}if(re=(U&i.childLanes)!==0,kn||re){if(g=zr,g!==null){switch(U&-U){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|U))!==0?0:w,w!==0&&w!==A.retryLane&&(A.retryLane=w,ps(i,w),Ei(g,i,w,-1))}return am(),g=Up(Error(t(421))),jh(i,a,U,g)}return w.data==="$?"?(a.flags|=128,a.child=i.child,a=NA.bind(null,i),w._reactRetry=a,null):(i=A.treeContext,Hn=Js(w.nextSibling),Wn=a,sr=!0,vi=null,i!==null&&(Zn[ei++]=fs,Zn[ei++]=ds,Zn[ei++]=Xo,fs=i.id,ds=i.overflow,Xo=a),a=Wp(a,g.children),a.flags|=4096,a)}function H_(i,a,f){i.lanes|=a;var g=i.alternate;g!==null&&(g.lanes|=a),Ep(i.return,a,f)}function Hp(i,a,f,g,w){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:w}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=f,A.tailMode=w)}function Q_(i,a,f){var g=a.pendingProps,w=g.revealOrder,A=g.tail;if(vn(i,a,g.children,f),g=cr.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&H_(i,f,a);else if(i.tag===19)H_(i,f,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Xt(cr,g),(a.mode&1)===0)a.memoizedState=null;else switch(w){case"forwards":for(f=a.child,w=null;f!==null;)i=f.alternate,i!==null&&Dh(i)===null&&(w=f),f=f.sibling;f=w,f===null?(w=a.child,a.child=null):(w=f.sibling,f.sibling=null),Hp(a,!1,w,f,A);break;case"backwards":for(f=null,w=a.child,a.child=null;w!==null;){if(i=w.alternate,i!==null&&Dh(i)===null){a.child=w;break}i=w.sibling,w.sibling=f,f=w,w=i}Hp(a,!0,f,null,A);break;case"together":Hp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function $h(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function gs(i,a,f){if(i!==null&&(a.dependencies=i.dependencies),na|=a.lanes,(f&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,f=lo(i,i.pendingProps),a.child=f,f.return=a;i.sibling!==null;)i=i.sibling,f=f.sibling=lo(i,i.pendingProps),f.return=a;f.sibling=null}return a.child}function wA(i,a,f){switch(a.tag){case 3:z_(a),yl();break;case 5:a_(a);break;case 1:Rn(a.type)&&Th(a);break;case 4:xp(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,w=a.memoizedProps.value;Xt(kh,g._currentValue),g._currentValue=w;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(Xt(cr,cr.current&1),a.flags|=128,null):(f&a.child.childLanes)!==0?W_(i,a,f):(Xt(cr,cr.current&1),i=gs(i,a,f),i!==null?i.sibling:null);Xt(cr,cr.current&1);break;case 19:if(g=(f&a.childLanes)!==0,(i.flags&128)!==0){if(g)return Q_(i,a,f);a.flags|=128}if(w=a.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Xt(cr,cr.current),g)break;return null;case 22:case 23:return a.lanes=0,B_(i,a,f)}return gs(i,a,f)}var K_,Qp,G_,Y_;K_=function(i,a){for(var f=a.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Qp=function(){},G_=function(i,a,f,g){var w=i.memoizedProps;if(w!==g){i=a.stateNode,ta(Vi.current);var A=null;switch(f){case"input":w=Me(i,w),g=Me(i,g),A=[];break;case"select":w=ie({},w,{value:void 0}),g=ie({},g,{value:void 0}),A=[];break;case"textarea":w=pe(i,w),g=pe(i,g),A=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=bh)}bt(f,g);var U;f=null;for(ke in w)if(!g.hasOwnProperty(ke)&&w.hasOwnProperty(ke)&&w[ke]!=null)if(ke==="style"){var re=w[ke];for(U in re)re.hasOwnProperty(U)&&(f||(f={}),f[U]="")}else ke!=="dangerouslySetInnerHTML"&&ke!=="children"&&ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&ke!=="autoFocus"&&(s.hasOwnProperty(ke)?A||(A=[]):(A=A||[]).push(ke,null));for(ke in g){var he=g[ke];if(re=w!=null?w[ke]:void 0,g.hasOwnProperty(ke)&&he!==re&&(he!=null||re!=null))if(ke==="style")if(re){for(U in re)!re.hasOwnProperty(U)||he&&he.hasOwnProperty(U)||(f||(f={}),f[U]="");for(U in he)he.hasOwnProperty(U)&&re[U]!==he[U]&&(f||(f={}),f[U]=he[U])}else f||(A||(A=[]),A.push(ke,f)),f=he;else ke==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,re=re?re.__html:void 0,he!=null&&re!==he&&(A=A||[]).push(ke,he)):ke==="children"?typeof he!="string"&&typeof he!="number"||(A=A||[]).push(ke,""+he):ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&(s.hasOwnProperty(ke)?(he!=null&&ke==="onScroll"&&Zt("scroll",i),A||re===he||(A=[])):(A=A||[]).push(ke,he))}f&&(A=A||[]).push("style",f);var ke=A;(a.updateQueue=ke)&&(a.flags|=4)}},Y_=function(i,a,f,g){f!==g&&(a.flags|=4)};function Wu(i,a){if(!sr)switch(i.tailMode){case"hidden":a=i.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function on(i){var a=i.alternate!==null&&i.alternate.child===i.child,f=0,g=0;if(a)for(var w=i.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=g,i.childLanes=f,a}function bA(i,a,f){var g=a.pendingProps;switch(mp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(a),null;case 1:return Rn(a.type)&&Sh(),on(a),null;case 3:return g=a.stateNode,bl(),er(Cn),er(nn),Cp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Ch(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vi!==null&&(im(vi),vi=null))),Qp(i,a),on(a),null;case 5:Ip(a);var w=ta(Bu.current);if(f=a.type,i!==null&&a.stateNode!=null)G_(i,a,f,g,w),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(t(166));return on(a),null}if(i=ta(Vi.current),Ch(a)){g=a.stateNode,f=a.type;var A=a.memoizedProps;switch(g[Fi]=a,g[Lu]=A,i=(a.mode&1)!==0,f){case"dialog":Zt("cancel",g),Zt("close",g);break;case"iframe":case"object":case"embed":Zt("load",g);break;case"video":case"audio":for(w=0;w<Nu.length;w++)Zt(Nu[w],g);break;case"source":Zt("error",g);break;case"img":case"image":case"link":Zt("error",g),Zt("load",g);break;case"details":Zt("toggle",g);break;case"input":se(g,A),Zt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!A.multiple},Zt("invalid",g);break;case"textarea":we(g,A),Zt("invalid",g)}bt(f,A),w=null;for(var U in A)if(A.hasOwnProperty(U)){var re=A[U];U==="children"?typeof re=="string"?g.textContent!==re&&(A.suppressHydrationWarning!==!0&&wh(g.textContent,re,i),w=["children",re]):typeof re=="number"&&g.textContent!==""+re&&(A.suppressHydrationWarning!==!0&&wh(g.textContent,re,i),w=["children",""+re]):s.hasOwnProperty(U)&&re!=null&&U==="onScroll"&&Zt("scroll",g)}switch(f){case"input":me(g),Q(g,A,!0);break;case"textarea":me(g),Xe(g);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(g.onclick=bh)}g=w,a.updateQueue=g,g!==null&&(a.flags|=4)}else{U=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=v(f)),i==="http://www.w3.org/1999/xhtml"?f==="script"?(i=U.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=U.createElement(f,{is:g.is}):(i=U.createElement(f),f==="select"&&(U=i,g.multiple?U.multiple=!0:g.size&&(U.size=g.size))):i=U.createElementNS(i,f),i[Fi]=a,i[Lu]=g,K_(i,a,!1,!1),a.stateNode=i;e:{switch(U=gt(f,g),f){case"dialog":Zt("cancel",i),Zt("close",i),w=g;break;case"iframe":case"object":case"embed":Zt("load",i),w=g;break;case"video":case"audio":for(w=0;w<Nu.length;w++)Zt(Nu[w],i);w=g;break;case"source":Zt("error",i),w=g;break;case"img":case"image":case"link":Zt("error",i),Zt("load",i),w=g;break;case"details":Zt("toggle",i),w=g;break;case"input":se(i,g),w=Me(i,g),Zt("invalid",i);break;case"option":w=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},w=ie({},g,{value:void 0}),Zt("invalid",i);break;case"textarea":we(i,g),w=pe(i,g),Zt("invalid",i);break;default:w=g}bt(f,w),re=w;for(A in re)if(re.hasOwnProperty(A)){var he=re[A];A==="style"?et(i,he):A==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,he!=null&&q(i,he)):A==="children"?typeof he=="string"?(f!=="textarea"||he!=="")&&ee(i,he):typeof he=="number"&&ee(i,""+he):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(s.hasOwnProperty(A)?he!=null&&A==="onScroll"&&Zt("scroll",i):he!=null&&k(i,A,he,U))}switch(f){case"input":me(i),Q(i,g,!1);break;case"textarea":me(i),Xe(i);break;case"option":g.value!=null&&i.setAttribute("value",""+te(g.value));break;case"select":i.multiple=!!g.multiple,A=g.value,A!=null?Y(i,!!g.multiple,A,!1):g.defaultValue!=null&&Y(i,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=bh)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return on(a),null;case 6:if(i&&a.stateNode!=null)Y_(i,a,i.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(t(166));if(f=ta(Bu.current),ta(Vi.current),Ch(a)){if(g=a.stateNode,f=a.memoizedProps,g[Fi]=a,(A=g.nodeValue!==f)&&(i=Wn,i!==null))switch(i.tag){case 3:wh(g.nodeValue,f,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&wh(g.nodeValue,f,(i.mode&1)!==0)}A&&(a.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[Fi]=a,a.stateNode=g}return on(a),null;case 13:if(er(cr),g=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(sr&&Hn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Z0(),yl(),a.flags|=98560,A=!1;else if(A=Ch(a),g!==null&&g.dehydrated!==null){if(i===null){if(!A)throw Error(t(318));if(A=a.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(t(317));A[Fi]=a}else yl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;on(a),A=!1}else vi!==null&&(im(vi),vi=null),A=!0;if(!A)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=f,a):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(cr.current&1)!==0?Or===0&&(Or=3):am())),a.updateQueue!==null&&(a.flags|=4),on(a),null);case 4:return bl(),Qp(i,a),i===null&&Ou(a.stateNode.containerInfo),on(a),null;case 10:return bp(a.type._context),on(a),null;case 17:return Rn(a.type)&&Sh(),on(a),null;case 19:if(er(cr),A=a.memoizedState,A===null)return on(a),null;if(g=(a.flags&128)!==0,U=A.rendering,U===null)if(g)Wu(A,!1);else{if(Or!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(U=Dh(i),U!==null){for(a.flags|=128,Wu(A,!1),g=U.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=f,f=a.child;f!==null;)A=f,i=g,A.flags&=14680066,U=A.alternate,U===null?(A.childLanes=0,A.lanes=i,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=U.childLanes,A.lanes=U.lanes,A.child=U.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=U.memoizedProps,A.memoizedState=U.memoizedState,A.updateQueue=U.updateQueue,A.type=U.type,i=U.dependencies,A.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),f=f.sibling;return Xt(cr,cr.current&1|2),a.child}i=i.sibling}A.tail!==null&&Jt()>xl&&(a.flags|=128,g=!0,Wu(A,!1),a.lanes=4194304)}else{if(!g)if(i=Dh(U),i!==null){if(a.flags|=128,g=!0,f=i.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),Wu(A,!0),A.tail===null&&A.tailMode==="hidden"&&!U.alternate&&!sr)return on(a),null}else 2*Jt()-A.renderingStartTime>xl&&f!==1073741824&&(a.flags|=128,g=!0,Wu(A,!1),a.lanes=4194304);A.isBackwards?(U.sibling=a.child,a.child=U):(f=A.last,f!==null?f.sibling=U:a.child=U,A.last=U)}return A.tail!==null?(a=A.tail,A.rendering=a,A.tail=a.sibling,A.renderingStartTime=Jt(),a.sibling=null,f=cr.current,Xt(cr,g?f&1|2:f&1),a):(on(a),null);case 22:case 23:return om(),g=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(Qn&1073741824)!==0&&(on(a),a.subtreeFlags&6&&(a.flags|=8192)):on(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function EA(i,a){switch(mp(a),a.tag){case 1:return Rn(a.type)&&Sh(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return bl(),er(Cn),er(nn),Cp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Ip(a),null;case 13:if(er(cr),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));yl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return er(cr),null;case 4:return bl(),null;case 10:return bp(a.type._context),null;case 22:case 23:return om(),null;case 24:return null;default:return null}}var zh=!1,an=!1,SA=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Sl(i,a){var f=i.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){gr(i,a,g)}else f.current=null}function Kp(i,a,f){try{f()}catch(g){gr(i,a,g)}}var J_=!1;function TA(i,a){if(op=Ks,i=R0(),Xd(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var w=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break e}var U=0,re=-1,he=-1,ke=0,Qe=0,Je=i,He=null;t:for(;;){for(var ot;Je!==f||w!==0&&Je.nodeType!==3||(re=U+w),Je!==A||g!==0&&Je.nodeType!==3||(he=U+g),Je.nodeType===3&&(U+=Je.nodeValue.length),(ot=Je.firstChild)!==null;)He=Je,Je=ot;for(;;){if(Je===i)break t;if(He===f&&++ke===w&&(re=U),He===A&&++Qe===g&&(he=U),(ot=Je.nextSibling)!==null)break;Je=He,He=Je.parentNode}Je=ot}f=re===-1||he===-1?null:{start:re,end:he}}else f=null}f=f||{start:0,end:0}}else f=null;for(ap={focusedElem:i,selectionRange:f},Ks=!1,lt=a;lt!==null;)if(a=lt,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,lt=i;else for(;lt!==null;){a=lt;try{var ut=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,br=ut.memoizedState,Ae=a.stateNode,ye=Ae.getSnapshotBeforeUpdate(a.elementType===a.type?ht:_i(a.type,ht),br);Ae.__reactInternalSnapshotBeforeUpdate=ye}break;case 3:var Ce=a.stateNode.containerInfo;Ce.nodeType===1?Ce.textContent="":Ce.nodeType===9&&Ce.documentElement&&Ce.removeChild(Ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(tt){gr(a,a.return,tt)}if(i=a.sibling,i!==null){i.return=a.return,lt=i;break}lt=a.return}return ut=J_,J_=!1,ut}function Hu(i,a,f){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&i)===i){var A=w.destroy;w.destroy=void 0,A!==void 0&&Kp(a,f,A)}w=w.next}while(w!==g)}}function qh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&i)===i){var g=f.create;f.destroy=g()}f=f.next}while(f!==a)}}function Gp(i){var a=i.ref;if(a!==null){var f=i.stateNode;switch(i.tag){case 5:i=f;break;default:i=f}typeof a=="function"?a(i):a.current=i}}function X_(i){var a=i.alternate;a!==null&&(i.alternate=null,X_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Fi],delete a[Lu],delete a[hp],delete a[oA],delete a[aA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Z_(i){return i.tag===5||i.tag===3||i.tag===4}function ew(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Z_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yp(i,a,f){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?f.nodeType===8?f.parentNode.insertBefore(i,a):f.insertBefore(i,a):(f.nodeType===8?(a=f.parentNode,a.insertBefore(i,f)):(a=f,a.appendChild(i)),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=bh));else if(g!==4&&(i=i.child,i!==null))for(Yp(i,a,f),i=i.sibling;i!==null;)Yp(i,a,f),i=i.sibling}function Jp(i,a,f){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?f.insertBefore(i,a):f.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(Jp(i,a,f),i=i.sibling;i!==null;)Jp(i,a,f),i=i.sibling}var Yr=null,wi=!1;function no(i,a,f){for(f=f.child;f!==null;)tw(i,a,f),f=f.sibling}function tw(i,a,f){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(zo,f)}catch{}switch(f.tag){case 5:an||Sl(f,a);case 6:var g=Yr,w=wi;Yr=null,no(i,a,f),Yr=g,wi=w,Yr!==null&&(wi?(i=Yr,f=f.stateNode,i.nodeType===8?i.parentNode.removeChild(f):i.removeChild(f)):Yr.removeChild(f.stateNode));break;case 18:Yr!==null&&(wi?(i=Yr,f=f.stateNode,i.nodeType===8?cp(i.parentNode,f):i.nodeType===1&&cp(i,f),mi(i)):cp(Yr,f.stateNode));break;case 4:g=Yr,w=wi,Yr=f.stateNode.containerInfo,wi=!0,no(i,a,f),Yr=g,wi=w;break;case 0:case 11:case 14:case 15:if(!an&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var A=w,U=A.destroy;A=A.tag,U!==void 0&&((A&2)!==0||(A&4)!==0)&&Kp(f,a,U),w=w.next}while(w!==g)}no(i,a,f);break;case 1:if(!an&&(Sl(f,a),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(re){gr(f,a,re)}no(i,a,f);break;case 21:no(i,a,f);break;case 22:f.mode&1?(an=(g=an)||f.memoizedState!==null,no(i,a,f),an=g):no(i,a,f);break;default:no(i,a,f)}}function rw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var f=i.stateNode;f===null&&(f=i.stateNode=new SA),a.forEach(function(g){var w=OA.bind(null,i,g);f.has(g)||(f.add(g),g.then(w,w))})}}function bi(i,a){var f=a.deletions;if(f!==null)for(var g=0;g<f.length;g++){var w=f[g];try{var A=i,U=a,re=U;e:for(;re!==null;){switch(re.tag){case 5:Yr=re.stateNode,wi=!1;break e;case 3:Yr=re.stateNode.containerInfo,wi=!0;break e;case 4:Yr=re.stateNode.containerInfo,wi=!0;break e}re=re.return}if(Yr===null)throw Error(t(160));tw(A,U,w),Yr=null,wi=!1;var he=w.alternate;he!==null&&(he.return=null),w.return=null}catch(ke){gr(w,a,ke)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)nw(a,i),a=a.sibling}function nw(i,a){var f=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(bi(a,i),Bi(i),g&4){try{Hu(3,i,i.return),qh(3,i)}catch(ht){gr(i,i.return,ht)}try{Hu(5,i,i.return)}catch(ht){gr(i,i.return,ht)}}break;case 1:bi(a,i),Bi(i),g&512&&f!==null&&Sl(f,f.return);break;case 5:if(bi(a,i),Bi(i),g&512&&f!==null&&Sl(f,f.return),i.flags&32){var w=i.stateNode;try{ee(w,"")}catch(ht){gr(i,i.return,ht)}}if(g&4&&(w=i.stateNode,w!=null)){var A=i.memoizedProps,U=f!==null?f.memoizedProps:A,re=i.type,he=i.updateQueue;if(i.updateQueue=null,he!==null)try{re==="input"&&A.type==="radio"&&A.name!=null&&ue(w,A),gt(re,U);var ke=gt(re,A);for(U=0;U<he.length;U+=2){var Qe=he[U],Je=he[U+1];Qe==="style"?et(w,Je):Qe==="dangerouslySetInnerHTML"?q(w,Je):Qe==="children"?ee(w,Je):k(w,Qe,Je,ke)}switch(re){case"input":Ie(w,A);break;case"textarea":ge(w,A);break;case"select":var He=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!A.multiple;var ot=A.value;ot!=null?Y(w,!!A.multiple,ot,!1):He!==!!A.multiple&&(A.defaultValue!=null?Y(w,!!A.multiple,A.defaultValue,!0):Y(w,!!A.multiple,A.multiple?[]:"",!1))}w[Lu]=A}catch(ht){gr(i,i.return,ht)}}break;case 6:if(bi(a,i),Bi(i),g&4){if(i.stateNode===null)throw Error(t(162));w=i.stateNode,A=i.memoizedProps;try{w.nodeValue=A}catch(ht){gr(i,i.return,ht)}}break;case 3:if(bi(a,i),Bi(i),g&4&&f!==null&&f.memoizedState.isDehydrated)try{mi(a.containerInfo)}catch(ht){gr(i,i.return,ht)}break;case 4:bi(a,i),Bi(i);break;case 13:bi(a,i),Bi(i),w=i.child,w.flags&8192&&(A=w.memoizedState!==null,w.stateNode.isHidden=A,!A||w.alternate!==null&&w.alternate.memoizedState!==null||(em=Jt())),g&4&&rw(i);break;case 22:if(Qe=f!==null&&f.memoizedState!==null,i.mode&1?(an=(ke=an)||Qe,bi(a,i),an=ke):bi(a,i),Bi(i),g&8192){if(ke=i.memoizedState!==null,(i.stateNode.isHidden=ke)&&!Qe&&(i.mode&1)!==0)for(lt=i,Qe=i.child;Qe!==null;){for(Je=lt=Qe;lt!==null;){switch(He=lt,ot=He.child,He.tag){case 0:case 11:case 14:case 15:Hu(4,He,He.return);break;case 1:Sl(He,He.return);var ut=He.stateNode;if(typeof ut.componentWillUnmount=="function"){g=He,f=He.return;try{a=g,ut.props=a.memoizedProps,ut.state=a.memoizedState,ut.componentWillUnmount()}catch(ht){gr(g,f,ht)}}break;case 5:Sl(He,He.return);break;case 22:if(He.memoizedState!==null){ow(Je);continue}}ot!==null?(ot.return=He,lt=ot):ow(Je)}Qe=Qe.sibling}e:for(Qe=null,Je=i;;){if(Je.tag===5){if(Qe===null){Qe=Je;try{w=Je.stateNode,ke?(A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(re=Je.stateNode,he=Je.memoizedProps.style,U=he!=null&&he.hasOwnProperty("display")?he.display:null,re.style.display=Ze("display",U))}catch(ht){gr(i,i.return,ht)}}}else if(Je.tag===6){if(Qe===null)try{Je.stateNode.nodeValue=ke?"":Je.memoizedProps}catch(ht){gr(i,i.return,ht)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===i)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===i)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===i)break e;Qe===Je&&(Qe=null),Je=Je.return}Qe===Je&&(Qe=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:bi(a,i),Bi(i),g&4&&rw(i);break;case 21:break;default:bi(a,i),Bi(i)}}function Bi(i){var a=i.flags;if(a&2){try{e:{for(var f=i.return;f!==null;){if(Z_(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(ee(w,""),g.flags&=-33);var A=ew(i);Jp(i,A,w);break;case 3:case 4:var U=g.stateNode.containerInfo,re=ew(i);Yp(i,re,U);break;default:throw Error(t(161))}}catch(he){gr(i,i.return,he)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function xA(i,a,f){lt=i,iw(i)}function iw(i,a,f){for(var g=(i.mode&1)!==0;lt!==null;){var w=lt,A=w.child;if(w.tag===22&&g){var U=w.memoizedState!==null||zh;if(!U){var re=w.alternate,he=re!==null&&re.memoizedState!==null||an;re=zh;var ke=an;if(zh=U,(an=he)&&!ke)for(lt=w;lt!==null;)U=lt,he=U.child,U.tag===22&&U.memoizedState!==null?aw(w):he!==null?(he.return=U,lt=he):aw(w);for(;A!==null;)lt=A,iw(A),A=A.sibling;lt=w,zh=re,an=ke}sw(i)}else(w.subtreeFlags&8772)!==0&&A!==null?(A.return=w,lt=A):sw(i)}}function sw(i){for(;lt!==null;){var a=lt;if((a.flags&8772)!==0){var f=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:an||qh(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!an)if(f===null)g.componentDidMount();else{var w=a.elementType===a.type?f.memoizedProps:_i(a.type,f.memoizedProps);g.componentDidUpdate(w,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var A=a.updateQueue;A!==null&&o_(a,A,g);break;case 3:var U=a.updateQueue;if(U!==null){if(f=null,a.child!==null)switch(a.child.tag){case 5:f=a.child.stateNode;break;case 1:f=a.child.stateNode}o_(a,U,f)}break;case 5:var re=a.stateNode;if(f===null&&a.flags&4){f=re;var he=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":he.autoFocus&&f.focus();break;case"img":he.src&&(f.src=he.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ke=a.alternate;if(ke!==null){var Qe=ke.memoizedState;if(Qe!==null){var Je=Qe.dehydrated;Je!==null&&mi(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||a.flags&512&&Gp(a)}catch(He){gr(a,a.return,He)}}if(a===i){lt=null;break}if(f=a.sibling,f!==null){f.return=a.return,lt=f;break}lt=a.return}}function ow(i){for(;lt!==null;){var a=lt;if(a===i){lt=null;break}var f=a.sibling;if(f!==null){f.return=a.return,lt=f;break}lt=a.return}}function aw(i){for(;lt!==null;){var a=lt;try{switch(a.tag){case 0:case 11:case 15:var f=a.return;try{qh(4,a)}catch(he){gr(a,f,he)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var w=a.return;try{g.componentDidMount()}catch(he){gr(a,w,he)}}var A=a.return;try{Gp(a)}catch(he){gr(a,A,he)}break;case 5:var U=a.return;try{Gp(a)}catch(he){gr(a,U,he)}}}catch(he){gr(a,a.return,he)}if(a===i){lt=null;break}var re=a.sibling;if(re!==null){re.return=a.return,lt=re;break}lt=a.return}}var IA=Math.ceil,Wh=W.ReactCurrentDispatcher,Xp=W.ReactCurrentOwner,ni=W.ReactCurrentBatchConfig,Vt=0,zr=null,Ir=null,Jr=0,Qn=0,Tl=Xs(0),Or=0,Qu=null,na=0,Hh=0,Zp=0,Ku=null,Pn=null,em=0,xl=1/0,ys=null,Qh=!1,tm=null,io=null,Kh=!1,so=null,Gh=0,Gu=0,rm=null,Yh=-1,Jh=0;function _n(){return(Vt&6)!==0?Jt():Yh!==-1?Yh:Yh=Jt()}function oo(i){return(i.mode&1)===0?1:(Vt&2)!==0&&Jr!==0?Jr&-Jr:uA.transition!==null?(Jh===0&&(Jh=Wo()),Jh):(i=Ot,i!==0||(i=window.event,i=i===void 0?16:Su(i.type)),i)}function Ei(i,a,f,g){if(50<Gu)throw Gu=0,rm=null,Error(t(185));qs(i,f,g),((Vt&2)===0||i!==zr)&&(i===zr&&((Vt&2)===0&&(Hh|=f),Or===4&&ao(i,Jr)),Nn(i,g),f===1&&Vt===0&&(a.mode&1)===0&&(xl=Jt()+500,xh&&eo()))}function Nn(i,a){var f=i.callbackNode;ss(i,a);var g=qo(i,i===zr?Jr:0);if(g===0)f!==null&&vu(f),i.callbackNode=null,i.callbackPriority=0;else if(a=g&-g,i.callbackPriority!==a){if(f!=null&&vu(f),a===1)i.tag===0?lA(uw.bind(null,i)):K0(uw.bind(null,i)),iA(function(){(Vt&6)===0&&eo()}),f=null;else{switch(Hs(g)){case 1:f=$o;break;case 4:f=js;break;case 16:f=Yn;break;case 536870912:f=Jc;break;default:f=Yn}f=yw(f,lw.bind(null,i))}i.callbackPriority=a,i.callbackNode=f}}function lw(i,a){if(Yh=-1,Jh=0,(Vt&6)!==0)throw Error(t(327));var f=i.callbackNode;if(Il()&&i.callbackNode!==f)return null;var g=qo(i,i===zr?Jr:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||a)a=Xh(i,g);else{a=g;var w=Vt;Vt|=2;var A=hw();(zr!==i||Jr!==a)&&(ys=null,xl=Jt()+500,sa(i,a));do try{RA();break}catch(re){cw(i,re)}while(!0);wp(),Wh.current=A,Vt=w,Ir!==null?a=0:(zr=null,Jr=0,a=Or)}if(a!==0){if(a===2&&(w=$n(i),w!==0&&(g=w,a=nm(i,w))),a===1)throw f=Qu,sa(i,0),ao(i,g),Nn(i,Jt()),f;if(a===6)ao(i,g);else{if(w=i.current.alternate,(g&30)===0&&!AA(w)&&(a=Xh(i,g),a===2&&(A=$n(i),A!==0&&(g=A,a=nm(i,A))),a===1))throw f=Qu,sa(i,0),ao(i,g),Nn(i,Jt()),f;switch(i.finishedWork=w,i.finishedLanes=g,a){case 0:case 1:throw Error(t(345));case 2:oa(i,Pn,ys);break;case 3:if(ao(i,g),(g&130023424)===g&&(a=em+500-Jt(),10<a)){if(qo(i,0)!==0)break;if(w=i.suspendedLanes,(w&g)!==g){_n(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=up(oa.bind(null,i,Pn,ys),a);break}oa(i,Pn,ys);break;case 4:if(ao(i,g),(g&4194240)===g)break;for(a=i.eventTimes,w=-1;0<g;){var U=31-gn(g);A=1<<U,U=a[U],U>w&&(w=U),g&=~A}if(g=w,g=Jt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*IA(g/1960))-g,10<g){i.timeoutHandle=up(oa.bind(null,i,Pn,ys),g);break}oa(i,Pn,ys);break;case 5:oa(i,Pn,ys);break;default:throw Error(t(329))}}}return Nn(i,Jt()),i.callbackNode===f?lw.bind(null,i):null}function nm(i,a){var f=Ku;return i.current.memoizedState.isDehydrated&&(sa(i,a).flags|=256),i=Xh(i,a),i!==2&&(a=Pn,Pn=f,a!==null&&im(a)),i}function im(i){Pn===null?Pn=i:Pn.push.apply(Pn,i)}function AA(i){for(var a=i;;){if(a.flags&16384){var f=a.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var w=f[g],A=w.getSnapshot;w=w.value;try{if(!yi(A(),w))return!1}catch{return!1}}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ao(i,a){for(a&=~Zp,a&=~Hh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var f=31-gn(a),g=1<<f;i[f]=-1,a&=~g}}function uw(i){if((Vt&6)!==0)throw Error(t(327));Il();var a=qo(i,0);if((a&1)===0)return Nn(i,Jt()),null;var f=Xh(i,a);if(i.tag!==0&&f===2){var g=$n(i);g!==0&&(a=g,f=nm(i,g))}if(f===1)throw f=Qu,sa(i,0),ao(i,a),Nn(i,Jt()),f;if(f===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,oa(i,Pn,ys),Nn(i,Jt()),null}function sm(i,a){var f=Vt;Vt|=1;try{return i(a)}finally{Vt=f,Vt===0&&(xl=Jt()+500,xh&&eo())}}function ia(i){so!==null&&so.tag===0&&(Vt&6)===0&&Il();var a=Vt;Vt|=1;var f=ni.transition,g=Ot;try{if(ni.transition=null,Ot=1,i)return i()}finally{Ot=g,ni.transition=f,Vt=a,(Vt&6)===0&&eo()}}function om(){Qn=Tl.current,er(Tl)}function sa(i,a){i.finishedWork=null,i.finishedLanes=0;var f=i.timeoutHandle;if(f!==-1&&(i.timeoutHandle=-1,nA(f)),Ir!==null)for(f=Ir.return;f!==null;){var g=f;switch(mp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Sh();break;case 3:bl(),er(Cn),er(nn),Cp();break;case 5:Ip(g);break;case 4:bl();break;case 13:er(cr);break;case 19:er(cr);break;case 10:bp(g.type._context);break;case 22:case 23:om()}f=f.return}if(zr=i,Ir=i=lo(i.current,null),Jr=Qn=a,Or=0,Qu=null,Zp=Hh=na=0,Pn=Ku=null,ea!==null){for(a=0;a<ea.length;a++)if(f=ea[a],g=f.interleaved,g!==null){f.interleaved=null;var w=g.next,A=f.pending;if(A!==null){var U=A.next;A.next=w,g.next=U}f.pending=g}ea=null}return i}function cw(i,a){do{var f=Ir;try{if(wp(),Lh.current=Uh,Mh){for(var g=hr.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}Mh=!1}if(ra=0,$r=Nr=hr=null,ju=!1,$u=0,Xp.current=null,f===null||f.return===null){Or=1,Qu=a,Ir=null;break}e:{var A=i,U=f.return,re=f,he=a;if(a=Jr,re.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var ke=he,Qe=re,Je=Qe.tag;if((Qe.mode&1)===0&&(Je===0||Je===11||Je===15)){var He=Qe.alternate;He?(Qe.updateQueue=He.updateQueue,Qe.memoizedState=He.memoizedState,Qe.lanes=He.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var ot=L_(U);if(ot!==null){ot.flags&=-257,M_(ot,U,re,A,a),ot.mode&1&&D_(A,ke,a),a=ot,he=ke;var ut=a.updateQueue;if(ut===null){var ht=new Set;ht.add(he),a.updateQueue=ht}else ut.add(he);break e}else{if((a&1)===0){D_(A,ke,a),am();break e}he=Error(t(426))}}else if(sr&&re.mode&1){var br=L_(U);if(br!==null){(br.flags&65536)===0&&(br.flags|=256),M_(br,U,re,A,a),vp(El(he,re));break e}}A=he=El(he,re),Or!==4&&(Or=2),Ku===null?Ku=[A]:Ku.push(A),A=U;do{switch(A.tag){case 3:A.flags|=65536,a&=-a,A.lanes|=a;var Ae=N_(A,he,a);s_(A,Ae);break e;case 1:re=he;var ye=A.type,Ce=A.stateNode;if((A.flags&128)===0&&(typeof ye.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(io===null||!io.has(Ce)))){A.flags|=65536,a&=-a,A.lanes|=a;var tt=O_(A,re,a);s_(A,tt);break e}}A=A.return}while(A!==null)}dw(f)}catch(dt){a=dt,Ir===f&&f!==null&&(Ir=f=f.return);continue}break}while(!0)}function hw(){var i=Wh.current;return Wh.current=Uh,i===null?Uh:i}function am(){(Or===0||Or===3||Or===2)&&(Or=4),zr===null||(na&268435455)===0&&(Hh&268435455)===0||ao(zr,Jr)}function Xh(i,a){var f=Vt;Vt|=2;var g=hw();(zr!==i||Jr!==a)&&(ys=null,sa(i,a));do try{CA();break}catch(w){cw(i,w)}while(!0);if(wp(),Vt=f,Wh.current=g,Ir!==null)throw Error(t(261));return zr=null,Jr=0,Or}function CA(){for(;Ir!==null;)fw(Ir)}function RA(){for(;Ir!==null&&!Gc();)fw(Ir)}function fw(i){var a=gw(i.alternate,i,Qn);i.memoizedProps=i.pendingProps,a===null?dw(i):Ir=a,Xp.current=null}function dw(i){var a=i;do{var f=a.alternate;if(i=a.return,(a.flags&32768)===0){if(f=bA(f,a,Qn),f!==null){Ir=f;return}}else{if(f=EA(f,a),f!==null){f.flags&=32767,Ir=f;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Or=6,Ir=null;return}}if(a=a.sibling,a!==null){Ir=a;return}Ir=a=i}while(a!==null);Or===0&&(Or=5)}function oa(i,a,f){var g=Ot,w=ni.transition;try{ni.transition=null,Ot=1,kA(i,a,f,g)}finally{ni.transition=w,Ot=g}return null}function kA(i,a,f,g){do Il();while(so!==null);if((Vt&6)!==0)throw Error(t(327));f=i.finishedWork;var w=i.finishedLanes;if(f===null)return null;if(i.finishedWork=null,i.finishedLanes=0,f===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var A=f.lanes|f.childLanes;if(Yt(i,A),i===zr&&(Ir=zr=null,Jr=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Kh||(Kh=!0,yw(Yn,function(){return Il(),null})),A=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||A){A=ni.transition,ni.transition=null;var U=Ot;Ot=1;var re=Vt;Vt|=4,Xp.current=null,TA(i,f),nw(f,i),YI(ap),Ks=!!op,ap=op=null,i.current=f,xA(f),qd(),Vt=re,Ot=U,ni.transition=A}else i.current=f;if(Kh&&(Kh=!1,so=i,Gh=w),A=i.pendingLanes,A===0&&(io=null),Xc(f.stateNode),Nn(i,Jt()),a!==null)for(g=i.onRecoverableError,f=0;f<a.length;f++)w=a[f],g(w.value,{componentStack:w.stack,digest:w.digest});if(Qh)throw Qh=!1,i=tm,tm=null,i;return(Gh&1)!==0&&i.tag!==0&&Il(),A=i.pendingLanes,(A&1)!==0?i===rm?Gu++:(Gu=0,rm=i):Gu=0,eo(),null}function Il(){if(so!==null){var i=Hs(Gh),a=ni.transition,f=Ot;try{if(ni.transition=null,Ot=16>i?16:i,so===null)var g=!1;else{if(i=so,so=null,Gh=0,(Vt&6)!==0)throw Error(t(331));var w=Vt;for(Vt|=4,lt=i.current;lt!==null;){var A=lt,U=A.child;if((lt.flags&16)!==0){var re=A.deletions;if(re!==null){for(var he=0;he<re.length;he++){var ke=re[he];for(lt=ke;lt!==null;){var Qe=lt;switch(Qe.tag){case 0:case 11:case 15:Hu(8,Qe,A)}var Je=Qe.child;if(Je!==null)Je.return=Qe,lt=Je;else for(;lt!==null;){Qe=lt;var He=Qe.sibling,ot=Qe.return;if(X_(Qe),Qe===ke){lt=null;break}if(He!==null){He.return=ot,lt=He;break}lt=ot}}}var ut=A.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var br=ht.sibling;ht.sibling=null,ht=br}while(ht!==null)}}lt=A}}if((A.subtreeFlags&2064)!==0&&U!==null)U.return=A,lt=U;else e:for(;lt!==null;){if(A=lt,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Hu(9,A,A.return)}var Ae=A.sibling;if(Ae!==null){Ae.return=A.return,lt=Ae;break e}lt=A.return}}var ye=i.current;for(lt=ye;lt!==null;){U=lt;var Ce=U.child;if((U.subtreeFlags&2064)!==0&&Ce!==null)Ce.return=U,lt=Ce;else e:for(U=ye;lt!==null;){if(re=lt,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:qh(9,re)}}catch(dt){gr(re,re.return,dt)}if(re===U){lt=null;break e}var tt=re.sibling;if(tt!==null){tt.return=re.return,lt=tt;break e}lt=re.return}}if(Vt=w,eo(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(zo,i)}catch{}g=!0}return g}finally{Ot=f,ni.transition=a}}return!1}function pw(i,a,f){a=El(f,a),a=N_(i,a,1),i=ro(i,a,1),a=_n(),i!==null&&(qs(i,1,a),Nn(i,a))}function gr(i,a,f){if(i.tag===3)pw(i,i,f);else for(;a!==null;){if(a.tag===3){pw(a,i,f);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(io===null||!io.has(g))){i=El(f,i),i=O_(a,i,1),a=ro(a,i,1),i=_n(),a!==null&&(qs(a,1,i),Nn(a,i));break}}a=a.return}}function PA(i,a,f){var g=i.pingCache;g!==null&&g.delete(a),a=_n(),i.pingedLanes|=i.suspendedLanes&f,zr===i&&(Jr&f)===f&&(Or===4||Or===3&&(Jr&130023424)===Jr&&500>Jt()-em?sa(i,0):Zp|=f),Nn(i,a)}function mw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ga,Ga<<=1,(Ga&130023424)===0&&(Ga=4194304)));var f=_n();i=ps(i,a),i!==null&&(qs(i,a,f),Nn(i,f))}function NA(i){var a=i.memoizedState,f=0;a!==null&&(f=a.retryLane),mw(i,f)}function OA(i,a){var f=0;switch(i.tag){case 13:var g=i.stateNode,w=i.memoizedState;w!==null&&(f=w.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(a),mw(i,f)}var gw;gw=function(i,a,f){if(i!==null)if(i.memoizedProps!==a.pendingProps||Cn.current)kn=!0;else{if((i.lanes&f)===0&&(a.flags&128)===0)return kn=!1,wA(i,a,f);kn=(i.flags&131072)!==0}else kn=!1,sr&&(a.flags&1048576)!==0&&G0(a,Ah,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;$h(i,a),i=a.pendingProps;var w=pl(a,nn.current);wl(a,f),w=Pp(null,a,g,i,w,f);var A=Np();return a.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Rn(g)?(A=!0,Th(a)):A=!1,a.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Tp(a),w.updater=Bh,a.stateNode=w,w._reactInternals=a,Vp(a,g,i,f),a=$p(null,a,g,!0,A,f)):(a.tag=0,sr&&A&&pp(a),vn(null,a,w,f),a=a.child),a;case 16:g=a.elementType;e:{switch($h(i,a),i=a.pendingProps,w=g._init,g=w(g._payload),a.type=g,w=a.tag=LA(g),i=_i(g,i),w){case 0:a=jp(null,a,g,i,f);break e;case 1:a=$_(null,a,g,i,f);break e;case 11:a=F_(null,a,g,i,f);break e;case 14:a=V_(null,a,g,_i(g.type,i),f);break e}throw Error(t(306,g,""))}return a;case 0:return g=a.type,w=a.pendingProps,w=a.elementType===g?w:_i(g,w),jp(i,a,g,w,f);case 1:return g=a.type,w=a.pendingProps,w=a.elementType===g?w:_i(g,w),$_(i,a,g,w,f);case 3:e:{if(z_(a),i===null)throw Error(t(387));g=a.pendingProps,A=a.memoizedState,w=A.element,i_(i,a),Oh(a,g,null,f);var U=a.memoizedState;if(g=U.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},a.updateQueue.baseState=A,a.memoizedState=A,a.flags&256){w=El(Error(t(423)),a),a=q_(i,a,g,f,w);break e}else if(g!==w){w=El(Error(t(424)),a),a=q_(i,a,g,f,w);break e}else for(Hn=Js(a.stateNode.containerInfo.firstChild),Wn=a,sr=!0,vi=null,f=r_(a,null,g,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(yl(),g===w){a=gs(i,a,f);break e}vn(i,a,g,f)}a=a.child}return a;case 5:return a_(a),i===null&&yp(a),g=a.type,w=a.pendingProps,A=i!==null?i.memoizedProps:null,U=w.children,lp(g,w)?U=null:A!==null&&lp(g,A)&&(a.flags|=32),j_(i,a),vn(i,a,U,f),a.child;case 6:return i===null&&yp(a),null;case 13:return W_(i,a,f);case 4:return xp(a,a.stateNode.containerInfo),g=a.pendingProps,i===null?a.child=vl(a,null,g,f):vn(i,a,g,f),a.child;case 11:return g=a.type,w=a.pendingProps,w=a.elementType===g?w:_i(g,w),F_(i,a,g,w,f);case 7:return vn(i,a,a.pendingProps,f),a.child;case 8:return vn(i,a,a.pendingProps.children,f),a.child;case 12:return vn(i,a,a.pendingProps.children,f),a.child;case 10:e:{if(g=a.type._context,w=a.pendingProps,A=a.memoizedProps,U=w.value,Xt(kh,g._currentValue),g._currentValue=U,A!==null)if(yi(A.value,U)){if(A.children===w.children&&!Cn.current){a=gs(i,a,f);break e}}else for(A=a.child,A!==null&&(A.return=a);A!==null;){var re=A.dependencies;if(re!==null){U=A.child;for(var he=re.firstContext;he!==null;){if(he.context===g){if(A.tag===1){he=ms(-1,f&-f),he.tag=2;var ke=A.updateQueue;if(ke!==null){ke=ke.shared;var Qe=ke.pending;Qe===null?he.next=he:(he.next=Qe.next,Qe.next=he),ke.pending=he}}A.lanes|=f,he=A.alternate,he!==null&&(he.lanes|=f),Ep(A.return,f,a),re.lanes|=f;break}he=he.next}}else if(A.tag===10)U=A.type===a.type?null:A.child;else if(A.tag===18){if(U=A.return,U===null)throw Error(t(341));U.lanes|=f,re=U.alternate,re!==null&&(re.lanes|=f),Ep(U,f,a),U=A.sibling}else U=A.child;if(U!==null)U.return=A;else for(U=A;U!==null;){if(U===a){U=null;break}if(A=U.sibling,A!==null){A.return=U.return,U=A;break}U=U.return}A=U}vn(i,a,w.children,f),a=a.child}return a;case 9:return w=a.type,g=a.pendingProps.children,wl(a,f),w=ti(w),g=g(w),a.flags|=1,vn(i,a,g,f),a.child;case 14:return g=a.type,w=_i(g,a.pendingProps),w=_i(g.type,w),V_(i,a,g,w,f);case 15:return U_(i,a,a.type,a.pendingProps,f);case 17:return g=a.type,w=a.pendingProps,w=a.elementType===g?w:_i(g,w),$h(i,a),a.tag=1,Rn(g)?(i=!0,Th(a)):i=!1,wl(a,f),k_(a,g,w),Vp(a,g,w,f),$p(null,a,g,!0,i,f);case 19:return Q_(i,a,f);case 22:return B_(i,a,f)}throw Error(t(156,a.tag))};function yw(i,a){return Qa(i,a)}function DA(i,a,f,g){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(i,a,f,g){return new DA(i,a,f,g)}function lm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function LA(i){if(typeof i=="function")return lm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===N)return 11;if(i===ae)return 14}return 2}function lo(i,a){var f=i.alternate;return f===null?(f=ii(i.tag,a,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=a,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&14680064,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,a=i.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f}function Zh(i,a,f,g,w,A){var U=2;if(g=i,typeof i=="function")lm(i)&&(U=1);else if(typeof i=="string")U=5;else e:switch(i){case P:return aa(f.children,w,A,a);case R:U=8,w|=8;break;case M:return i=ii(12,f,a,w|2),i.elementType=M,i.lanes=A,i;case L:return i=ii(13,f,a,w),i.elementType=L,i.lanes=A,i;case ve:return i=ii(19,f,a,w),i.elementType=ve,i.lanes=A,i;case Re:return ef(f,w,A,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:U=10;break e;case $:U=9;break e;case N:U=11;break e;case ae:U=14;break e;case De:U=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=ii(U,f,a,w),a.elementType=i,a.type=g,a.lanes=A,a}function aa(i,a,f,g){return i=ii(7,i,g,a),i.lanes=f,i}function ef(i,a,f,g){return i=ii(22,i,g,a),i.elementType=Re,i.lanes=f,i.stateNode={isHidden:!1},i}function um(i,a,f){return i=ii(6,i,null,a),i.lanes=f,i}function cm(i,a,f){return a=ii(4,i.children!==null?i.children:[],i.key,a),a.lanes=f,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function MA(i,a,f,g,w){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zs(0),this.expirationTimes=zs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function hm(i,a,f,g,w,A,U,re,he){return i=new MA(i,a,f,re,he),a===1?(a=1,A===!0&&(a|=8)):a=0,A=ii(3,null,null,a),i.current=A,A.stateNode=i,A.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tp(A),i}function FA(i,a,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:g==null?null:""+g,children:i,containerInfo:a,implementation:f}}function vw(i){if(!i)return Zs;i=i._reactInternals;e:{if(pn(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Rn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var f=i.type;if(Rn(f))return H0(i,f,a)}return a}function _w(i,a,f,g,w,A,U,re,he){return i=hm(f,g,!0,i,w,A,U,re,he),i.context=vw(null),f=i.current,g=_n(),w=oo(f),A=ms(g,w),A.callback=a??null,ro(f,A,w),i.current.lanes=w,qs(i,w,g),Nn(i,g),i}function tf(i,a,f,g){var w=a.current,A=_n(),U=oo(w);return f=vw(f),a.context===null?a.context=f:a.pendingContext=f,a=ms(A,U),a.payload={element:i},g=g===void 0?null:g,g!==null&&(a.callback=g),i=ro(w,a,U),i!==null&&(Ei(i,w,U,A),Nh(i,w,U)),U}function rf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ww(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<a?f:a}}function fm(i,a){ww(i,a),(i=i.alternate)&&ww(i,a)}function VA(){return null}var bw=typeof reportError=="function"?reportError:function(i){console.error(i)};function dm(i){this._internalRoot=i}nf.prototype.render=dm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));tf(i,a,null,null)},nf.prototype.unmount=dm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ia(function(){tf(null,i,null,null)}),a[cs]=null}};function nf(i){this._internalRoot=i}nf.prototype.unstable_scheduleHydration=function(i){if(i){var a=nh();i={blockedOn:null,target:i,priority:a};for(var f=0;f<Oi.length&&a!==0&&a<Oi[f].priority;f++);Oi.splice(f,0,i),f===0&&oh(i)}};function pm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function sf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Ew(){}function UA(i,a,f,g,w){if(w){if(typeof g=="function"){var A=g;g=function(){var ke=rf(U);A.call(ke)}}var U=_w(a,g,i,0,null,!1,!1,"",Ew);return i._reactRootContainer=U,i[cs]=U.current,Ou(i.nodeType===8?i.parentNode:i),ia(),U}for(;w=i.lastChild;)i.removeChild(w);if(typeof g=="function"){var re=g;g=function(){var ke=rf(he);re.call(ke)}}var he=hm(i,0,!1,null,null,!1,!1,"",Ew);return i._reactRootContainer=he,i[cs]=he.current,Ou(i.nodeType===8?i.parentNode:i),ia(function(){tf(a,he,f,g)}),he}function of(i,a,f,g,w){var A=f._reactRootContainer;if(A){var U=A;if(typeof w=="function"){var re=w;w=function(){var he=rf(U);re.call(he)}}tf(a,U,i,w)}else U=UA(f,a,i,w,g);return rf(U)}th=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var f=$s(a.pendingLanes);f!==0&&(Ws(a,f|1),Nn(a,Jt()),(Vt&6)===0&&(xl=Jt()+500,eo()))}break;case 13:ia(function(){var g=ps(i,1);if(g!==null){var w=_n();Ei(g,i,1,w)}}),fm(i,1)}},Ya=function(i){if(i.tag===13){var a=ps(i,134217728);if(a!==null){var f=_n();Ei(a,i,134217728,f)}fm(i,134217728)}},rh=function(i){if(i.tag===13){var a=oo(i),f=ps(i,a);if(f!==null){var g=_n();Ei(f,i,a,g)}fm(i,a)}},nh=function(){return Ot},ih=function(i,a){var f=Ot;try{return Ot=i,a()}finally{Ot=f}},Tr=function(i,a,f){switch(a){case"input":if(Ie(i,f),a=f.name,f.type==="radio"&&a!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<f.length;a++){var g=f[a];if(g!==i&&g.form===i.form){var w=Eh(g);if(!w)throw Error(t(90));_e(g),Ie(g,w)}}}break;case"textarea":ge(i,f);break;case"select":a=f.value,a!=null&&Y(i,!!f.multiple,a,!1)}},Gt=sm,wr=ia;var BA={usingClientEntryPoint:!1,Events:[Mu,fl,Eh,Pt,mr,sm]},Yu={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jA={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Bn(i),i===null?null:i.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||VA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{zo=af.inject(jA),jn=af}catch{}}return On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BA,On.createPortal=function(i,a){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pm(a))throw Error(t(200));return FA(i,a,null,f)},On.createRoot=function(i,a){if(!pm(i))throw Error(t(299));var f=!1,g="",w=bw;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=hm(i,1,!1,null,null,f,!1,g,w),i[cs]=a.current,Ou(i.nodeType===8?i.parentNode:i),new dm(a)},On.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Bn(a),i=i===null?null:i.stateNode,i},On.flushSync=function(i){return ia(i)},On.hydrate=function(i,a,f){if(!sf(a))throw Error(t(200));return of(null,i,a,!0,f)},On.hydrateRoot=function(i,a,f){if(!pm(i))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,w=!1,A="",U=bw;if(f!=null&&(f.unstable_strictMode===!0&&(w=!0),f.identifierPrefix!==void 0&&(A=f.identifierPrefix),f.onRecoverableError!==void 0&&(U=f.onRecoverableError)),a=_w(a,null,i,1,f??null,w,!1,A,U),i[cs]=a.current,Ou(i),g)for(i=0;i<g.length;i++)f=g[i],w=f._getVersion,w=w(f._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[f,w]:a.mutableSourceEagerHydrationData.push(f,w);return new nf(a)},On.render=function(i,a,f){if(!sf(a))throw Error(t(200));return of(null,i,a,!1,f)},On.unmountComponentAtNode=function(i){if(!sf(i))throw Error(t(40));return i._reactRootContainer?(ia(function(){of(null,null,i,!1,function(){i._reactRootContainer=null,i[cs]=null})}),!0):!1},On.unstable_batchedUpdates=sm,On.unstable_renderSubtreeIntoContainer=function(i,a,f,g){if(!sf(f))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return of(i,a,f,!1,g)},On.version="18.3.1-next-f1338f8080-20240426",On}var Pw;function XA(){if(Pw)return vm.exports;Pw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vm.exports=JA(),vm.exports}var Nw;function ZA(){if(Nw)return lf;Nw=1;var r=XA();return lf.createRoot=r.createRoot,lf.hydrateRoot=r.hydrateRoot,lf}var eC=ZA();/**
 * @remix-run/router v1.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},vc.apply(this,arguments)}var pa;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(pa||(pa={}));const Ow="popstate";function tC(r){r===void 0&&(r={});function e(n,s){let{pathname:o,search:l,hash:u}=n.location;return Km("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Bf(s)}return nC(e,t,null,r)}function en(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function hv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rC(){return Math.random().toString(36).substr(2,8)}function Dw(r,e){return{usr:r.state,key:r.key,idx:e}}function Km(r,e,t,n){return t===void 0&&(t=null),vc({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Mc(e):e,{state:t,key:e&&e.key||n||rC()})}function Bf(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Mc(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function nC(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,l=s.history,u=pa.Pop,c=null,h=d();h==null&&(h=0,l.replaceState(vc({},l.state,{idx:h}),""));function d(){return(l.state||{idx:null}).idx}function m(){u=pa.Pop;let T=d(),V=T==null?null:T-h;h=T,c&&c({action:u,location:S.location,delta:V})}function y(T,V){u=pa.Push;let I=Km(S.location,T,V);h=d()+1;let k=Dw(I,h),W=S.createHref(I);try{l.pushState(k,"",W)}catch{s.location.assign(W)}o&&c&&c({action:u,location:S.location,delta:1})}function _(T,V){u=pa.Replace;let I=Km(S.location,T,V);h=d();let k=Dw(I,h),W=S.createHref(I);l.replaceState(k,"",W),o&&c&&c({action:u,location:S.location,delta:0})}function E(T){let V=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof T=="string"?T:Bf(T);return en(V,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,V)}let S={get action(){return u},get location(){return r(s,l)},listen(T){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ow,m),c=T,()=>{s.removeEventListener(Ow,m),c=null}},createHref(T){return e(s,T)},createURL:E,encodeLocation(T){let V=E(T);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:y,replace:_,go(T){return l.go(T)}};return S}var Lw;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Lw||(Lw={}));function iC(r,e,t){t===void 0&&(t="/");let n=typeof e=="string"?Mc(e):e,s=fv(n.pathname||"/",t);if(s==null)return null;let o=g1(r);sC(o);let l=null;for(let u=0;l==null&&u<o.length;++u)l=pC(o[u],yC(s));return l}function g1(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(en(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=Co([n,c.relativePath]),d=t.concat(c);o.children&&o.children.length>0&&(en(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),g1(o.children,e,d,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:fC(h,o.index),routesMeta:d})};return r.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let c of y1(o.path))s(o,l,c)}),e}function y1(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let l=y1(n.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&u.push(...l),u.map(c=>r.startsWith("/")&&c===""?"/":c)}function sC(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:dC(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const oC=/^:\w+$/,aC=3,lC=2,uC=1,cC=10,hC=-2,Mw=r=>r==="*";function fC(r,e){let t=r.split("/"),n=t.length;return t.some(Mw)&&(n+=hC),e&&(n+=lC),t.filter(s=>!Mw(s)).reduce((s,o)=>s+(oC.test(o)?aC:o===""?uC:cC),n)}function dC(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function pC(r,e){let{routesMeta:t}=r,n={},s="/",o=[];for(let l=0;l<t.length;++l){let u=t[l],c=l===t.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=mC({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h);if(!d)return null;Object.assign(n,d.params);let m=u.route;o.push({params:n,pathname:Co([s,d.pathname]),pathnameBase:bC(Co([s,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(s=Co([s,d.pathnameBase]))}return o}function mC(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=gC(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((h,d,m)=>{if(d==="*"){let y=u[m]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}return h[d]=vC(u[m]||"",d),h},{}),pathname:o,pathnameBase:l,pattern:r}}function gC(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),hv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(l,u)=>(n.push(u),"/([^\\/]+)"));return r.endsWith("*")?(n.push("*"),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function yC(r){try{return decodeURI(r)}catch(e){return hv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function vC(r,e){try{return decodeURIComponent(r)}catch(t){return hv(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),r}}function fv(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function _C(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Mc(r):r;return{pathname:t?t.startsWith("/")?t:wC(t,e):e,search:EC(n),hash:SC(s)}}function wC(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function bm(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dv(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pv(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=Mc(r):(s=vc({},r),en(!s.pathname||!s.pathname.includes("?"),bm("?","pathname","search",s)),en(!s.pathname||!s.pathname.includes("#"),bm("#","pathname","hash",s)),en(!s.search||!s.search.includes("#"),bm("#","search","hash",s)));let o=r===""||s.pathname==="",l=o?"/":s.pathname,u;if(n||l==null)u=t;else{let m=e.length-1;if(l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}u=m>=0?e[m]:"/"}let c=_C(s,u),h=l&&l!=="/"&&l.endsWith("/"),d=(o||l===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}const Co=r=>r.join("/").replace(/\/\/+/g,"/"),bC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),EC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,SC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function TC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const v1=["post","put","patch","delete"];new Set(v1);const xC=["get",...v1];new Set(xC);/**
 * React Router v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gm(){return Gm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Gm.apply(this,arguments)}const mv=Pe.createContext(null),IC=Pe.createContext(null),iu=Pe.createContext(null),gv=Pe.createContext(null),Ms=Pe.createContext({outlet:null,matches:[],isDataRoute:!1}),_1=Pe.createContext(null);function AC(r,e){let{relative:t}=e===void 0?{}:e;su()||en(!1);let{basename:n,navigator:s}=Pe.useContext(iu),{hash:o,pathname:l,search:u}=b1(r,{relative:t}),c=l;return n!=="/"&&(c=l==="/"?n:Co([n,l])),s.createHref({pathname:c,search:u,hash:o})}function su(){return Pe.useContext(gv)!=null}function Fc(){return su()||en(!1),Pe.useContext(gv).location}function w1(r){Pe.useContext(iu).static||Pe.useLayoutEffect(r)}function ns(){let{isDataRoute:r}=Pe.useContext(Ms);return r?jC():CC()}function CC(){su()||en(!1);let r=Pe.useContext(mv),{basename:e,navigator:t}=Pe.useContext(iu),{matches:n}=Pe.useContext(Ms),{pathname:s}=Fc(),o=JSON.stringify(dv(n).map(c=>c.pathnameBase)),l=Pe.useRef(!1);return w1(()=>{l.current=!0}),Pe.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){t.go(c);return}let d=pv(c,JSON.parse(o),s,h.relative==="path");r==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Co([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,o,s,r])}function RC(){let{matches:r}=Pe.useContext(Ms),e=r[r.length-1];return e?e.params:{}}function b1(r,e){let{relative:t}=e===void 0?{}:e,{matches:n}=Pe.useContext(Ms),{pathname:s}=Fc(),o=JSON.stringify(dv(n).map(l=>l.pathnameBase));return Pe.useMemo(()=>pv(r,JSON.parse(o),s,t==="path"),[r,o,s,t])}function kC(r,e){return PC(r)}function PC(r,e,t){su()||en(!1);let{navigator:n}=Pe.useContext(iu),{matches:s}=Pe.useContext(Ms),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Fc(),h;h=c;let d=h.pathname||"/",m=u==="/"?d:d.slice(u.length)||"/",y=iC(r,{pathname:m});return MC(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Co([u,n.encodeLocation?n.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:Co([u,n.encodeLocation?n.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,t)}function NC(){let r=BC(),e=TC(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Pe.createElement(Pe.Fragment,null,Pe.createElement("h2",null,"Unexpected Application Error!"),Pe.createElement("h3",{style:{fontStyle:"italic"}},e),t?Pe.createElement("pre",{style:s},t):null,null)}const OC=Pe.createElement(NC,null);class DC extends Pe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?Pe.createElement(Ms.Provider,{value:this.props.routeContext},Pe.createElement(_1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LC(r){let{routeContext:e,match:t,children:n}=r,s=Pe.useContext(mv);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Pe.createElement(Ms.Provider,{value:e},n)}function MC(r,e,t){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),r==null){var s;if((s=t)!=null&&s.errors)r=t.matches;else return null}let o=r,l=(n=t)==null?void 0:n.errors;if(l!=null){let u=o.findIndex(c=>c.route.id&&(l==null?void 0:l[c.route.id]));u>=0||en(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((u,c,h)=>{let d=c.route.id?l==null?void 0:l[c.route.id]:null,m=null;t&&(m=c.route.errorElement||OC);let y=e.concat(o.slice(0,h+1)),_=()=>{let E;return d?E=m:c.route.Component?E=Pe.createElement(c.route.Component,null):c.route.element?E=c.route.element:E=u,Pe.createElement(LC,{match:c,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:E})};return t&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?Pe.createElement(DC,{location:t.location,revalidation:t.revalidation,component:m,error:d,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}var Ym;(function(r){r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate"})(Ym||(Ym={}));var _c;(function(r){r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId"})(_c||(_c={}));function FC(r){let e=Pe.useContext(mv);return e||en(!1),e}function VC(r){let e=Pe.useContext(IC);return e||en(!1),e}function UC(r){let e=Pe.useContext(Ms);return e||en(!1),e}function E1(r){let e=UC(),t=e.matches[e.matches.length-1];return t.route.id||en(!1),t.route.id}function BC(){var r;let e=Pe.useContext(_1),t=VC(_c.UseRouteError),n=E1(_c.UseRouteError);return e||((r=t.errors)==null?void 0:r[n])}function jC(){let{router:r}=FC(Ym.UseNavigateStable),e=E1(_c.UseNavigateStable),t=Pe.useRef(!1);return w1(()=>{t.current=!0}),Pe.useCallback(function(s,o){o===void 0&&(o={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,Gm({fromRouteId:e},o)))},[r,e])}function $C(r){let{to:e,replace:t,state:n,relative:s}=r;su()||en(!1);let{matches:o}=Pe.useContext(Ms),{pathname:l}=Fc(),u=ns(),c=pv(e,dv(o).map(d=>d.pathnameBase),l,s==="path"),h=JSON.stringify(c);return Pe.useEffect(()=>u(JSON.parse(h),{replace:t,state:n,relative:s}),[u,h,s,t,n]),null}function zC(r){let{basename:e="/",children:t=null,location:n,navigationType:s=pa.Pop,navigator:o,static:l=!1}=r;su()&&en(!1);let u=e.replace(/^\/*/,"/"),c=Pe.useMemo(()=>({basename:u,navigator:o,static:l}),[u,o,l]);typeof n=="string"&&(n=Mc(n));let{pathname:h="/",search:d="",hash:m="",state:y=null,key:_="default"}=n,E=Pe.useMemo(()=>{let S=fv(h,u);return S==null?null:{location:{pathname:S,search:d,hash:m,state:y,key:_},navigationType:s}},[u,h,d,m,y,_,s]);return E==null?null:Pe.createElement(iu.Provider,{value:c},Pe.createElement(gv.Provider,{children:t,value:E}))}var Fw;(function(r){r[r.pending=0]="pending",r[r.success=1]="success",r[r.error=2]="error"})(Fw||(Fw={}));new Promise(()=>{});/**
 * React Router DOM v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jm.apply(this,arguments)}function qC(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function WC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function HC(r,e){return r.button===0&&(!e||e==="_self")&&!WC(r)}const QC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function KC(r){let{basename:e,children:t,window:n}=r,s=Pe.useRef();s.current==null&&(s.current=tC({window:n,v5Compat:!0}));let o=s.current,[l,u]=Pe.useState({action:o.action,location:o.location});return Pe.useLayoutEffect(()=>o.listen(u),[o]),Pe.createElement(zC,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o})}const GC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JC=Pe.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:d}=e,m=qC(e,QC),{basename:y}=Pe.useContext(iu),_,E=!1;if(typeof h=="string"&&YC.test(h)&&(_=h,GC))try{let I=new URL(window.location.href),k=h.startsWith("//")?new URL(I.protocol+h):new URL(h),W=fv(k.pathname,y);k.origin===I.origin&&W!=null?h=W+k.search+k.hash:E=!0}catch{}let S=AC(h,{relative:s}),T=XC(h,{replace:l,state:u,target:c,preventScrollReset:d,relative:s});function V(I){n&&n(I),I.defaultPrevented||T(I)}return Pe.createElement("a",Jm({},m,{href:_||S,onClick:E||o?n:V,ref:t,target:c}))});var Vw;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmitImpl="useSubmitImpl",r.UseFetcher="useFetcher"})(Vw||(Vw={}));var Uw;(function(r){r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Uw||(Uw={}));function XC(r,e){let{target:t,replace:n,state:s,preventScrollReset:o,relative:l}=e===void 0?{}:e,u=ns(),c=Fc(),h=b1(r,{relative:l});return Pe.useCallback(d=>{if(HC(d,t)){d.preventDefault();let m=n!==void 0?n:Bf(c)===Bf(h);u(r,{replace:m,state:s,preventScrollReset:o,relative:l})}},[c,u,h,n,s,t,r,o,l])}function S1(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=S1(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Ca(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=S1(r))&&(n&&(n+=" "),n+=e);return n}function ZC(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}ZC(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Vc=r=>typeof r=="number"&&!isNaN(r),Da=r=>typeof r=="string",ks=r=>typeof r=="function",eR=r=>Da(r)||Vc(r),Xm=r=>Da(r)||ks(r)?r:null,tR=(r,e)=>r===!1||Vc(r)&&r>0?r:e,Zm=r=>Pe.isValidElement(r)||Da(r)||ks(r)||Vc(r);function rR(r,e,t=300){let{scrollHeight:n,style:s}=r;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function nR({enter:r,exit:e,appendPosition:t=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:o,position:l,preventExitTransition:u,done:c,nodeRef:h,isIn:d,playToast:m}){let y=t?`${r}--${l}`:r,_=t?`${e}--${l}`:e,E=Pe.useRef(0);return Pe.useLayoutEffect(()=>{let S=h.current,T=y.split(" "),V=I=>{I.target===h.current&&(m(),S.removeEventListener("animationend",V),S.removeEventListener("animationcancel",V),E.current===0&&I.type!=="animationcancel"&&S.classList.remove(...T))};S.classList.add(...T),S.addEventListener("animationend",V),S.addEventListener("animationcancel",V)},[]),Pe.useEffect(()=>{let S=h.current,T=()=>{S.removeEventListener("animationend",T),n?rR(S,c,s):c()};d||(u?T():(E.current=1,S.className+=` ${_}`,S.addEventListener("animationend",T)))},[d]),Rt.createElement(Rt.Fragment,null,o)}}function Bw(r,e){return{content:T1(r.content,r.props),containerId:r.props.containerId,id:r.props.toastId,theme:r.props.theme,type:r.props.type,data:r.props.data||{},isLoading:r.props.isLoading,icon:r.props.icon,reason:r.removalReason,status:e}}function T1(r,e,t=!1){return Pe.isValidElement(r)&&!Da(r.type)?Pe.cloneElement(r,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):ks(r)?r({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):r}function iR({closeToast:r,theme:e,ariaLabel:t="close"}){return Rt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),r(!0)},"aria-label":t},Rt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Rt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function sR({delay:r,isRunning:e,closeToast:t,type:n="default",hide:s,className:o,controlledProgress:l,progress:u,rtl:c,isIn:h,theme:d}){let m=s||l&&u===0,y={animationDuration:`${r}ms`,animationPlayState:e?"running":"paused"};l&&(y.transform=`scaleX(${u})`);let _=Ca("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),E=ks(o)?o({rtl:c,type:n,defaultClassName:_}):Ca(_,o),S={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{h&&t()}};return Rt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},Rt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${n}`}),Rt.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:E,style:y,...S}))}var oR=1,x1=()=>`${oR++}`;function aR(r,e,t){let n=1,s=0,o=[],l=[],u=e,c=new Map,h=new Set,d=I=>(h.add(I),()=>h.delete(I)),m=()=>{l=Array.from(c.values()),h.forEach(I=>I())},y=({containerId:I,toastId:k,updateId:W})=>{let H=I?I!==r:r!==1,j=c.has(k)&&W==null;return H||j},_=(I,k)=>{c.forEach(W=>{var H;(k==null||k===W.props.toastId)&&((H=W.toggle)==null||H.call(W,I))})},E=I=>{var k,W;(W=(k=I.props)==null?void 0:k.onClose)==null||W.call(k,I.removalReason),I.isActive=!1},S=I=>{if(I==null)c.forEach(E);else{let k=c.get(I);k&&E(k)}m()},T=()=>{s-=o.length,o=[]},V=I=>{var k,W;let{toastId:H,updateId:j}=I.props,P=j==null;I.staleId&&c.delete(I.staleId),I.isActive=!0,c.set(H,I),m(),t(Bw(I,P?"added":"updated")),P&&((W=(k=I.props).onOpen)==null||W.call(k))};return{id:r,props:u,observe:d,toggle:_,removeToast:S,toasts:c,clearQueue:T,buildToast:(I,k)=>{if(y(k))return;let{toastId:W,updateId:H,data:j,staleId:P,delay:R}=k,M=H==null;M&&s++;let F={...u,style:u.toastStyle,key:n++,...Object.fromEntries(Object.entries(k).filter(([N,L])=>L!=null)),toastId:W,updateId:H,data:j,isIn:!1,className:Xm(k.className||u.toastClassName),progressClassName:Xm(k.progressClassName||u.progressClassName),autoClose:k.isLoading?!1:tR(k.autoClose,u.autoClose),closeToast(N){c.get(W).removalReason=N,S(W)},deleteToast(){let N=c.get(W);if(N!=null){if(t(Bw(N,"removed")),c.delete(W),s--,s<0&&(s=0),o.length>0){V(o.shift());return}m()}}};F.closeButton=u.closeButton,k.closeButton===!1||Zm(k.closeButton)?F.closeButton=k.closeButton:k.closeButton===!0&&(F.closeButton=Zm(u.closeButton)?u.closeButton:!0);let $={content:I,props:F,staleId:P};u.limit&&u.limit>0&&s>u.limit&&M?o.push($):Vc(R)?setTimeout(()=>{V($)},R):V($)},setProps(I){u=I},setToggle:(I,k)=>{let W=c.get(I);W&&(W.toggle=k)},isToastActive:I=>{var k;return(k=c.get(I))==null?void 0:k.isActive},getSnapshot:()=>l}}var Sn=new Map,wc=[],eg=new Set,lR=r=>eg.forEach(e=>e(r)),I1=()=>Sn.size>0;function uR(){wc.forEach(r=>C1(r.content,r.options)),wc=[]}var cR=(r,{containerId:e})=>{var t;return(t=Sn.get(e||1))==null?void 0:t.toasts.get(r)};function A1(r,e){var t;if(e)return!!((t=Sn.get(e))!=null&&t.isToastActive(r));let n=!1;return Sn.forEach(s=>{s.isToastActive(r)&&(n=!0)}),n}function hR(r){if(!I1()){wc=wc.filter(e=>r!=null&&e.options.toastId!==r);return}if(r==null||eR(r))Sn.forEach(e=>{e.removeToast(r)});else if(r&&("containerId"in r||"id"in r)){let e=Sn.get(r.containerId);e?e.removeToast(r.id):Sn.forEach(t=>{t.removeToast(r.id)})}}var fR=(r={})=>{Sn.forEach(e=>{e.props.limit&&(!r.containerId||e.id===r.containerId)&&e.clearQueue()})};function C1(r,e){Zm(r)&&(I1()||wc.push({content:r,options:e}),Sn.forEach(t=>{t.buildToast(r,e)}))}function dR(r){var e;(e=Sn.get(r.containerId||1))==null||e.setToggle(r.id,r.fn)}function R1(r,e){Sn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(r,e==null?void 0:e.id)})}function pR(r){let e=r.containerId||1;return{subscribe(t){let n=aR(e,r,lR);Sn.set(e,n);let s=n.observe(t);return uR(),()=>{s(),Sn.delete(e)}},setProps(t){var n;(n=Sn.get(e))==null||n.setProps(t)},getSnapshot(){var t;return(t=Sn.get(e))==null?void 0:t.getSnapshot()}}}function mR(r){return eg.add(r),()=>{eg.delete(r)}}function gR(r){return r&&(Da(r.toastId)||Vc(r.toastId))?r.toastId:x1()}function Uc(r,e){return C1(r,e),e.toastId}function md(r,e){return{...e,type:e&&e.type||r,toastId:gR(e)}}function gd(r){return(e,t)=>Uc(e,md(r,t))}function pt(r,e){return Uc(r,md("default",e))}pt.loading=(r,e)=>Uc(r,md("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function yR(r,{pending:e,error:t,success:n},s){let o;e&&(o=Da(e)?pt.loading(e,s):pt.loading(e.render,{...s,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(h,d,m)=>{if(d==null){pt.dismiss(o);return}let y={type:h,...l,...s,data:m},_=Da(d)?{render:d}:d;return o?pt.update(o,{...y,..._}):pt(_.render,{...y,..._}),m},c=ks(r)?r():r;return c.then(h=>u("success",n,h)).catch(h=>u("error",t,h)),c}pt.promise=yR;pt.success=gd("success");pt.info=gd("info");pt.error=gd("error");pt.warning=gd("warning");pt.warn=pt.warning;pt.dark=(r,e)=>Uc(r,md("default",{theme:"dark",...e}));function vR(r){hR(r)}pt.dismiss=vR;pt.clearWaitingQueue=fR;pt.isActive=A1;pt.update=(r,e={})=>{let t=cR(r,e);if(t){let{props:n,content:s}=t,o={delay:100,...n,...e,toastId:e.toastId||r,updateId:x1()};o.toastId!==r&&(o.staleId=r);let l=o.render||s;delete o.render,Uc(l,o)}};pt.done=r=>{pt.update(r,{progress:1})};pt.onChange=mR;pt.play=r=>R1(!0,r);pt.pause=r=>R1(!1,r);function _R(r){var e;let{subscribe:t,getSnapshot:n,setProps:s}=Pe.useRef(pR(r)).current;s(r);let o=(e=Pe.useSyncExternalStore(t,n,n))==null?void 0:e.slice();function l(u){if(!o)return[];let c=new Map;return r.newestOnTop&&o.reverse(),o.forEach(h=>{let{position:d}=h.props;c.has(d)||c.set(d,[]),c.get(d).push(h)}),Array.from(c,h=>u(h[0],h[1]))}return{getToastToRender:l,isToastActive:A1,count:o==null?void 0:o.length}}function wR(r){let[e,t]=Pe.useState(!1),[n,s]=Pe.useState(!1),o=Pe.useRef(null),l=Pe.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:c,closeToast:h,onClick:d,closeOnClick:m}=r;dR({id:r.toastId,containerId:r.containerId,fn:t}),Pe.useEffect(()=>{if(r.pauseOnFocusLoss)return y(),()=>{_()}},[r.pauseOnFocusLoss]);function y(){document.hasFocus()||V(),window.addEventListener("focus",T),window.addEventListener("blur",V)}function _(){window.removeEventListener("focus",T),window.removeEventListener("blur",V)}function E(P){if(r.draggable===!0||r.draggable===P.pointerType){I();let R=o.current;l.canCloseOnClick=!0,l.canDrag=!0,R.style.transition="none",r.draggableDirection==="x"?(l.start=P.clientX,l.removalDistance=R.offsetWidth*(r.draggablePercent/100)):(l.start=P.clientY,l.removalDistance=R.offsetHeight*(r.draggablePercent===80?r.draggablePercent*1.5:r.draggablePercent)/100)}}function S(P){let{top:R,bottom:M,left:F,right:$}=o.current.getBoundingClientRect();P.nativeEvent.type!=="touchend"&&r.pauseOnHover&&P.clientX>=F&&P.clientX<=$&&P.clientY>=R&&P.clientY<=M?V():T()}function T(){t(!0)}function V(){t(!1)}function I(){l.didMove=!1,document.addEventListener("pointermove",W),document.addEventListener("pointerup",H)}function k(){document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",H)}function W(P){let R=o.current;if(l.canDrag&&R){l.didMove=!0,e&&V(),r.draggableDirection==="x"?l.delta=P.clientX-l.start:l.delta=P.clientY-l.start,l.start!==P.clientX&&(l.canCloseOnClick=!1);let M=r.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;R.style.transform=`translate3d(${M},0)`,R.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function H(){k();let P=o.current;if(l.canDrag&&l.didMove&&P){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){s(!0),r.closeToast(!0),r.collapseAll();return}P.style.transition="transform 0.2s, opacity 0.2s",P.style.removeProperty("transform"),P.style.removeProperty("opacity")}}let j={onPointerDown:E,onPointerUp:S};return u&&c&&(j.onMouseEnter=V,r.stacked||(j.onMouseLeave=T)),m&&(j.onClick=P=>{d&&d(P),l.canCloseOnClick&&h(!0)}),{playToast:T,pauseToast:V,isRunning:e,preventExitTransition:n,toastRef:o,eventHandlers:j}}var bR=typeof window<"u"?Pe.useLayoutEffect:Pe.useEffect,yd=({theme:r,type:e,isLoading:t,...n})=>Rt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:r==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function ER(r){return Rt.createElement(yd,{...r},Rt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function SR(r){return Rt.createElement(yd,{...r},Rt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function TR(r){return Rt.createElement(yd,{...r},Rt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function xR(r){return Rt.createElement(yd,{...r},Rt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function IR(){return Rt.createElement("div",{className:"Toastify__spinner"})}var tg={info:SR,warning:ER,success:TR,error:xR,spinner:IR},AR=r=>r in tg;function CR({theme:r,type:e,isLoading:t,icon:n}){let s=null,o={theme:r,type:e};return n===!1||(ks(n)?s=n({...o,isLoading:t}):Pe.isValidElement(n)?s=Pe.cloneElement(n,o):t?s=tg.spinner():AR(e)&&(s=tg[e](o))),s}var RR=r=>{let{isRunning:e,preventExitTransition:t,toastRef:n,eventHandlers:s,playToast:o}=wR(r),{closeButton:l,children:u,autoClose:c,onClick:h,type:d,hideProgressBar:m,closeToast:y,transition:_,position:E,className:S,style:T,progressClassName:V,updateId:I,role:k,progress:W,rtl:H,toastId:j,deleteToast:P,isIn:R,isLoading:M,closeOnClick:F,theme:$,ariaLabel:N}=r,L=Ca("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":F}),ve=ks(S)?S({rtl:H,position:E,type:d,defaultClassName:L}):Ca(L,S),ae=CR(r),De=!!W||!c,Re={closeToast:y,type:d,theme:$},fe=null;return l===!1||(ks(l)?fe=l(Re):Pe.isValidElement(l)?fe=Pe.cloneElement(l,Re):fe=iR(Re)),Rt.createElement(_,{isIn:R,done:P,position:E,preventExitTransition:t,nodeRef:n,playToast:o},Rt.createElement("div",{id:j,tabIndex:0,onClick:h,"data-in":R,className:ve,...s,style:T,ref:n,...R&&{role:k,"aria-label":N}},ae!=null&&Rt.createElement("div",{className:Ca("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!M})},ae),T1(u,r,!e),fe,!r.customProgressBar&&Rt.createElement(sR,{...I&&!De?{key:`p-${I}`}:{},rtl:H,theme:$,delay:c,isRunning:e,isIn:R,closeToast:y,hide:m,type:d,className:V,controlledProgress:De,progress:W||0})))},kR=(r,e=!1)=>({enter:`Toastify--animate Toastify__${r}-enter`,exit:`Toastify--animate Toastify__${r}-exit`,appendPosition:e}),PR=nR(kR("bounce",!0)),NR={position:"top-right",transition:PR,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:r=>r.altKey&&r.code==="KeyT"};function OR(r){let e={...NR,...r},t=r.stacked,[n,s]=Pe.useState(!0),o=Pe.useRef(null),{getToastToRender:l,isToastActive:u,count:c}=_R(e),{className:h,style:d,rtl:m,containerId:y,hotKeys:_}=e;function E(T){let V=Ca("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":m});return ks(h)?h({position:T,rtl:m,defaultClassName:V}):Ca(V,Xm(h))}function S(){t&&(s(!0),pt.play())}return bR(()=>{var T;if(t){let V=o.current.querySelectorAll('[data-in="true"]'),I=12,k=(T=e.position)==null?void 0:T.includes("top"),W=0,H=0;Array.from(V).reverse().forEach((j,P)=>{let R=j;R.classList.add("Toastify__toast--stacked"),P>0&&(R.dataset.collapsed=`${n}`),R.dataset.pos||(R.dataset.pos=k?"top":"bot");let M=W*(n?.2:1)+(n?0:I*P);R.style.setProperty("--y",`${k?M:M*-1}px`),R.style.setProperty("--g",`${I}`),R.style.setProperty("--s",`${1-(n?H:0)}`),W+=R.offsetHeight,H+=.025})}},[n,c,t]),Pe.useEffect(()=>{function T(V){var I;let k=o.current;_(V)&&((I=k.querySelector('[tabIndex="0"]'))==null||I.focus(),s(!1),pt.pause()),V.key==="Escape"&&(document.activeElement===k||k!=null&&k.contains(document.activeElement))&&(s(!0),pt.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[_]),Rt.createElement("section",{ref:o,className:"Toastify",id:y,onMouseEnter:()=>{t&&(s(!1),pt.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((T,V)=>{let I=V.length?{...d}:{...d,pointerEvents:"none"};return Rt.createElement("div",{tabIndex:-1,className:E(T),"data-stacked":t,style:I,key:`c-${T}`},V.map(({content:k,props:W})=>Rt.createElement(RR,{...W,stacked:t,collapseAll:S,isIn:u(W.toastId,W.containerId),key:`t-${W.key}`},k)))}))}var ou=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},La=typeof window>"u"||"Deno"in globalThis;function li(){}function DR(r,e){return typeof r=="function"?r(e):r}function rg(r){return typeof r=="number"&&r>=0&&r!==1/0}function k1(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Dl(r,e){return typeof r=="function"?r(e):r}function Ai(r,e){return typeof r=="function"?r(e):r}function jw(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:o,queryKey:l,stale:u}=r;if(l){if(n){if(e.queryHash!==yv(l,e.options))return!1}else if(!bc(e.queryKey,l))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function $w(r,e){const{exact:t,status:n,predicate:s,mutationKey:o}=r;if(o){if(!e.options.mutationKey)return!1;if(t){if(Ma(e.options.mutationKey)!==Ma(o))return!1}else if(!bc(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function yv(r,e){return((e==null?void 0:e.queryKeyHashFn)||Ma)(r)}function Ma(r){return JSON.stringify(r,(e,t)=>ng(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function bc(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!bc(r[t],e[t])):!1}function P1(r,e){if(r===e)return r;const t=zw(r)&&zw(e);if(t||ng(r)&&ng(e)){const n=t?r:Object.keys(r),s=n.length,o=t?e:Object.keys(e),l=o.length,u=t?[]:{};let c=0;for(let h=0;h<l;h++){const d=t?h:o[h];(!t&&n.includes(d)||t)&&r[d]===void 0&&e[d]===void 0?(u[d]=void 0,c++):(u[d]=P1(r[d],e[d]),u[d]===r[d]&&r[d]!==void 0&&c++)}return s===l&&c===s?r:u}return e}function jf(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function zw(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function ng(r){if(!qw(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!qw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function qw(r){return Object.prototype.toString.call(r)==="[object Object]"}function LR(r){return new Promise(e=>{setTimeout(e,r)})}function ig(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?P1(r,e):e}function MR(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function FR(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var vv=Symbol();function N1(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===vv?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var wa,vo,Fl,s1,VR=(s1=class extends ou{constructor(){super();nt(this,wa);nt(this,vo);nt(this,Fl);Ue(this,Fl,e=>{if(!La&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){D(this,vo)||this.setEventListener(D(this,Fl))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,vo))==null||e.call(this),Ue(this,vo,void 0))}setEventListener(e){var t;Ue(this,Fl,e),(t=D(this,vo))==null||t.call(this),Ue(this,vo,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,wa)!==e&&(Ue(this,wa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof D(this,wa)=="boolean"?D(this,wa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},wa=new WeakMap,vo=new WeakMap,Fl=new WeakMap,s1),_v=new VR,Vl,_o,Ul,o1,UR=(o1=class extends ou{constructor(){super();nt(this,Vl,!0);nt(this,_o);nt(this,Ul);Ue(this,Ul,e=>{if(!La&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,_o)||this.setEventListener(D(this,Ul))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,_o))==null||e.call(this),Ue(this,_o,void 0))}setEventListener(e){var t;Ue(this,Ul,e),(t=D(this,_o))==null||t.call(this),Ue(this,_o,e(this.setOnline.bind(this)))}setOnline(e){D(this,Vl)!==e&&(Ue(this,Vl,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,Vl)}},Vl=new WeakMap,_o=new WeakMap,Ul=new WeakMap,o1),$f=new UR;function sg(){let r,e;const t=new Promise((s,o)=>{r=s,e=o});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function BR(r){return Math.min(1e3*2**r,3e4)}function O1(r){return(r??"online")==="online"?$f.isOnline():!0}var D1=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Em(r){return r instanceof D1}function L1(r){let e=!1,t=0,n=!1,s;const o=sg(),l=S=>{var T;n||(y(new D1(S)),(T=r.abort)==null||T.call(r))},u=()=>{e=!0},c=()=>{e=!1},h=()=>_v.isFocused()&&(r.networkMode==="always"||$f.isOnline())&&r.canRun(),d=()=>O1(r.networkMode)&&r.canRun(),m=S=>{var T;n||(n=!0,(T=r.onSuccess)==null||T.call(r,S),s==null||s(),o.resolve(S))},y=S=>{var T;n||(n=!0,(T=r.onError)==null||T.call(r,S),s==null||s(),o.reject(S))},_=()=>new Promise(S=>{var T;s=V=>{(n||h())&&S(V)},(T=r.onPause)==null||T.call(r)}).then(()=>{var S;s=void 0,n||(S=r.onContinue)==null||S.call(r)}),E=()=>{if(n)return;let S;const T=t===0?r.initialPromise:void 0;try{S=T??r.fn()}catch(V){S=Promise.reject(V)}Promise.resolve(S).then(m).catch(V=>{var j;if(n)return;const I=r.retry??(La?0:3),k=r.retryDelay??BR,W=typeof k=="function"?k(t,V):k,H=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,V);if(e||!H){y(V);return}t++,(j=r.onFail)==null||j.call(r,t,V),LR(W).then(()=>h()?void 0:_()).then(()=>{e?y(V):E()})})};return{promise:o,cancel:l,continue:()=>(s==null||s(),o),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?E():_().then(E),o)}}var jR=r=>setTimeout(r,0);function $R(){let r=[],e=0,t=u=>{u()},n=u=>{u()},s=jR;const o=u=>{e?r.push(u):s(()=>{t(u)})},l=()=>{const u=r;r=[],u.length&&s(()=>{n(()=>{u.forEach(c=>{t(c)})})})};return{batch:u=>{let c;e++;try{c=u()}finally{e--,e||l()}return c},batchCalls:u=>(...c)=>{o(()=>{u(...c)})},schedule:o,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{s=u}}}var Lr=$R(),ba,a1,M1=(a1=class{constructor(){nt(this,ba)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rg(this.gcTime)&&Ue(this,ba,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(La?1/0:5*60*1e3))}clearGcTimeout(){D(this,ba)&&(clearTimeout(D(this,ba)),Ue(this,ba,void 0))}},ba=new WeakMap,a1),Bl,jl,ai,Ea,cn,Nc,Sa,xi,ws,l1,zR=(l1=class extends M1{constructor(t){super();nt(this,xi);nt(this,Bl);nt(this,jl);nt(this,ai);nt(this,Ea);nt(this,cn);nt(this,Nc);nt(this,Sa);Ue(this,Sa,!1),Ue(this,Nc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ue(this,Ea,t.client),Ue(this,ai,D(this,Ea).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ue(this,Bl,qR(this.options)),this.state=t.state??D(this,Bl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=D(this,cn))==null?void 0:t.promise}setOptions(t){this.options={...D(this,Nc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,ai).remove(this)}setData(t,n){const s=ig(this.state.data,t,this.options);return qe(this,xi,ws).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){qe(this,xi,ws).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,o;const n=(s=D(this,cn))==null?void 0:s.promise;return(o=D(this,cn))==null||o.cancel(t),n?n.then(li).catch(li):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,Bl))}isActive(){return this.observers.some(t=>Ai(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!k1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,cn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,cn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),D(this,ai).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(D(this,cn)&&(D(this,Sa)?D(this,cn).cancel({revert:!0}):D(this,cn).cancelRetry()),this.scheduleGc()),D(this,ai).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qe(this,xi,ws).call(this,{type:"invalidate"})}fetch(t,n){var h,d,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,cn))return D(this,cn).continueRetry(),D(this,cn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(_=>_.options.queryFn);y&&this.setOptions(y.options)}const s=new AbortController,o=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(Ue(this,Sa,!0),s.signal)})},l=()=>{const y=N1(this.options,n),_={client:D(this,Ea),queryKey:this.queryKey,meta:this.meta};return o(_),Ue(this,Sa,!1),this.options.persister?this.options.persister(y,_,this):y(_)},u={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:D(this,Ea),state:this.state,fetchFn:l};o(u),(h=this.options.behavior)==null||h.onFetch(u,this),Ue(this,jl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=u.fetchOptions)==null?void 0:d.meta))&&qe(this,xi,ws).call(this,{type:"fetch",meta:(m=u.fetchOptions)==null?void 0:m.meta});const c=y=>{var _,E,S,T;Em(y)&&y.silent||qe(this,xi,ws).call(this,{type:"error",error:y}),Em(y)||((E=(_=D(this,ai).config).onError)==null||E.call(_,y,this),(T=(S=D(this,ai).config).onSettled)==null||T.call(S,this.state.data,y,this)),this.scheduleGc()};return Ue(this,cn,L1({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,abort:s.abort.bind(s),onSuccess:y=>{var _,E,S,T;if(y===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(y)}catch(V){c(V);return}(E=(_=D(this,ai).config).onSuccess)==null||E.call(_,y,this),(T=(S=D(this,ai).config).onSettled)==null||T.call(S,y,this.state.error,this),this.scheduleGc()},onError:c,onFail:(y,_)=>{qe(this,xi,ws).call(this,{type:"failed",failureCount:y,error:_})},onPause:()=>{qe(this,xi,ws).call(this,{type:"pause"})},onContinue:()=>{qe(this,xi,ws).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),D(this,cn).start()}},Bl=new WeakMap,jl=new WeakMap,ai=new WeakMap,Ea=new WeakMap,cn=new WeakMap,Nc=new WeakMap,Sa=new WeakMap,xi=new WeakSet,ws=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...F1(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return Em(o)&&o.revert&&D(this,jl)?{...D(this,jl),fetchStatus:"idle"}:{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Lr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),D(this,ai).notify({query:this,type:"updated",action:t})})},l1);function F1(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:O1(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function qR(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Wi,u1,WR=(u1=class extends ou{constructor(e={}){super();nt(this,Wi);this.config=e,Ue(this,Wi,new Map)}build(e,t,n){const s=t.queryKey,o=t.queryHash??yv(s,t);let l=this.get(o);return l||(l=new zR({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){D(this,Wi).has(e.queryHash)||(D(this,Wi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=D(this,Wi).get(e.queryHash);t&&(e.destroy(),t===e&&D(this,Wi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Lr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,Wi).get(e)}getAll(){return[...D(this,Wi).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>jw(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>jw(e,n)):t}notify(e){Lr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Lr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Lr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Wi=new WeakMap,u1),Hi,wn,Ta,Qi,co,c1,HR=(c1=class extends M1{constructor(t){super();nt(this,Qi);nt(this,Hi);nt(this,wn);nt(this,Ta);this.mutationId=t.mutationId,Ue(this,wn,t.mutationCache),Ue(this,Hi,[]),this.state=t.state||V1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){D(this,Hi).includes(t)||(D(this,Hi).push(t),this.clearGcTimeout(),D(this,wn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ue(this,Hi,D(this,Hi).filter(n=>n!==t)),this.scheduleGc(),D(this,wn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){D(this,Hi).length||(this.state.status==="pending"?this.scheduleGc():D(this,wn).remove(this))}continue(){var t;return((t=D(this,Ta))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,h,d,m,y,_,E,S,T,V,I,k,W,H,j,P,R;Ue(this,Ta,L1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,F)=>{qe(this,Qi,co).call(this,{type:"failed",failureCount:M,error:F})},onPause:()=>{qe(this,Qi,co).call(this,{type:"pause"})},onContinue:()=>{qe(this,Qi,co).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,wn).canRun(this)}));const n=this.state.status==="pending",s=!D(this,Ta).canStart();try{if(!n){qe(this,Qi,co).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(o=D(this,wn).config).onMutate)==null?void 0:l.call(o,t,this));const F=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t));F!==this.state.context&&qe(this,Qi,co).call(this,{type:"pending",context:F,variables:t,isPaused:s})}const M=await D(this,Ta).start();return await((d=(h=D(this,wn).config).onSuccess)==null?void 0:d.call(h,M,t,this.state.context,this)),await((y=(m=this.options).onSuccess)==null?void 0:y.call(m,M,t,this.state.context)),await((E=(_=D(this,wn).config).onSettled)==null?void 0:E.call(_,M,null,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,M,null,t,this.state.context)),qe(this,Qi,co).call(this,{type:"success",data:M}),M}catch(M){try{throw await((I=(V=D(this,wn).config).onError)==null?void 0:I.call(V,M,t,this.state.context,this)),await((W=(k=this.options).onError)==null?void 0:W.call(k,M,t,this.state.context)),await((j=(H=D(this,wn).config).onSettled)==null?void 0:j.call(H,void 0,M,this.state.variables,this.state.context,this)),await((R=(P=this.options).onSettled)==null?void 0:R.call(P,void 0,M,t,this.state.context)),M}finally{qe(this,Qi,co).call(this,{type:"error",error:M})}}finally{D(this,wn).runNext(this)}}},Hi=new WeakMap,wn=new WeakMap,Ta=new WeakMap,Qi=new WeakSet,co=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Lr.batch(()=>{D(this,Hi).forEach(s=>{s.onMutationUpdate(t)}),D(this,wn).notify({mutation:this,type:"updated",action:t})})},c1);function V1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Is,Ii,Oc,h1,QR=(h1=class extends ou{constructor(e={}){super();nt(this,Is);nt(this,Ii);nt(this,Oc);this.config=e,Ue(this,Is,new Set),Ue(this,Ii,new Map),Ue(this,Oc,0)}build(e,t,n){const s=new HR({mutationCache:this,mutationId:++la(this,Oc)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){D(this,Is).add(e);const t=uf(e);if(typeof t=="string"){const n=D(this,Ii).get(t);n?n.push(e):D(this,Ii).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,Is).delete(e)){const t=uf(e);if(typeof t=="string"){const n=D(this,Ii).get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&D(this,Ii).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=uf(e);if(typeof t=="string"){const n=D(this,Ii).get(t),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const t=uf(e);if(typeof t=="string"){const s=(n=D(this,Ii).get(t))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Lr.batch(()=>{D(this,Is).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,Is).clear(),D(this,Ii).clear()})}getAll(){return Array.from(D(this,Is))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>$w(t,n))}findAll(e={}){return this.getAll().filter(t=>$w(e,t))}notify(e){Lr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Lr.batch(()=>Promise.all(e.map(t=>t.continue().catch(li))))}},Is=new WeakMap,Ii=new WeakMap,Oc=new WeakMap,h1);function uf(r){var e;return(e=r.options.scope)==null?void 0:e.id}function Ww(r){return{onFetch:(e,t)=>{var d,m,y,_,E;const n=e.options,s=(y=(m=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:y.direction,o=((_=e.state.data)==null?void 0:_.pages)||[],l=((E=e.state.data)==null?void 0:E.pageParams)||[];let u={pages:[],pageParams:[]},c=0;const h=async()=>{let S=!1;const T=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?S=!0:e.signal.addEventListener("abort",()=>{S=!0}),e.signal)})},V=N1(e.options,e.fetchOptions),I=async(k,W,H)=>{if(S)return Promise.reject();if(W==null&&k.pages.length)return Promise.resolve(k);const j={client:e.client,queryKey:e.queryKey,pageParam:W,direction:H?"backward":"forward",meta:e.options.meta};T(j);const P=await V(j),{maxPages:R}=e.options,M=H?FR:MR;return{pages:M(k.pages,P,R),pageParams:M(k.pageParams,W,R)}};if(s&&o.length){const k=s==="backward",W=k?KR:Hw,H={pages:o,pageParams:l},j=W(n,H);u=await I(H,j,k)}else{const k=r??o.length;do{const W=c===0?l[0]??n.initialPageParam:Hw(n,u);if(c>0&&W==null)break;u=await I(u,W),c++}while(c<k)}return u};e.options.persister?e.fetchFn=()=>{var S,T;return(T=(S=e.options).persister)==null?void 0:T.call(S,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function Hw(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function KR(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var vr,wo,bo,$l,zl,Eo,ql,Wl,f1,GR=(f1=class{constructor(r={}){nt(this,vr);nt(this,wo);nt(this,bo);nt(this,$l);nt(this,zl);nt(this,Eo);nt(this,ql);nt(this,Wl);Ue(this,vr,r.queryCache||new WR),Ue(this,wo,r.mutationCache||new QR),Ue(this,bo,r.defaultOptions||{}),Ue(this,$l,new Map),Ue(this,zl,new Map),Ue(this,Eo,0)}mount(){la(this,Eo)._++,D(this,Eo)===1&&(Ue(this,ql,_v.subscribe(async r=>{r&&(await this.resumePausedMutations(),D(this,vr).onFocus())})),Ue(this,Wl,$f.subscribe(async r=>{r&&(await this.resumePausedMutations(),D(this,vr).onOnline())})))}unmount(){var r,e;la(this,Eo)._--,D(this,Eo)===0&&((r=D(this,ql))==null||r.call(this),Ue(this,ql,void 0),(e=D(this,Wl))==null||e.call(this),Ue(this,Wl,void 0))}isFetching(r){return D(this,vr).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return D(this,wo).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=D(this,vr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=D(this,vr).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(Dl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return D(this,vr).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=D(this,vr).get(n.queryHash),o=s==null?void 0:s.state.data,l=DR(e,o);if(l!==void 0)return D(this,vr).build(this,n).setData(l,{...t,manual:!0})}setQueriesData(r,e,t){return Lr.batch(()=>D(this,vr).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=D(this,vr).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=D(this,vr);Lr.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=D(this,vr);return Lr.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=Lr.batch(()=>D(this,vr).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(li).catch(li)}invalidateQueries(r,e={}){return Lr.batch(()=>(D(this,vr).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=Lr.batch(()=>D(this,vr).findAll(r).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(li)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(li)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=D(this,vr).build(this,e);return t.isStaleByTime(Dl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(li).catch(li)}fetchInfiniteQuery(r){return r.behavior=Ww(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(li).catch(li)}ensureInfiniteQueryData(r){return r.behavior=Ww(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return $f.isOnline()?D(this,wo).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,vr)}getMutationCache(){return D(this,wo)}getDefaultOptions(){return D(this,bo)}setDefaultOptions(r){Ue(this,bo,r)}setQueryDefaults(r,e){D(this,$l).set(Ma(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...D(this,$l).values()],t={};return e.forEach(n=>{bc(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){D(this,zl).set(Ma(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...D(this,zl).values()],t={};return e.forEach(n=>{bc(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...D(this,bo).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=yv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===vv&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...D(this,bo).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){D(this,vr).clear(),D(this,wo).clear()}},vr=new WeakMap,wo=new WeakMap,bo=new WeakMap,$l=new WeakMap,zl=new WeakMap,Eo=new WeakMap,ql=new WeakMap,Wl=new WeakMap,f1),Dn,Dt,Dc,bn,xa,Hl,So,Ki,Lc,Ql,Kl,Ia,Aa,To,Gl,$t,rc,og,ag,lg,ug,cg,hg,fg,U1,d1,YR=(d1=class extends ou{constructor(e,t){super();nt(this,$t);nt(this,Dn);nt(this,Dt);nt(this,Dc);nt(this,bn);nt(this,xa);nt(this,Hl);nt(this,So);nt(this,Ki);nt(this,Lc);nt(this,Ql);nt(this,Kl);nt(this,Ia);nt(this,Aa);nt(this,To);nt(this,Gl,new Set);this.options=t,Ue(this,Dn,e),Ue(this,Ki,null),Ue(this,So,sg()),this.options.experimental_prefetchInRender||D(this,So).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,Dt).addObserver(this),Qw(D(this,Dt),this.options)?qe(this,$t,rc).call(this):this.updateResult(),qe(this,$t,ug).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return dg(D(this,Dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return dg(D(this,Dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,qe(this,$t,cg).call(this),qe(this,$t,hg).call(this),D(this,Dt).removeObserver(this)}setOptions(e){const t=this.options,n=D(this,Dt);if(this.options=D(this,Dn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ai(this.options.enabled,D(this,Dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");qe(this,$t,fg).call(this),D(this,Dt).setOptions(this.options),t._defaulted&&!jf(this.options,t)&&D(this,Dn).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,Dt),observer:this});const s=this.hasListeners();s&&Kw(D(this,Dt),n,this.options,t)&&qe(this,$t,rc).call(this),this.updateResult(),s&&(D(this,Dt)!==n||Ai(this.options.enabled,D(this,Dt))!==Ai(t.enabled,D(this,Dt))||Dl(this.options.staleTime,D(this,Dt))!==Dl(t.staleTime,D(this,Dt)))&&qe(this,$t,og).call(this);const o=qe(this,$t,ag).call(this);s&&(D(this,Dt)!==n||Ai(this.options.enabled,D(this,Dt))!==Ai(t.enabled,D(this,Dt))||o!==D(this,To))&&qe(this,$t,lg).call(this,o)}getOptimisticResult(e){const t=D(this,Dn).getQueryCache().build(D(this,Dn),e),n=this.createResult(t,e);return XR(this,n)&&(Ue(this,bn,n),Ue(this,Hl,this.options),Ue(this,xa,D(this,Dt).state)),n}getCurrentResult(){return D(this,bn)}trackResult(e,t){const n={};return Object.keys(e).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),n}trackProp(e){D(this,Gl).add(e)}getCurrentQuery(){return D(this,Dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=D(this,Dn).defaultQueryOptions(e),n=D(this,Dn).getQueryCache().build(D(this,Dn),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return qe(this,$t,rc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,bn)))}createResult(e,t){var R;const n=D(this,Dt),s=this.options,o=D(this,bn),l=D(this,xa),u=D(this,Hl),h=e!==n?e.state:D(this,Dc),{state:d}=e;let m={...d},y=!1,_;if(t._optimisticResults){const M=this.hasListeners(),F=!M&&Qw(e,t),$=M&&Kw(e,n,t,s);(F||$)&&(m={...m,...F1(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:E,errorUpdatedAt:S,status:T}=m;if(t.select&&m.data!==void 0)if(o&&m.data===(l==null?void 0:l.data)&&t.select===D(this,Lc))_=D(this,Ql);else try{Ue(this,Lc,t.select),_=t.select(m.data),_=ig(o==null?void 0:o.data,_,t),Ue(this,Ql,_),Ue(this,Ki,null)}catch(M){Ue(this,Ki,M)}else _=m.data;if(t.placeholderData!==void 0&&_===void 0&&T==="pending"){let M;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData))M=o.data;else if(M=typeof t.placeholderData=="function"?t.placeholderData((R=D(this,Kl))==null?void 0:R.state.data,D(this,Kl)):t.placeholderData,t.select&&M!==void 0)try{M=t.select(M),Ue(this,Ki,null)}catch(F){Ue(this,Ki,F)}M!==void 0&&(T="success",_=ig(o==null?void 0:o.data,M,t),y=!0)}D(this,Ki)&&(E=D(this,Ki),_=D(this,Ql),S=Date.now(),T="error");const V=m.fetchStatus==="fetching",I=T==="pending",k=T==="error",W=I&&V,H=_!==void 0,P={status:T,fetchStatus:m.fetchStatus,isPending:I,isSuccess:T==="success",isError:k,isInitialLoading:W,isLoading:W,data:_,dataUpdatedAt:m.dataUpdatedAt,error:E,errorUpdatedAt:S,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:V,isRefetching:V&&!I,isLoadingError:k&&!H,isPaused:m.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:k&&H,isStale:wv(e,t),refetch:this.refetch,promise:D(this,So)};if(this.options.experimental_prefetchInRender){const M=N=>{P.status==="error"?N.reject(P.error):P.data!==void 0&&N.resolve(P.data)},F=()=>{const N=Ue(this,So,P.promise=sg());M(N)},$=D(this,So);switch($.status){case"pending":e.queryHash===n.queryHash&&M($);break;case"fulfilled":(P.status==="error"||P.data!==$.value)&&F();break;case"rejected":(P.status!=="error"||P.error!==$.reason)&&F();break}}return P}updateResult(){const e=D(this,bn),t=this.createResult(D(this,Dt),this.options);if(Ue(this,xa,D(this,Dt).state),Ue(this,Hl,this.options),D(this,xa).data!==void 0&&Ue(this,Kl,D(this,Dt)),jf(t,e))return;Ue(this,bn,t);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!D(this,Gl).size)return!0;const l=new Set(o??D(this,Gl));return this.options.throwOnError&&l.add("error"),Object.keys(D(this,bn)).some(u=>{const c=u;return D(this,bn)[c]!==e[c]&&l.has(c)})};qe(this,$t,U1).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&qe(this,$t,ug).call(this)}},Dn=new WeakMap,Dt=new WeakMap,Dc=new WeakMap,bn=new WeakMap,xa=new WeakMap,Hl=new WeakMap,So=new WeakMap,Ki=new WeakMap,Lc=new WeakMap,Ql=new WeakMap,Kl=new WeakMap,Ia=new WeakMap,Aa=new WeakMap,To=new WeakMap,Gl=new WeakMap,$t=new WeakSet,rc=function(e){qe(this,$t,fg).call(this);let t=D(this,Dt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(li)),t},og=function(){qe(this,$t,cg).call(this);const e=Dl(this.options.staleTime,D(this,Dt));if(La||D(this,bn).isStale||!rg(e))return;const n=k1(D(this,bn).dataUpdatedAt,e)+1;Ue(this,Ia,setTimeout(()=>{D(this,bn).isStale||this.updateResult()},n))},ag=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,Dt)):this.options.refetchInterval)??!1},lg=function(e){qe(this,$t,hg).call(this),Ue(this,To,e),!(La||Ai(this.options.enabled,D(this,Dt))===!1||!rg(D(this,To))||D(this,To)===0)&&Ue(this,Aa,setInterval(()=>{(this.options.refetchIntervalInBackground||_v.isFocused())&&qe(this,$t,rc).call(this)},D(this,To)))},ug=function(){qe(this,$t,og).call(this),qe(this,$t,lg).call(this,qe(this,$t,ag).call(this))},cg=function(){D(this,Ia)&&(clearTimeout(D(this,Ia)),Ue(this,Ia,void 0))},hg=function(){D(this,Aa)&&(clearInterval(D(this,Aa)),Ue(this,Aa,void 0))},fg=function(){const e=D(this,Dn).getQueryCache().build(D(this,Dn),this.options);if(e===D(this,Dt))return;const t=D(this,Dt);Ue(this,Dt,e),Ue(this,Dc,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},U1=function(e){Lr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(D(this,bn))}),D(this,Dn).getQueryCache().notify({query:D(this,Dt),type:"observerResultsUpdated"})})},d1);function JR(r,e){return Ai(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Qw(r,e){return JR(r,e)||r.state.data!==void 0&&dg(r,e,e.refetchOnMount)}function dg(r,e,t){if(Ai(e.enabled,r)!==!1){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&wv(r,e)}return!1}function Kw(r,e,t,n){return(r!==e||Ai(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&wv(r,t)}function wv(r,e){return Ai(e.enabled,r)!==!1&&r.isStaleByTime(Dl(e.staleTime,r))}function XR(r,e){return!jf(r.getCurrentResult(),e)}var xo,Io,Ln,As,Rs,wf,pg,p1,ZR=(p1=class extends ou{constructor(t,n){super();nt(this,Rs);nt(this,xo);nt(this,Io);nt(this,Ln);nt(this,As);Ue(this,xo,t),this.setOptions(n),this.bindMethods(),qe(this,Rs,wf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const n=this.options;this.options=D(this,xo).defaultMutationOptions(t),jf(this.options,n)||D(this,xo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:D(this,Ln),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Ma(n.mutationKey)!==Ma(this.options.mutationKey)?this.reset():((s=D(this,Ln))==null?void 0:s.state.status)==="pending"&&D(this,Ln).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=D(this,Ln))==null||t.removeObserver(this)}onMutationUpdate(t){qe(this,Rs,wf).call(this),qe(this,Rs,pg).call(this,t)}getCurrentResult(){return D(this,Io)}reset(){var t;(t=D(this,Ln))==null||t.removeObserver(this),Ue(this,Ln,void 0),qe(this,Rs,wf).call(this),qe(this,Rs,pg).call(this)}mutate(t,n){var s;return Ue(this,As,n),(s=D(this,Ln))==null||s.removeObserver(this),Ue(this,Ln,D(this,xo).getMutationCache().build(D(this,xo),this.options)),D(this,Ln).addObserver(this),D(this,Ln).execute(t)}},xo=new WeakMap,Io=new WeakMap,Ln=new WeakMap,As=new WeakMap,Rs=new WeakSet,wf=function(){var n;const t=((n=D(this,Ln))==null?void 0:n.state)??V1();Ue(this,Io,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},pg=function(t){Lr.batch(()=>{var n,s,o,l,u,c,h,d;if(D(this,As)&&this.hasListeners()){const m=D(this,Io).variables,y=D(this,Io).context;(t==null?void 0:t.type)==="success"?((s=(n=D(this,As)).onSuccess)==null||s.call(n,t.data,m,y),(l=(o=D(this,As)).onSettled)==null||l.call(o,t.data,null,m,y)):(t==null?void 0:t.type)==="error"&&((c=(u=D(this,As)).onError)==null||c.call(u,t.error,m,y),(d=(h=D(this,As)).onSettled)==null||d.call(h,void 0,t.error,m,y))}this.listeners.forEach(m=>{m(D(this,Io))})})},p1),B1=Pe.createContext(void 0),bv=r=>{const e=Pe.useContext(B1);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ek=({client:r,children:e})=>(Pe.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),B(B1.Provider,{value:r,children:e})),j1=Pe.createContext(!1),tk=()=>Pe.useContext(j1);j1.Provider;function rk(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var nk=Pe.createContext(rk()),ik=()=>Pe.useContext(nk);function $1(r,e){return typeof r=="function"?r(...e):!!r}function mg(){}var sk=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},ok=r=>{Pe.useEffect(()=>{r.clearReset()},[r])},ak=({result:r,errorResetBoundary:e,throwOnError:t,query:n,suspense:s})=>r.isError&&!e.isReset()&&!r.isFetching&&n&&(s&&r.data===void 0||$1(t,[r.error,n])),lk=r=>{const e=r.staleTime;r.suspense&&(r.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3)))},uk=(r,e)=>r.isLoading&&r.isFetching&&!e,ck=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,Gw=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function hk(r,e,t){var m,y,_,E,S;const n=bv(),s=tk(),o=ik(),l=n.defaultQueryOptions(r);(y=(m=n.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||y.call(m,l),l._optimisticResults=s?"isRestoring":"optimistic",lk(l),sk(l,o),ok(o);const u=!n.getQueryCache().get(l.queryHash),[c]=Pe.useState(()=>new e(n,l)),h=c.getOptimisticResult(l),d=!s&&r.subscribed!==!1;if(Pe.useSyncExternalStore(Pe.useCallback(T=>{const V=d?c.subscribe(Lr.batchCalls(T)):mg;return c.updateResult(),V},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),Pe.useEffect(()=>{c.setOptions(l)},[l,c]),ck(l,h))throw Gw(l,c,o);if(ak({result:h,errorResetBoundary:o,throwOnError:l.throwOnError,query:n.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((E=(_=n.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||E.call(_,l,h),l.experimental_prefetchInRender&&!La&&uk(h,s)){const T=u?Gw(l,c,o):(S=n.getQueryCache().get(l.queryHash))==null?void 0:S.promise;T==null||T.catch(mg).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?h:c.trackResult(h)}function Bc(r,e){return hk(r,YR)}function zf(r,e){const t=bv(),[n]=Pe.useState(()=>new ZR(t,r));Pe.useEffect(()=>{n.setOptions(r)},[n,r]);const s=Pe.useSyncExternalStore(Pe.useCallback(l=>n.subscribe(Lr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=Pe.useCallback((l,u)=>{n.mutate(l,u).catch(mg)},[n]);if(s.error&&$1(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}function z1(r,e){return function(){return r.apply(e,arguments)}}const{toString:fk}=Object.prototype,{getPrototypeOf:Ev}=Object,vd=(r=>e=>{const t=fk.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ki=r=>(r=r.toLowerCase(),e=>vd(e)===r),_d=r=>e=>typeof e===r,{isArray:au}=Array,Ec=_d("undefined");function dk(r){return r!==null&&!Ec(r)&&r.constructor!==null&&!Ec(r.constructor)&&Gn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const q1=ki("ArrayBuffer");function pk(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&q1(r.buffer),e}const mk=_d("string"),Gn=_d("function"),W1=_d("number"),wd=r=>r!==null&&typeof r=="object",gk=r=>r===!0||r===!1,bf=r=>{if(vd(r)!=="object")return!1;const e=Ev(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},yk=ki("Date"),vk=ki("File"),_k=ki("Blob"),wk=ki("FileList"),bk=r=>wd(r)&&Gn(r.pipe),Ek=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Gn(r.append)&&((e=vd(r))==="formdata"||e==="object"&&Gn(r.toString)&&r.toString()==="[object FormData]"))},Sk=ki("URLSearchParams"),[Tk,xk,Ik,Ak]=["ReadableStream","Request","Response","Headers"].map(ki),Ck=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jc(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),au(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{const o=t?Object.getOwnPropertyNames(r):Object.keys(r),l=o.length;let u;for(n=0;n<l;n++)u=o[n],e.call(null,r[u],u,r)}}function H1(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const ma=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Q1=r=>!Ec(r)&&r!==ma;function gg(){const{caseless:r}=Q1(this)&&this||{},e={},t=(n,s)=>{const o=r&&H1(e,s)||s;bf(e[o])&&bf(n)?e[o]=gg(e[o],n):bf(n)?e[o]=gg({},n):au(n)?e[o]=n.slice():e[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&jc(arguments[n],t);return e}const Rk=(r,e,t,{allOwnKeys:n}={})=>(jc(e,(s,o)=>{t&&Gn(s)?r[o]=z1(s,t):r[o]=s},{allOwnKeys:n}),r),kk=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Pk=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Nk=(r,e,t,n)=>{let s,o,l;const u={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),o=s.length;o-- >0;)l=s[o],(!n||n(l,r,e))&&!u[l]&&(e[l]=r[l],u[l]=!0);r=t!==!1&&Ev(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Ok=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},Dk=r=>{if(!r)return null;if(au(r))return r;let e=r.length;if(!W1(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},Lk=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Ev(Uint8Array)),Mk=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(r,o[0],o[1])}},Fk=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},Vk=ki("HTMLFormElement"),Uk=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),Yw=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),Bk=ki("RegExp"),K1=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};jc(t,(s,o)=>{let l;(l=e(s,o,r))!==!1&&(n[o]=l||s)}),Object.defineProperties(r,n)},jk=r=>{K1(r,(e,t)=>{if(Gn(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(Gn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},$k=(r,e)=>{const t={},n=s=>{s.forEach(o=>{t[o]=!0})};return au(r)?n(r):n(String(r).split(e)),t},zk=()=>{},qk=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function Wk(r){return!!(r&&Gn(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const Hk=r=>{const e=new Array(10),t=(n,s)=>{if(wd(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const o=au(n)?[]:{};return jc(n,(l,u)=>{const c=t(l,s+1);!Ec(c)&&(o[u]=c)}),e[s]=void 0,o}}return n};return t(r,0)},Qk=ki("AsyncFunction"),Kk=r=>r&&(wd(r)||Gn(r))&&Gn(r.then)&&Gn(r.catch),G1=((r,e)=>r?setImmediate:e?((t,n)=>(ma.addEventListener("message",({source:s,data:o})=>{s===ma&&o===t&&n.length&&n.shift()()},!1),s=>{n.push(s),ma.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Gn(ma.postMessage)),Gk=typeof queueMicrotask<"u"?queueMicrotask.bind(ma):typeof process<"u"&&process.nextTick||G1,Fe={isArray:au,isArrayBuffer:q1,isBuffer:dk,isFormData:Ek,isArrayBufferView:pk,isString:mk,isNumber:W1,isBoolean:gk,isObject:wd,isPlainObject:bf,isReadableStream:Tk,isRequest:xk,isResponse:Ik,isHeaders:Ak,isUndefined:Ec,isDate:yk,isFile:vk,isBlob:_k,isRegExp:Bk,isFunction:Gn,isStream:bk,isURLSearchParams:Sk,isTypedArray:Lk,isFileList:wk,forEach:jc,merge:gg,extend:Rk,trim:Ck,stripBOM:kk,inherits:Pk,toFlatObject:Nk,kindOf:vd,kindOfTest:ki,endsWith:Ok,toArray:Dk,forEachEntry:Mk,matchAll:Fk,isHTMLForm:Vk,hasOwnProperty:Yw,hasOwnProp:Yw,reduceDescriptors:K1,freezeMethods:jk,toObjectSet:$k,toCamelCase:Uk,noop:zk,toFiniteNumber:qk,findKey:H1,global:ma,isContextDefined:Q1,isSpecCompliantForm:Wk,toJSONObject:Hk,isAsyncFn:Qk,isThenable:Kk,setImmediate:G1,asap:Gk};function It(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Fe.inherits(It,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.status}}});const Y1=It.prototype,J1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{J1[r]={value:r}});Object.defineProperties(It,J1);Object.defineProperty(Y1,"isAxiosError",{value:!0});It.from=(r,e,t,n,s,o)=>{const l=Object.create(Y1);return Fe.toFlatObject(r,l,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),It.call(l,r.message,e,t,n,s),l.cause=r,l.name=r.name,o&&Object.assign(l,o),l};const Yk=null;function yg(r){return Fe.isPlainObject(r)||Fe.isArray(r)}function X1(r){return Fe.endsWith(r,"[]")?r.slice(0,-2):r}function Jw(r,e,t){return r?r.concat(e).map(function(s,o){return s=X1(s),!t&&o?"["+s+"]":s}).join(t?".":""):e}function Jk(r){return Fe.isArray(r)&&!r.some(yg)}const Xk=Fe.toFlatObject(Fe,{},null,function(e){return/^is[A-Z]/.test(e)});function bd(r,e,t){if(!Fe.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=Fe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!Fe.isUndefined(T[S])});const n=t.metaTokens,s=t.visitor||d,o=t.dots,l=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(e);if(!Fe.isFunction(s))throw new TypeError("visitor must be a function");function h(E){if(E===null)return"";if(Fe.isDate(E))return E.toISOString();if(!c&&Fe.isBlob(E))throw new It("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(E)||Fe.isTypedArray(E)?c&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function d(E,S,T){let V=E;if(E&&!T&&typeof E=="object"){if(Fe.endsWith(S,"{}"))S=n?S:S.slice(0,-2),E=JSON.stringify(E);else if(Fe.isArray(E)&&Jk(E)||(Fe.isFileList(E)||Fe.endsWith(S,"[]"))&&(V=Fe.toArray(E)))return S=X1(S),V.forEach(function(k,W){!(Fe.isUndefined(k)||k===null)&&e.append(l===!0?Jw([S],W,o):l===null?S:S+"[]",h(k))}),!1}return yg(E)?!0:(e.append(Jw(T,S,o),h(E)),!1)}const m=[],y=Object.assign(Xk,{defaultVisitor:d,convertValue:h,isVisitable:yg});function _(E,S){if(!Fe.isUndefined(E)){if(m.indexOf(E)!==-1)throw Error("Circular reference detected in "+S.join("."));m.push(E),Fe.forEach(E,function(V,I){(!(Fe.isUndefined(V)||V===null)&&s.call(e,V,Fe.isString(I)?I.trim():I,S,y))===!0&&_(V,S?S.concat(I):[I])}),m.pop()}}if(!Fe.isObject(r))throw new TypeError("data must be an object");return _(r),e}function Xw(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Sv(r,e){this._pairs=[],r&&bd(r,this,e)}const Z1=Sv.prototype;Z1.append=function(e,t){this._pairs.push([e,t])};Z1.toString=function(e){const t=e?function(n){return e.call(this,n,Xw)}:Xw;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function Zk(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eS(r,e,t){if(!e)return r;const n=t&&t.encode||Zk;Fe.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let o;if(s?o=s(e,t):o=Fe.isURLSearchParams(e)?e.toString():new Sv(e,t).toString(n),o){const l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class Zw{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fe.forEach(this.handlers,function(n){n!==null&&e(n)})}}const tS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eP=typeof URLSearchParams<"u"?URLSearchParams:Sv,tP=typeof FormData<"u"?FormData:null,rP=typeof Blob<"u"?Blob:null,nP={isBrowser:!0,classes:{URLSearchParams:eP,FormData:tP,Blob:rP},protocols:["http","https","file","blob","url","data"]},Tv=typeof window<"u"&&typeof document<"u",vg=typeof navigator=="object"&&navigator||void 0,iP=Tv&&(!vg||["ReactNative","NativeScript","NS"].indexOf(vg.product)<0),sP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oP=Tv&&window.location.href||"http://localhost",aP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tv,hasStandardBrowserEnv:iP,hasStandardBrowserWebWorkerEnv:sP,navigator:vg,origin:oP},Symbol.toStringTag,{value:"Module"})),dn={...aP,...nP};function lP(r,e){return bd(r,new dn.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,o){return dn.isNode&&Fe.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function uP(r){return Fe.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function cP(r){const e={},t=Object.keys(r);let n;const s=t.length;let o;for(n=0;n<s;n++)o=t[n],e[o]=r[o];return e}function rS(r){function e(t,n,s,o){let l=t[o++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),c=o>=t.length;return l=!l&&Fe.isArray(s)?s.length:l,c?(Fe.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!u):((!s[l]||!Fe.isObject(s[l]))&&(s[l]=[]),e(t,n,s[l],o)&&Fe.isArray(s[l])&&(s[l]=cP(s[l])),!u)}if(Fe.isFormData(r)&&Fe.isFunction(r.entries)){const t={};return Fe.forEachEntry(r,(n,s)=>{e(uP(n),s,t,0)}),t}return null}function hP(r,e,t){if(Fe.isString(r))try{return(e||JSON.parse)(r),Fe.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const $c={transitional:tS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,o=Fe.isObject(e);if(o&&Fe.isHTMLForm(e)&&(e=new FormData(e)),Fe.isFormData(e))return s?JSON.stringify(rS(e)):e;if(Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e)||Fe.isReadableStream(e))return e;if(Fe.isArrayBufferView(e))return e.buffer;if(Fe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return lP(e,this.formSerializer).toString();if((u=Fe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return bd(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),hP(e)):e}],transformResponse:[function(e){const t=this.transitional||$c.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(Fe.isResponse(e)||Fe.isReadableStream(e))return e;if(e&&Fe.isString(e)&&(n&&!this.responseType||s)){const l=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?It.from(u,It.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dn.classes.FormData,Blob:dn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],r=>{$c.headers[r]={}});const fP=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dP=r=>{const e={};let t,n,s;return r&&r.split(`
`).forEach(function(l){s=l.indexOf(":"),t=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!t||e[t]&&fP[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},eb=Symbol("internals");function Xu(r){return r&&String(r).trim().toLowerCase()}function Ef(r){return r===!1||r==null?r:Fe.isArray(r)?r.map(Ef):String(r)}function pP(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const mP=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Sm(r,e,t,n,s){if(Fe.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!Fe.isString(e)){if(Fe.isString(n))return e.indexOf(n)!==-1;if(Fe.isRegExp(n))return n.test(e)}}function gP(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function yP(r,e){const t=Fe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,o,l){return this[n].call(this,e,s,o,l)},configurable:!0})})}let Vn=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function o(u,c,h){const d=Xu(c);if(!d)throw new Error("header name must be a non-empty string");const m=Fe.findKey(s,d);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||c]=Ef(u))}const l=(u,c)=>Fe.forEach(u,(h,d)=>o(h,d,c));if(Fe.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(Fe.isString(e)&&(e=e.trim())&&!mP(e))l(dP(e),t);else if(Fe.isHeaders(e))for(const[u,c]of e.entries())o(c,u,n);else e!=null&&o(t,e,n);return this}get(e,t){if(e=Xu(e),e){const n=Fe.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return pP(s);if(Fe.isFunction(t))return t.call(this,s,n);if(Fe.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xu(e),e){const n=Fe.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Sm(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function o(l){if(l=Xu(l),l){const u=Fe.findKey(n,l);u&&(!t||Sm(n,n[u],u,t))&&(delete n[u],s=!0)}}return Fe.isArray(e)?e.forEach(o):o(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const o=t[n];(!e||Sm(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const t=this,n={};return Fe.forEach(this,(s,o)=>{const l=Fe.findKey(n,o);if(l){t[l]=Ef(s),delete t[o];return}const u=e?gP(o):String(o).trim();u!==o&&delete t[o],t[u]=Ef(s),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Fe.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&Fe.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[eb]=this[eb]={accessors:{}}).accessors,s=this.prototype;function o(l){const u=Xu(l);n[u]||(yP(s,l),n[u]=!0)}return Fe.isArray(e)?e.forEach(o):o(e),this}};Vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors(Vn.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});Fe.freezeMethods(Vn);function Tm(r,e){const t=this||$c,n=e||t,s=Vn.from(n.headers);let o=n.data;return Fe.forEach(r,function(u){o=u.call(t,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function nS(r){return!!(r&&r.__CANCEL__)}function lu(r,e,t){It.call(this,r??"canceled",It.ERR_CANCELED,e,t),this.name="CanceledError"}Fe.inherits(lu,It,{__CANCEL__:!0});function iS(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new It("Request failed with status code "+t.status,[It.ERR_BAD_REQUEST,It.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function vP(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function _P(r,e){r=r||10;const t=new Array(r),n=new Array(r);let s=0,o=0,l;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),d=n[o];l||(l=h),t[s]=c,n[s]=h;let m=o,y=0;for(;m!==s;)y+=t[m++],m=m%r;if(s=(s+1)%r,s===o&&(o=(o+1)%r),h-l<e)return;const _=d&&h-d;return _?Math.round(y*1e3/_):void 0}}function wP(r,e){let t=0,n=1e3/e,s,o;const l=(h,d=Date.now())=>{t=d,s=null,o&&(clearTimeout(o),o=null),r.apply(null,h)};return[(...h)=>{const d=Date.now(),m=d-t;m>=n?l(h,d):(s=h,o||(o=setTimeout(()=>{o=null,l(s)},n-m)))},()=>s&&l(s)]}const qf=(r,e,t=3)=>{let n=0;const s=_P(50,250);return wP(o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,c=l-n,h=s(c),d=l<=u;n=l;const m={loaded:l,total:u,progress:u?l/u:void 0,bytes:c,rate:h||void 0,estimated:h&&u&&d?(u-l)/h:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};r(m)},t)},tb=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},rb=r=>(...e)=>Fe.asap(()=>r(...e)),bP=dn.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,dn.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(dn.origin),dn.navigator&&/(msie|trident)/i.test(dn.navigator.userAgent)):()=>!0,EP=dn.hasStandardBrowserEnv?{write(r,e,t,n,s,o){const l=[r+"="+encodeURIComponent(e)];Fe.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),Fe.isString(n)&&l.push("path="+n),Fe.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function SP(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function TP(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function sS(r,e,t){let n=!SP(e);return r&&n||t==!1?TP(r,e):e}const nb=r=>r instanceof Vn?{...r}:r;function Fa(r,e){e=e||{};const t={};function n(h,d,m,y){return Fe.isPlainObject(h)&&Fe.isPlainObject(d)?Fe.merge.call({caseless:y},h,d):Fe.isPlainObject(d)?Fe.merge({},d):Fe.isArray(d)?d.slice():d}function s(h,d,m,y){if(Fe.isUndefined(d)){if(!Fe.isUndefined(h))return n(void 0,h,m,y)}else return n(h,d,m,y)}function o(h,d){if(!Fe.isUndefined(d))return n(void 0,d)}function l(h,d){if(Fe.isUndefined(d)){if(!Fe.isUndefined(h))return n(void 0,h)}else return n(void 0,d)}function u(h,d,m){if(m in e)return n(h,d);if(m in r)return n(void 0,h)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(h,d,m)=>s(nb(h),nb(d),m,!0)};return Fe.forEach(Object.keys(Object.assign({},r,e)),function(d){const m=c[d]||s,y=m(r[d],e[d],d);Fe.isUndefined(y)&&m!==u||(t[d]=y)}),t}const oS=r=>{const e=Fa({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:u}=e;e.headers=l=Vn.from(l),e.url=eS(sS(e.baseURL,e.url),r.params,r.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(Fe.isFormData(t)){if(dn.hasStandardBrowserEnv||dn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[h,...d]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...d].join("; "))}}if(dn.hasStandardBrowserEnv&&(n&&Fe.isFunction(n)&&(n=n(e)),n||n!==!1&&bP(e.url))){const h=s&&o&&EP.read(o);h&&l.set(s,h)}return e},xP=typeof XMLHttpRequest<"u",IP=xP&&function(r){return new Promise(function(t,n){const s=oS(r);let o=s.data;const l=Vn.from(s.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:h}=s,d,m,y,_,E;function S(){_&&_(),E&&E(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let T=new XMLHttpRequest;T.open(s.method.toUpperCase(),s.url,!0),T.timeout=s.timeout;function V(){if(!T)return;const k=Vn.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),H={data:!u||u==="text"||u==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:k,config:r,request:T};iS(function(P){t(P),S()},function(P){n(P),S()},H),T=null}"onloadend"in T?T.onloadend=V:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(V)},T.onabort=function(){T&&(n(new It("Request aborted",It.ECONNABORTED,r,T)),T=null)},T.onerror=function(){n(new It("Network Error",It.ERR_NETWORK,r,T)),T=null},T.ontimeout=function(){let W=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const H=s.transitional||tS;s.timeoutErrorMessage&&(W=s.timeoutErrorMessage),n(new It(W,H.clarifyTimeoutError?It.ETIMEDOUT:It.ECONNABORTED,r,T)),T=null},o===void 0&&l.setContentType(null),"setRequestHeader"in T&&Fe.forEach(l.toJSON(),function(W,H){T.setRequestHeader(H,W)}),Fe.isUndefined(s.withCredentials)||(T.withCredentials=!!s.withCredentials),u&&u!=="json"&&(T.responseType=s.responseType),h&&([y,E]=qf(h,!0),T.addEventListener("progress",y)),c&&T.upload&&([m,_]=qf(c),T.upload.addEventListener("progress",m),T.upload.addEventListener("loadend",_)),(s.cancelToken||s.signal)&&(d=k=>{T&&(n(!k||k.type?new lu(null,r,T):k),T.abort(),T=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const I=vP(s.url);if(I&&dn.protocols.indexOf(I)===-1){n(new It("Unsupported protocol "+I+":",It.ERR_BAD_REQUEST,r));return}T.send(o||null)})},AP=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,s;const o=function(h){if(!s){s=!0,u();const d=h instanceof Error?h:this.reason;n.abort(d instanceof It?d:new lu(d instanceof Error?d.message:d))}};let l=e&&setTimeout(()=>{l=null,o(new It(`timeout ${e} of ms exceeded`,It.ETIMEDOUT))},e);const u=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),r=null)};r.forEach(h=>h.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>Fe.asap(u),c}},CP=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,s;for(;n<t;)s=n+e,yield r.slice(n,s),n=s},RP=async function*(r,e){for await(const t of kP(r))yield*CP(t,e)},kP=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},ib=(r,e,t,n)=>{const s=RP(r,e);let o=0,l,u=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:h,value:d}=await s.next();if(h){u(),c.close();return}let m=d.byteLength;if(t){let y=o+=m;t(y)}c.enqueue(new Uint8Array(d))}catch(h){throw u(h),h}},cancel(c){return u(c),s.return()}},{highWaterMark:2})},Ed=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",aS=Ed&&typeof ReadableStream=="function",PP=Ed&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),lS=(r,...e)=>{try{return!!r(...e)}catch{return!1}},NP=aS&&lS(()=>{let r=!1;const e=new Request(dn.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),sb=64*1024,_g=aS&&lS(()=>Fe.isReadableStream(new Response("").body)),Wf={stream:_g&&(r=>r.body)};Ed&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Wf[e]&&(Wf[e]=Fe.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new It(`Response type '${e}' is not supported`,It.ERR_NOT_SUPPORT,n)})})})(new Response);const OP=async r=>{if(r==null)return 0;if(Fe.isBlob(r))return r.size;if(Fe.isSpecCompliantForm(r))return(await new Request(dn.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(Fe.isArrayBufferView(r)||Fe.isArrayBuffer(r))return r.byteLength;if(Fe.isURLSearchParams(r)&&(r=r+""),Fe.isString(r))return(await PP(r)).byteLength},DP=async(r,e)=>{const t=Fe.toFiniteNumber(r.getContentLength());return t??OP(e)},LP=Ed&&(async r=>{let{url:e,method:t,data:n,signal:s,cancelToken:o,timeout:l,onDownloadProgress:u,onUploadProgress:c,responseType:h,headers:d,withCredentials:m="same-origin",fetchOptions:y}=oS(r);h=h?(h+"").toLowerCase():"text";let _=AP([s,o&&o.toAbortSignal()],l),E;const S=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let T;try{if(c&&NP&&t!=="get"&&t!=="head"&&(T=await DP(d,n))!==0){let H=new Request(e,{method:"POST",body:n,duplex:"half"}),j;if(Fe.isFormData(n)&&(j=H.headers.get("content-type"))&&d.setContentType(j),H.body){const[P,R]=tb(T,qf(rb(c)));n=ib(H.body,sb,P,R)}}Fe.isString(m)||(m=m?"include":"omit");const V="credentials"in Request.prototype;E=new Request(e,{...y,signal:_,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:V?m:void 0});let I=await fetch(E);const k=_g&&(h==="stream"||h==="response");if(_g&&(u||k&&S)){const H={};["status","statusText","headers"].forEach(M=>{H[M]=I[M]});const j=Fe.toFiniteNumber(I.headers.get("content-length")),[P,R]=u&&tb(j,qf(rb(u),!0))||[];I=new Response(ib(I.body,sb,P,()=>{R&&R(),S&&S()}),H)}h=h||"text";let W=await Wf[Fe.findKey(Wf,h)||"text"](I,r);return!k&&S&&S(),await new Promise((H,j)=>{iS(H,j,{data:W,headers:Vn.from(I.headers),status:I.status,statusText:I.statusText,config:r,request:E})})}catch(V){throw S&&S(),V&&V.name==="TypeError"&&/fetch/i.test(V.message)?Object.assign(new It("Network Error",It.ERR_NETWORK,r,E),{cause:V.cause||V}):It.from(V,V&&V.code,r,E)}}),wg={http:Yk,xhr:IP,fetch:LP};Fe.forEach(wg,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const ob=r=>`- ${r}`,MP=r=>Fe.isFunction(r)||r===null||r===!1,uS={getAdapter:r=>{r=Fe.isArray(r)?r:[r];const{length:e}=r;let t,n;const s={};for(let o=0;o<e;o++){t=r[o];let l;if(n=t,!MP(t)&&(n=wg[(l=String(t)).toLowerCase()],n===void 0))throw new It(`Unknown adapter '${l}'`);if(n)break;s[l||"#"+o]=n}if(!n){const o=Object.entries(s).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(ob).join(`
`):" "+ob(o[0]):"as no adapter specified";throw new It("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:wg};function xm(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new lu(null,r)}function ab(r){return xm(r),r.headers=Vn.from(r.headers),r.data=Tm.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),uS.getAdapter(r.adapter||$c.adapter)(r).then(function(n){return xm(r),n.data=Tm.call(r,r.transformResponse,n),n.headers=Vn.from(n.headers),n},function(n){return nS(n)||(xm(r),n&&n.response&&(n.response.data=Tm.call(r,r.transformResponse,n.response),n.response.headers=Vn.from(n.response.headers))),Promise.reject(n)})}const cS="1.8.1",Sd={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Sd[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const lb={};Sd.transitional=function(e,t,n){function s(o,l){return"[Axios v"+cS+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,u)=>{if(e===!1)throw new It(s(l," has been removed"+(t?" in "+t:"")),It.ERR_DEPRECATED);return t&&!lb[l]&&(lb[l]=!0,console.warn(s(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,u):!0}};Sd.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function FP(r,e,t){if(typeof r!="object")throw new It("options must be an object",It.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let s=n.length;for(;s-- >0;){const o=n[s],l=e[o];if(l){const u=r[o],c=u===void 0||l(u,o,r);if(c!==!0)throw new It("option "+o+" must be "+c,It.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new It("Unknown option "+o,It.ERR_BAD_OPTION)}}const Sf={assertOptions:FP,validators:Sd},ji=Sf.validators;let Ra=class{constructor(e){this.defaults=e,this.interceptors={request:new Zw,response:new Zw}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Fa(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:o}=t;n!==void 0&&Sf.assertOptions(n,{silentJSONParsing:ji.transitional(ji.boolean),forcedJSONParsing:ji.transitional(ji.boolean),clarifyTimeoutError:ji.transitional(ji.boolean)},!1),s!=null&&(Fe.isFunction(s)?t.paramsSerializer={serialize:s}:Sf.assertOptions(s,{encode:ji.function,serialize:ji.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Sf.assertOptions(t,{baseUrl:ji.spelling("baseURL"),withXsrfToken:ji.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&Fe.merge(o.common,o[t.method]);o&&Fe.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),t.headers=Vn.concat(l,o);const u=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(c=c&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const h=[];this.interceptors.response.forEach(function(S){h.push(S.fulfilled,S.rejected)});let d,m=0,y;if(!c){const E=[ab.bind(this),void 0];for(E.unshift.apply(E,u),E.push.apply(E,h),y=E.length,d=Promise.resolve(t);m<y;)d=d.then(E[m++],E[m++]);return d}y=u.length;let _=t;for(m=0;m<y;){const E=u[m++],S=u[m++];try{_=E(_)}catch(T){S.call(this,T);break}}try{d=ab.call(this,_)}catch(E){return Promise.reject(E)}for(m=0,y=h.length;m<y;)d=d.then(h[m++],h[m++]);return d}getUri(e){e=Fa(this.defaults,e);const t=sS(e.baseURL,e.url,e.allowAbsoluteUrls);return eS(t,e.params,e.paramsSerializer)}};Fe.forEach(["delete","get","head","options"],function(e){Ra.prototype[e]=function(t,n){return this.request(Fa(n||{},{method:e,url:t,data:(n||{}).data}))}});Fe.forEach(["post","put","patch"],function(e){function t(n){return function(o,l,u){return this.request(Fa(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Ra.prototype[e]=t(),Ra.prototype[e+"Form"]=t(!0)});let VP=class hS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(u=>{n.subscribe(u),o=u}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},e(function(o,l,u){n.reason||(n.reason=new lu(o,l,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new hS(function(s){e=s}),cancel:e}}};function UP(r){return function(t){return r.apply(null,t)}}function BP(r){return Fe.isObject(r)&&r.isAxiosError===!0}const bg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bg).forEach(([r,e])=>{bg[e]=r});function fS(r){const e=new Ra(r),t=z1(Ra.prototype.request,e);return Fe.extend(t,Ra.prototype,e,{allOwnKeys:!0}),Fe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return fS(Fa(r,s))},t}const Bt=fS($c);Bt.Axios=Ra;Bt.CanceledError=lu;Bt.CancelToken=VP;Bt.isCancel=nS;Bt.VERSION=cS;Bt.toFormData=bd;Bt.AxiosError=It;Bt.Cancel=Bt.CanceledError;Bt.all=function(e){return Promise.all(e)};Bt.spread=UP;Bt.isAxiosError=BP;Bt.mergeConfig=Fa;Bt.AxiosHeaders=Vn;Bt.formToJSON=r=>rS(Fe.isHTMLForm(r)?new FormData(r):r);Bt.getAdapter=uS.getAdapter;Bt.HttpStatusCode=bg;Bt.default=Bt;const{Axios:pF,AxiosError:mF,CanceledError:gF,isCancel:yF,CancelToken:vF,VERSION:_F,all:wF,Cancel:bF,isAxiosError:EF,spread:SF,toFormData:TF,AxiosHeaders:xF,HttpStatusCode:IF,formToJSON:AF,getAdapter:CF,mergeConfig:RF}=Bt,jP=async r=>{const e=r.length>0?`https://devapi.uniscore.vn/uri/api/products/search?name=${r}`:"https://devapi.uniscore.vn/uri/api/products",{data:t}=await Bt.get(e);return Array.isArray(t.data)?t.data:[]},$P=()=>{const r=ns(),[e,t]=Pe.useState(""),[n,s]=Pe.useState(!1),{data:o=[],isLoading:l,error:u}=Bc({queryKey:["products",e],queryFn:()=>jP(e)}),c=h=>{const d=JSON.parse(localStorage.getItem("cart")||"[]"),m=d.find(y=>y.id===h.id);if(m)m.quantity+=1;else{const y={id:h.id,name:h.name,price:h.price,image:h.images[0],quantity:1,color:"red",size:null};d.push(y)}localStorage.setItem("cart",JSON.stringify(d)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500}),setTimeout(()=>{window.location.reload()},1500)};return Array.isArray(o)?Se("div",{className:"mx-auto py-12 w-full px-4",children:[B("h2",{className:"text-[36px] font-semibold mb-6 font-[Inter]",children:"Explore Our Products"}),Se("div",{className:"relative w-full max-w-md mb-6",children:[Se("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden shadow-sm",children:[B("span",{className:"px-3",children:B("img",{src:"/R2S-Client/SearchIcon.svg",alt:"Search",className:"w-4 h-4 cursor-pointer"})}),B("input",{type:"text",placeholder:"Search products...",value:e,onChange:h=>{t(h.target.value),s(h.target.value.length>0)},onBlur:()=>setTimeout(()=>s(!1),200),className:"w-full p-2 outline-none"})]}),n&&e.length>0&&o.length>0&&B("ul",{className:"absolute w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-10",children:o.map(h=>B("li",{onClick:()=>{t(h.name),s(!1)},className:"p-3 hover:bg-gray-100 cursor-pointer transition",children:h.name},h.id))})]}),B("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 min-h-[100px]",children:l?B("p",{className:"col-span-4 text-center",children:"Loading..."}):u?B("p",{className:"col-span-4 text-center text-red-500",children:"Error loading products"}):o.length>0?o.slice().sort((h,d)=>h.id-d.id).map(h=>Se("div",{className:"group rounded-lg bg-white transition duration-300 sm:w-full md:max-w-[270px] lg:max-w-[270px] xl:max-w-[270px] 2xl:max-w-[270px]",onClick:()=>r(`/detail/${h.id}`),children:[Se("div",{className:"w-full h-[250px] bg-[#F5F5F5] flex flex-col items-center overflow-hidden rounded-md relative",children:[B("div",{className:"flex-grow flex items-center justify-center",children:B("img",{src:h.images[0],alt:h.name,className:"max-h-[180px] object-contain"})}),Se("div",{className:"absolute top-2 right-2 flex flex-col gap-2 items-center",children:[B("img",{src:"/R2S-Client/Heart.svg",alt:"Heart",className:"w-[34px] h-[34px] cursor-pointer"}),B("img",{src:"/R2S-Client/Eye.svg",alt:"Eye",className:"w-[34px] h-[34px] cursor-pointer"})]}),B("button",{onClick:d=>{d.stopPropagation(),c(h)},className:"absolute bottom-0 left-0 w-full bg-black text-white py-3 text-center opacity-0 translate-y-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0",children:"Add To Cart"})]}),B("h3",{className:"text-[16px] font-medium mt-3",children:h.name}),Se("div",{className:"flex items-center gap-3",children:[Se("a",{className:"text-red-500 text-[16px] font-medium",children:["$",h.price]}),Se("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((d,m)=>m<(h.rate||4)?B("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},m):B("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},m)),Se("span",{className:"text-gray-500 text-[14px] font-medium",children:["(",h.stock||50,")"]})]})]})]},h.id)):B("div",{className:"col-span-4 flex items-center justify-center",children:"No products found"})}),Se("div",{className:"flex flex-row justify-center items-center gap-6 sm:gap-4 md:gap-20 lg:gap-20 xl:gap-20 2xl:gap-20 mt-20",children:[Se("div",{className:"flex flex-col items-center text-center",children:[B("div",{className:"w-[80px] h-[80px] flex items-center justify-center bg-gray-300 rounded-full",children:B("div",{className:"w-[58px] h-[58px] flex items-center justify-center bg-black rounded-full",children:B("img",{src:"/R2S-Client/icon-delivery.svg",alt:"Delivery",className:"w-[40px] h-[40px]"})})}),B("h3",{className:"text-[16px] sm:text-[20px] font-semibold mt-4",children:"FREE AND FAST DELIVERY"}),B("p",{className:"text-gray-600 text-[12px] sm:text-[14px]",children:"Free delivery for all orders over $140"})]}),Se("div",{className:"flex flex-col items-center text-center",children:[B("div",{className:"w-[80px] h-[80px] flex items-center justify-center bg-gray-300 rounded-full",children:B("div",{className:"w-[58px] h-[58px] flex items-center justify-center bg-black rounded-full",children:B("img",{src:"/R2S-Client/CustomerService.svg",alt:"CService",className:"w-[40px] h-[40px]"})})}),B("h3",{className:"text-[16px] sm:text-[20px] font-semibold mt-4",children:"24/7 CUSTOMER SERVICE"}),B("p",{className:"text-gray-600 text-[12px] sm:text-[14px]",children:"Friendly 24/7 customer support"})]}),Se("div",{className:"flex flex-col items-center text-center",children:[B("div",{className:"w-[80px] h-[80px] flex items-center justify-center bg-gray-300 rounded-full",children:B("div",{className:"w-[58px] h-[58px] flex items-center justify-center bg-black rounded-full",children:B("img",{src:"/R2S-Client/Icon-secure.svg",alt:"Icon-secure",className:"w-[40px] h-[40px]"})})}),B("h3",{className:"text-[16px] sm:text-[20px] font-semibold mt-4",children:"MONEY BACK GUARANTEE"}),B("p",{className:"text-gray-600 text-[12px] sm:text-[14px]",children:"We return money within 30 days"})]})]}),B("div",{className:"flex flex-col md:flex-row justify-center items-center gap-8 mt-10 border-t border-gray-300 pt-2"})]}):B("p",{children:"No products available"})},zP=()=>B("div",{children:B($P,{})}),qP=()=>{const[r,e]=Pe.useState({name:"",address:"",email:"",password:""}),[t,n]=Pe.useState(!1),s=m=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/.test(m),o=ns(),l=m=>{e({...r,[m.target.name]:m.target.value})},u=async m=>{if(!s(m.password))return pt.error("Password must be 8+ characters with an uppercase, lowercase, and number.",{position:"top-right",autoClose:3e3}),Promise.reject(new Error("Invalid password format"));try{return(await Bt.post("https://devapi.uniscore.vn/uri/api/auth/register",m)).data}catch(y){return Promise.reject(y)}},{mutate:c,isPending:h}=zf({mutationFn:u,onSuccess:()=>{pt.success("Account created successfully!",{autoClose:1500}),setTimeout(()=>{o("/login")},1500)},onError:m=>{m.message==="Invalid password format"||pt.error("Email is already in use!")}});return B("div",{className:"flex h-[500px] md:h-[600px] justify-center mt-10 md:mt-20 bg-white",children:Se("div",{className:"flex bg-white overflow-hidden w-[1000px] h-[500px]",children:[B("div",{className:"w-1/2 hidden md:block rounded",children:B("img",{src:"/R2S-Client/SideImage.svg",alt:"Sign Up",className:"w-full h-full object-cover rounded"})}),Se("div",{className:"w-full md:w-1/2 p-2 md:p-8 lg:p-12",children:[B("h2",{className:"text-[36px] mb-1 font-[Inter]",children:"Create an account"}),B("p",{className:"mb-8 text-gray-600 text-[16px]",children:"Enter your details below"}),Se("form",{onSubmit:m=>{if(m.preventDefault(),!r.email||!r.password||!r.name){pt.error("One or more fields are empty!");return}c(r)},children:[B("div",{className:"flex gap-4 mb-4",children:B("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:l,className:"w-full border-b border-gray-400 text-gray-600 text-[16px] outline-none"})}),B("input",{type:"text",name:"address",placeholder:"Address",value:r.address,onChange:l,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),B("input",{type:"email",name:"email",placeholder:"Email",value:r.email,onChange:l,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),Se("div",{className:"relative mb-4",children:[B("input",{type:t?"text":"password",name:"password",placeholder:"Password",value:r.password,onChange:l,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),B("button",{type:"button",onClick:()=>n(!t),className:"absolute right-2 top-1/4 transform -translate-y-1/2 text-gray-500",children:t?B("img",{src:"/R2S-Client/ShowPass.svg",alt:"Show Password",className:"w-[20px] h-[20px] cursor-pointer"}):B("img",{src:"/R2S-Client/hide.png",alt:"Hide Password",className:"w-[20px] h-[20px] cursor-pointer"})})]}),B("button",{type:"submit",disabled:h,className:"w-full bg-red-500 text-white py-2 rounded text-[16px]",children:h?"Creating...":"Create Account"})]}),Se("button",{className:"flex items-center justify-center w-full h-[56px] mt-4 border border-black/40 rounded-[4px]",children:[B("img",{src:"/R2S-Client/Google.svg",alt:"Google",className:"w-[24px] h-[24px]"}),B("span",{className:"ml-4 text-[16px]",children:"Sign up with Google"})]}),Se("p",{className:"mt-4 text-center text-gray-700",children:["Already have an account?",B("a",{href:"/login",className:"text-black ml-4 hover:border-b-2 hover:border-black",children:"Log in"})]})]})]})})},WP=()=>{const[r,e]=Pe.useState({email:"",password:""}),[t,n]=Pe.useState(!1),s=ns(),o=d=>{e({...r,[d.target.name]:d.target.value})},l=async({email:d,password:m})=>(await Bt.post("https://devapi.uniscore.vn/uri/api/auth/login",{email:d,password:m})).data,{mutate:u,isPending:c}=zf({mutationFn:l,onSuccess:d=>{console.log("Login success:",d),localStorage.setItem("accessToken",d.tokens.accessToken),console.log("Access Token:",d.tokens.accessToken),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user",JSON.stringify(d.user)),pt.success("Logged in successfully!",{autoClose:1500}),setTimeout(()=>{const m=d.user.roles[0];s(m==="ADMIN"?"/productmanage":"/"),window.location.reload()},1500)},onError:()=>{pt.error("Login failed! Please try again.")}});return B("div",{className:"flex h-[400px] md:h-[600px] justify-center mt-20 bg-white",children:Se("div",{className:"flex bg-white overflow-hidden w-[1000px] h-[300px] md:h-[500px]",children:[B("div",{className:"w-1/2 hidden md:block rounded",children:B("img",{src:"/R2S-Client/SideImage.svg",alt:"Sign Up",className:"w-full h-full object-cover rounded"})}),Se("div",{className:"w-full md:w-1/2 p-2 md:p-8 md:mt-4 lg:mt-0 lg:p-12",children:[B("h2",{className:"text-[36px] mb-1 font-[Inter]",children:"Log in to Exclusive"}),B("p",{className:"mb-8 text-gray-600 text-[16px]",children:"Enter your details below"}),Se("form",{onSubmit:d=>{if(d.preventDefault(),!r.email||!r.password){pt.error("Please enter email and password.");return}u(r)},children:[B("input",{type:"text",name:"email",placeholder:"Email",value:r.email,onChange:o,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),Se("div",{className:"relative mb-4",children:[B("input",{type:t?"text":"password",name:"password",placeholder:"Password",value:r.password,onChange:o,className:"w-full mb-4 border-b border-gray-400 text-gray-600 text-[16px] outline-none"}),B("button",{type:"button",onClick:()=>n(!t),className:"absolute right-2 top-1/4 transform -translate-y-1/2 text-gray-500",children:t?B("img",{src:"/R2S-Client/ShowPass.svg",alt:"Show Password",className:"w-[20px] h-[20px] cursor-pointer"}):B("img",{src:"/R2S-Client/hide.png",alt:"Hide Password",className:"w-[20px] h-[20px] cursor-pointer"})})]}),Se("div",{className:"flex justify-between items-center",children:[B("button",{type:"submit",disabled:c,className:"w-[143px] bg-red-500 text-white py-2 rounded text-[16px]",children:c?"Logging in...":"Log In"}),B("a",{href:"/forgot-password",className:"text-red-500 md:ml-8 lg:ml-0",children:"Forgot Password?"})]})]})]})]})})},HP=async r=>{try{const{data:e}=await Bt.get(`https://devapi.uniscore.vn/uri/api/products/${r}`);return console.log("datadata:",e),e.data[0]||null}catch(e){return console.error("Error fetching product:",e),null}},QP=r=>Bc({queryKey:["product",r],queryFn:()=>HP(r),enabled:!!r,staleTime:6e5,refetchOnWindowFocus:!1,retry:!1}),KP=async()=>{const{data:r}=await Bt.get("https://devapi.uniscore.vn/uri/api/products");return Array.isArray(r.data)?r.data:[]},GP=()=>Bc({queryKey:["products"],queryFn:KP,staleTime:6e5,refetchOnWindowFocus:!1,retry:!1}),YP=({currentProductId:r})=>{const{data:e,isLoading:t,error:n}=GP(),s=ns(),o=c=>{const h=JSON.parse(localStorage.getItem("cart")||"[]"),d=h.find(m=>m.id===c.id);if(d)d.quantity+=1;else{const m={id:c.id,name:c.name,price:c.price,image:c.images[0],quantity:1,color:"red",size:null};h.push(m)}localStorage.setItem("cart",JSON.stringify(h)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),setTimeout(()=>{window.location.reload()},1500)};if(t)return B("p",{children:"Loading..."});if(n)return B("p",{children:"Error loading products"});if(!Array.isArray(e))return B("p",{children:"No products available"});const u=(c=>e.filter(h=>h.id!==c).sort(()=>Math.random()-.5).slice(0,4))(r);return Se("div",{className:"container mx-auto py-12",children:[Se("div",{className:"flex items-center gap-3 mb-6",children:[B("div",{className:"w-[20px] h-[40px] rounded bg-red-500"}),B("span",{className:"text-[16px] text-red-500 font-semibold font-[Inter]",children:"Related Item"})]}),B("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:u.map(c=>Se("div",{className:"group rounded-lg bg-white transition duration-300 w-[270px]",onClick:()=>s(`/detail/${c.id}`),children:[Se("div",{className:"w-[270px] h-[250px] bg-[#F5F5F5] flex flex-col items-center overflow-hidden rounded-md relative",children:[B("div",{className:"flex-grow flex items-center justify-center",children:B("img",{src:c.images[0],alt:c.name,className:"max-h-[180px] object-contain"})}),Se("div",{className:"absolute top-2 right-2 flex flex-col gap-2 items-center",children:[B("img",{src:"/R2S-Client/Heart.svg",alt:"Heart",className:"w-[34px] h-[34px] cursor-pointer"}),B("img",{src:"/R2S-Client/Eye.svg",alt:"Eye",className:"w-[34px] h-[34px] cursor-pointer"})]}),B("button",{onClick:h=>{h.stopPropagation(),o(c)},className:"absolute bottom-0 left-0 w-full bg-black text-white py-3 text-center opacity-0 translate-y-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0",children:"Add To Cart"})]}),B("h3",{className:"text-[16px] font-medium mt-3",children:c.name}),Se("div",{className:"flex items-center gap-3",children:[Se("a",{className:"text-red-500 text-[16px] font-medium",children:["$",c.price]}),Se("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((h,d)=>d<(c.rate||4)?B("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},d):B("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},d)),Se("span",{className:"text-gray-500 text-[14px] font-medium",children:["(",c.stock||50,")"]})]})]})]},c.id))})]})},JP=()=>{const{id:r}=RC(),{data:e,isLoading:t,error:n}=QP(Number(r)),[s,o]=Pe.useState(""),[l,u]=Pe.useState(1),[c,h]=Pe.useState("red"),d=[{name:"Red",color:"bg-red-500"},{name:"Blue",color:"bg-blue-500"},{name:"Gray",color:"bg-gray-400"}],[m,y]=Pe.useState(null),_=Pe.useMemo(()=>e!=null&&e.id?B(YP,{currentProductId:e.id}):null,[e==null?void 0:e.id]);if(Pe.useEffect(()=>{var S;(S=e==null?void 0:e.images)!=null&&S.length&&o(e.images[0])},[e]),Pe.useEffect(()=>{window.scrollTo(0,0),u(1),h("red"),y(null)},[r]),t)return B("div",{className:"min-h-[100vh] flex justify-center items-center",children:B("p",{className:"text-gray-500 text-lg animate-pulse",children:"Loading..."})});if(n||!e)return B("p",{children:"Product not found"});const E=()=>{const S=JSON.parse(localStorage.getItem("cart")||"[]"),T={id:e.id,name:e.name,price:e.price,image:s,quantity:l,color:c,size:m},V=S.find(I=>I.id===e.id);V?V.quantity+=l:S.push(T),localStorage.setItem("cart",JSON.stringify(S)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),setTimeout(()=>{window.location.reload()},1500)};return Se("div",{children:[Se("div",{className:"container mx-auto py-12 grid grid-cols-1 md:grid-cols-[60%_40%] gap-10",children:[Se("div",{className:"flex gap-4 items-start w-full",children:[B("div",{className:"flex flex-col gap-2",children:Array(4).fill(null).map((S,T)=>{var I;const V=(I=e.images)==null?void 0:I[T];return B("div",{className:"bg-[#F5F5F5] rounded w-[170px] h-[138px] flex items-center justify-center",children:V?B("img",{src:V,alt:`Thumbnail ${T}`,className:`h-[120px] p-1 cursor-pointer ${s===V?"border-blue-500":"border-gray-300"}`,onClick:()=>o(V)}):B("span",{className:"text-gray-400",children:"No Image"})},T)})}),B("div",{className:"bg-[#F5F5F5] rounded w-[450px] h-[576px] w-full p-4 flex items-center justify-center",children:s&&B("img",{src:s,alt:e.name,className:"w-full h-full object-contain"})})]}),Se("div",{className:"w-full ml-auto",children:[B("h1",{className:"text-[24px] font-semibold font-[Inter]",children:e.name}),Se("div",{className:"flex items-center gap-2 my-2",children:[[...Array(5)].map((S,T)=>T<(e.rate||4)?B("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},T):B("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},T)),B("span",{className:"text-gray-500 text-[14px]",children:"(100 Reviews)"}),Se("span",{className:"text-gray-500 text-[14px]",children:["(",e.stock||50," in stock)"]})]}),Se("p",{className:"text-[24px] text-black font-[Inter]",children:["$",e.price]}),B("p",{className:"text-[14px] text-black my-4",children:e.description}),Se("div",{className:"my-4 flex items-center gap-4",children:[B("h3",{className:"text-[20px] font-[Inter]",children:"Colours:"}),B("div",{className:"flex gap-4",children:d.map(({name:S,color:T})=>B("div",{className:`w-4 h-4 rounded-full cursor-pointer ${T}
                        ${c===S?"border-2 border-white outline outline-2 outline-black":"border-2 border-white"}`,onClick:()=>h(S)},S))})]}),Se("div",{className:"my-4 flex items-center gap-4",children:[B("h3",{className:"text-[20px] font-[Inter]",children:"Size:"}),B("div",{className:"flex gap-2",children:["XS","S","M","L","XL"].map(S=>B("button",{className:`w-[32px] h-[32px] items-center justify-center text-[14px] border border-gray-400 rounded ${m===S?"bg-red-500 text-white border border-red-500":""}`,onClick:()=>y(S),children:S},S))})]}),Se("div",{className:"flex items-center gap-4 my-6",children:[Se("div",{className:"flex border border-gray-400 w-[159px] h-[44px] items-center rounded",children:[B("button",{className:"flex items-center justify-center text-black w-[45px] h-[40px]",onClick:()=>u(S=>Math.max(1,S-1)),children:"-"}),B("span",{className:"flex items-center justify-center text-center w-[69px] h-[44px] text-[20px] border border-gray-400",children:l}),B("button",{className:"flex items-center justify-center text-black w-[45px] h-[40px]",onClick:()=>u(S=>S+1),children:"+"})]}),B("button",{onClick:E,className:"bg-red-500 text-white w-[165px] h-[44px] flex items-center justify-center rounded",children:"Buy Now"}),B("button",{className:"border border-gray-400 rounded w-[40px] h-[40px] flex items-center justify-center",children:B("img",{src:"/R2S-Client/Wishlist2.svg",alt:"Wishlist2",className:"w-[32px] h-[32px]"})})]}),Se("div",{className:"border border-gray-400 rounded",children:[Se("div",{className:"p-4 flex items-start gap-3",children:[B("img",{src:"/R2S-Client/icon-delivery2.svg",alt:"icon-delivery2",className:"w-[40px] h-[40px] object-contain"}),Se("div",{children:[B("h3",{className:"font-medium text-[16px]",children:"Free Delivery"}),B("button",{className:"font-medium text-[12px] text-black hover:border-b hover:border-black",children:"Enter your postal code for Delivery Availability"})]})]}),Se("div",{className:"border-t border-t-gray-400 p-4 flex items-start gap-3",children:[B("img",{src:"/R2S-Client/Icon-return.svg",alt:"Icon-return",className:"w-[40px] h-[40px] object-contain"}),Se("div",{children:[B("h3",{className:"font-medium text-[16px]",children:"Return Delivery"}),B("span",{className:"font-medium text-[12px] text-black mr-1",children:"Free 30 Days Delivery Returns."}),B("button",{className:"font-medium text-[12px] text-black hover:border-b hover:border-black",children:"Details"})]})]})]})]})]}),B("div",{className:"mt-5 mb-10",children:_})]})},XP=()=>{const[r,e]=Pe.useState([]),[t,n]=Pe.useState([]),[s,o]=Pe.useState(!1);Pe.useEffect(()=>{const y=JSON.parse(localStorage.getItem("cart")||"[]");e(y),n(y);const _=localStorage.getItem("user");if(_){const E=JSON.parse(_);E.roles&&E.roles[0]==="ADMIN"&&o(!0)}},[]);const l=y=>{const _=r.filter(E=>E.id!==y);e(_),localStorage.setItem("cart",JSON.stringify(_)),window.location.reload()},u=(y,_)=>{const E=Math.max(1,parseInt(_)||1),S=r.map(T=>T.id===y?{...T,quantity:E}:T);n(S)},c=()=>{e(t),localStorage.setItem("cart",JSON.stringify(t))},h=ns(),d=!!localStorage.getItem("user"),m=()=>{h(d?"/checkout":"/login")};return Se("div",{className:"container mx-auto py-12",children:[Se("div",{className:"flex items-center space-x-2 text-gray-500 text-[14px]",children:[B("a",{href:s?"/productmanage":"/",className:"hover:underline",children:"Home"}),B("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),B("span",{className:"font-normal text-black",children:"Cart"})]}),B("div",{children:Se("div",{className:"mt-10",children:[B("div",{className:"w-full",children:Se("table",{className:"min-w-full border-separate border-spacing-y-4",children:[B("thead",{className:"shadow-md rounded",children:Se("tr",{children:[B("th",{className:"p-4 text-[16px]",children:"Product"}),B("th",{className:"p-4 text-left text-[16px]",children:"Price"}),B("th",{className:"p-4 text-left text-[16px]",children:"Quantity"}),B("th",{className:"p-4 text-left text-[16px]",children:"Subtotal"}),B("th",{className:"p-4 text-[16px]",children:"Action"})]})}),B("tbody",{children:t.length>0?t.map(y=>Se("tr",{className:"shadow-md rounded",children:[Se("td",{className:"p-4 sm:flex items-center gap-2 text-[16px]",children:[B("img",{src:y.image,alt:y.name,className:"hidden sm:flex w-16 h-16"}),y.name]}),Se("td",{className:"p-2 text-[16px]",children:["$",y.price]}),B("td",{className:"p-4 text-left",children:B("div",{className:"flex items-left gap-2",children:B("input",{type:"number",className:"w-14 h-10 text-center rounded-lg",value:y.quantity,onChange:_=>u(y.id,_.target.value),min:"1"})})}),Se("td",{className:"p-4 text-[16px]",children:["$",(y.price*y.quantity).toFixed(2)]}),B("td",{className:"p-2 text-center",children:B("button",{className:"text-[16px] text-red-500 hover:underline",onClick:()=>l(y.id),children:"Remove"})})]},y.id)):Se("tr",{className:"shadow-md rounded",children:[B("td",{className:"p-4 flex items-center gap-2 text-[16px]",children:"Your cart is empty."}),B("td",{className:"p-4 text-[16px]",children:"$0"}),B("td",{className:"p-4 text-[16px]",children:B("input",{type:"number",value:0,className:"w-16 border border-gray-300 p-1 text-center text-[16px]",min:"1",readOnly:!0})}),B("td",{className:"p-4 text-[16px]",children:"$0"}),B("td",{className:"p-4 text-center"})]})})]})}),Se("div",{className:"flex justify-between mt-6",children:[B("a",{href:s?"/productmanage":"/",className:"px-4 py-2 bg-gray-200 text-black rounded text-[16px]",children:"Return To Shop"}),r.length>0&&B("button",{className:"px-4 py-2 bg-red-500 text-white rounded text-[16px]",onClick:c,children:"Update Cart"})]})]})}),r.length>0&&Se("div",{className:"grid grid-cols-[60%_40%] lg:gap-10 mt-10",children:[B("div",{className:"justify-between",children:Se("div",{className:"flex",children:[B("input",{type:"text",placeholder:"Coupon Code",className:"border border-black px-4 py-2 w-full max-w-[250px] h-[56px] text-gray-500 text-[14px] md:text-[16px] rounded"}),B("button",{className:"bg-red-500 text-white px-6 py-2 mx-4 text-[14px] md:text-[16px] w-full lg:w-[211px] h-[56px] rounded",children:"Apply Coupon"})]})}),Se("div",{className:"border border-black p-6 rounded w-full lg:w-[300px] xl:w-[400px]",children:[B("h2",{className:"text-[20px] font-medium mb-4",children:"Cart Total"}),Se("div",{className:"flex justify-between mb-4 text-[14px] md:text-[16px] border-b border-gray-400",children:[B("span",{children:"Subtotal:"}),Se("span",{children:["$",r.reduce((y,_)=>y+_.price*_.quantity,0).toFixed(2)]})]}),Se("div",{className:"flex justify-between mb-4 text-[14px] md:text-[16px] border-b border-gray-400",children:[B("span",{children:"Shipping:"}),B("span",{children:"Free"})]}),Se("div",{className:"flex justify-between text-[14px] md:text-[16px]",children:[B("span",{children:"Total:"}),Se("span",{children:["$",r.reduce((y,_)=>y+_.price*_.quantity,0).toFixed(2)]})]}),B("button",{onClick:m,className:"w-full mt-4 w-full lg:w-[260px] xl:ml-12 h-[56px] bg-red-500 text-white rounded",children:"Proceed to checkout"})]})]})]})},ZP=()=>{const[r,e]=Pe.useState(null),[t,n]=Pe.useState(!1),s=ns();Pe.useEffect(()=>{const u=JSON.parse(localStorage.getItem("user")||"null");if(u){e(u);const c=localStorage.getItem("user");if(c){const h=JSON.parse(c);h.roles&&h.roles[0]==="ADMIN"&&n(!0)}}else s("/login")},[s]);const o=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("user"),localStorage.removeItem("checkoutInfo"),s("/login"),window.location.reload(),window.scrollTo(0,0)},l=async()=>{if(!r){pt.error("Profile data is missing!");return}const{name:u,address:c}=r;if(!u||!c){pt.error("One or more fields are empty.");return}console.log("Sending update request with data:",{name:u,address:c});try{if(!u||u.length<3||!c||c.length<3){pt.error("Name and address must be at least 3 characters long.");return}const h=await fetch("https://devapi.uniscore.vn/uri/api/auth/update-profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({name:u,address:c})});if(!h.ok){const y=await h.json().catch(()=>({}));console.error("API error:",y),pt.error(y.message||"Update failed! Please try again.");return}pt.success("Profile updated successfully!");const m={...JSON.parse(localStorage.getItem("user")||"{}"),name:u,address:c};localStorage.setItem("user",JSON.stringify(m)),e(m)}catch(h){console.error("Update failed:",h),pt.error("Something went wrong. Please try again later.")}};return Se("div",{className:"container mx-auto py-12",children:[Se("div",{className:"flex items-center space-x-2 text-gray-500 text-[14px]",children:[B("a",{href:t?"/productmanage":"/",className:"hover:underline",children:"Home"}),B("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),B("span",{className:"font-normal text-black",children:"My Account"})]}),Se("div",{className:"flex min-h-screen mt-10",children:[Se("aside",{className:"hidden md:block w-1/3 bg-white rounded-lg",children:[B("h2",{className:"text-[14px] lg:text-[16px] font-medium mb-4",children:"Manage My Account"}),Se("ul",{className:"space-y-3 ml-8",children:[B("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Profile"}),B("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"Address Book"}),B("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Payment Options"})]}),B("h2",{className:"text-[14px] lg:text-[16px] font-medium mt-6 mb-4",children:"My Orders"}),Se("ul",{className:"space-y-3 ml-8",children:[B("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Returns"}),B("li",{className:"text-[14px] lg:text-[16px] text-gray-600 hover:text-red-500 cursor-pointer",children:"My Cancellations"})]}),B("h2",{className:"text-[14px] lg:text-[16px] font-medium mt-6 mb-4",children:"My Wishlist"}),B("button",{onClick:o,className:"mt-4 bg-red-500 text-[16px] text-white py-2 px-4 rounded-lg hover:bg-red-600",children:"Logout"})]}),Se("div",{className:"w-full h-full p-8 bg-white shadow-lg rounded-l md:ml-16",children:[B("h2",{className:"text-[20px] font-medium text-red-500 mb-6",children:"Edit Your Profile"}),Se("div",{className:"md:grid lg:grid-cols-[1.5fr_1fr] gap-6",children:[Se("div",{children:[Se("label",{className:"block text-[16px] mb-1",children:["Full Name",B("a",{className:"text-red-500",children:"*"})]}),B("input",{type:"text",value:(r==null?void 0:r.name)||"",onChange:u=>e(c=>c?{...c,name:u.target.value}:null),className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] text-gray-600 mb-4 md:mb-0"})]}),Se("div",{children:[Se("label",{className:"flex items-center text-[16px] mb-1",children:["Email",B("img",{src:"/R2S-Client/lock.png",alt:"Lock",className:"w-4 h-4 ml-2 relative -translate-y-[2px]"})]}),B("input",{type:"email",value:(r==null?void 0:r.email)||"",className:"w-full p-2 border border-gray-300 rounded bg-gray-100 text-[16px] text-gray-600 mb-4 md:mb-0",disabled:!0})]}),Se("div",{className:"col-span-2",children:[Se("label",{className:"block text-[16px] mb-1",children:["Address",B("a",{className:"text-red-500",children:"*"})]}),B("input",{type:"text",value:(r==null?void 0:r.address)||"",onChange:u=>e(c=>c?{...c,address:u.target.value}:null),className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] text-gray-600"})]})]}),B("h3",{className:"text-[16px] mt-6 mb-4",children:"Password Changes"}),Se("div",{className:"grid grid-cols-1 gap-4",children:[B("input",{type:"password",placeholder:"Current Password",className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] placeholder:text-gray-600"}),B("input",{type:"password",placeholder:"New Password",className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] placeholder:text-gray-600"}),B("input",{type:"password",placeholder:"Confirm New Password",className:"w-full p-2 border border-gray-300 rounded bg-white text-[16px] placeholder:text-gray-600"})]}),Se("div",{className:"flex justify-end mt-6 space-x-4",children:[B("button",{onClick:()=>{const u=JSON.parse(localStorage.getItem("user")||"null");u&&e(u)},className:"px-4 py-2 text-black text-[16px]",children:"Cancel"}),B("button",{onClick:l,className:"px-6 py-2 bg-red-500 text-white rounded-lg text-[16px]",children:"Save Changes"})]})]})]})]})},e2=()=>{};var ub={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},t2=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],l=r[t++],u=r[t++],c=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const o=r[t++],l=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},pS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],l=s+1<r.length,u=l?r[s+1]:0,c=s+2<r.length,h=c?r[s+2]:0,d=o>>2,m=(o&3)<<4|u>>4;let y=(u&15)<<2|h>>6,_=h&63;c||(_=64,l||(y=64)),n.push(t[d],t[m],t[y],t[_])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(dS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):t2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const h=s<r.length?t[r.charAt(s)]:64;++s;const m=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||h==null||m==null)throw new r2;const y=o<<2|u>>4;if(n.push(y),h!==64){const _=u<<4&240|h>>2;if(n.push(_),m!==64){const E=h<<6&192|m;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class r2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n2=function(r){const e=dS(r);return pS.encodeByteArray(e,!0)},Hf=function(r){return n2(r).replace(/\./g,"")},i2=function(r){try{return pS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=()=>s2().__FIREBASE_DEFAULTS__,a2=()=>{if(typeof process>"u"||typeof ub>"u")return;const r=ub.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},l2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&i2(r[1]);return e&&JSON.parse(e)},xv=()=>{try{return e2()||o2()||a2()||l2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},u2=r=>{var e,t;return(t=(e=xv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},c2=r=>{const e=u2(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},mS=()=>{var r;return(r=xv())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Hf(JSON.stringify(t)),Hf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p2(){var r;const e=(r=xv())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m2(){return!p2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g2(){try{return typeof indexedDB=="object"}catch{return!1}}function y2(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="FirebaseError";class uu extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=v2,Object.setPrototypeOf(this,uu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gS.prototype.create)}}class gS{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?_2(o,n):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new uu(s,u,n)}}function _2(r,e){return r.replace(w2,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const w2=/\{\$([^}]+)}/g;function Qf(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],l=e[s];if(cb(o)&&cb(l)){if(!Qf(o,l))return!1}else if(o!==l)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function cb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(r){return r&&r._delegate?r._delegate:r}class Sc{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new h2;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S2(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&l.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),o=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:E2(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function E2(r){return r===fa?void 0:r}function S2(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new b2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ft||(Ft={}));const x2={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},I2=Ft.INFO,A2={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},C2=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=A2[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yS{constructor(e){this.name=e,this._logLevel=I2,this._logHandler=C2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const R2=(r,e)=>e.some(t=>r instanceof t);let hb,fb;function k2(){return hb||(hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P2(){return fb||(fb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vS=new WeakMap,Eg=new WeakMap,_S=new WeakMap,Im=new WeakMap,Iv=new WeakMap;function N2(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",l)},o=()=>{t(Ro(r.result)),s()},l=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&vS.set(t,r)}).catch(()=>{}),Iv.set(e,r),e}function O2(r){if(Eg.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",l),r.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",l),r.addEventListener("abort",l)});Eg.set(r,e)}let Sg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Eg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||_S.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ro(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function D2(r){Sg=r(Sg)}function L2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Am(this),e,...t);return _S.set(n,e.sort?e.sort():[e]),Ro(n)}:P2().includes(r)?function(...e){return r.apply(Am(this),e),Ro(vS.get(this))}:function(...e){return Ro(r.apply(Am(this),e))}}function M2(r){return typeof r=="function"?L2(r):(r instanceof IDBTransaction&&O2(r),R2(r,k2())?new Proxy(r,Sg):r)}function Ro(r){if(r instanceof IDBRequest)return N2(r);if(Im.has(r))return Im.get(r);const e=M2(r);return e!==r&&(Im.set(r,e),Iv.set(e,r)),e}const Am=r=>Iv.get(r);function F2(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const l=indexedDB.open(r,e),u=Ro(l);return n&&l.addEventListener("upgradeneeded",c=>{n(Ro(l.result),c.oldVersion,c.newVersion,Ro(l.transaction),c)}),t&&l.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const V2=["get","getKey","getAll","getAllKeys","count"],U2=["put","add","delete","clear"],Cm=new Map;function db(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=U2.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||V2.includes(t)))return;const o=async function(l,...u){const c=this.transaction(l,s?"readwrite":"readonly");let h=c.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),s&&c.done]))[0]};return Cm.set(e,o),o}D2(r=>({...r,get:(e,t,n)=>db(e,t)||r.get(e,t,n),has:(e,t)=>!!db(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(j2(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function j2(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tg="@firebase/app",pb="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new yS("@firebase/app"),$2="@firebase/app-compat",z2="@firebase/analytics-compat",q2="@firebase/analytics",W2="@firebase/app-check-compat",H2="@firebase/app-check",Q2="@firebase/auth",K2="@firebase/auth-compat",G2="@firebase/database",Y2="@firebase/data-connect",J2="@firebase/database-compat",X2="@firebase/functions",Z2="@firebase/functions-compat",eN="@firebase/installations",tN="@firebase/installations-compat",rN="@firebase/messaging",nN="@firebase/messaging-compat",iN="@firebase/performance",sN="@firebase/performance-compat",oN="@firebase/remote-config",aN="@firebase/remote-config-compat",lN="@firebase/storage",uN="@firebase/storage-compat",cN="@firebase/firestore",hN="@firebase/vertexai",fN="@firebase/firestore-compat",dN="firebase",pN="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="[DEFAULT]",mN={[Tg]:"fire-core",[$2]:"fire-core-compat",[q2]:"fire-analytics",[z2]:"fire-analytics-compat",[H2]:"fire-app-check",[W2]:"fire-app-check-compat",[Q2]:"fire-auth",[K2]:"fire-auth-compat",[G2]:"fire-rtdb",[Y2]:"fire-data-connect",[J2]:"fire-rtdb-compat",[X2]:"fire-fn",[Z2]:"fire-fn-compat",[eN]:"fire-iid",[tN]:"fire-iid-compat",[rN]:"fire-fcm",[nN]:"fire-fcm-compat",[iN]:"fire-perf",[sN]:"fire-perf-compat",[oN]:"fire-rc",[aN]:"fire-rc-compat",[lN]:"fire-gcs",[uN]:"fire-gcs-compat",[cN]:"fire-fst",[fN]:"fire-fst-compat",[hN]:"fire-vertex","fire-js":"fire-js",[dN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=new Map,gN=new Map,Ig=new Map;function mb(r,e){try{r.container.addComponent(e)}catch(t){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Gf(r){const e=r.name;if(Ig.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,r);for(const t of Kf.values())mb(t,r);for(const t of gN.values())mb(t,r);return!0}function yN(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function vN(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new gS("app","Firebase",_N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Sc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=pN;function wS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:xg,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ko.create("bad-app-name",{appName:String(s)});if(t||(t=mS()),!t)throw ko.create("no-options");const o=Kf.get(s);if(o){if(Qf(t,o.options)&&Qf(n,o.config))return o;throw ko.create("duplicate-app",{appName:s})}const l=new T2(s);for(const c of Ig.values())l.addComponent(c);const u=new wN(t,n,l);return Kf.set(s,u),u}function EN(r=xg){const e=Kf.get(r);if(!e&&r===xg&&mS())return wS();if(!e)throw ko.create("no-app",{appName:r});return e}function Ll(r,e,t){var n;let s=(n=mN[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(u.join(" "));return}Gf(new Sc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="firebase-heartbeat-database",TN=1,Tc="firebase-heartbeat-store";let Rm=null;function bS(){return Rm||(Rm=F2(SN,TN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Tc)}catch(t){console.warn(t)}}}}).catch(r=>{throw ko.create("idb-open",{originalErrorMessage:r.message})})),Rm}async function xN(r){try{const t=(await bS()).transaction(Tc),n=await t.objectStore(Tc).get(ES(r));return await t.done,n}catch(e){if(e instanceof uu)Ps.warn(e.message);else{const t=ko.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(t.message)}}}async function gb(r,e){try{const n=(await bS()).transaction(Tc,"readwrite");await n.objectStore(Tc).put(e,ES(r)),await n.done}catch(t){if(t instanceof uu)Ps.warn(t.message);else{const n=ko.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ps.warn(n.message)}}}function ES(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=1024,AN=30;class CN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kN(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=yb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>AN){const l=PN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ps.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=yb(),{heartbeatsToSend:n,unsentEntries:s}=RN(this._heartbeatsCache.heartbeats),o=Hf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ps.warn(t),""}}}function yb(){return new Date().toISOString().substring(0,10)}function RN(r,e=IN){const t=[];let n=r.slice();for(const s of r){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),vb(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),vb(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class kN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g2()?y2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return gb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return gb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vb(r){return Hf(JSON.stringify({version:2,heartbeats:r})).length}function PN(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r){Gf(new Sc("platform-logger",e=>new B2(e),"PRIVATE")),Gf(new Sc("heartbeat",e=>new CN(e),"PRIVATE")),Ll(Tg,pb,r),Ll(Tg,pb,"esm2017"),Ll("fire-js","")}NN("");var ON="firebase",DN="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ll(ON,DN,"app");var _b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,SS;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function M(){}M.prototype=R.prototype,P.D=R.prototype,P.prototype=new M,P.prototype.constructor=P,P.C=function(F,$,N){for(var L=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)L[ve-2]=arguments[ve];return R.prototype[$].apply(F,L)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,M){M||(M=0);var F=Array(16);if(typeof R=="string")for(var $=0;16>$;++$)F[$]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for($=0;16>$;++$)F[$]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=P.g[0],M=P.g[1],$=P.g[2];var N=P.g[3],L=R+(N^M&($^N))+F[0]+3614090360&4294967295;R=M+(L<<7&4294967295|L>>>25),L=N+($^R&(M^$))+F[1]+3905402710&4294967295,N=R+(L<<12&4294967295|L>>>20),L=$+(M^N&(R^M))+F[2]+606105819&4294967295,$=N+(L<<17&4294967295|L>>>15),L=M+(R^$&(N^R))+F[3]+3250441966&4294967295,M=$+(L<<22&4294967295|L>>>10),L=R+(N^M&($^N))+F[4]+4118548399&4294967295,R=M+(L<<7&4294967295|L>>>25),L=N+($^R&(M^$))+F[5]+1200080426&4294967295,N=R+(L<<12&4294967295|L>>>20),L=$+(M^N&(R^M))+F[6]+2821735955&4294967295,$=N+(L<<17&4294967295|L>>>15),L=M+(R^$&(N^R))+F[7]+4249261313&4294967295,M=$+(L<<22&4294967295|L>>>10),L=R+(N^M&($^N))+F[8]+1770035416&4294967295,R=M+(L<<7&4294967295|L>>>25),L=N+($^R&(M^$))+F[9]+2336552879&4294967295,N=R+(L<<12&4294967295|L>>>20),L=$+(M^N&(R^M))+F[10]+4294925233&4294967295,$=N+(L<<17&4294967295|L>>>15),L=M+(R^$&(N^R))+F[11]+2304563134&4294967295,M=$+(L<<22&4294967295|L>>>10),L=R+(N^M&($^N))+F[12]+1804603682&4294967295,R=M+(L<<7&4294967295|L>>>25),L=N+($^R&(M^$))+F[13]+4254626195&4294967295,N=R+(L<<12&4294967295|L>>>20),L=$+(M^N&(R^M))+F[14]+2792965006&4294967295,$=N+(L<<17&4294967295|L>>>15),L=M+(R^$&(N^R))+F[15]+1236535329&4294967295,M=$+(L<<22&4294967295|L>>>10),L=R+($^N&(M^$))+F[1]+4129170786&4294967295,R=M+(L<<5&4294967295|L>>>27),L=N+(M^$&(R^M))+F[6]+3225465664&4294967295,N=R+(L<<9&4294967295|L>>>23),L=$+(R^M&(N^R))+F[11]+643717713&4294967295,$=N+(L<<14&4294967295|L>>>18),L=M+(N^R&($^N))+F[0]+3921069994&4294967295,M=$+(L<<20&4294967295|L>>>12),L=R+($^N&(M^$))+F[5]+3593408605&4294967295,R=M+(L<<5&4294967295|L>>>27),L=N+(M^$&(R^M))+F[10]+38016083&4294967295,N=R+(L<<9&4294967295|L>>>23),L=$+(R^M&(N^R))+F[15]+3634488961&4294967295,$=N+(L<<14&4294967295|L>>>18),L=M+(N^R&($^N))+F[4]+3889429448&4294967295,M=$+(L<<20&4294967295|L>>>12),L=R+($^N&(M^$))+F[9]+568446438&4294967295,R=M+(L<<5&4294967295|L>>>27),L=N+(M^$&(R^M))+F[14]+3275163606&4294967295,N=R+(L<<9&4294967295|L>>>23),L=$+(R^M&(N^R))+F[3]+4107603335&4294967295,$=N+(L<<14&4294967295|L>>>18),L=M+(N^R&($^N))+F[8]+1163531501&4294967295,M=$+(L<<20&4294967295|L>>>12),L=R+($^N&(M^$))+F[13]+2850285829&4294967295,R=M+(L<<5&4294967295|L>>>27),L=N+(M^$&(R^M))+F[2]+4243563512&4294967295,N=R+(L<<9&4294967295|L>>>23),L=$+(R^M&(N^R))+F[7]+1735328473&4294967295,$=N+(L<<14&4294967295|L>>>18),L=M+(N^R&($^N))+F[12]+2368359562&4294967295,M=$+(L<<20&4294967295|L>>>12),L=R+(M^$^N)+F[5]+4294588738&4294967295,R=M+(L<<4&4294967295|L>>>28),L=N+(R^M^$)+F[8]+2272392833&4294967295,N=R+(L<<11&4294967295|L>>>21),L=$+(N^R^M)+F[11]+1839030562&4294967295,$=N+(L<<16&4294967295|L>>>16),L=M+($^N^R)+F[14]+4259657740&4294967295,M=$+(L<<23&4294967295|L>>>9),L=R+(M^$^N)+F[1]+2763975236&4294967295,R=M+(L<<4&4294967295|L>>>28),L=N+(R^M^$)+F[4]+1272893353&4294967295,N=R+(L<<11&4294967295|L>>>21),L=$+(N^R^M)+F[7]+4139469664&4294967295,$=N+(L<<16&4294967295|L>>>16),L=M+($^N^R)+F[10]+3200236656&4294967295,M=$+(L<<23&4294967295|L>>>9),L=R+(M^$^N)+F[13]+681279174&4294967295,R=M+(L<<4&4294967295|L>>>28),L=N+(R^M^$)+F[0]+3936430074&4294967295,N=R+(L<<11&4294967295|L>>>21),L=$+(N^R^M)+F[3]+3572445317&4294967295,$=N+(L<<16&4294967295|L>>>16),L=M+($^N^R)+F[6]+76029189&4294967295,M=$+(L<<23&4294967295|L>>>9),L=R+(M^$^N)+F[9]+3654602809&4294967295,R=M+(L<<4&4294967295|L>>>28),L=N+(R^M^$)+F[12]+3873151461&4294967295,N=R+(L<<11&4294967295|L>>>21),L=$+(N^R^M)+F[15]+530742520&4294967295,$=N+(L<<16&4294967295|L>>>16),L=M+($^N^R)+F[2]+3299628645&4294967295,M=$+(L<<23&4294967295|L>>>9),L=R+($^(M|~N))+F[0]+4096336452&4294967295,R=M+(L<<6&4294967295|L>>>26),L=N+(M^(R|~$))+F[7]+1126891415&4294967295,N=R+(L<<10&4294967295|L>>>22),L=$+(R^(N|~M))+F[14]+2878612391&4294967295,$=N+(L<<15&4294967295|L>>>17),L=M+(N^($|~R))+F[5]+4237533241&4294967295,M=$+(L<<21&4294967295|L>>>11),L=R+($^(M|~N))+F[12]+1700485571&4294967295,R=M+(L<<6&4294967295|L>>>26),L=N+(M^(R|~$))+F[3]+2399980690&4294967295,N=R+(L<<10&4294967295|L>>>22),L=$+(R^(N|~M))+F[10]+4293915773&4294967295,$=N+(L<<15&4294967295|L>>>17),L=M+(N^($|~R))+F[1]+2240044497&4294967295,M=$+(L<<21&4294967295|L>>>11),L=R+($^(M|~N))+F[8]+1873313359&4294967295,R=M+(L<<6&4294967295|L>>>26),L=N+(M^(R|~$))+F[15]+4264355552&4294967295,N=R+(L<<10&4294967295|L>>>22),L=$+(R^(N|~M))+F[6]+2734768916&4294967295,$=N+(L<<15&4294967295|L>>>17),L=M+(N^($|~R))+F[13]+1309151649&4294967295,M=$+(L<<21&4294967295|L>>>11),L=R+($^(M|~N))+F[4]+4149444226&4294967295,R=M+(L<<6&4294967295|L>>>26),L=N+(M^(R|~$))+F[11]+3174756917&4294967295,N=R+(L<<10&4294967295|L>>>22),L=$+(R^(N|~M))+F[2]+718787259&4294967295,$=N+(L<<15&4294967295|L>>>17),L=M+(N^($|~R))+F[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+($+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+$&4294967295,P.g[3]=P.g[3]+N&4294967295}n.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var M=R-this.blockSize,F=this.B,$=this.h,N=0;N<R;){if($==0)for(;N<=M;)s(this,P,N),N+=this.blockSize;if(typeof P=="string"){for(;N<R;)if(F[$++]=P.charCodeAt(N++),$==this.blockSize){s(this,F),$=0;break}}else for(;N<R;)if(F[$++]=P[N++],$==this.blockSize){s(this,F),$=0;break}}this.h=$,this.o+=R},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var M=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=M&255,M/=256;for(this.u(P),P=Array(16),R=M=0;4>R;++R)for(var F=0;32>F;F+=8)P[M++]=this.g[R]>>>F&255;return P};function o(P,R){var M=u;return Object.prototype.hasOwnProperty.call(M,P)?M[P]:M[P]=R(P)}function l(P,R){this.h=R;for(var M=[],F=!0,$=P.length-1;0<=$;$--){var N=P[$]|0;F&&N==R||(M[$]=N,F=!1)}this.g=M}var u={};function c(P){return-128<=P&&128>P?o(P,function(R){return new l([R|0],0>R?-1:0)}):new l([P|0],0>P?-1:0)}function h(P){if(isNaN(P)||!isFinite(P))return m;if(0>P)return T(h(-P));for(var R=[],M=1,F=0;P>=M;F++)R[F]=P/M|0,M*=4294967296;return new l(R,0)}function d(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return T(d(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=h(Math.pow(R,8)),F=m,$=0;$<P.length;$+=8){var N=Math.min(8,P.length-$),L=parseInt(P.substring($,$+N),R);8>N?(N=h(Math.pow(R,N)),F=F.j(N).add(h(L))):(F=F.j(M),F=F.add(h(L)))}return F}var m=c(0),y=c(1),_=c(16777216);r=l.prototype,r.m=function(){if(S(this))return-T(this).m();for(var P=0,R=1,M=0;M<this.g.length;M++){var F=this.i(M);P+=(0<=F?F:4294967296+F)*R,R*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(S(this))return"-"+T(this).toString(P);for(var R=h(Math.pow(P,6)),M=this,F="";;){var $=W(M,R).g;M=V(M,$.j(R));var N=((0<M.g.length?M.g[0]:M.h)>>>0).toString(P);if(M=$,E(M))return N+F;for(;6>N.length;)N="0"+N;F=N+F}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function S(P){return P.h==-1}r.l=function(P){return P=V(this,P),S(P)?-1:E(P)?0:1};function T(P){for(var R=P.g.length,M=[],F=0;F<R;F++)M[F]=~P.g[F];return new l(M,~P.h).add(y)}r.abs=function(){return S(this)?T(this):this},r.add=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],F=0,$=0;$<=R;$++){var N=F+(this.i($)&65535)+(P.i($)&65535),L=(N>>>16)+(this.i($)>>>16)+(P.i($)>>>16);F=L>>>16,N&=65535,L&=65535,M[$]=L<<16|N}return new l(M,M[M.length-1]&-2147483648?-1:0)};function V(P,R){return P.add(T(R))}r.j=function(P){if(E(this)||E(P))return m;if(S(this))return S(P)?T(this).j(T(P)):T(T(this).j(P));if(S(P))return T(this.j(T(P)));if(0>this.l(_)&&0>P.l(_))return h(this.m()*P.m());for(var R=this.g.length+P.g.length,M=[],F=0;F<2*R;F++)M[F]=0;for(F=0;F<this.g.length;F++)for(var $=0;$<P.g.length;$++){var N=this.i(F)>>>16,L=this.i(F)&65535,ve=P.i($)>>>16,ae=P.i($)&65535;M[2*F+2*$]+=L*ae,I(M,2*F+2*$),M[2*F+2*$+1]+=N*ae,I(M,2*F+2*$+1),M[2*F+2*$+1]+=L*ve,I(M,2*F+2*$+1),M[2*F+2*$+2]+=N*ve,I(M,2*F+2*$+2)}for(F=0;F<R;F++)M[F]=M[2*F+1]<<16|M[2*F];for(F=R;F<2*R;F++)M[F]=0;return new l(M,0)};function I(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function k(P,R){this.g=P,this.h=R}function W(P,R){if(E(R))throw Error("division by zero");if(E(P))return new k(m,m);if(S(P))return R=W(T(P),R),new k(T(R.g),T(R.h));if(S(R))return R=W(P,T(R)),new k(T(R.g),R.h);if(30<P.g.length){if(S(P)||S(R))throw Error("slowDivide_ only works with positive integers.");for(var M=y,F=R;0>=F.l(P);)M=H(M),F=H(F);var $=j(M,1),N=j(F,1);for(F=j(F,2),M=j(M,2);!E(F);){var L=N.add(F);0>=L.l(P)&&($=$.add(M),N=L),F=j(F,1),M=j(M,1)}return R=V(P,$.j(R)),new k($,R)}for($=m;0<=P.l(R);){for(M=Math.max(1,Math.floor(P.m()/R.m())),F=Math.ceil(Math.log(M)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),N=h(M),L=N.j(R);S(L)||0<L.l(P);)M-=F,N=h(M),L=N.j(R);E(N)&&(N=y),$=$.add(N),P=V(P,L)}return new k($,P)}r.A=function(P){return W(this,P).h},r.and=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],F=0;F<R;F++)M[F]=this.i(F)&P.i(F);return new l(M,this.h&P.h)},r.or=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],F=0;F<R;F++)M[F]=this.i(F)|P.i(F);return new l(M,this.h|P.h)},r.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],F=0;F<R;F++)M[F]=this.i(F)^P.i(F);return new l(M,this.h^P.h)};function H(P){for(var R=P.g.length+1,M=[],F=0;F<R;F++)M[F]=P.i(F)<<1|P.i(F-1)>>>31;return new l(M,P.h)}function j(P,R){var M=R>>5;R%=32;for(var F=P.g.length-M,$=[],N=0;N<F;N++)$[N]=0<R?P.i(N+M)>>>R|P.i(N+M+1)<<32-R:P.i(N+M);return new l($,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,SS=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=d,Po=l}).apply(typeof _b<"u"?_b:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TS,nc,xS,Tf,Ag,IS,AS,CS;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,x,O){return p==Array.prototype||p==Object.prototype||(p[x]=O.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var x=0;x<p.length;++x){var O=p[x];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var n=t(this);function s(p,x){if(x)e:{var O=n;p=p.split(".");for(var K=0;K<p.length-1;K++){var Te=p[K];if(!(Te in O))break e;O=O[Te]}p=p[p.length-1],K=O[p],x=x(K),x!=K&&x!=null&&e(O,p,{configurable:!0,writable:!0,value:x})}}function o(p,x){p instanceof String&&(p+="");var O=0,K=!1,Te={next:function(){if(!K&&O<p.length){var Oe=O++;return{value:x(Oe,p[Oe]),done:!1}}return K=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}s("Array.prototype.values",function(p){return p||function(){return o(this,function(x,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function c(p){var x=typeof p;return x=x!="object"?x:p?Array.isArray(p)?"array":x:"null",x=="array"||x=="object"&&typeof p.length=="number"}function h(p){var x=typeof p;return x=="object"&&p!=null||x=="function"}function d(p,x,O){return p.call.apply(p.bind,arguments)}function m(p,x,O){if(!p)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,K),p.apply(x,Te)}}return function(){return p.apply(x,arguments)}}function y(p,x,O){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,y.apply(null,arguments)}function _(p,x){var O=Array.prototype.slice.call(arguments,1);return function(){var K=O.slice();return K.push.apply(K,arguments),p.apply(this,K)}}function E(p,x){function O(){}O.prototype=x.prototype,p.aa=x.prototype,p.prototype=new O,p.prototype.constructor=p,p.Qb=function(K,Te,Oe){for(var it=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)it[Wt-2]=arguments[Wt];return x.prototype[Te].apply(K,it)}}function S(p){const x=p.length;if(0<x){const O=Array(x);for(let K=0;K<x;K++)O[K]=p[K];return O}return[]}function T(p,x){for(let O=1;O<arguments.length;O++){const K=arguments[O];if(c(K)){const Te=p.length||0,Oe=K.length||0;p.length=Te+Oe;for(let it=0;it<Oe;it++)p[Te+it]=K[it]}else p.push(K)}}class V{constructor(x,O){this.i=x,this.j=O,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function I(p){return/^[\s\xa0]*$/.test(p)}function k(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function W(p){return W[" "](p),p}W[" "]=function(){};var H=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function j(p,x,O){for(const K in p)x.call(O,p[K],K,p)}function P(p,x){for(const O in p)x.call(void 0,p[O],O,p)}function R(p){const x={};for(const O in p)x[O]=p[O];return x}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(p,x){let O,K;for(let Te=1;Te<arguments.length;Te++){K=arguments[Te];for(O in K)p[O]=K[O];for(let Oe=0;Oe<M.length;Oe++)O=M[Oe],Object.prototype.hasOwnProperty.call(K,O)&&(p[O]=K[O])}}function $(p){var x=1;p=p.split(":");const O=[];for(;0<x&&p.length;)O.push(p.shift()),x--;return p.length&&O.push(p.join(":")),O}function N(p){u.setTimeout(()=>{throw p},0)}function L(){var p=Ne;let x=null;return p.g&&(x=p.g,p.g=p.g.next,p.g||(p.h=null),x.next=null),x}class ve{constructor(){this.h=this.g=null}add(x,O){const K=ae.get();K.set(x,O),this.h?this.h.next=K:this.g=K,this.h=K}}var ae=new V(()=>new De,p=>p.reset());class De{constructor(){this.next=this.g=this.h=null}set(x,O){this.h=x,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,fe=!1,Ne=new ve,ie=()=>{const p=u.Promise.resolve(void 0);Re=()=>{p.then(J)}};var J=()=>{for(var p;p=L();){try{p.h.call(p.g)}catch(O){N(O)}var x=ae;x.j(p),100>x.h&&(x.h++,p.next=x.g,x.g=p)}fe=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(p,x){this.type=p,this.g=this.target=x,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,x=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const O=()=>{};u.addEventListener("test",O,x),u.removeEventListener("test",O,x)}catch{}return p}();function oe(p,x){if(be.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var O=this.type=p.type,K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=x,x=p.relatedTarget){if(H){e:{try{W(x.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(x=null)}}else O=="mouseover"?x=p.fromElement:O=="mouseout"&&(x=p.toElement);this.relatedTarget=x,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:We[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&oe.aa.h.call(this)}}E(oe,be);var We={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),te=0;function xe(p,x,O,K,Te){this.listener=p,this.proxy=null,this.src=x,this.type=O,this.capture=!!K,this.ha=Te,this.key=++te,this.da=this.fa=!1}function de(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function me(p){this.src=p,this.g={},this.h=0}me.prototype.add=function(p,x,O,K,Te){var Oe=p.toString();p=this.g[Oe],p||(p=this.g[Oe]=[],this.h++);var it=Ve(p,x,K,Te);return-1<it?(x=p[it],O||(x.fa=!1)):(x=new xe(x,this.src,Oe,!!K,Te),x.fa=O,p.push(x)),x};function _e(p,x){var O=x.type;if(O in p.g){var K=p.g[O],Te=Array.prototype.indexOf.call(K,x,void 0),Oe;(Oe=0<=Te)&&Array.prototype.splice.call(K,Te,1),Oe&&(de(x),p.g[O].length==0&&(delete p.g[O],p.h--))}}function Ve(p,x,O,K){for(var Te=0;Te<p.length;++Te){var Oe=p[Te];if(!Oe.da&&Oe.listener==x&&Oe.capture==!!O&&Oe.ha==K)return Te}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),se={};function ue(p,x,O,K,Te){if(Array.isArray(x)){for(var Oe=0;Oe<x.length;Oe++)ue(p,x[Oe],O,K,Te);return null}return O=Xe(O),p&&p[ce]?p.K(x,O,h(K)?!!K.capture:!1,Te):Ie(p,x,O,!1,K,Te)}function Ie(p,x,O,K,Te,Oe){if(!x)throw Error("Invalid event type");var it=h(Te)?!!Te.capture:!!Te,Wt=we(p);if(Wt||(p[Me]=Wt=new me(p)),O=Wt.add(x,O,K,it,Oe),O.proxy)return O;if(K=Q(),O.proxy=K,K.src=p,K.listener=O,p.addEventListener)Le||(Te=it),Te===void 0&&(Te=!1),p.addEventListener(x.toString(),K,Te);else if(p.attachEvent)p.attachEvent(Y(x.toString()),K);else if(p.addListener&&p.removeListener)p.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Q(){function p(O){return x.call(p.src,p.listener,O)}const x=pe;return p}function X(p,x,O,K,Te){if(Array.isArray(x))for(var Oe=0;Oe<x.length;Oe++)X(p,x[Oe],O,K,Te);else K=h(K)?!!K.capture:!!K,O=Xe(O),p&&p[ce]?(p=p.i,x=String(x).toString(),x in p.g&&(Oe=p.g[x],O=Ve(Oe,O,K,Te),-1<O&&(de(Oe[O]),Array.prototype.splice.call(Oe,O,1),Oe.length==0&&(delete p.g[x],p.h--)))):p&&(p=we(p))&&(x=p.g[x.toString()],p=-1,x&&(p=Ve(x,O,K,Te)),(O=-1<p?x[p]:null)&&ne(O))}function ne(p){if(typeof p!="number"&&p&&!p.da){var x=p.src;if(x&&x[ce])_e(x.i,p);else{var O=p.type,K=p.proxy;x.removeEventListener?x.removeEventListener(O,K,p.capture):x.detachEvent?x.detachEvent(Y(O),K):x.addListener&&x.removeListener&&x.removeListener(K),(O=we(x))?(_e(O,p),O.h==0&&(O.src=null,x[Me]=null)):de(p)}}}function Y(p){return p in se?se[p]:se[p]="on"+p}function pe(p,x){if(p.da)p=!0;else{x=new oe(x,this);var O=p.listener,K=p.ha||p.src;p.fa&&ne(p),p=O.call(K,x)}return p}function we(p){return p=p[Me],p instanceof me?p:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xe(p){return typeof p=="function"?p:(p[ge]||(p[ge]=function(x){return p.handleEvent(x)}),p[ge])}function v(){z.call(this),this.i=new me(this),this.M=this,this.F=null}E(v,z),v.prototype[ce]=!0,v.prototype.removeEventListener=function(p,x,O,K){X(this,p,x,O,K)};function b(p,x){var O,K=p.F;if(K)for(O=[];K;K=K.F)O.push(K);if(p=p.M,K=x.type||x,typeof x=="string")x=new be(x,p);else if(x instanceof be)x.target=x.target||p;else{var Te=x;x=new be(K,p),F(x,Te)}if(Te=!0,O)for(var Oe=O.length-1;0<=Oe;Oe--){var it=x.g=O[Oe];Te=C(it,K,!0,x)&&Te}if(it=x.g=p,Te=C(it,K,!0,x)&&Te,Te=C(it,K,!1,x)&&Te,O)for(Oe=0;Oe<O.length;Oe++)it=x.g=O[Oe],Te=C(it,K,!1,x)&&Te}v.prototype.N=function(){if(v.aa.N.call(this),this.i){var p=this.i,x;for(x in p.g){for(var O=p.g[x],K=0;K<O.length;K++)de(O[K]);delete p.g[x],p.h--}}this.F=null},v.prototype.K=function(p,x,O,K){return this.i.add(String(p),x,!1,O,K)},v.prototype.L=function(p,x,O,K){return this.i.add(String(p),x,!0,O,K)};function C(p,x,O,K){if(x=p.i.g[String(x)],!x)return!0;x=x.concat();for(var Te=!0,Oe=0;Oe<x.length;++Oe){var it=x[Oe];if(it&&!it.da&&it.capture==O){var Wt=it.listener,Pr=it.ha||it.src;it.fa&&_e(p.i,it),Te=Wt.call(Pr,K)!==!1&&Te}}return Te&&!K.defaultPrevented}function q(p,x,O){if(typeof p=="function")O&&(p=y(p,O));else if(p&&typeof p.handleEvent=="function")p=y(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:u.setTimeout(p,x||0)}function ee(p){p.g=q(()=>{p.g=null,p.i&&(p.i=!1,ee(p))},p.l);const x=p.h;p.h=null,p.m.apply(null,x)}class le extends z{constructor(x,O){super(),this.m=x,this.l=O,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(p){z.call(this),this.h=p,this.g={}}E(Ee,z);var Ze=[];function et(p){j(p.g,function(x,O){this.g.hasOwnProperty(O)&&ne(x)},p),p.g={}}Ee.prototype.N=function(){Ee.aa.N.call(this),et(this)},Ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=u.JSON.stringify,bt=u.JSON.parse,gt=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Ur(){}Ur.prototype.h=null;function _r(p){return p.h||(p.h=p.i())}function Tr(){}var kt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qt(){be.call(this,"d")}E(qt,be);function mt(){be.call(this,"c")}E(mt,be);var Pt={},mr=null;function Gt(){return mr=mr||new v}Pt.La="serverreachability";function wr(p){be.call(this,Pt.La,p)}E(wr,be);function Br(p){const x=Gt();b(x,new wr(x))}Pt.STAT_EVENT="statevent";function G(p,x){be.call(this,Pt.STAT_EVENT,p),this.stat=x}E(G,be);function Z(p){const x=Gt();b(x,new G(x,p))}Pt.Ma="timingevent";function Ge(p,x){be.call(this,Pt.Ma,p),this.size=x}E(Ge,be);function rt(p,x){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},x)}function st(){this.g=!0}st.prototype.xa=function(){this.g=!1};function nr(p,x,O,K,Te,Oe){p.info(function(){if(p.g)if(Oe)for(var it="",Wt=Oe.split("&"),Pr=0;Pr<Wt.length;Pr++){var Lt=Wt[Pr].split("=");if(1<Lt.length){var jr=Lt[0];Lt=Lt[1];var xr=jr.split("_");it=2<=xr.length&&xr[1]=="type"?it+(jr+"="+Lt+"&"):it+(jr+"=redacted&")}}else it=null;else it=Oe;return"XMLHTTP REQ ("+K+") [attempt "+Te+"]: "+x+`
`+O+`
`+it})}function Rr(p,x,O,K,Te,Oe,it){p.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+Te+"]: "+x+`
`+O+`
`+Oe+" "+it})}function kr(p,x,O,K){p.info(function(){return"XMLHTTP TEXT ("+x+"): "+yu(p,O)+(K?" "+K:"")})}function Bs(p,x){p.info(function(){return"TIMEOUT: "+x})}st.prototype.info=function(){};function yu(p,x){if(!p.g)return x;if(!x)return null;try{var O=JSON.parse(x);if(O){for(p=0;p<O.length;p++)if(Array.isArray(O[p])){var K=O[p];if(!(2>K.length)){var Te=K[1];if(Array.isArray(Te)&&!(1>Te.length)){var Oe=Te[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var it=1;it<Te.length;it++)Te[it]=""}}}}return ft(O)}catch{return x}}var is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pn;function hi(){}E(hi,Ur),hi.prototype.g=function(){return new XMLHttpRequest},hi.prototype.i=function(){return{}},pn=new hi;function mn(p,x,O,K){this.j=p,this.i=x,this.l=O,this.R=K||1,this.U=new Ee(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}var Bn={},rn={};function Qa(p,x,O){p.L=1,p.v=Ws($n(x)),p.m=O,p.P=!0,vu(p,null)}function vu(p,x){p.F=Date.now(),Jt(p),p.A=$n(p.v);var O=p.A,K=p.R;Array.isArray(K)||(K=[String(K)]),Qs(O.i,"t",K),p.C=0,O=p.j.J,p.h=new Pi,p.g=fh(p.j,O?x:null,!p.m),0<p.O&&(p.M=new le(y(p.Y,p,p.g),p.O)),x=p.U,O=p.g,K=p.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(Ze[0]=Te.toString()),Te=Ze);for(var Oe=0;Oe<Te.length;Oe++){var it=ue(O,Te[Oe],K||x.handleEvent,!1,x.h||x);if(!it)break;x.g[it.key]=it}x=p.H?R(p.H):{},p.m?(p.u||(p.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,x)):(p.u="GET",p.g.ea(p.A,p.u,null,x)),Br(),nr(p.i,p.u,p.A,p.l,p.R,p.m)}mn.prototype.ca=function(p){p=p.target;const x=this.M;x&&An(p)==3?x.j():this.Y(p)},mn.prototype.Y=function(p){try{if(p==this.g)e:{const xr=An(this.g);var x=this.g.Ba();const Xn=this.g.Z();if(!(3>xr)&&(xr!=3||this.g&&(this.h.h||this.g.oa()||Tu(this.g)))){this.J||xr!=4||x==7||(x==8||0>=Xn?Br(3):Br(2)),$o(this);var O=this.g.Z();this.X=O;t:if(Gc(this)){var K=Tu(this.g);p="";var Te=K.length,Oe=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),js(this);var it="";break t}this.h.i=new u.TextDecoder}for(x=0;x<Te;x++)this.h.h=!0,p+=this.h.i.decode(K[x],{stream:!(Oe&&x==Te-1)});K.length=0,this.h.g+=p,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=O==200,Rr(this.i,this.u,this.A,this.l,this.R,xr,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Wt,Pr=this.g;if((Wt=Pr.g?Pr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Wt)){var Lt=Wt;break t}}Lt=null}if(O=Lt)kr(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_u(this,O);else{this.o=!1,this.s=3,Z(12),Yn(this),js(this);break e}}if(this.P){O=!0;let qn;for(;!this.J&&this.C<it.length;)if(qn=qd(this,it),qn==rn){xr==4&&(this.s=4,Z(14),O=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Bn){this.s=4,Z(15),kr(this.i,this.l,it,"[Invalid Chunk]"),O=!1;break}else kr(this.i,this.l,qn,null),_u(this,qn);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xr!=4||it.length!=0||this.h.h||(this.s=1,Z(16),O=!1),this.o=this.o&&O,!O)kr(this.i,this.l,it,"[Invalid Chunked Response]"),Yn(this),js(this);else if(0<it.length&&!this.W){this.W=!0;var jr=this.j;jr.g==this&&jr.ba&&!jr.M&&(jr.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),Iu(jr),jr.M=!0,Z(11))}}else kr(this.i,this.l,it,null),_u(this,it);xr==4&&Yn(this),this.o&&!this.J&&(xr==4?il(this.j,this):(this.o=!1,Jt(this)))}else Za(this.g),O==400&&0<it.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Yn(this),js(this)}}}catch{}finally{}};function Gc(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function qd(p,x){var O=p.C,K=x.indexOf(`
`,O);return K==-1?rn:(O=Number(x.substring(O,K)),isNaN(O)?Bn:(K+=1,K+O>x.length?rn:(x=x.slice(K,K+O),p.C=K+O,x)))}mn.prototype.cancel=function(){this.J=!0,Yn(this)};function Jt(p){p.S=Date.now()+p.I,Yc(p,p.I)}function Yc(p,x){if(p.B!=null)throw Error("WatchDog timer not null");p.B=rt(y(p.ba,p),x)}function $o(p){p.B&&(u.clearTimeout(p.B),p.B=null)}mn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Bs(this.i,this.A),this.L!=2&&(Br(),Z(17)),Yn(this),this.s=2,js(this)):Yc(this,this.S-p)};function js(p){p.j.G==0||p.J||il(p.j,p)}function Yn(p){$o(p);var x=p.M;x&&typeof x.ma=="function"&&x.ma(),p.M=null,et(p.U),p.g&&(x=p.g,p.g=null,x.abort(),x.ma())}function _u(p,x){try{var O=p.j;if(O.G!=0&&(O.g==p||gn(O.h,p))){if(!p.K&&gn(O.h,p)&&O.G==3){try{var K=O.Da.g.parse(x)}catch{K=null}if(Array.isArray(K)&&K.length==3){var Te=K;if(Te[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<p.F)nl(O),gi(O);else break e;rl(O),Z(18)}}else O.za=Te[1],0<O.za-O.T&&37500>Te[2]&&O.F&&O.v==0&&!O.C&&(O.C=rt(y(O.Za,O),6e3));if(1>=Xc(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else us(O,11)}else if((p.K||O.g==p)&&nl(O),!I(x))for(Te=O.Da.g.parse(x),x=0;x<Te.length;x++){let Lt=Te[x];if(O.T=Lt[0],Lt=Lt[1],O.G==2)if(Lt[0]=="c"){O.K=Lt[1],O.ia=Lt[2];const jr=Lt[3];jr!=null&&(O.la=jr,O.j.info("VER="+O.la));const xr=Lt[4];xr!=null&&(O.Aa=xr,O.j.info("SVER="+O.Aa));const Xn=Lt[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(K=1.5*Xn,O.L=K,O.j.info("backChannelRequestTimeoutMs_="+K)),K=O;const qn=p.g;if(qn){const Go=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var Oe=K.h;Oe.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(wu(Oe,Oe.h),Oe.h=null))}if(K.D){const ol=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;ol&&(K.ya=ol,Yt(K.I,K.D,ol))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-p.F,O.j.info("Handshake RTT: "+O.R+"ms")),K=O;var it=p;if(K.qa=hh(K,K.J?K.ia:null,K.W),it.K){Zc(K.h,it);var Wt=it,Pr=K.L;Pr&&(Wt.I=Pr),Wt.B&&($o(Wt),Jt(Wt)),K.g=it}else Ko(K);0<O.i.length&&Li(O)}else Lt[0]!="stop"&&Lt[0]!="close"||us(O,7);else O.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?us(O,7):Gr(O):Lt[0]!="noop"&&O.l&&O.l.ta(Lt),O.v=0)}}Br(4)}catch{}}var Jc=class{constructor(p,x){this.g=p,this.map=x}};function zo(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jn(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Xc(p){return p.h?1:p.g?p.g.size:0}function gn(p,x){return p.h?p.h==x:p.g?p.g.has(x):!1}function wu(p,x){p.g?p.g.add(x):p.h=x}function Zc(p,x){p.h&&p.h==x?p.h=null:p.g&&p.g.has(x)&&p.g.delete(x)}zo.prototype.cancel=function(){if(this.i=eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function eh(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let x=p.i;for(const O of p.g.values())x=x.concat(O.D);return x}return S(p.i)}function Ka(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var x=[],O=p.length,K=0;K<O;K++)x.push(p[K]);return x}x=[],O=0;for(K in p)x[O++]=p[K];return x}function Ga(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var x=[];p=p.length;for(var O=0;O<p;O++)x.push(O);return x}x=[],O=0;for(const K in p)x[O++]=K;return x}}}function $s(p,x){if(p.forEach&&typeof p.forEach=="function")p.forEach(x,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,x,void 0);else for(var O=Ga(p),K=Ka(p),Te=K.length,Oe=0;Oe<Te;Oe++)x.call(void 0,K[Oe],O&&O[Oe],p)}var qo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wd(p,x){if(p){p=p.split("&");for(var O=0;O<p.length;O++){var K=p[O].indexOf("="),Te=null;if(0<=K){var Oe=p[O].substring(0,K);Te=p[O].substring(K+1)}else Oe=p[O];x(Oe,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function ss(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ss){this.h=p.h,Wo(this,p.j),this.o=p.o,this.g=p.g,zs(this,p.s),this.l=p.l;var x=p.i,O=new Ni;O.i=x.i,x.g&&(O.g=new Map(x.g),O.h=x.h),qs(this,O),this.m=p.m}else p&&(x=String(p).match(qo))?(this.h=!1,Wo(this,x[1]||"",!0),this.o=Ot(x[2]||""),this.g=Ot(x[3]||"",!0),zs(this,x[4]),this.l=Ot(x[5]||"",!0),qs(this,x[6]||"",!0),this.m=Ot(x[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}ss.prototype.toString=function(){var p=[],x=this.j;x&&p.push(Hs(x,Ya,!0),":");var O=this.g;return(O||x=="file")&&(p.push("//"),(x=this.o)&&p.push(Hs(x,Ya,!0),"@"),p.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&p.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&p.push("/"),p.push(Hs(O,O.charAt(0)=="/"?nh:rh,!0))),(O=this.i.toString())&&p.push("?",O),(O=this.m)&&p.push("#",Hs(O,bu)),p.join("")};function $n(p){return new ss(p)}function Wo(p,x,O){p.j=O?Ot(x,!0):x,p.j&&(p.j=p.j.replace(/:$/,""))}function zs(p,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);p.s=x}else p.s=null}function qs(p,x,O){x instanceof Ni?(p.i=x,Oi(p.i,p.h)):(O||(x=Hs(x,ih)),p.i=new Ni(x,p.h))}function Yt(p,x,O){p.i.set(x,O)}function Ws(p){return Yt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Ot(p,x){return p?x?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Hs(p,x,O){return typeof p=="string"?(p=encodeURI(p).replace(x,th),O&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function th(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ya=/[#\/\?@]/g,rh=/[#\?:]/g,nh=/[#\?]/g,ih=/[#\?@]/g,bu=/#/g;function Ni(p,x){this.h=this.g=null,this.i=p||null,this.j=!!x}function Kr(p){p.g||(p.g=new Map,p.h=0,p.i&&Wd(p.i,function(x,O){p.add(decodeURIComponent(x.replace(/\+/g," ")),O)}))}r=Ni.prototype,r.add=function(p,x){Kr(this),this.i=null,p=Jn(this,p);var O=this.g.get(p);return O||this.g.set(p,O=[]),O.push(x),this.h+=1,this};function fi(p,x){Kr(p),x=Jn(p,x),p.g.has(x)&&(p.i=null,p.h-=p.g.get(x).length,p.g.delete(x))}function di(p,x){return Kr(p),x=Jn(p,x),p.g.has(x)}r.forEach=function(p,x){Kr(this),this.g.forEach(function(O,K){O.forEach(function(Te){p.call(x,Te,K,this)},this)},this)},r.na=function(){Kr(this);const p=Array.from(this.g.values()),x=Array.from(this.g.keys()),O=[];for(let K=0;K<x.length;K++){const Te=p[K];for(let Oe=0;Oe<Te.length;Oe++)O.push(x[K])}return O},r.V=function(p){Kr(this);let x=[];if(typeof p=="string")di(this,p)&&(x=x.concat(this.g.get(Jn(this,p))));else{p=Array.from(this.g.values());for(let O=0;O<p.length;O++)x=x.concat(p[O])}return x},r.set=function(p,x){return Kr(this),this.i=null,p=Jn(this,p),di(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[x]),this.h+=1,this},r.get=function(p,x){return p?(p=this.V(p),0<p.length?String(p[0]):x):x};function Qs(p,x,O){fi(p,x),0<O.length&&(p.i=null,p.g.set(Jn(p,x),S(O)),p.h+=O.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],x=Array.from(this.g.keys());for(var O=0;O<x.length;O++){var K=x[O];const Oe=encodeURIComponent(String(K)),it=this.V(K);for(K=0;K<it.length;K++){var Te=Oe;it[K]!==""&&(Te+="="+encodeURIComponent(String(it[K]))),p.push(Te)}}return this.i=p.join("&")};function Jn(p,x){return x=String(x),p.j&&(x=x.toLowerCase()),x}function Oi(p,x){x&&!p.j&&(Kr(p),p.i=null,p.g.forEach(function(O,K){var Te=K.toLowerCase();K!=Te&&(fi(this,K),Qs(this,Te,O))},p)),p.j=x}function Hd(p,x){const O=new st;if(u.Image){const K=new Image;K.onload=_(In,O,"TestLoadImage: loaded",!0,x,K),K.onerror=_(In,O,"TestLoadImage: error",!1,x,K),K.onabort=_(In,O,"TestLoadImage: abort",!1,x,K),K.ontimeout=_(In,O,"TestLoadImage: timeout",!1,x,K),u.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=p}else x(!1)}function sh(p,x){const O=new st,K=new AbortController,Te=setTimeout(()=>{K.abort(),In(O,"TestPingServer: timeout",!1,x)},1e4);fetch(p,{signal:K.signal}).then(Oe=>{clearTimeout(Te),Oe.ok?In(O,"TestPingServer: ok",!0,x):In(O,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(Te),In(O,"TestPingServer: error",!1,x)})}function In(p,x,O,K,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),K(O)}catch{}}function Qd(){this.g=new gt}function oh(p,x,O){const K=O||"";try{$s(p,function(Te,Oe){let it=Te;h(Te)&&(it=ft(Te)),x.push(K+Oe+"="+encodeURIComponent(it))})}catch(Te){throw x.push(K+"type="+encodeURIComponent("_badmap")),Te}}function os(p){this.l=p.Ub||null,this.j=p.eb||!1}E(os,Ur),os.prototype.g=function(){return new Ho(this.l,this.j)},os.prototype.i=function(p){return function(){return p}}({});function Ho(p,x){v.call(this),this.D=p,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Ho,v),r=Ho.prototype,r.open=function(p,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=x,this.readyState=1,mi(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(x.body=p),(this.D||u).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},r.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ah(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function ah(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}r.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var x=p.value?p.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!p.done}))&&(this.response=this.responseText+=x)}p.done?pi(this):mi(this),this.readyState==3&&ah(this)}},r.Ra=function(p){this.g&&(this.response=this.responseText=p,pi(this))},r.Qa=function(p){this.g&&(this.response=p,pi(this))},r.ga=function(){this.g&&pi(this)};function pi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,mi(p)}r.setRequestHeader=function(p,x){this.u.append(p,x)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],x=this.h.entries();for(var O=x.next();!O.done;)O=O.value,p.push(O[0]+": "+O[1]),O=x.next();return p.join(`\r
`)};function mi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function as(p){let x="";return j(p,function(O,K){x+=K,x+=":",x+=O,x+=`\r
`}),x}function Ks(p,x,O){e:{for(K in O){var K=!1;break e}K=!0}K||(O=as(O),typeof p=="string"?O!=null&&encodeURIComponent(String(O)):Yt(p,x,O))}function ir(p){v.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ir,v);var Kd=/^https?$/i,Eu=["POST","PUT"];r=ir.prototype,r.Ha=function(p){this.J=p},r.ea=function(p,x,O,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);x=x?x.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pn.g(),this.v=this.o?_r(this.o):_r(pn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(x,String(p),!0),this.B=!1}catch(Oe){Qo(this,Oe);return}if(p=O||"",O=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var Te in K)O.set(Te,K[Te]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const Oe of K.keys())O.set(Oe,K.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(O.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),Te=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Eu,x,void 0))||K||Te||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,it]of O)this.g.setRequestHeader(Oe,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xa(this),this.u=!0,this.g.send(p),this.u=!1}catch(Oe){Qo(this,Oe)}};function Qo(p,x){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=x,p.m=5,Ja(p),zn(p)}function Ja(p){p.A||(p.A=!0,b(p,"complete"),b(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,b(this,"complete"),b(this,"abort"),zn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zn(this,!0)),ir.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Su(this):this.bb())},r.bb=function(){Su(this)};function Su(p){if(p.h&&typeof l<"u"&&(!p.v[1]||An(p)!=4||p.Z()!=2)){if(p.u&&An(p)==4)q(p.Ea,0,p);else if(b(p,"readystatechange"),An(p)==4){p.h=!1;try{const it=p.Z();e:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var O;if(!(O=x)){var K;if(K=it===0){var Te=String(p.D).match(qo)[1]||null;!Te&&u.self&&u.self.location&&(Te=u.self.location.protocol.slice(0,-1)),K=!Kd.test(Te?Te.toLowerCase():"")}O=K}if(O)b(p,"complete"),b(p,"success");else{p.m=6;try{var Oe=2<An(p)?p.g.statusText:""}catch{Oe=""}p.l=Oe+" ["+p.Z()+"]",Ja(p)}}finally{zn(p)}}}}function zn(p,x){if(p.g){Xa(p);const O=p.g,K=p.v[0]?()=>{}:null;p.g=null,p.v=null,x||b(p,"ready");try{O.onreadystatechange=K}catch{}}}function Xa(p){p.I&&(u.clearTimeout(p.I),p.I=null)}r.isActive=function(){return!!this.g};function An(p){return p.g?p.g.readyState:0}r.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(p){if(this.g){var x=this.g.responseText;return p&&x.indexOf(p)==0&&(x=x.substring(p.length)),bt(x)}};function Tu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Za(p){const x={};p=(p.g&&2<=An(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<p.length;K++){if(I(p[K]))continue;var O=$(p[K]);const Te=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const Oe=x[Te]||[];x[Te]=Oe,Oe.push(O)}P(x,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(p,x,O){return O&&O.internalChannelParams&&O.internalChannelParams[p]||x}function xu(p){this.Aa=0,this.i=[],this.j=new st,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Di("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Di("baseRetryDelayMs",5e3,p),this.cb=Di("retryDelaySeedMs",1e4,p),this.Wa=Di("forwardChannelMaxRetries",2,p),this.wa=Di("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new zo(p&&p.concurrentRequestLimit),this.Da=new Qd,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=xu.prototype,r.la=8,r.G=1,r.connect=function(p,x,O,K){Z(0),this.W=p,this.H=x||{},O&&K!==void 0&&(this.H.OSID=O,this.H.OAID=K),this.F=this.X,this.I=hh(this,null,this.W),Li(this)};function Gr(p){if(el(p),p.G==3){var x=p.U++,O=$n(p.I);if(Yt(O,"SID",p.K),Yt(O,"RID",x),Yt(O,"TYPE","terminate"),ls(p,O),x=new mn(p,p.j,x),x.L=2,x.v=Ws($n(O)),O=!1,u.navigator&&u.navigator.sendBeacon)try{O=u.navigator.sendBeacon(x.v.toString(),"")}catch{}!O&&u.Image&&(new Image().src=x.v,O=!0),O||(x.g=fh(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Jt(x)}ch(p)}function gi(p){p.g&&(Iu(p),p.g.cancel(),p.g=null)}function el(p){gi(p),p.u&&(u.clearTimeout(p.u),p.u=null),nl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Li(p){if(!jn(p.h)&&!p.s){p.s=!0;var x=p.Ga;Re||ie(),fe||(Re(),fe=!0),Ne.add(x,p),p.B=0}}function Gd(p,x){return Xc(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=x.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=rt(y(p.Ga,p,x),uh(p,p.B)),p.B++,!0)}r.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Te=new mn(this,this.j,p);let Oe=this.o;if(this.S&&(Oe?(Oe=R(Oe),F(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(Te.H=Oe,Oe=null),this.P)e:{for(var x=0,O=0;O<this.i.length;O++){t:{var K=this.i[O];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(x+=K,4096<x){x=O;break e}if(x===4096||O===this.i.length-1){x=O+1;break e}}x=1e3}else x=1e3;x=Gs(this,Te,x),O=$n(this.I),Yt(O,"RID",p),Yt(O,"CVER",22),this.D&&Yt(O,"X-HTTP-Session-Id",this.D),ls(this,O),Oe&&(this.O?x="headers="+encodeURIComponent(String(as(Oe)))+"&"+x:this.m&&Ks(O,this.m,Oe)),wu(this.h,Te),this.Ua&&Yt(O,"TYPE","init"),this.P?(Yt(O,"$req",x),Yt(O,"SID","null"),Te.T=!0,Qa(Te,O,null)):Qa(Te,O,x),this.G=2}}else this.G==3&&(p?tl(this,p):this.i.length==0||jn(this.h)||tl(this))};function tl(p,x){var O;x?O=x.l:O=p.U++;const K=$n(p.I);Yt(K,"SID",p.K),Yt(K,"RID",O),Yt(K,"AID",p.T),ls(p,K),p.m&&p.o&&Ks(K,p.m,p.o),O=new mn(p,p.j,O,p.B+1),p.m===null&&(O.H=p.o),x&&(p.i=x.D.concat(p.i)),x=Gs(p,O,1e3),O.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),wu(p.h,O),Qa(O,K,x)}function ls(p,x){p.H&&j(p.H,function(O,K){Yt(x,K,O)}),p.l&&$s({},function(O,K){Yt(x,K,O)})}function Gs(p,x,O){O=Math.min(p.i.length,O);var K=p.l?y(p.l.Na,p.l,p):null;e:{var Te=p.i;let Oe=-1;for(;;){const it=["count="+O];Oe==-1?0<O?(Oe=Te[0].g,it.push("ofs="+Oe)):Oe=0:it.push("ofs="+Oe);let Wt=!0;for(let Pr=0;Pr<O;Pr++){let Lt=Te[Pr].g;const jr=Te[Pr].map;if(Lt-=Oe,0>Lt)Oe=Math.max(0,Te[Pr].g-100),Wt=!1;else try{oh(jr,it,"req"+Lt+"_")}catch{K&&K(jr)}}if(Wt){K=it.join("&");break e}}}return p=p.i.splice(0,O),x.D=p,K}function Ko(p){if(!p.g&&!p.u){p.Y=1;var x=p.Fa;Re||ie(),fe||(Re(),fe=!0),Ne.add(x,p),p.v=0}}function rl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=rt(y(p.Fa,p),uh(p,p.v)),p.v++,!0)}r.Fa=function(){if(this.u=null,lh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=rt(y(this.ab,this),p)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),gi(this),lh(this))};function Iu(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function lh(p){p.g=new mn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var x=$n(p.qa);Yt(x,"RID","rpc"),Yt(x,"SID",p.K),Yt(x,"AID",p.T),Yt(x,"CI",p.F?"0":"1"),!p.F&&p.ja&&Yt(x,"TO",p.ja),Yt(x,"TYPE","xmlhttp"),ls(p,x),p.m&&p.o&&Ks(x,p.m,p.o),p.L&&(p.g.I=p.L);var O=p.g;p=p.ia,O.L=1,O.v=Ws($n(x)),O.m=null,O.P=!0,vu(O,p)}r.Za=function(){this.C!=null&&(this.C=null,gi(this),rl(this),Z(19))};function nl(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function il(p,x){var O=null;if(p.g==x){nl(p),Iu(p),p.g=null;var K=2}else if(gn(p.h,x))O=x.D,Zc(p.h,x),K=1;else return;if(p.G!=0){if(x.o)if(K==1){O=x.m?x.m.length:0,x=Date.now()-x.F;var Te=p.B;K=Gt(),b(K,new Ge(K,O)),Li(p)}else Ko(p);else if(Te=x.s,Te==3||Te==0&&0<x.X||!(K==1&&Gd(p,x)||K==2&&rl(p)))switch(O&&0<O.length&&(x=p.h,x.i=x.i.concat(O)),Te){case 1:us(p,5);break;case 4:us(p,10);break;case 3:us(p,6);break;default:us(p,2)}}}function uh(p,x){let O=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(O*=2),O*x}function us(p,x){if(p.j.info("Error code "+x),x==2){var O=y(p.fb,p),K=p.Xa;const Te=!K;K=new ss(K||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Wo(K,"https"),Ws(K),Te?Hd(K.toString(),O):sh(K.toString(),O)}else Z(2);p.G=0,p.l&&p.l.sa(x),ch(p),el(p)}r.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function ch(p){if(p.G=0,p.ka=[],p.l){const x=eh(p.h);(x.length!=0||p.i.length!=0)&&(T(p.ka,x),T(p.ka,p.i),p.h.i.length=0,S(p.i),p.i.length=0),p.l.ra()}}function hh(p,x,O){var K=O instanceof ss?$n(O):new ss(O);if(K.g!="")x&&(K.g=x+"."+K.g),zs(K,K.s);else{var Te=u.location;K=Te.protocol,x=x?x+"."+Te.hostname:Te.hostname,Te=+Te.port;var Oe=new ss(null);K&&Wo(Oe,K),x&&(Oe.g=x),Te&&zs(Oe,Te),O&&(Oe.l=O),K=Oe}return O=p.D,x=p.ya,O&&x&&Yt(K,O,x),Yt(K,"VER",p.la),ls(p,K),K}function fh(p,x,O){if(x&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=p.Ca&&!p.pa?new ir(new os({eb:O})):new ir(p.pa),x.Ha(p.J),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}r=Au.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function sl(){}sl.prototype.g=function(p,x){return new yn(p,x)};function yn(p,x){v.call(this),this.g=new xu(x),this.l=p,this.h=x&&x.messageUrlParams||null,p=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(p?p["X-WebChannel-Content-Type"]=x.messageContentType:p={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(p?p["X-WebChannel-Client-Profile"]=x.va:p={"X-WebChannel-Client-Profile":x.va}),this.g.S=p,(p=x&&x.Sb)&&!I(p)&&(this.g.m=p),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!I(x)&&(this.g.D=x,p=this.h,p!==null&&x in p&&(p=this.h,x in p&&delete p[x])),this.j=new Mi(this)}E(yn,v),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Gr(this.g)},yn.prototype.o=function(p){var x=this.g;if(typeof p=="string"){var O={};O.__data__=p,p=O}else this.u&&(O={},O.__data__=ft(p),p=O);x.i.push(new Jc(x.Ya++,p)),x.G==3&&Li(x)},yn.prototype.N=function(){this.g.l=null,delete this.j,Gr(this.g),delete this.g,yn.aa.N.call(this)};function dh(p){qt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var x=p.__sm__;if(x){e:{for(const O in x){p=O;break e}p=void 0}(this.i=p)&&(p=this.i,x=x!==null&&p in x?x[p]:void 0),this.data=x}else this.data=p}E(dh,qt);function ph(){mt.call(this),this.status=1}E(ph,mt);function Mi(p){this.g=p}E(Mi,Au),Mi.prototype.ua=function(){b(this.g,"a")},Mi.prototype.ta=function(p){b(this.g,new dh(p))},Mi.prototype.sa=function(p){b(this.g,new ph)},Mi.prototype.ra=function(){b(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,CS=function(){return new sl},AS=function(){return Gt()},IS=Pt,Ag={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},is.NO_ERROR=0,is.TIMEOUT=8,is.HTTP_ERROR=6,Tf=is,jo.COMPLETE="complete",xS=jo,Tr.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",v.prototype.listen=v.prototype.K,nc=Tr,ir.prototype.listenOnce=ir.prototype.L,ir.prototype.getLastError=ir.prototype.Ka,ir.prototype.getLastErrorCode=ir.prototype.Ba,ir.prototype.getStatus=ir.prototype.Z,ir.prototype.getResponseJson=ir.prototype.Oa,ir.prototype.getResponseText=ir.prototype.oa,ir.prototype.send=ir.prototype.ea,ir.prototype.setWithCredentials=ir.prototype.Ha,TS=ir}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const wb="@firebase/firestore",bb="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new yS("@firebase/firestore");function Rl(){return Va.logLevel}function at(r,...e){if(Va.logLevel<=Ft.DEBUG){const t=e.map(Av);Va.debug(`Firestore (${cu}): ${r}`,...t)}}function Ns(r,...e){if(Va.logLevel<=Ft.ERROR){const t=e.map(Av);Va.error(`Firestore (${cu}): ${r}`,...t)}}function Jl(r,...e){if(Va.logLevel<=Ft.WARN){const t=e.map(Av);Va.warn(`Firestore (${cu}): ${r}`,...t)}}function Av(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r="Unexpected state"){const e=`FIRESTORE (${cu}) INTERNAL ASSERTION FAILED: `+r;throw Ns(e),new Error(e)}function zt(r,e){r||Et()}function xt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends uu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hn.UNAUTHENTICATED))}shutdown(){}}class MN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FN{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){zt(this.o===void 0);let n=this.i;const s=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve();let o=new ka;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ka,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ka)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(zt(typeof n.accessToken=="string"),new RS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zt(e===null||typeof e=="string"),new hn(e)}}class VN{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class UN{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new VN(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BN{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,vN(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){zt(this.o===void 0);const n=o=>{o.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,at("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const s=o=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Eb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(zt(typeof t.token=="string"),this.R=t.token,new Eb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=jN(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function At(r,e){return r<e?-1:r>e?1:0}function Cg(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),s=e.codePointAt(t);if(n!==s){if(n<128&&s<128)return At(n,s);{const o=kS(),l=$N(o.encode(Sb(r,t)),o.encode(Sb(e,t)));return l!==0?l:At(n,s)}}t+=n>65535?2:1}return At(r.length,e.length)}function Sb(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function $N(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return At(r[t],e[t]);return At(r.length,e.length)}function Xl(r,e,t){return r.length===e.length&&r.every((n,s)=>t(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=-62135596800,xb=1e6;class Fr{static now(){return Fr.fromMillis(Date.now())}static fromDate(e){return Fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*xb);return new Fr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tb)throw new yt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xb}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Fr(0,0))}static max(){return new Tt(new Fr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__name__";class zi{constructor(e,t,n){t===void 0?t=0:t>e.length&&Et(),n===void 0?n=e.length-t:n>e.length-t&&Et(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=zi.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return At(e.length,t.length)}static compareSegments(e,t){const n=zi.isNumericId(e),s=zi.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?zi.extractNumericId(e).compare(zi.extractNumericId(t)):Cg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class ur extends zi{construct(e,t,n){return new ur(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new yt(Ye.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new ur(t)}static emptyPath(){return new ur([])}}const zN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends zi{construct(e,t,n){return new Zr(e,t,n)}static isValidIdentifier(e){return zN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ib}static keyField(){return new Zr([Ib])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new yt(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new yt(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new yt(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(n+=u,s++):(o(),s++)}if(o(),l)throw new yt(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(t)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.path=e}static fromPath(e){return new wt(ur.fromString(e))}static fromName(e){return new wt(ur.fromString(e).popFirst(5))}static empty(){return new wt(ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ur.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ur.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new ur(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=-1;function qN(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=Tt.fromTimestamp(n===1e9?new Fr(t+1,0):new Fr(t,n));return new Oo(s,wt.empty(),e)}function WN(r){return new Oo(r.readTime,r.key,xc)}class Oo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Oo(Tt.min(),wt.empty(),xc)}static max(){return new Oo(Tt.max(),wt.empty(),xc)}}function HN(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=wt.comparator(r.documentKey,e.documentKey),t!==0?t:At(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(r){if(r.code!==Ye.FAILED_PRECONDITION||r.message!==QN)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Be((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Be?t:Be.resolve(t)}catch(t){return Be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Be.reject(t)}static resolve(e){return new Be((t,n)=>{t(e)})}static reject(e){return new Be((t,n)=>{n(e)})}static waitFor(e){return new Be((t,n)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&t()},c=>n(c))}),l=!0,o===s&&t()})}static or(e){let t=Be.resolve(!1);for(const n of e)t=t.next(s=>s?Be.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,o)=>{n.push(t.call(this,s,o))}),this.waitFor(n)}static mapArray(e,t){return new Be((n,s)=>{const o=e.length,l=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;t(e[h]).next(d=>{l[h]=d,++u,u===o&&n(l)},d=>s(d))}})}static doWhile(e,t){return new Be((n,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):n()};o()})}}function GN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Td.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=-1;function xd(r){return r==null}function Yf(r){return r===0&&1/r==-1/0}function YN(r){return typeof r=="number"&&Number.isInteger(r)&&!Yf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="";function JN(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ab(e)),e=XN(r.get(t),e);return Ab(e)}function XN(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case NS:t+="";break;default:t+=o}}return t}function Ab(r){return r+NS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ba(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function OS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hf(this.root,e,this.comparator,!0)}}class hf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Xr.RED,this.left=s??Xr.EMPTY,this.right=o??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Xr(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Xr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(e,t,n,s,o){return this}insert(e,t,n){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rb(this.data.getIterator())}getIteratorFrom(e){return new Rb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Vr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vr(this.comparator);return t.data=e,t}}class Rb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new Ri([])}unionWith(e){let t=new Vr(Zr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ri(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new DS("Invalid base64 string: "+o):o}}(e);return new tn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const ZN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(r){if(zt(!!r),typeof r=="string"){let e=0;const t=ZN.exec(r);if(zt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Er(r.seconds),nanos:Er(r.nanos)}}function Er(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lo(r){return typeof r=="string"?tn.fromBase64String(r):tn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="server_timestamp",MS="__type__",FS="__previous_value__",VS="__local_write_time__";function Rv(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[MS])===null||t===void 0?void 0:t.stringValue)===LS}function Id(r){const e=r.mapValue.fields[FS];return Rv(e)?Id(e):e}function Ic(r){const e=Do(r.mapValue.fields[VS].timestampValue);return new Fr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t,n,s,o,l,u,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const Jf="(default)";class Ac{constructor(e,t){this.projectId=e,this.database=t||Jf}static empty(){return new Ac("","")}get isDefaultDatabase(){return this.database===Jf}isEqual(e){return e instanceof Ac&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="__type__",tO="__max__",ff={mapValue:{}},BS="__vector__",Xf="value";function Mo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rv(r)?4:nO(r)?9007199254740991:rO(r)?10:11:Et()}function ts(r,e){if(r===e)return!0;const t=Mo(r);if(t!==Mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ic(r).isEqual(Ic(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Do(s.timestampValue),u=Do(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(s,o){return Lo(s.bytesValue).isEqual(Lo(o.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,o){return Er(s.geoPointValue.latitude)===Er(o.geoPointValue.latitude)&&Er(s.geoPointValue.longitude)===Er(o.geoPointValue.longitude)}(r,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Er(s.integerValue)===Er(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Er(s.doubleValue),u=Er(o.doubleValue);return l===u?Yf(l)===Yf(u):isNaN(l)&&isNaN(u)}return!1}(r,e);case 9:return Xl(r.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Cb(l)!==Cb(u))return!1;for(const c in l)if(l.hasOwnProperty(c)&&(u[c]===void 0||!ts(l[c],u[c])))return!1;return!0}(r,e);default:return Et()}}function Cc(r,e){return(r.values||[]).find(t=>ts(t,e))!==void 0}function Zl(r,e){if(r===e)return 0;const t=Mo(r),n=Mo(e);if(t!==n)return At(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(r.booleanValue,e.booleanValue);case 2:return function(o,l){const u=Er(o.integerValue||o.doubleValue),c=Er(l.integerValue||l.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(r,e);case 3:return kb(r.timestampValue,e.timestampValue);case 4:return kb(Ic(r),Ic(e));case 5:return Cg(r.stringValue,e.stringValue);case 6:return function(o,l){const u=Lo(o),c=Lo(l);return u.compareTo(c)}(r.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),c=l.split("/");for(let h=0;h<u.length&&h<c.length;h++){const d=At(u[h],c[h]);if(d!==0)return d}return At(u.length,c.length)}(r.referenceValue,e.referenceValue);case 8:return function(o,l){const u=At(Er(o.latitude),Er(l.latitude));return u!==0?u:At(Er(o.longitude),Er(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Pb(r.arrayValue,e.arrayValue);case 10:return function(o,l){var u,c,h,d;const m=o.fields||{},y=l.fields||{},_=(u=m[Xf])===null||u===void 0?void 0:u.arrayValue,E=(c=y[Xf])===null||c===void 0?void 0:c.arrayValue,S=At(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:Pb(_,E)}(r.mapValue,e.mapValue);case 11:return function(o,l){if(o===ff.mapValue&&l===ff.mapValue)return 0;if(o===ff.mapValue)return 1;if(l===ff.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=l.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const y=Cg(c[m],d[m]);if(y!==0)return y;const _=Zl(u[c[m]],h[d[m]]);if(_!==0)return _}return At(c.length,d.length)}(r.mapValue,e.mapValue);default:throw Et()}}function kb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return At(r,e);const t=Do(r),n=Do(e),s=At(t.seconds,n.seconds);return s!==0?s:At(t.nanos,n.nanos)}function Pb(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Zl(t[s],n[s]);if(o)return o}return At(t.length,n.length)}function eu(r){return Rg(r)}function Rg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Do(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Lo(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return wt.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=Rg(o);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of n)o?o=!1:s+=",",s+=`${l}:${Rg(t.fields[l])}`;return s+"}"}(r.mapValue):Et()}function xf(r){switch(Mo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Id(r);return e?16+xf(e):16;case 5:return 2*r.stringValue.length;case 6:return Lo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,o)=>s+xf(o),0)}(r.arrayValue);case 10:case 11:return function(n){let s=0;return Ba(n.fields,(o,l)=>{s+=o.length+xf(l)}),s}(r.mapValue);default:throw Et()}}function kg(r){return!!r&&"integerValue"in r}function kv(r){return!!r&&"arrayValue"in r}function Nb(r){return!!r&&"nullValue"in r}function Ob(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function If(r){return!!r&&"mapValue"in r}function rO(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[US])===null||t===void 0?void 0:t.stringValue)===BS}function cc(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ba(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=cc(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cc(r.arrayValue.values[t]);return e}return Object.assign({},r)}function nO(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!If(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(t)}setAll(e){let t=Zr.emptyPath(),n={},s=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,n,s),n={},s=[],t=u.popLast()}l?n[u.lastSegment()]=cc(l):s.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());If(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];If(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Ba(t,(s,o)=>e[s]=o);for(const s of n)delete e[s]}clone(){return new ui(cc(this.value))}}function jS(r){const e=[];return Ba(r.fields,(t,n)=>{const s=new Zr([t]);if(If(n)){const o=jS(n.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t,n,s,o,l,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new fn(e,0,Tt.min(),Tt.min(),Tt.min(),ui.empty(),0)}static newFoundDocument(e,t,n,s){return new fn(e,1,t,Tt.min(),n,s,0)}static newNoDocument(e,t){return new fn(e,2,t,Tt.min(),Tt.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,Tt.min(),Tt.min(),ui.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t){this.position=e,this.inclusive=t}}function Db(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],l=r.position[s];if(o.field.isKeyField()?n=wt.comparator(wt.fromName(l.referenceValue),t.key):n=Zl(l,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Lb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ts(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t="asc"){this.field=e,this.dir=t}}function iO(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{}class Mr extends $S{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new oO(e,t,n):t==="array-contains"?new uO(e,n):t==="in"?new cO(e,n):t==="not-in"?new hO(e,n):t==="array-contains-any"?new fO(e,n):new Mr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new aO(e,n):new lO(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Zl(t,this.value)):t!==null&&Mo(this.value)===Mo(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends $S{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new rs(e,t)}matches(e){return zS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zS(r){return r.op==="and"}function qS(r){return sO(r)&&zS(r)}function sO(r){for(const e of r.filters)if(e instanceof rs)return!1;return!0}function Pg(r){if(r instanceof Mr)return r.field.canonicalString()+r.op.toString()+eu(r.value);if(qS(r))return r.filters.map(e=>Pg(e)).join(",");{const e=r.filters.map(t=>Pg(t)).join(",");return`${r.op}(${e})`}}function WS(r,e){return r instanceof Mr?function(n,s){return s instanceof Mr&&n.op===s.op&&n.field.isEqual(s.field)&&ts(n.value,s.value)}(r,e):r instanceof rs?function(n,s){return s instanceof rs&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((o,l,u)=>o&&WS(l,s.filters[u]),!0):!1}(r,e):void Et()}function HS(r){return r instanceof Mr?function(t){return`${t.field.canonicalString()} ${t.op} ${eu(t.value)}`}(r):r instanceof rs?function(t){return t.op.toString()+" {"+t.getFilters().map(HS).join(" ,")+"}"}(r):"Filter"}class oO extends Mr{constructor(e,t,n){super(e,t,n),this.key=wt.fromName(n.referenceValue)}matches(e){const t=wt.comparator(e.key,this.key);return this.matchesComparison(t)}}class aO extends Mr{constructor(e,t){super(e,"in",t),this.keys=QS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lO extends Mr{constructor(e,t){super(e,"not-in",t),this.keys=QS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QS(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>wt.fromName(n.referenceValue))}class uO extends Mr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kv(t)&&Cc(t.arrayValue,this.value)}}class cO extends Mr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cc(this.value.arrayValue,t)}}class hO extends Mr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Cc(this.value.arrayValue,t)}}class fO extends Mr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Cc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,t=null,n=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function Mb(r,e=null,t=[],n=[],s=null,o=null,l=null){return new dO(r,e,t,n,s,o,l)}function Pv(r){const e=xt(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>Pg(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>eu(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>eu(n)).join(",")),e.le=t}return e.le}function Nv(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!iO(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!WS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Lb(r.startAt,e.startAt)&&Lb(r.endAt,e.endAt)}function Ng(r){return wt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t=null,n=[],s=[],o=null,l="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function pO(r,e,t,n,s,o,l,u){return new Ad(r,e,t,n,s,o,l,u)}function Ov(r){return new Ad(r)}function Fb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function mO(r){return r.collectionGroup!==null}function hc(r){const e=xt(r);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Vr(Zr.comparator);return l.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new ed(o,n))}),t.has(Zr.keyField().canonicalString())||e.he.push(new ed(Zr.keyField(),n))}return e.he}function Zi(r){const e=xt(r);return e.Pe||(e.Pe=gO(e,hc(r))),e.Pe}function gO(r,e){if(r.limitType==="F")return Mb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new ed(s.field,o)});const t=r.endAt?new Zf(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Zf(r.startAt.position,r.startAt.inclusive):null;return Mb(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Og(r,e,t){return new Ad(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cd(r,e){return Nv(Zi(r),Zi(e))&&r.limitType===e.limitType}function KS(r){return`${Pv(Zi(r))}|lt:${r.limitType}`}function kl(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>HS(s)).join(", ")}]`),xd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>eu(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>eu(s)).join(",")),`Target(${n})`}(Zi(r))}; limitType=${r.limitType})`}function Rd(r,e){return e.isFoundDocument()&&function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):wt.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(r,e)&&function(n,s){for(const o of hc(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(r,e)&&function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0}(r,e)&&function(n,s){return!(n.startAt&&!function(l,u,c){const h=Db(l,u,c);return l.inclusive?h<=0:h<0}(n.startAt,hc(n),s)||n.endAt&&!function(l,u,c){const h=Db(l,u,c);return l.inclusive?h>=0:h>0}(n.endAt,hc(n),s))}(r,e)}function yO(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function GS(r){return(e,t)=>{let n=!1;for(const s of hc(r)){const o=vO(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function vO(r,e,t){const n=r.field.isKeyField()?wt.comparator(e.key,t.key):function(o,l,u){const c=l.data.field(o),h=u.data.field(o);return c!==null&&h!==null?Zl(c,h):Et()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,(t,n)=>{for(const[s,o]of n)e(s,o)})}isEmpty(){return OS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new pr(wt.comparator);function Os(){return _O}const YS=new pr(wt.comparator);function ic(...r){let e=YS;for(const t of r)e=e.insert(t.key,t);return e}function JS(r){let e=YS;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ga(){return fc()}function XS(){return fc()}function fc(){return new ja(r=>r.toString(),(r,e)=>r.isEqual(e))}const wO=new pr(wt.comparator),bO=new Vr(wt.comparator);function Nt(...r){let e=bO;for(const t of r)e=e.add(t);return e}const EO=new Vr(At);function SO(){return EO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yf(e)?"-0":e}}function ZS(r){return{integerValue:""+r}}function TO(r,e){return YN(e)?ZS(e):Dv(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function xO(r,e,t){return r instanceof td?function(s,o){const l={fields:{[MS]:{stringValue:LS},[VS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Rv(o)&&(o=Id(o)),o&&(l.fields[FS]=o),{mapValue:l}}(t,e):r instanceof Rc?tT(r,e):r instanceof kc?rT(r,e):function(s,o){const l=eT(s,o),u=Vb(l)+Vb(s.Ie);return kg(l)&&kg(s.Ie)?ZS(u):Dv(s.serializer,u)}(r,e)}function IO(r,e,t){return r instanceof Rc?tT(r,e):r instanceof kc?rT(r,e):t}function eT(r,e){return r instanceof rd?function(n){return kg(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class td extends kd{}class Rc extends kd{constructor(e){super(),this.elements=e}}function tT(r,e){const t=nT(e);for(const n of r.elements)t.some(s=>ts(s,n))||t.push(n);return{arrayValue:{values:t}}}class kc extends kd{constructor(e){super(),this.elements=e}}function rT(r,e){let t=nT(e);for(const n of r.elements)t=t.filter(s=>!ts(s,n));return{arrayValue:{values:t}}}class rd extends kd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Vb(r){return Er(r.integerValue||r.doubleValue)}function nT(r){return kv(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function AO(r,e){return r.field.isEqual(e.field)&&function(n,s){return n instanceof Rc&&s instanceof Rc||n instanceof kc&&s instanceof kc?Xl(n.elements,s.elements,ts):n instanceof rd&&s instanceof rd?ts(n.Ie,s.Ie):n instanceof td&&s instanceof td}(r.transform,e.transform)}class CO{constructor(e,t){this.version=e,this.transformResults=t}}class Cs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cs}static exists(e){return new Cs(void 0,e)}static updateTime(e){return new Cs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Af(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Pd{}function iT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new oT(r.key,Cs.none()):new zc(r.key,r.data,Cs.none());{const t=r.data,n=ui.empty();let s=new Vr(Zr.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?n.delete(o):n.set(o,l),s=s.add(o)}return new $a(r.key,n,new Ri(s.toArray()),Cs.none())}}function RO(r,e,t){r instanceof zc?function(s,o,l){const u=s.value.clone(),c=Bb(s.fieldTransforms,o,l.transformResults);u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(r,e,t):r instanceof $a?function(s,o,l){if(!Af(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Bb(s.fieldTransforms,o,l.transformResults),c=o.data;c.setAll(sT(s)),c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(r,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function dc(r,e,t,n){return r instanceof zc?function(o,l,u,c){if(!Af(o.precondition,l))return u;const h=o.value.clone(),d=jb(o.fieldTransforms,c,l);return h.setAll(d),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(r,e,t,n):r instanceof $a?function(o,l,u,c){if(!Af(o.precondition,l))return u;const h=jb(o.fieldTransforms,c,l),d=l.data;return d.setAll(sT(o)),d.setAll(h),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(r,e,t,n):function(o,l,u){return Af(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(r,e,t)}function kO(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=eT(n.transform,s||null);o!=null&&(t===null&&(t=ui.empty()),t.set(n.field,o))}return t||null}function Ub(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Xl(n,s,(o,l)=>AO(o,l))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class zc extends Pd{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $a extends Pd{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function sT(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Bb(r,e,t){const n=new Map;zt(r.length===t.length);for(let s=0;s<t.length;s++){const o=r[s],l=o.transform,u=e.data.field(o.field);n.set(o.field,IO(l,u,t[s]))}return n}function jb(r,e,t){const n=new Map;for(const s of r){const o=s.transform,l=t.data.field(s.field);n.set(s.field,xO(o,l,e))}return n}class oT extends Pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PO extends Pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&RO(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=XS();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const c=iT(l,u);c!==null&&n.set(s.key,c),l.isValidDocument()||l.convertToNoDocument(Tt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(t,n)=>Ub(t,n))&&Xl(this.baseMutations,e.baseMutations,(t,n)=>Ub(t,n))}}class Lv{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){zt(e.mutations.length===n.length);let s=function(){return wO}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,n[l].version);return new Lv(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ar,Mt;function LO(r){switch(r){case Ye.OK:return Et();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0;default:return Et()}}function aT(r){if(r===void 0)return Ns("GRPC error has no .code"),Ye.UNKNOWN;switch(r){case Ar.OK:return Ye.OK;case Ar.CANCELLED:return Ye.CANCELLED;case Ar.UNKNOWN:return Ye.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return Ye.INTERNAL;case Ar.UNAVAILABLE:return Ye.UNAVAILABLE;case Ar.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Ar.NOT_FOUND:return Ye.NOT_FOUND;case Ar.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Ar.ABORTED:return Ye.ABORTED;case Ar.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Ar.DATA_LOSS:return Ye.DATA_LOSS;default:return Et()}}(Mt=Ar||(Ar={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new Po([4294967295,4294967295],0);function $b(r){const e=kS().encode(r),t=new SS;return t.update(e),new Uint8Array(t.digest())}function zb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Po([t,n],0),new Po([s,o],0)]}class Mv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sc(`Invalid padding: ${t}`);if(n<0)throw new sc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new sc(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new sc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Po.fromNumber(this.Ee)}Ae(e,t,n){let s=e.add(t.multiply(Po.fromNumber(n)));return s.compare(MO)===1&&(s=new Po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=$b(e),[n,s]=zb(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(n,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Mv(o,s,t);return n.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=$b(e),[n,s]=zb(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(n,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,qc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Nd(Tt.min(),s,new pr(At),Os(),Nt())}}class qc{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new qc(n,t,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,n,s){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=s}}class lT{constructor(e,t){this.targetId=e,this.ge=t}}class uT{constructor(e,t,n=tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class qb{constructor(){this.pe=0,this.ye=Wb(),this.we=tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Nt(),t=Nt(),n=Nt();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Et()}}),new qc(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=Wb()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,zt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class FO{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Os(),this.$e=df(),this.Ue=df(),this.Ke=new pr(At)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,n=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Ng(o))if(n===0){const l=new wt(o.path);this.ze(t,l,fn.newNoDocument(l,Tt.min()))}else zt(n===1);else{const l=this.et(t);if(l!==n){const u=this.tt(e),c=u?this.nt(u,e,l):1;if(c!==0){this.Ye(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=Lo(n).toUint8Array()}catch(c){if(c instanceof DS)return Jl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Mv(l,s,o)}catch(c){return Jl(c instanceof sc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ee===0?null:u}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let s=0;return n.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&Ng(u.target)){const c=new wt(u.target.path);this._t(c).has(l)||this.ut(l,c)||this.ze(l,c,fn.newNoDocument(c,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let n=Nt();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Nd(e,t,this.Ke,this.Qe,n);return this.Qe=Os(),this.$e=df(),this.Ue=df(),this.Ke=new pr(At),s}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new qb,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Vr(At),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Vr(At),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||at("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new qb),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function df(){return new pr(wt.comparator)}function Wb(){return new pr(wt.comparator)}const VO={asc:"ASCENDING",desc:"DESCENDING"},UO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"};class jO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dg(r,e){return r.useProto3Json||xd(e)?e:{value:e}}function nd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function $O(r,e){return nd(r,e.toTimestamp())}function es(r){return zt(!!r),Tt.fromTimestamp(function(t){const n=Do(t);return new Fr(n.seconds,n.nanos)}(r))}function Fv(r,e){return Lg(r,e).canonicalString()}function Lg(r,e){const t=function(s){return new ur(["projects",s.projectId,"databases",s.database])}(r).child("documents");return e===void 0?t:t.child(e)}function hT(r){const e=ur.fromString(r);return zt(gT(e)),e}function Mg(r,e){return Fv(r.databaseId,e.path)}function km(r,e){const t=hT(e);if(t.get(1)!==r.databaseId.projectId)throw new yt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new yt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new wt(dT(t))}function fT(r,e){return Fv(r.databaseId,e)}function zO(r){const e=hT(r);return e.length===4?ur.emptyPath():dT(e)}function Fg(r){return new ur(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function dT(r){return zt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Hb(r,e,t){return{name:Mg(r,e),fields:t.value.mapValue.fields}}function qO(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Et()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,d){return h.useProto3Json?(zt(d===void 0||typeof d=="string"),tn.fromBase64String(d||"")):(zt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),tn.fromUint8Array(d||new Uint8Array))}(r,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const d=h.code===void 0?Ye.UNKNOWN:aT(h.code);return new yt(d,h.message||"")}(l);t=new uT(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=km(r,n.document.name),o=es(n.document.updateTime),l=n.document.createTime?es(n.document.createTime):Tt.min(),u=new ui({mapValue:{fields:n.document.fields}}),c=fn.newFoundDocument(s,o,l,u),h=n.targetIds||[],d=n.removedTargetIds||[];t=new Cf(h,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=km(r,n.document),o=n.readTime?es(n.readTime):Tt.min(),l=fn.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Cf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=km(r,n.document),o=n.removedTargetIds||[];t=new Cf([],o,s,null)}else{if(!("filter"in e))return Et();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,l=new DO(s,o),u=n.targetId;t=new lT(u,l)}}return t}function WO(r,e){let t;if(e instanceof zc)t={update:Hb(r,e.key,e.value)};else if(e instanceof oT)t={delete:Mg(r,e.key)};else if(e instanceof $a)t={update:Hb(r,e.key,e.data),updateMask:eD(e.fieldMask)};else{if(!(e instanceof PO))return Et();t={verify:Mg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(o,l){const u=l.transform;if(u instanceof td)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Rc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof kc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof rd)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Et()}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:$O(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Et()}(r,e.precondition)),t}function HO(r,e){return r&&r.length>0?(zt(e!==void 0),r.map(t=>function(s,o){let l=s.updateTime?es(s.updateTime):es(o);return l.isEqual(Tt.min())&&(l=es(o)),new CO(l,s.transformResults||[])}(t,e))):[]}function QO(r,e){return{documents:[fT(r,e.path)]}}function KO(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=fT(r,s);const o=function(h){if(h.length!==0)return mT(rs.create(h,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(d=>function(y){return{field:Pl(y.field),direction:JO(y.dir)}}(d))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Dg(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:s}}function GO(r){let e=zO(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){zt(n===1);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(m){const y=pT(m);return y instanceof rs&&qS(y)?y.getFilters():[y]}(t.where));let l=[];t.orderBy&&(l=function(m){return m.map(y=>function(E){return new ed(Nl(E.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(y))}(t.orderBy));let u=null;t.limit&&(u=function(m){let y;return y=typeof m=="object"?m.value:m,xd(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(m){const y=!!m.before,_=m.values||[];return new Zf(_,y)}(t.startAt));let h=null;return t.endAt&&(h=function(m){const y=!m.before,_=m.values||[];return new Zf(_,y)}(t.endAt)),pO(e,s,l,o,u,"F",c,h)}function YO(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Nl(t.unaryFilter.field);return Mr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Nl(t.unaryFilter.field);return Mr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Nl(t.unaryFilter.field);return Mr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Nl(t.unaryFilter.field);return Mr.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Et()}}(r):r.fieldFilter!==void 0?function(t){return Mr.create(Nl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return rs.create(t.compositeFilter.filters.map(n=>pT(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Et()}}(t.compositeFilter.op))}(r):Et()}function JO(r){return VO[r]}function XO(r){return UO[r]}function ZO(r){return BO[r]}function Pl(r){return{fieldPath:r.canonicalString()}}function Nl(r){return Zr.fromServerFormat(r.fieldPath)}function mT(r){return r instanceof Mr?function(t){if(t.op==="=="){if(Ob(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NAN"}};if(Nb(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ob(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NOT_NAN"}};if(Nb(t.value))return{unaryFilter:{field:Pl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pl(t.field),op:XO(t.op),value:t.value}}}(r):r instanceof rs?function(t){const n=t.getFilters().map(s=>mT(s));return n.length===1?n[0]:{compositeFilter:{op:ZO(t.op),filters:n}}}(r):Et()}function eD(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t,n,s,o=Tt.min(),l=Tt.min(),u=tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.Tt=e}}function rD(r){const e=GO({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Og(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.Tn=new iD}addToCollectionParentIndex(e,t){return this.Tn.add(t),Be.resolve()}getCollectionParents(e,t){return Be.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Be.resolve()}deleteFieldIndex(e,t){return Be.resolve()}deleteAllFieldIndexes(e){return Be.resolve()}createTargetIndexes(e,t){return Be.resolve()}getDocumentsMatchingTarget(e,t){return Be.resolve(null)}getIndexType(e,t){return Be.resolve(0)}getFieldIndexes(e,t){return Be.resolve([])}getNextCollectionGroupToUpdate(e){return Be.resolve(null)}getMinOffset(e,t){return Be.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,t){return Be.resolve(Oo.min())}updateCollectionGroup(e,t,n){return Be.resolve()}updateIndexEntries(e,t){return Be.resolve()}}class iD{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Vr(ur.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Vr(ur.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(yT,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new tu(0)}static Kn(){return new tu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="LruGarbageCollector",sD=1048576;function Gb([r,e],[t,n]){const s=At(r,t);return s===0?At(e,n):s}class oD{constructor(e){this.Hn=e,this.buffer=new Vr(Gb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Gb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aD{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){at(Kb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fu(t)?at(Kb,"Ignoring IndexedDB error during garbage collection: ",t):await hu(t)}await this.er(3e5)})}}class lD{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Be.resolve(Td.ae);const n=new oD(t);return this.tr.forEachTarget(e,s=>n.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>n.Zn(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Be.resolve(Qb)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qb):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,s,o,l,u,c,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,l=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(n=m,u=Date.now(),this.removeTargets(e,n,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(m=>(h=Date.now(),Rl()<=Ft.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-d}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),Be.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:m})))}}function uD(r,e){return new lD(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.changes=new ja(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Be.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&dc(n.mutation,s,Ri.empty(),Fr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Nt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Nt()){const s=ga();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(o=>{let l=ic();return o.forEach((u,c)=>{l=l.insert(u,c.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=ga();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Nt()))}populateOverlays(e,t,n){const s=[];return n.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,n,s){let o=Os();const l=fc(),u=function(){return fc()}();return t.forEach((c,h)=>{const d=n.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof $a)?o=o.insert(h.key,h):d!==void 0?(l.set(h.key,d.mutation.getFieldMask()),dc(d.mutation,h,d.mutation.getFieldMask(),Fr.now())):l.set(h.key,Ri.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,d)=>l.set(h,d)),t.forEach((h,d)=>{var m;return u.set(h,new hD(d,(m=l.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,t){const n=fc();let s=new pr((l,u)=>l-u),o=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let d=n.get(c)||Ri.empty();d=u.applyToLocalView(h,d),n.set(c,d);const m=(s.get(u.batchId)||Nt()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,d=c.value,m=XS();d.forEach(y=>{if(!o.has(y)){const _=iT(t.get(y),n.get(y));_!==null&&m.set(y,_),o=o.add(y)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Be.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(l){return wt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):Be.resolve(ga());let u=xc,c=o;return l.next(h=>Be.forEach(h,(d,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),o.get(d)?Be.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{c=c.insert(d,y)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,Nt())).next(d=>({batchId:u,changes:JS(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wt(t)).next(n=>{let s=ic();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let l=ic();return this.indexManager.getCollectionParents(e,o).next(u=>Be.forEach(u,c=>{const h=function(m,y){return new Ad(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next(d=>{d.forEach((m,y)=>{l=l.insert(m,y)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s))).next(l=>{o.forEach((c,h)=>{const d=h.getKey();l.get(d)===null&&(l=l.insert(d,fn.newInvalidDocument(d)))});let u=ic();return l.forEach((c,h)=>{const d=o.get(c);d!==void 0&&dc(d.mutation,h,Ri.empty(),Fr.now()),Rd(t,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Be.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:es(s.createTime)}}(t)),Be.resolve()}getNamedQuery(e,t){return Be.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:rD(s.bundledQuery),readTime:es(s.readTime)}}(t)),Be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.overlays=new pr(wt.comparator),this.Rr=new Map}getOverlay(e,t){return Be.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ga();return Be.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&n.set(s,o)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,o)=>{this.Et(e,t,o)}),Be.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Rr.get(n);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(n)),Be.resolve()}getOverlaysForCollection(e,t,n){const s=ga(),o=t.length+1,l=new wt(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>n&&s.set(c.getKey(),c)}return Be.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new pr((h,d)=>h-d);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let d=o.get(h.largestBatchId);d===null&&(d=ga(),o=o.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const u=ga(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>u.set(h,d)),!(u.size()>=s)););return Be.resolve(u)}Et(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(n.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new OO(t,n));let o=this.Rr.get(t);o===void 0&&(o=Nt(),this.Rr.set(t,o)),this.Rr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return Be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.Vr=new Vr(Wr.mr),this.gr=new Vr(Wr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Wr(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new Wr(e,t))}Sr(e,t){e.forEach(n=>this.removeReference(n,t))}br(e){const t=new wt(new ur([])),n=new Wr(t,e),s=new Wr(t,e+1),o=[];return this.gr.forEachInRange([n,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new wt(new ur([])),n=new Wr(t,e),s=new Wr(t,e+1);let o=Nt();return this.gr.forEachInRange([n,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Wr(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Wr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return wt.comparator(e.key,t.key)||At(e.Cr,t.Cr)}static pr(e,t){return At(e.Cr,t.Cr)||wt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Vr(Wr.mr)}checkEmpty(e){return Be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new NO(o,t,n,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new Wr(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Be.resolve(l)}lookupMutationBatch(e,t){return Be.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Nr(n),o=s<0?0:s;return Be.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Be.resolve(this.mutationQueue.length===0?Cv:this.Fr-1)}getAllMutationBatches(e){return Be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Wr(t,0),s=new Wr(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([n,s],l=>{const u=this.Or(l.Cr);o.push(u)}),Be.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Vr(At);return t.forEach(s=>{const o=new Wr(s,0),l=new Wr(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{n=n.add(u.Cr)})}),Be.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;wt.isDocumentKey(o)||(o=o.child(""));const l=new Wr(new wt(o),0);let u=new Vr(At);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Cr)),!0)},l),Be.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(n=>{const s=this.Or(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){zt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return Be.forEach(t.mutations,s=>{const o=new Wr(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new Wr(t,0),s=this.Mr.firstAfterOrEqual(n);return Be.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Be.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.kr=e,this.docs=function(){return new pr(wt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Be.resolve(n?n.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let n=Os();return t.forEach(s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():fn.newInvalidDocument(s))}),Be.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=Os();const l=t.path,u=new wt(l.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||HN(WN(d),n)<=0||(s.has(d.key)||Rd(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return Be.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Et()}qr(e,t){return Be.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new vD(this)}getSize(e){return Be.resolve(this.size)}}class vD extends cD{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(n)}),Be.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.persistence=e,this.Qr=new ja(t=>Pv(t),Nv),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Vv,this.targetCount=0,this.Kr=tu.Un()}forEachTarget(e,t){return this.Qr.forEach((n,s)=>t(s)),Be.resolve()}getLastRemoteSnapshotVersion(e){return Be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Be.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Be.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new tu(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Be.resolve()}updateTargetData(e,t){return this.zn(t),Be.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,Be.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),Be.waitFor(o).next(()=>s)}getTargetCount(e){return Be.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Be.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),Be.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Be.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),Be.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return Be.resolve(n)}containsKey(e,t){return Be.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Td(0),this.zr=!1,this.zr=!0,this.jr=new mD,this.referenceDelegate=e(this),this.Hr=new _D(this),this.indexManager=new nD,this.remoteDocumentCache=function(s){return new yD(s)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new tD(t),this.Yr=new dD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new gD(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){at("MemoryPersistence","Starting transaction:",e);const s=new wD(this.Gr.next());return this.referenceDelegate.Zr(),n(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return Be.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class wD extends KN{constructor(e){super(),this.currentSequenceNumber=e}}class Uv{constructor(e){this.persistence=e,this.ti=new Vv,this.ni=null}static ri(e){return new Uv(e)}get ii(){if(this.ni)return this.ni;throw Et()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Be.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Be.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Be.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.ii,n=>{const s=wt.fromPath(n);return this.si(e,s).next(o=>{o||t.removeEntry(s,Tt.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Be.or([()=>Be.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class id{constructor(e,t){this.persistence=e,this.oi=new ja(n=>JN(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=uD(this,t)}static ri(e,t){return new id(e,t)}Zr(){}Xr(e){return Be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return Be.forEach(this.oi,(n,s)=>this.ar(e,n,s).next(o=>o?Be.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(u=>{u||(n++,o.removeEntry(l,Tt.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Be.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Be.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Be.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Be.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}ar(e,t,n){return Be.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return Be.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=s}static Yi(e,t){let n=Nt(),s=Nt();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Bv(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return m2()?8:GN(d2())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,n).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new bD;return this._s(e,t,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>o.result)}us(e,t,n,s){return n.documentReadCount<this.es?(Rl()<=Ft.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",kl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Be.resolve()):(Rl()<=Ft.DEBUG&&at("QueryEngine","Query:",kl(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ts*s?(Rl()<=Ft.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",kl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zi(t))):Be.resolve())}rs(e,t){if(Fb(t))return Be.resolve(null);let n=Zi(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Og(t,null,"F"),n=Zi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const l=Nt(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,n).next(c=>{const h=this.cs(t,u);return this.ls(t,h,l,c.readTime)?this.rs(e,Og(t,null,"F")):this.hs(e,h,t,c)}))})))}ss(e,t,n,s){return Fb(t)||s.isEqual(Tt.min())?Be.resolve(null):this.ns.getDocuments(e,n).next(o=>{const l=this.cs(t,o);return this.ls(t,l,n,s)?Be.resolve(null):(Rl()<=Ft.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),kl(t)),this.hs(e,l,t,qN(s,xc)).next(u=>u))})}cs(e,t){let n=new Vr(GS(e));return t.forEach((s,o)=>{Rd(e,o)&&(n=n.add(o))}),n}ls(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,n){return Rl()<=Ft.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",kl(t)),this.ns.getDocumentsMatchingQuery(e,t,Oo.min(),n)}hs(e,t,n,s){return this.ns.getDocumentsMatchingQuery(e,n,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="LocalStore",SD=3e8;class TD{constructor(e,t,n,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new pr(At),this.Is=new ja(o=>Pv(o),Nv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fD(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function xD(r,e,t,n){return new TD(r,e,t,n)}async function _T(r,e){const t=xt(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(o=>{const l=[],u=[];let c=Nt();for(const h of s){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of o){u.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(n,c).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function ID(r,e){const t=xt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,c,h,d){const m=h.batch,y=m.keys();let _=Be.resolve();return y.forEach(E=>{_=_.next(()=>d.getEntry(c,E)).next(S=>{const T=h.docVersions.get(E);zt(T!==null),S.version.compareTo(T)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),d.addEntry(S)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(t,n,e,o).next(()=>o.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let c=Nt();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function wT(r){const e=xt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function AD(r,e){const t=xt(r),n=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const u=[];e.targetChanges.forEach((d,m)=>{const y=s.get(m);if(!y)return;u.push(t.Hr.removeMatchingKeys(o,d.removedDocuments,m).next(()=>t.Hr.addMatchingKeys(o,d.addedDocuments,m)));let _=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(tn.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,n)),s=s.insert(m,_),function(S,T,V){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=SD?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(y,_,d)&&u.push(t.Hr.updateTargetData(o,_))});let c=Os(),h=Nt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),u.push(CD(o,l,e.documentUpdates).next(d=>{c=d.Vs,h=d.fs})),!n.isEqual(Tt.min())){const d=t.Hr.getLastRemoteSnapshotVersion(o).next(m=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,n));u.push(d)}return Be.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(t.Ts=s,o))}function CD(r,e,t){let n=Nt(),s=Nt();return t.forEach(o=>n=n.add(o)),e.getEntries(r,n).next(o=>{let l=Os();return t.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(Tt.min())?(e.removeEntry(u,c.readTime),l=l.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),l=l.insert(u,c)):at(jv,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Vs:l,fs:s}})}function RD(r,e){const t=xt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Cv),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function kD(r,e){const t=xt(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.Hr.getTargetData(n,e).next(o=>o?(s=o,Be.resolve(s)):t.Hr.allocateTargetId(n).next(l=>(s=new Ao(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.Ts.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function Vg(r,e,t){const n=xt(r),s=n.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,l=>n.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!fu(l))throw l;at(jv,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ts=n.Ts.remove(e),n.Is.delete(s.target)}function Yb(r,e,t){const n=xt(r);let s=Tt.min(),o=Nt();return n.persistence.runTransaction("Execute query","readwrite",l=>function(c,h,d){const m=xt(c),y=m.Is.get(d);return y!==void 0?Be.resolve(m.Ts.get(y)):m.Hr.getTargetData(h,d)}(n,l,Zi(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(l,u.targetId).next(c=>{o=c})}).next(()=>n.Ps.getDocumentsMatchingQuery(l,e,t?s:Tt.min(),t?o:Nt())).next(u=>(PD(n,yO(e),u),{documents:u,gs:o})))}function PD(r,e,t){let n=r.Es.get(e)||Tt.min();t.forEach((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),r.Es.set(e,n)}class Jb{constructor(){this.activeTargetIds=SO()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ND{constructor(){this.ho=new Jb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Jb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="ConnectivityMonitor";class Zb{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){at(Xb,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){at(Xb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf=null;function Ug(){return pf===null?pf=function(){return 268435456+Math.round(2147483648*Math.random())}():pf++,"0x"+pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="RestConnection",DD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LD{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${s}`,this.wo=this.databaseId.database===Jf?`project_id=${n}`:`project_id=${n}&database_id=${s}`}So(e,t,n,s,o){const l=Ug(),u=this.bo(e,t.toUriEncodedString());at(Pm,`Sending RPC '${e}' ${l}:`,u,n);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,o),this.vo(e,u,c,n).then(h=>(at(Pm,`Received RPC '${e}' ${l}: `,h),h),h=>{throw Jl(Pm,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",n),h})}Co(e,t,n,s,o,l){return this.So(e,t,n,s,o)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),n&&n.headers.forEach((s,o)=>e[o]=s)}bo(e,t){const n=DD[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class FD extends LD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,s){const o=Ug();return new Promise((l,u)=>{const c=new TS;c.setWithCredentials(!0),c.listenOnce(xS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Tf.NO_ERROR:const d=c.getResponseJson();at(ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),l(d);break;case Tf.TIMEOUT:at(ln,`RPC '${e}' ${o} timed out`),u(new yt(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const m=c.getStatus();if(at(ln,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const E=function(T){const V=T.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(V)>=0?V:Ye.UNKNOWN}(_.status);u(new yt(E,_.message))}else u(new yt(Ye.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new yt(Ye.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{at(ln,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);at(ln,`RPC '${e}' ${o} sending request:`,s),c.send(t,"POST",h,n,15)})}Wo(e,t,n){const s=Ug(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=CS(),u=AS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const d=o.join("");at(ln,`Creating RPC '${e}' stream ${s}: ${d}`,c);const m=l.createWebChannel(d,c);let y=!1,_=!1;const E=new MD({Fo:T=>{_?at(ln,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(y||(at(ln,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),at(ln,`RPC '${e}' stream ${s} sending:`,T),m.send(T))},Mo:()=>m.close()}),S=(T,V,I)=>{T.listen(V,k=>{try{I(k)}catch(W){setTimeout(()=>{throw W},0)}})};return S(m,nc.EventType.OPEN,()=>{_||(at(ln,`RPC '${e}' stream ${s} transport opened.`),E.Qo())}),S(m,nc.EventType.CLOSE,()=>{_||(_=!0,at(ln,`RPC '${e}' stream ${s} transport closed`),E.Uo())}),S(m,nc.EventType.ERROR,T=>{_||(_=!0,Jl(ln,`RPC '${e}' stream ${s} transport errored:`,T),E.Uo(new yt(Ye.UNAVAILABLE,"The operation could not be completed")))}),S(m,nc.EventType.MESSAGE,T=>{var V;if(!_){const I=T.data[0];zt(!!I);const k=I,W=(k==null?void 0:k.error)||((V=k[0])===null||V===void 0?void 0:V.error);if(W){at(ln,`RPC '${e}' stream ${s} received error:`,W);const H=W.status;let j=function(M){const F=Ar[M];if(F!==void 0)return aT(F)}(H),P=W.message;j===void 0&&(j=Ye.INTERNAL,P="Unknown error status: "+H+" with message "+W.message),_=!0,E.Uo(new yt(j,P)),m.close()}else at(ln,`RPC '${e}' stream ${s} received:`,I),E.Ko(I)}}),S(u,IS.STAT_EVENT,T=>{T.stat===Ag.PROXY?at(ln,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Ag.NOPROXY&&at(ln,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.$o()},0),E}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(r){return new jO(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-n);s>0&&at("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="PersistentStream";class ET{constructor(e,t,n,s,o,l,u,c){this.Ti=e,this.n_=n,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new bT(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(Ns(t.toString()),Ns("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.i_===t&&this.V_(n,s)},n=>{e(()=>{const s=new yt(Ye.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(s)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{n(()=>this.m_(s))}),this.stream.onMessage(s=>{n(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return at(eE,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(at(eE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VD extends ET{constructor(e,t,n,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=qO(this.serializer,e),n=function(o){if(!("targetChange"in o))return Tt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Tt.min():l.readTime?es(l.readTime):Tt.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Fg(this.serializer),t.addTarget=function(o,l){let u;const c=l.target;if(u=Ng(c)?{documents:QO(o,c)}:{query:KO(o,c).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=cT(o,l.resumeToken);const h=Dg(o,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(Tt.min())>0){u.readTime=nd(o,l.snapshotVersion.toTimestamp());const h=Dg(o,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const n=YO(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Fg(this.serializer),t.removeTarget=e,this.I_(t)}}class UD extends ET{constructor(e,t,n,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return zt(!!e.streamToken),this.lastStreamToken=e.streamToken,zt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=HO(e.writeResults,e.commitTime),n=es(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Fg(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>WO(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{}class jD extends BD{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new yt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,Lg(t,n),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new yt(Ye.UNKNOWN,o.toString())})}Co(e,t,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,Lg(t,n),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new yt(Ye.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class $D{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ns(t),this.N_=!1):at("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="RemoteStore";class zD{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{n.enqueueAndForget(async()=>{za(this)&&(at(Ua,"Restarting streams for network reachability change."),await async function(c){const h=xt(c);h.W_.add(4),await Wc(h),h.j_.set("Unknown"),h.W_.delete(4),await Dd(h)}(this))})}),this.j_=new $D(n,s)}}async function Dd(r){if(za(r))for(const e of r.G_)await e(!0)}async function Wc(r){for(const e of r.G_)await e(!1)}function ST(r,e){const t=xt(r);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Wv(t)?qv(t):du(t).c_()&&zv(t,e))}function $v(r,e){const t=xt(r),n=du(t);t.K_.delete(e),n.c_()&&TT(t,e),t.K_.size===0&&(n.c_()?n.P_():za(t)&&t.j_.set("Unknown"))}function zv(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}du(r).y_(e)}function TT(r,e){r.H_.Ne(e),du(r).w_(e)}function qv(r){r.H_=new FO({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),du(r).start(),r.j_.B_()}function Wv(r){return za(r)&&!du(r).u_()&&r.K_.size>0}function za(r){return xt(r).W_.size===0}function xT(r){r.H_=void 0}async function qD(r){r.j_.set("Online")}async function WD(r){r.K_.forEach((e,t)=>{zv(r,e)})}async function HD(r,e){xT(r),Wv(r)?(r.j_.q_(e),qv(r)):r.j_.set("Unknown")}async function QD(r,e,t){if(r.j_.set("Online"),e instanceof uT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(r,e)}catch(n){at(Ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await sd(r,n)}else if(e instanceof Cf?r.H_.We(e):e instanceof lT?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Tt.min()))try{const n=await wT(r.localStore);t.compareTo(n)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.K_.get(h);d&&o.K_.set(h,d.withResumeToken(c.resumeToken,l))}}),u.targetMismatches.forEach((c,h)=>{const d=o.K_.get(c);if(!d)return;o.K_.set(c,d.withResumeToken(tn.EMPTY_BYTE_STRING,d.snapshotVersion)),TT(o,c);const m=new Ao(d.target,c,h,d.sequenceNumber);zv(o,m)}),o.remoteSyncer.applyRemoteEvent(u)}(r,t)}catch(n){at(Ua,"Failed to raise snapshot:",n),await sd(r,n)}}async function sd(r,e,t){if(!fu(e))throw e;r.W_.add(1),await Wc(r),r.j_.set("Offline"),t||(t=()=>wT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{at(Ua,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Dd(r)})}function IT(r,e){return e().catch(t=>sd(r,t,e))}async function Ld(r){const e=xt(r),t=Fo(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:Cv;for(;KD(e);)try{const s=await RD(e.localStore,n);if(s===null){e.U_.length===0&&t.P_();break}n=s.batchId,GD(e,s)}catch(s){await sd(e,s)}AT(e)&&CT(e)}function KD(r){return za(r)&&r.U_.length<10}function GD(r,e){r.U_.push(e);const t=Fo(r);t.c_()&&t.S_&&t.b_(e.mutations)}function AT(r){return za(r)&&!Fo(r).u_()&&r.U_.length>0}function CT(r){Fo(r).start()}async function YD(r){Fo(r).C_()}async function JD(r){const e=Fo(r);for(const t of r.U_)e.b_(t.mutations)}async function XD(r,e,t){const n=r.U_.shift(),s=Lv.from(n,e,t);await IT(r,()=>r.remoteSyncer.applySuccessfulWrite(s)),await Ld(r)}async function ZD(r,e){e&&Fo(r).S_&&await async function(n,s){if(function(l){return LO(l)&&l!==Ye.ABORTED}(s.code)){const o=n.U_.shift();Fo(n).h_(),await IT(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Ld(n)}}(r,e),AT(r)&&CT(r)}async function tE(r,e){const t=xt(r);t.asyncQueue.verifyOperationInProgress(),at(Ua,"RemoteStore received new credentials");const n=za(t);t.W_.add(3),await Wc(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Dd(t)}async function e4(r,e){const t=xt(r);e?(t.W_.delete(2),await Dd(t)):e||(t.W_.add(2),await Wc(t),t.j_.set("Unknown"))}function du(r){return r.J_||(r.J_=function(t,n,s){const o=xt(t);return o.M_(),new VD(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(r.datastore,r.asyncQueue,{xo:qD.bind(null,r),No:WD.bind(null,r),Lo:HD.bind(null,r),p_:QD.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Wv(r)?qv(r):r.j_.set("Unknown")):(await r.J_.stop(),xT(r))})),r.J_}function Fo(r){return r.Y_||(r.Y_=function(t,n,s){const o=xt(t);return o.M_(),new UD(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:YD.bind(null,r),Lo:ZD.bind(null,r),D_:JD.bind(null,r),v_:XD.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await Ld(r)):(await r.Y_.stop(),r.U_.length>0&&(at(Ua,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const l=Date.now()+n,u=new Hv(e,t,l,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qv(r,e){if(Ns("AsyncQueue",`${e}: ${r}`),fu(r))return new yt(Ye.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||wt.comparator(t.key,n.key):(t,n)=>wt.comparator(t.key,n.key),this.keyedMap=ic(),this.sortedSet=new pr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ml;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.Z_=new pr(wt.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Et():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class ru{constructor(e,t,n,s,o,l,u,c,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,s,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new ru(e,t,Ml.emptySet(t),l,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class r4{constructor(){this.queries=nE(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const s=xt(t),o=s.queries;s.queries=nE(),o.forEach((l,u)=>{for(const c of u.ta)c.onError(n)})})(this,new yt(Ye.ABORTED,"Firestore shutting down"))}}function nE(){return new ja(r=>KS(r),Cd)}async function n4(r,e){const t=xt(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(n=2):(o=new t4,n=e.ra()?0:1);try{switch(n){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=Qv(l,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Kv(t)}async function i4(r,e){const t=xt(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function s4(r,e){const t=xt(r);let n=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(n=!0);l.ea=s}}n&&Kv(t)}function o4(r,e,t){const n=xt(r),s=n.queries.get(e);if(s)for(const o of s.ta)o.onError(t);n.queries.delete(e)}function Kv(r){r.ia.forEach(e=>{e.next()})}var Bg,iE;(iE=Bg||(Bg={}))._a="default",iE.Cache="cache";class a4{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new ru(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.key=e}}class kT{constructor(e){this.key=e}}class l4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Nt(),this.mutatedKeys=Nt(),this.ya=GS(e),this.wa=new Ml(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new rE,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const y=s.get(d),_=Rd(this.query,m)?m:null,E=!!y&&this.mutatedKeys.has(y.key),S=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;y&&_?y.data.isEqual(_.data)?E!==S&&(n.track({type:3,doc:_}),T=!0):this.va(y,_)||(n.track({type:2,doc:_}),T=!0,(c&&this.ya(_,c)>0||h&&this.ya(_,h)<0)&&(u=!0)):!y&&_?(n.track({type:0,doc:_}),T=!0):y&&!_&&(n.track({type:1,doc:y}),T=!0,(c||h)&&(u=!0)),T&&(_?(l=l.add(_),o=S?o.add(d):o.delete(d)):(l=l.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const d=this.query.limitType==="F"?l.last():l.first();l=l.delete(d.key),o=o.delete(d.key),n.track({type:1,doc:d})}return{wa:l,Da:n,ls:u,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((d,m)=>function(_,E){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return S(_)-S(E)}(d.type,m.type)||this.ya(d.doc,m.doc)),this.Ca(n),s=s!=null&&s;const u=t&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,h=c!==this.ga;return this.ga=c,l.length!==0||h?{snapshot:new ru(this.query,e.wa,o,l,e.mutatedKeys,c===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new rE,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Nt(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new kT(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new RT(n))}),t}Oa(e){this.fa=e.gs,this.pa=Nt();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return ru.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Gv="SyncEngine";class u4{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class c4{constructor(e){this.key=e,this.Ba=!1}}class h4{constructor(e,t,n,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new ja(u=>KS(u),Cd),this.qa=new Map,this.Qa=new Set,this.$a=new pr(wt.comparator),this.Ua=new Map,this.Ka=new Vv,this.Wa={},this.Ga=new Map,this.za=tu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function f4(r,e,t=!0){const n=MT(r);let s;const o=n.ka.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await PT(n,e,t,!0),s}async function d4(r,e){const t=MT(r);await PT(t,e,!0,!1)}async function PT(r,e,t,n){const s=await kD(r.localStore,Zi(e)),o=s.targetId,l=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await p4(r,e,o,l==="current",s.resumeToken)),r.isPrimaryClient&&t&&ST(r.remoteStore,s),u}async function p4(r,e,t,n,s){r.Ha=(m,y,_)=>async function(S,T,V,I){let k=T.view.ba(V);k.ls&&(k=await Yb(S.localStore,T.query,!1).then(({documents:P})=>T.view.ba(P,k)));const W=I&&I.targetChanges.get(T.targetId),H=I&&I.targetMismatches.get(T.targetId)!=null,j=T.view.applyChanges(k,S.isPrimaryClient,W,H);return oE(S,T.targetId,j.Ma),j.snapshot}(r,m,y,_);const o=await Yb(r.localStore,e,!0),l=new l4(e,o.gs),u=l.ba(o.documents),c=qc.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),h=l.applyChanges(u,r.isPrimaryClient,c);oE(r,t,h.Ma);const d=new u4(e,t,l);return r.ka.set(e,d),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),h.snapshot}async function m4(r,e,t){const n=xt(r),s=n.ka.get(e),o=n.qa.get(s.targetId);if(o.length>1)return n.qa.set(s.targetId,o.filter(l=>!Cd(l,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Vg(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&$v(n.remoteStore,s.targetId),jg(n,s.targetId)}).catch(hu)):(jg(n,s.targetId),await Vg(n.localStore,s.targetId,!0))}async function g4(r,e){const t=xt(r),n=t.ka.get(e),s=t.qa.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),$v(t.remoteStore,n.targetId))}async function y4(r,e,t){const n=T4(r);try{const s=await function(l,u){const c=xt(l),h=Fr.now(),d=u.reduce((_,E)=>_.add(E.key),Nt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Os(),S=Nt();return c.ds.getEntries(_,d).next(T=>{E=T,E.forEach((V,I)=>{I.isValidDocument()||(S=S.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,E)).next(T=>{m=T;const V=[];for(const I of u){const k=kO(I,m.get(I.key).overlayedDocument);k!=null&&V.push(new $a(I.key,k,jS(k.value.mapValue),Cs.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,V,u)}).next(T=>{y=T;const V=T.applyToLocalDocumentSet(m,S);return c.documentOverlayCache.saveOverlays(_,T.batchId,V)})}).then(()=>({batchId:y.batchId,changes:JS(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(l,u,c){let h=l.Wa[l.currentUser.toKey()];h||(h=new pr(At)),h=h.insert(u,c),l.Wa[l.currentUser.toKey()]=h}(n,s.batchId,t),await Hc(n,s.changes),await Ld(n.remoteStore)}catch(s){const o=Qv(s,"Failed to persist write");t.reject(o)}}async function NT(r,e){const t=xt(r);try{const n=await AD(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ua.get(o);l&&(zt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?zt(l.Ba):s.removedDocuments.size>0&&(zt(l.Ba),l.Ba=!1))}),await Hc(t,n,e)}catch(n){await hu(n)}}function sE(r,e,t){const n=xt(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const c=xt(l);c.onlineState=u;let h=!1;c.queries.forEach((d,m)=>{for(const y of m.ta)y.sa(u)&&(h=!0)}),h&&Kv(c)}(n.eventManager,e),s.length&&n.La.p_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function v4(r,e,t){const n=xt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Ua.get(e),o=s&&s.key;if(o){let l=new pr(wt.comparator);l=l.insert(o,fn.newNoDocument(o,Tt.min()));const u=Nt().add(o),c=new Nd(Tt.min(),new Map,new pr(At),l,u);await NT(n,c),n.$a=n.$a.remove(o),n.Ua.delete(e),Yv(n)}else await Vg(n.localStore,e,!1).then(()=>jg(n,e,t)).catch(hu)}async function _4(r,e){const t=xt(r),n=e.batch.batchId;try{const s=await ID(t.localStore,e);DT(t,n,null),OT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Hc(t,s)}catch(s){await hu(s)}}async function w4(r,e,t){const n=xt(r);try{const s=await function(l,u){const c=xt(l);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(zt(m!==null),d=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(n.localStore,e);DT(n,e,t),OT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Hc(n,s)}catch(s){await hu(s)}}function OT(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function DT(r,e,t){const n=xt(r);let s=n.Wa[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Wa[n.currentUser.toKey()]=s}}function jg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(n=>{r.Ka.containsKey(n)||LT(r,n)})}function LT(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&($v(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ua.delete(t),Yv(r))}function oE(r,e,t){for(const n of t)n instanceof RT?(r.Ka.addReference(n.key,e),b4(r,n)):n instanceof kT?(at(Gv,"Document no longer in limbo: "+n.key),r.Ka.removeReference(n.key,e),r.Ka.containsKey(n.key)||LT(r,n.key)):Et()}function b4(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(at(Gv,"New document in limbo: "+t),r.Qa.add(n),Yv(r))}function Yv(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new wt(ur.fromString(e)),n=r.za.next();r.Ua.set(n,new c4(t)),r.$a=r.$a.insert(t,n),ST(r.remoteStore,new Ao(Zi(Ov(t.path)),n,"TargetPurposeLimboResolution",Td.ae))}}async function Hc(r,e,t){const n=xt(r),s=[],o=[],l=[];n.ka.isEmpty()||(n.ka.forEach((u,c)=>{l.push(n.Ha(c,e,t).then(h=>{var d;if((h||t)&&n.isPrimaryClient){const m=h?!h.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Bv.Yi(c.targetId,h);o.push(m)}}))}),await Promise.all(l),n.La.p_(s),await async function(c,h){const d=xt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Be.forEach(h,y=>Be.forEach(y.Hi,_=>d.persistence.referenceDelegate.addReference(m,y.targetId,_)).next(()=>Be.forEach(y.Ji,_=>d.persistence.referenceDelegate.removeReference(m,y.targetId,_)))))}catch(m){if(!fu(m))throw m;at(jv,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const _=d.Ts.get(y),E=_.snapshotVersion,S=_.withLastLimboFreeSnapshotVersion(E);d.Ts=d.Ts.insert(y,S)}}}(n.localStore,o))}async function E4(r,e){const t=xt(r);if(!t.currentUser.isEqual(e)){at(Gv,"User change. New user:",e.toKey());const n=await _T(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(c=>{c.reject(new yt(Ye.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hc(t,n.Rs)}}function S4(r,e){const t=xt(r),n=t.Ua.get(e);if(n&&n.Ba)return Nt().add(n.key);{let s=Nt();const o=t.qa.get(e);if(!o)return s;for(const l of o){const u=t.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function MT(r){const e=xt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v4.bind(null,e),e.La.p_=s4.bind(null,e.eventManager),e.La.Ja=o4.bind(null,e.eventManager),e}function T4(r){const e=xt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w4.bind(null,e),e}class od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Od(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return xD(this.persistence,new ED,e.initialUser,this.serializer)}Xa(e){return new vT(Uv.ri,this.serializer)}Za(e){return new ND}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}od.provider={build:()=>new od};class x4 extends od{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){zt(this.persistence.referenceDelegate instanceof id);const n=this.persistence.referenceDelegate.garbageCollector;return new aD(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new vT(n=>id.ri(n,t),this.serializer)}}class $g{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>sE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=E4.bind(null,this.syncEngine),await e4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r4}()}createDatastore(e){const t=Od(e.databaseInfo.databaseId),n=function(o){return new FD(o)}(e.databaseInfo);return function(o,l,u,c){return new jD(o,l,u,c)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,o,l,u){return new zD(n,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>sE(this.syncEngine,t,0),function(){return Zb.D()?new Zb:new OD}())}createSyncEngine(e,t){return function(s,o,l,u,c,h,d){const m=new h4(s,o,l,u,c,h);return d&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=xt(s);at(Ua,"RemoteStore shutting down."),o.W_.add(5),await Wc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}$g.provider={build:()=>new $g};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ns("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="FirestoreClient";class A4{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=hn.UNAUTHENTICATED,this.clientId=PS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async l=>{at(Vo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(at(Vo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Qv(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Om(r,e){r.asyncQueue.verifyOperationInProgress(),at(Vo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async s=>{n.isEqual(s)||(await _T(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function aE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await C4(r);at(Vo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>tE(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>tE(e.remoteStore,s)),r._onlineComponents=e}async function C4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(Vo,"Using user provided OfflineComponentProvider");try{await Om(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ye.FAILED_PRECONDITION||s.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Jl("Error using user provided cache. Falling back to memory cache: "+t),await Om(r,new od)}}else at(Vo,"Using default OfflineComponentProvider"),await Om(r,new x4(void 0));return r._offlineComponents}async function FT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(Vo,"Using user provided OnlineComponentProvider"),await aE(r,r._uninitializedComponentsProvider._online)):(at(Vo,"Using default OnlineComponentProvider"),await aE(r,new $g))),r._onlineComponents}function R4(r){return FT(r).then(e=>e.syncEngine)}async function lE(r){const e=await FT(r),t=e.eventManager;return t.onListen=f4.bind(null,e.syncEngine),t.onUnlisten=m4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g4.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(r,e,t){if(!t)throw new yt(Ye.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function k4(r,e,t,n){if(e===!0&&n===!0)throw new yt(Ye.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function cE(r){if(!wt.isDocumentKey(r))throw new yt(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function hE(r){if(wt.isDocumentKey(r))throw new yt(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Jv(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Et()}function pc(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new yt(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jv(r);throw new yt(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="firestore.googleapis.com",fE=!0;class dE{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new yt(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BT,this.ssl=fE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:fE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sD)throw new yt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new yt(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new yt(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new yt(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new yt(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new LN;switch(n.type){case"firstParty":return new UN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new yt(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=uE.get(t);n&&(at("ComponentProvider","Removing Datastore"),uE.delete(t),n.terminate())}(this),Promise.resolve()}}function P4(r,e,t,n={}){var s;const o=(r=pc(r,Md))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:r._getEmulatorOptions()}),u=`${e}:${t}`;o.host!==BT&&o.host!==u&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:n});if(!Qf(c,l)&&(r._setSettings(c),n.mockUserToken)){let h,d;if(typeof n.mockUserToken=="string")h=n.mockUserToken,d=hn.MOCK_USER;else{h=f2(n.mockUserToken,(s=r._app)===null||s===void 0?void 0:s.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new yt(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new hn(m)}r._authCredentials=new MN(new RS(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Fd(this.firestore,e,this._query)}}class ci{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ci(this.firestore,e,this._key)}}class No extends Fd{constructor(e,t,n){super(e,t,Ov(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ci(this.firestore,null,new wt(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function pE(r,e,...t){if(r=Yl(r),UT("collection","path",e),r instanceof Md){const n=ur.fromString(e,...t);return hE(n),new No(r,null,n)}{if(!(r instanceof ci||r instanceof No))throw new yt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ur.fromString(e,...t));return hE(n),new No(r.firestore,null,n)}}function N4(r,e,...t){if(r=Yl(r),arguments.length===1&&(e=PS.newId()),UT("doc","path",e),r instanceof Md){const n=ur.fromString(e,...t);return cE(n),new ci(r,null,new wt(n))}{if(!(r instanceof ci||r instanceof No))throw new yt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ur.fromString(e,...t));return cE(n),new ci(r.firestore,r instanceof No?r.converter:null,new wt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="AsyncQueue";class gE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new bT(this,"async_queue_retry"),this.Su=()=>{const n=Nm();n&&at(mE,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=Nm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Nm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ka;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!fu(e))throw e;at(mE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(n);throw Ns("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.pu=!1,n))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Hv.createAndSchedule(this,e,t,n,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Et()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function yE(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1}(r,["next","error","complete"])}class ad extends Md{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new gE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gE(e),this._firestoreClient=void 0,await e}}}function O4(r,e){const t=typeof r=="object"?r:EN(),n=typeof r=="string"?r:Jf,s=yN(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=c2("firestore");o&&P4(s,...o)}return s}function jT(r){if(r._terminated)throw new yt(Ye.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||D4(r),r._firestoreClient}function D4(r){var e,t,n;const s=r._freezeSettings(),o=function(u,c,h,d){return new eO(u,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VT(d.experimentalLongPollingOptions),d.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new A4(r._authCredentials,r._appCheckCredentials,r._queue,o,r._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nu(tn.fromBase64String(e))}catch(t){throw new yt(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nu(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new yt(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yt(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yt(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^__.*__$/;class M4{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new $a(e,this.data,this.fieldMask,t,this.fieldTransforms):new zc(e,this.data,t,this.fieldTransforms)}}function zT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class t0{constructor(e,t,n,s,o,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new t0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.$u(e),s}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ld(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(zT(this.Lu)&&L4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class F4{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Od(e)}ju(e,t,n,s=!1){return new t0({Lu:e,methodName:t,zu:n,path:Zr.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V4(r){const e=r._freezeSettings(),t=Od(r._databaseId);return new F4(r._databaseId,!!e.ignoreUndefinedProperties,t)}function U4(r,e,t,n,s,o={}){const l=r.ju(o.merge||o.mergeFields?2:0,e,t,s);QT("Data must be an object, but it was:",l,n);const u=WT(n,l);let c,h;if(o.merge)c=new Ri(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const d=[];for(const m of o.mergeFields){const y=B4(e,m,t);if(!l.contains(y))throw new yt(Ye.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);$4(d,y)||d.push(y)}c=new Ri(d),h=l.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=l.fieldTransforms;return new M4(new ui(u),c,h)}function qT(r,e){if(HT(r=Yl(r)))return QT("Unsupported field value:",e,r),WT(r,e);if(r instanceof $T)return function(n,s){if(!zT(s.Lu))throw s.Wu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,s){const o=[];let l=0;for(const u of n){let c=qT(u,s.Ku(l));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),l++}return{arrayValue:{values:o}}}(r,e)}return function(n,s){if((n=Yl(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return TO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Fr.fromDate(n);return{timestampValue:nd(s.serializer,o)}}if(n instanceof Fr){const o=new Fr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:nd(s.serializer,o)}}if(n instanceof Zv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof nu)return{bytesValue:cT(s.serializer,n._byteString)};if(n instanceof ci){const o=s.databaseId,l=n.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Fv(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof e0)return function(l,u){return{mapValue:{fields:{[US]:{stringValue:BS},[Xf]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return Dv(u.serializer,h)})}}}}}}(n,s);throw s.Wu(`Unsupported field value: ${Jv(n)}`)}(r,e)}function WT(r,e){const t={};return OS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(r,(n,s)=>{const o=qT(s,e.qu(n));o!=null&&(t[n]=o)}),{mapValue:{fields:t}}}function HT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Fr||r instanceof Zv||r instanceof nu||r instanceof ci||r instanceof $T||r instanceof e0)}function QT(r,e,t){if(!HT(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const n=Jv(t);throw n==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+n)}}function B4(r,e,t){if((e=Yl(e))instanceof Xv)return e._internalPath;if(typeof e=="string")return KT(r,e);throw ld("Field path arguments must be of type string or ",r,!1,void 0,t)}const j4=new RegExp("[~\\*/\\[\\]]");function KT(r,e,t){if(e.search(j4)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Xv(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ld(r,e,t,n,s){const o=n&&!n.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||l)&&(c+=" (found",o&&(c+=` in field ${n}`),l&&(c+=` in document ${s}`),c+=")"),new yt(Ye.INVALID_ARGUMENT,u+r+c)}function $4(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ci(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class z4 extends GT{data(){return super.data()}}function YT(r,e){return typeof e=="string"?KT(r,e):e instanceof Xv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new yt(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class W4{convertValue(e,t="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ba(e,(s,o)=>{n[s]=this.convertValue(o,t)}),n}convertVectorValue(e){var t,n,s;const o=(s=(n=(t=e.fields)===null||t===void 0?void 0:t[Xf].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(l=>Er(l.doubleValue));return new e0(o)}convertGeoPoint(e){return new Zv(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Id(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){const t=Do(e);return new Fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ur.fromString(e);zt(gT(n));const s=new Ac(n.get(1),n.get(3)),o=new wt(n.popFirst(5));return s.isEqual(t)||Ns(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(r,e,t){let n;return n=r?r.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JT extends GT{constructor(e,t,n,s,o,l){super(e,t,n,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(YT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Rf extends JT{data(e={}){return super.data(e)}}class Q4{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new oc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Rf(this._firestore,this._userDataWriter,n.key,n,new oc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yt(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const c=new Rf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new oc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Rf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new oc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),d=l.indexOf(u.doc.key)),{type:K4(u.type),doc:c,oldIndex:h,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function K4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}class XT extends W4{constructor(e){super(),this.firestore=e}convertBytes(e){return new nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ci(this.firestore,null,t)}}function G4(r,e){const t=pc(r.firestore,ad),n=N4(r),s=H4(r.converter,e);return J4(t,[U4(V4(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Cs.exists(!1))]).then(()=>n)}function Y4(r,...e){var t,n,s;r=Yl(r);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||yE(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(yE(e[l])){const m=e[l];e[l]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[l+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[l+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,d;if(r instanceof ci)h=pc(r.firestore,ad),d=Ov(r._key.path),c={next:m=>{e[l]&&e[l](X4(h,r,m))},error:e[l+1],complete:e[l+2]};else{const m=pc(r,Fd);h=pc(m.firestore,ad),d=m._query;const y=new XT(h);c={next:_=>{e[l]&&e[l](new Q4(h,y,m,_))},error:e[l+1],complete:e[l+2]},q4(r._query)}return function(y,_,E,S){const T=new I4(S),V=new a4(_,T,E);return y.asyncQueue.enqueueAndForget(async()=>n4(await lE(y),V)),()=>{T.su(),y.asyncQueue.enqueueAndForget(async()=>i4(await lE(y),V))}}(jT(h),d,u,c)}function J4(r,e){return function(n,s){const o=new ka;return n.asyncQueue.enqueueAndForget(async()=>y4(await R4(n),s,o)),o.promise}(jT(r),e)}function X4(r,e,t){const n=t.docs.get(e._key),s=new XT(r);return new JT(r,s,e._key,n,new oc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){cu=s})(bN),Gf(new Sc("firestore",(n,{instanceIdentifier:s,options:o})=>{const l=n.getProvider("app").getImmediate(),u=new ad(new FN(n.getProvider("auth-internal")),new BN(l,n.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new yt(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ac(h.options.projectId,d)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Ll(wb,bb,e),Ll(wb,bb,"esm2017")})();const Z4={apiKey:"AIzaSyAhfo3784zKGWVJRQbhbZEuxZpdCP4yw5k",authDomain:"chat-reactjs-54898.firebaseapp.com",projectId:"chat-reactjs-54898",storageBucket:"chat-reactjs-54898.firebasestorage.app",messagingSenderId:"250177889716",appId:"1:250177889716:web:6385820525645a5a8e3ee1",measurementId:"G-YMS03SMKBZ"},eL=wS(Z4),vE=O4(eL);var r0=Object.defineProperty,tL=Object.getOwnPropertyDescriptor,rL=Object.getOwnPropertyNames,nL=Object.prototype.hasOwnProperty,Tn=(r,e)=>()=>(r&&(e=r(r=0)),e),Ke=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),pu=(r,e)=>{for(var t in e)r0(r,t,{get:e[t],enumerable:!0})},iL=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of rL(e))!nL.call(r,s)&&s!==t&&r0(r,s,{get:()=>e[s],enumerable:!(n=tL(e,s))||n.enumerable});return r},Kt=r=>iL(r0({},"__esModule",{value:!0}),r),je=Tn(()=>{}),jt={};pu(jt,{_debugEnd:()=>by,_debugProcess:()=>wy,_events:()=>My,_eventsCount:()=>Fy,_exiting:()=>oy,_fatalExceptions:()=>yy,_getActiveHandles:()=>sx,_getActiveRequests:()=>ix,_kill:()=>uy,_linkedBinding:()=>rx,_maxListeners:()=>Ly,_preload_modules:()=>Oy,_rawDebug:()=>ny,_startProfilerIdleNotifier:()=>Ey,_stopProfilerIdleNotifier:()=>Sy,_tickCallback:()=>_y,abort:()=>Ay,addListener:()=>Vy,allowedNodeEnvironmentFlags:()=>my,arch:()=>qg,argv:()=>Qg,argv0:()=>Ny,assert:()=>ox,binding:()=>Xg,chdir:()=>ty,config:()=>ay,cpuUsage:()=>ac,cwd:()=>ey,debugPort:()=>Py,default:()=>i0,dlopen:()=>nx,domain:()=>sy,emit:()=>zy,emitWarning:()=>Jg,env:()=>Hg,execArgv:()=>Kg,execPath:()=>ky,exit:()=>dy,features:()=>gy,hasUncaughtExceptionCaptureCallback:()=>ax,hrtime:()=>kf,kill:()=>fy,listeners:()=>ux,memoryUsage:()=>hy,moduleLoadList:()=>iy,nextTick:()=>ex,off:()=>By,on:()=>bs,once:()=>Uy,openStdin:()=>py,pid:()=>Cy,platform:()=>Wg,ppid:()=>Ry,prependListener:()=>qy,prependOnceListener:()=>Wy,reallyExit:()=>ly,release:()=>ry,removeAllListeners:()=>$y,removeListener:()=>jy,resourceUsage:()=>cy,setSourceMapsEnabled:()=>Dy,setUncaughtExceptionCaptureCallback:()=>vy,stderr:()=>xy,stdin:()=>Iy,stdout:()=>Ty,title:()=>zg,umask:()=>Zg,uptime:()=>lx,version:()=>Gg,versions:()=>Yg});function n0(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function sL(){!Pa||!ya||(Pa=!1,ya.length?Yi=ya.concat(Yi):mc=-1,Yi.length&&ZT())}function ZT(){if(!Pa){var r=setTimeout(sL,0);Pa=!0;for(var e=Yi.length;e;){for(ya=Yi,Yi=[];++mc<e;)ya&&ya[mc].run();mc=-1,e=Yi.length}ya=null,Pa=!1,clearTimeout(r)}}function ex(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Yi.push(new tx(r,e)),Yi.length===1&&!Pa&&setTimeout(ZT,0)}function tx(r,e){this.fun=r,this.array=e}function un(){}function rx(r){n0("_linkedBinding")}function nx(r){n0("dlopen")}function ix(){return[]}function sx(){return[]}function ox(r,e){if(!r)throw new Error(e||"assertion error")}function ax(){return!1}function lx(){return xs.now()/1e3}function kf(r){var e=Math.floor((Date.now()-xs.now())*.001),t=xs.now()*.001,n=Math.floor(t)+e,s=Math.floor(t%1*1e9);return r&&(n=n-r[0],s=s-r[1],s<0&&(n--,s+=Pf)),[n,s]}function bs(){return i0}function ux(r){return[]}var Yi,Pa,ya,mc,zg,qg,Wg,Hg,Qg,Kg,Gg,Yg,Jg,Xg,Zg,ey,ty,ry,ny,iy,sy,oy,ay,ly,uy,ac,cy,hy,fy,dy,py,my,gy,yy,vy,_y,wy,by,Ey,Sy,Ty,xy,Iy,Ay,Cy,Ry,ky,Py,Ny,Oy,Dy,xs,Dm,Pf,Ly,My,Fy,Vy,Uy,By,jy,$y,zy,qy,Wy,i0,oL=Tn(()=>{je(),ze(),$e(),Yi=[],Pa=!1,mc=-1,tx.prototype.run=function(){this.fun.apply(null,this.array)},zg="browser",qg="x64",Wg="browser",Hg={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Qg=["/usr/bin/node"],Kg=[],Gg="v16.8.0",Yg={},Jg=function(r,e){console.warn((e?e+": ":"")+r)},Xg=function(r){n0("binding")},Zg=function(r){return 0},ey=function(){return"/"},ty=function(r){},ry={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},ny=un,iy=[],sy={},oy=!1,ay={},ly=un,uy=un,ac=function(){return{}},cy=ac,hy=ac,fy=un,dy=un,py=un,my={},gy={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},yy=un,vy=un,_y=un,wy=un,by=un,Ey=un,Sy=un,Ty=void 0,xy=void 0,Iy=void 0,Ay=un,Cy=2,Ry=1,ky="/bin/usr/node",Py=9229,Ny="node",Oy=[],Dy=un,xs={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},xs.now===void 0&&(Dm=Date.now(),xs.timing&&xs.timing.navigationStart&&(Dm=xs.timing.navigationStart),xs.now=()=>Date.now()-Dm),Pf=1e9,kf.bigint=function(r){var e=kf(r);return typeof BigInt>"u"?e[0]*Pf+e[1]:BigInt(e[0]*Pf)+BigInt(e[1])},Ly=10,My={},Fy=0,Vy=bs,Uy=bs,By=bs,jy=bs,$y=bs,zy=un,qy=bs,Wy=bs,i0={version:Gg,versions:Yg,arch:qg,platform:Wg,release:ry,_rawDebug:ny,moduleLoadList:iy,binding:Xg,_linkedBinding:rx,_events:My,_eventsCount:Fy,_maxListeners:Ly,on:bs,addListener:Vy,once:Uy,off:By,removeListener:jy,removeAllListeners:$y,emit:zy,prependListener:qy,prependOnceListener:Wy,listeners:ux,domain:sy,_exiting:oy,config:ay,dlopen:nx,uptime:lx,_getActiveRequests:ix,_getActiveHandles:sx,reallyExit:ly,_kill:uy,cpuUsage:ac,resourceUsage:cy,memoryUsage:hy,kill:fy,exit:dy,openStdin:py,allowedNodeEnvironmentFlags:my,assert:ox,features:gy,_fatalExceptions:yy,setUncaughtExceptionCaptureCallback:vy,hasUncaughtExceptionCaptureCallback:ax,emitWarning:Jg,nextTick:ex,_tickCallback:_y,_debugProcess:wy,_debugEnd:by,_startProfilerIdleNotifier:Ey,_stopProfilerIdleNotifier:Sy,stdout:Ty,stdin:Iy,stderr:xy,abort:Ay,umask:Zg,chdir:ty,cwd:ey,env:Hg,title:zg,argv:Qg,execArgv:Kg,pid:Cy,ppid:Ry,execPath:ky,debugPort:Py,hrtime:kf,argv0:Ny,_preload_modules:Oy,setSourceMapsEnabled:Dy}}),$e=Tn(()=>{oL()}),Hr={};pu(Hr,{Buffer:()=>ud,INSPECT_MAX_BYTES:()=>cx,default:()=>Es,kMaxLength:()=>hx});function aL(){if(Hy)return Ol;Hy=!0,Ol.byteLength=u,Ol.toByteArray=h,Ol.fromByteArray=y;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=n.length;s<o;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function l(_){var E=_.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=_.indexOf("=");S===-1&&(S=E);var T=S===E?0:4-S%4;return[S,T]}function u(_){var E=l(_),S=E[0],T=E[1];return(S+T)*3/4-T}function c(_,E,S){return(E+S)*3/4-S}function h(_){var E,S=l(_),T=S[0],V=S[1],I=new t(c(_,T,V)),k=0,W=V>0?T-4:T,H;for(H=0;H<W;H+=4)E=e[_.charCodeAt(H)]<<18|e[_.charCodeAt(H+1)]<<12|e[_.charCodeAt(H+2)]<<6|e[_.charCodeAt(H+3)],I[k++]=E>>16&255,I[k++]=E>>8&255,I[k++]=E&255;return V===2&&(E=e[_.charCodeAt(H)]<<2|e[_.charCodeAt(H+1)]>>4,I[k++]=E&255),V===1&&(E=e[_.charCodeAt(H)]<<10|e[_.charCodeAt(H+1)]<<4|e[_.charCodeAt(H+2)]>>2,I[k++]=E>>8&255,I[k++]=E&255),I}function d(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function m(_,E,S){for(var T,V=[],I=E;I<S;I+=3)T=(_[I]<<16&16711680)+(_[I+1]<<8&65280)+(_[I+2]&255),V.push(d(T));return V.join("")}function y(_){for(var E,S=_.length,T=S%3,V=[],I=16383,k=0,W=S-T;k<W;k+=I)V.push(m(_,k,k+I>W?W:k+I));return T===1?(E=_[S-1],V.push(r[E>>2]+r[E<<4&63]+"==")):T===2&&(E=(_[S-2]<<8)+_[S-1],V.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),V.join("")}return Ol}function lL(){return Qy?lc:(Qy=!0,lc.read=function(r,e,t,n,s){var o,l,u=s*8-n-1,c=(1<<u)-1,h=c>>1,d=-7,m=t?s-1:0,y=t?-1:1,_=r[e+m];for(m+=y,o=_&(1<<-d)-1,_>>=-d,d+=u;d>0;o=o*256+r[e+m],m+=y,d-=8);for(l=o&(1<<-d)-1,o>>=-d,d+=n;d>0;l=l*256+r[e+m],m+=y,d-=8);if(o===0)o=1-h;else{if(o===c)return l?NaN:(_?-1:1)*(1/0);l=l+Math.pow(2,n),o=o-h}return(_?-1:1)*l*Math.pow(2,o-n)},lc.write=function(r,e,t,n,s,o){var l,u,c,h=o*8-s-1,d=(1<<h)-1,m=d>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:o-1,E=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=d):(l=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-l))<1&&(l--,c*=2),l+m>=1?e+=y/c:e+=y*Math.pow(2,1-m),e*c>=2&&(l++,c/=2),l+m>=d?(u=0,l=d):l+m>=1?(u=(e*c-1)*Math.pow(2,s),l=l+m):(u=e*Math.pow(2,m-1)*Math.pow(2,s),l=0));s>=8;r[t+_]=u&255,_+=E,u/=256,s-=8);for(l=l<<s|u,h+=s;h>0;r[t+_]=l&255,_+=E,l/=256,h-=8);r[t+_-E]|=S*128},lc)}function uL(){if(Ky)return ho;Ky=!0;let r=aL(),e=lL(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ho.Buffer=l,ho.SlowBuffer=V,ho.INSPECT_MAX_BYTES=50;let n=2147483647;ho.kMaxLength=n,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let v=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(v,b),v.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(v){if(v>n)throw new RangeError('The value "'+v+'" is invalid for option "size"');let b=new Uint8Array(v);return Object.setPrototypeOf(b,l.prototype),b}function l(v,b,C){if(typeof v=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(v)}return u(v,b,C)}l.poolSize=8192;function u(v,b,C){if(typeof v=="string")return m(v,b);if(ArrayBuffer.isView(v))return _(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Y(v,ArrayBuffer)||v&&Y(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(v,SharedArrayBuffer)||v&&Y(v.buffer,SharedArrayBuffer)))return E(v,b,C);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let q=v.valueOf&&v.valueOf();if(q!=null&&q!==v)return l.from(q,b,C);let ee=S(v);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return l.from(v[Symbol.toPrimitive]("string"),b,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}l.from=function(v,b,C){return u(v,b,C)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function c(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function h(v,b,C){return c(v),v<=0?o(v):b!==void 0?typeof C=="string"?o(v).fill(b,C):o(v).fill(b):o(v)}l.alloc=function(v,b,C){return h(v,b,C)};function d(v){return c(v),o(v<0?0:T(v)|0)}l.allocUnsafe=function(v){return d(v)},l.allocUnsafeSlow=function(v){return d(v)};function m(v,b){if((typeof b!="string"||b==="")&&(b="utf8"),!l.isEncoding(b))throw new TypeError("Unknown encoding: "+b);let C=I(v,b)|0,q=o(C),ee=q.write(v,b);return ee!==C&&(q=q.slice(0,ee)),q}function y(v){let b=v.length<0?0:T(v.length)|0,C=o(b);for(let q=0;q<b;q+=1)C[q]=v[q]&255;return C}function _(v){if(Y(v,Uint8Array)){let b=new Uint8Array(v);return E(b.buffer,b.byteOffset,b.byteLength)}return y(v)}function E(v,b,C){if(b<0||v.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<b+(C||0))throw new RangeError('"length" is outside of buffer bounds');let q;return b===void 0&&C===void 0?q=new Uint8Array(v):C===void 0?q=new Uint8Array(v,b):q=new Uint8Array(v,b,C),Object.setPrototypeOf(q,l.prototype),q}function S(v){if(l.isBuffer(v)){let b=T(v.length)|0,C=o(b);return C.length===0||v.copy(C,0,0,b),C}if(v.length!==void 0)return typeof v.length!="number"||pe(v.length)?o(0):y(v);if(v.type==="Buffer"&&Array.isArray(v.data))return y(v.data)}function T(v){if(v>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return v|0}function V(v){return+v!=v&&(v=0),l.alloc(+v)}l.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==l.prototype},l.compare=function(v,b){if(Y(v,Uint8Array)&&(v=l.from(v,v.offset,v.byteLength)),Y(b,Uint8Array)&&(b=l.from(b,b.offset,b.byteLength)),!l.isBuffer(v)||!l.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===b)return 0;let C=v.length,q=b.length;for(let ee=0,le=Math.min(C,q);ee<le;++ee)if(v[ee]!==b[ee]){C=v[ee],q=b[ee];break}return C<q?-1:q<C?1:0},l.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(v,b){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return l.alloc(0);let C;if(b===void 0)for(b=0,C=0;C<v.length;++C)b+=v[C].length;let q=l.allocUnsafe(b),ee=0;for(C=0;C<v.length;++C){let le=v[C];if(Y(le,Uint8Array))ee+le.length>q.length?(l.isBuffer(le)||(le=l.from(le)),le.copy(q,ee)):Uint8Array.prototype.set.call(q,le,ee);else if(l.isBuffer(le))le.copy(q,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=le.length}return q};function I(v,b){if(l.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Y(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);let C=v.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&C===0)return 0;let ee=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return ue(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C*2;case"hex":return C>>>1;case"base64":return X(v).length;default:if(ee)return q?-1:ue(v).length;b=(""+b).toLowerCase(),ee=!0}}l.byteLength=I;function k(v,b,C){let q=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0,b>>>=0,C<=b))return"";for(v||(v="utf8");;)switch(v){case"hex":return fe(this,b,C);case"utf8":case"utf-8":return L(this,b,C);case"ascii":return De(this,b,C);case"latin1":case"binary":return Re(this,b,C);case"base64":return N(this,b,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,b,C);default:if(q)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),q=!0}}l.prototype._isBuffer=!0;function W(v,b,C){let q=v[b];v[b]=v[C],v[C]=q}l.prototype.swap16=function(){let v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<v;b+=2)W(this,b,b+1);return this},l.prototype.swap32=function(){let v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<v;b+=4)W(this,b,b+3),W(this,b+1,b+2);return this},l.prototype.swap64=function(){let v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<v;b+=8)W(this,b,b+7),W(this,b+1,b+6),W(this,b+2,b+5),W(this,b+3,b+4);return this},l.prototype.toString=function(){let v=this.length;return v===0?"":arguments.length===0?L(this,0,v):k.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(v){if(!l.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:l.compare(this,v)===0},l.prototype.inspect=function(){let v="",b=ho.INSPECT_MAX_BYTES;return v=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(v+=" ... "),"<Buffer "+v+">"},t&&(l.prototype[t]=l.prototype.inspect),l.prototype.compare=function(v,b,C,q,ee){if(Y(v,Uint8Array)&&(v=l.from(v,v.offset,v.byteLength)),!l.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(b===void 0&&(b=0),C===void 0&&(C=v?v.length:0),q===void 0&&(q=0),ee===void 0&&(ee=this.length),b<0||C>v.length||q<0||ee>this.length)throw new RangeError("out of range index");if(q>=ee&&b>=C)return 0;if(q>=ee)return-1;if(b>=C)return 1;if(b>>>=0,C>>>=0,q>>>=0,ee>>>=0,this===v)return 0;let le=ee-q,Ee=C-b,Ze=Math.min(le,Ee),et=this.slice(q,ee),ft=v.slice(b,C);for(let bt=0;bt<Ze;++bt)if(et[bt]!==ft[bt]){le=et[bt],Ee=ft[bt];break}return le<Ee?-1:Ee<le?1:0};function H(v,b,C,q,ee){if(v.length===0)return-1;if(typeof C=="string"?(q=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),C=+C,pe(C)&&(C=ee?0:v.length-1),C<0&&(C=v.length+C),C>=v.length){if(ee)return-1;C=v.length-1}else if(C<0)if(ee)C=0;else return-1;if(typeof b=="string"&&(b=l.from(b,q)),l.isBuffer(b))return b.length===0?-1:j(v,b,C,q,ee);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(v,b,C):Uint8Array.prototype.lastIndexOf.call(v,b,C):j(v,[b],C,q,ee);throw new TypeError("val must be string, number or Buffer")}function j(v,b,C,q,ee){let le=1,Ee=v.length,Ze=b.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(v.length<2||b.length<2)return-1;le=2,Ee/=2,Ze/=2,C/=2}function et(bt,gt){return le===1?bt[gt]:bt.readUInt16BE(gt*le)}let ft;if(ee){let bt=-1;for(ft=C;ft<Ee;ft++)if(et(v,ft)===et(b,bt===-1?0:ft-bt)){if(bt===-1&&(bt=ft),ft-bt+1===Ze)return bt*le}else bt!==-1&&(ft-=ft-bt),bt=-1}else for(C+Ze>Ee&&(C=Ee-Ze),ft=C;ft>=0;ft--){let bt=!0;for(let gt=0;gt<Ze;gt++)if(et(v,ft+gt)!==et(b,gt)){bt=!1;break}if(bt)return ft}return-1}l.prototype.includes=function(v,b,C){return this.indexOf(v,b,C)!==-1},l.prototype.indexOf=function(v,b,C){return H(this,v,b,C,!0)},l.prototype.lastIndexOf=function(v,b,C){return H(this,v,b,C,!1)};function P(v,b,C,q){C=Number(C)||0;let ee=v.length-C;q?(q=Number(q),q>ee&&(q=ee)):q=ee;let le=b.length;q>le/2&&(q=le/2);let Ee;for(Ee=0;Ee<q;++Ee){let Ze=parseInt(b.substr(Ee*2,2),16);if(pe(Ze))return Ee;v[C+Ee]=Ze}return Ee}function R(v,b,C,q){return ne(ue(b,v.length-C),v,C,q)}function M(v,b,C,q){return ne(Ie(b),v,C,q)}function F(v,b,C,q){return ne(X(b),v,C,q)}function $(v,b,C,q){return ne(Q(b,v.length-C),v,C,q)}l.prototype.write=function(v,b,C,q){if(b===void 0)q="utf8",C=this.length,b=0;else if(C===void 0&&typeof b=="string")q=b,C=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(C)?(C=C>>>0,q===void 0&&(q="utf8")):(q=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let ee=this.length-b;if((C===void 0||C>ee)&&(C=ee),v.length>0&&(C<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let le=!1;for(;;)switch(q){case"hex":return P(this,v,b,C);case"utf8":case"utf-8":return R(this,v,b,C);case"ascii":case"latin1":case"binary":return M(this,v,b,C);case"base64":return F(this,v,b,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,v,b,C);default:if(le)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),le=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(v,b,C){return b===0&&C===v.length?r.fromByteArray(v):r.fromByteArray(v.slice(b,C))}function L(v,b,C){C=Math.min(v.length,C);let q=[],ee=b;for(;ee<C;){let le=v[ee],Ee=null,Ze=le>239?4:le>223?3:le>191?2:1;if(ee+Ze<=C){let et,ft,bt,gt;switch(Ze){case 1:le<128&&(Ee=le);break;case 2:et=v[ee+1],(et&192)===128&&(gt=(le&31)<<6|et&63,gt>127&&(Ee=gt));break;case 3:et=v[ee+1],ft=v[ee+2],(et&192)===128&&(ft&192)===128&&(gt=(le&15)<<12|(et&63)<<6|ft&63,gt>2047&&(gt<55296||gt>57343)&&(Ee=gt));break;case 4:et=v[ee+1],ft=v[ee+2],bt=v[ee+3],(et&192)===128&&(ft&192)===128&&(bt&192)===128&&(gt=(le&15)<<18|(et&63)<<12|(ft&63)<<6|bt&63,gt>65535&&gt<1114112&&(Ee=gt))}}Ee===null?(Ee=65533,Ze=1):Ee>65535&&(Ee-=65536,q.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),q.push(Ee),ee+=Ze}return ae(q)}let ve=4096;function ae(v){let b=v.length;if(b<=ve)return String.fromCharCode.apply(String,v);let C="",q=0;for(;q<b;)C+=String.fromCharCode.apply(String,v.slice(q,q+=ve));return C}function De(v,b,C){let q="";C=Math.min(v.length,C);for(let ee=b;ee<C;++ee)q+=String.fromCharCode(v[ee]&127);return q}function Re(v,b,C){let q="";C=Math.min(v.length,C);for(let ee=b;ee<C;++ee)q+=String.fromCharCode(v[ee]);return q}function fe(v,b,C){let q=v.length;(!b||b<0)&&(b=0),(!C||C<0||C>q)&&(C=q);let ee="";for(let le=b;le<C;++le)ee+=we[v[le]];return ee}function Ne(v,b,C){let q=v.slice(b,C),ee="";for(let le=0;le<q.length-1;le+=2)ee+=String.fromCharCode(q[le]+q[le+1]*256);return ee}l.prototype.slice=function(v,b){let C=this.length;v=~~v,b=b===void 0?C:~~b,v<0?(v+=C,v<0&&(v=0)):v>C&&(v=C),b<0?(b+=C,b<0&&(b=0)):b>C&&(b=C),b<v&&(b=v);let q=this.subarray(v,b);return Object.setPrototypeOf(q,l.prototype),q};function ie(v,b,C){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+b>C)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(v,b,C){v=v>>>0,b=b>>>0,C||ie(v,b,this.length);let q=this[v],ee=1,le=0;for(;++le<b&&(ee*=256);)q+=this[v+le]*ee;return q},l.prototype.readUintBE=l.prototype.readUIntBE=function(v,b,C){v=v>>>0,b=b>>>0,C||ie(v,b,this.length);let q=this[v+--b],ee=1;for(;b>0&&(ee*=256);)q+=this[v+--b]*ee;return q},l.prototype.readUint8=l.prototype.readUInt8=function(v,b){return v=v>>>0,b||ie(v,1,this.length),this[v]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(v,b){return v=v>>>0,b||ie(v,2,this.length),this[v]|this[v+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(v,b){return v=v>>>0,b||ie(v,2,this.length),this[v]<<8|this[v+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(v,b){return v=v>>>0,b||ie(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(v,b){return v=v>>>0,b||ie(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},l.prototype.readBigUInt64LE=ge(function(v){v=v>>>0,_e(v,"offset");let b=this[v],C=this[v+7];(b===void 0||C===void 0)&&Ve(v,this.length-8);let q=b+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,ee=this[++v]+this[++v]*2**8+this[++v]*2**16+C*2**24;return BigInt(q)+(BigInt(ee)<<BigInt(32))}),l.prototype.readBigUInt64BE=ge(function(v){v=v>>>0,_e(v,"offset");let b=this[v],C=this[v+7];(b===void 0||C===void 0)&&Ve(v,this.length-8);let q=b*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],ee=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+C;return(BigInt(q)<<BigInt(32))+BigInt(ee)}),l.prototype.readIntLE=function(v,b,C){v=v>>>0,b=b>>>0,C||ie(v,b,this.length);let q=this[v],ee=1,le=0;for(;++le<b&&(ee*=256);)q+=this[v+le]*ee;return ee*=128,q>=ee&&(q-=Math.pow(2,8*b)),q},l.prototype.readIntBE=function(v,b,C){v=v>>>0,b=b>>>0,C||ie(v,b,this.length);let q=b,ee=1,le=this[v+--q];for(;q>0&&(ee*=256);)le+=this[v+--q]*ee;return ee*=128,le>=ee&&(le-=Math.pow(2,8*b)),le},l.prototype.readInt8=function(v,b){return v=v>>>0,b||ie(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},l.prototype.readInt16LE=function(v,b){v=v>>>0,b||ie(v,2,this.length);let C=this[v]|this[v+1]<<8;return C&32768?C|4294901760:C},l.prototype.readInt16BE=function(v,b){v=v>>>0,b||ie(v,2,this.length);let C=this[v+1]|this[v]<<8;return C&32768?C|4294901760:C},l.prototype.readInt32LE=function(v,b){return v=v>>>0,b||ie(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},l.prototype.readInt32BE=function(v,b){return v=v>>>0,b||ie(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},l.prototype.readBigInt64LE=ge(function(v){v=v>>>0,_e(v,"offset");let b=this[v],C=this[v+7];(b===void 0||C===void 0)&&Ve(v,this.length-8);let q=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(C<<24);return(BigInt(q)<<BigInt(32))+BigInt(b+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),l.prototype.readBigInt64BE=ge(function(v){v=v>>>0,_e(v,"offset");let b=this[v],C=this[v+7];(b===void 0||C===void 0)&&Ve(v,this.length-8);let q=(b<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(q)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+C)}),l.prototype.readFloatLE=function(v,b){return v=v>>>0,b||ie(v,4,this.length),e.read(this,v,!0,23,4)},l.prototype.readFloatBE=function(v,b){return v=v>>>0,b||ie(v,4,this.length),e.read(this,v,!1,23,4)},l.prototype.readDoubleLE=function(v,b){return v=v>>>0,b||ie(v,8,this.length),e.read(this,v,!0,52,8)},l.prototype.readDoubleBE=function(v,b){return v=v>>>0,b||ie(v,8,this.length),e.read(this,v,!1,52,8)};function J(v,b,C,q,ee,le){if(!l.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>ee||b<le)throw new RangeError('"value" argument is out of bounds');if(C+q>v.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(v,b,C,q){if(v=+v,b=b>>>0,C=C>>>0,!q){let Ee=Math.pow(2,8*C)-1;J(this,v,b,C,Ee,0)}let ee=1,le=0;for(this[b]=v&255;++le<C&&(ee*=256);)this[b+le]=v/ee&255;return b+C},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(v,b,C,q){if(v=+v,b=b>>>0,C=C>>>0,!q){let Ee=Math.pow(2,8*C)-1;J(this,v,b,C,Ee,0)}let ee=C-1,le=1;for(this[b+ee]=v&255;--ee>=0&&(le*=256);)this[b+ee]=v/le&255;return b+C},l.prototype.writeUint8=l.prototype.writeUInt8=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,1,255,0),this[b]=v&255,b+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,2,65535,0),this[b]=v&255,this[b+1]=v>>>8,b+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,2,65535,0),this[b]=v>>>8,this[b+1]=v&255,b+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,4,4294967295,0),this[b+3]=v>>>24,this[b+2]=v>>>16,this[b+1]=v>>>8,this[b]=v&255,b+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,4,4294967295,0),this[b]=v>>>24,this[b+1]=v>>>16,this[b+2]=v>>>8,this[b+3]=v&255,b+4};function z(v,b,C,q,ee){me(b,q,ee,v,C,7);let le=Number(b&BigInt(4294967295));v[C++]=le,le=le>>8,v[C++]=le,le=le>>8,v[C++]=le,le=le>>8,v[C++]=le;let Ee=Number(b>>BigInt(32)&BigInt(4294967295));return v[C++]=Ee,Ee=Ee>>8,v[C++]=Ee,Ee=Ee>>8,v[C++]=Ee,Ee=Ee>>8,v[C++]=Ee,C}function be(v,b,C,q,ee){me(b,q,ee,v,C,7);let le=Number(b&BigInt(4294967295));v[C+7]=le,le=le>>8,v[C+6]=le,le=le>>8,v[C+5]=le,le=le>>8,v[C+4]=le;let Ee=Number(b>>BigInt(32)&BigInt(4294967295));return v[C+3]=Ee,Ee=Ee>>8,v[C+2]=Ee,Ee=Ee>>8,v[C+1]=Ee,Ee=Ee>>8,v[C]=Ee,C+8}l.prototype.writeBigUInt64LE=ge(function(v,b=0){return z(this,v,b,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=ge(function(v,b=0){return be(this,v,b,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(v,b,C,q){if(v=+v,b=b>>>0,!q){let Ze=Math.pow(2,8*C-1);J(this,v,b,C,Ze-1,-Ze)}let ee=0,le=1,Ee=0;for(this[b]=v&255;++ee<C&&(le*=256);)v<0&&Ee===0&&this[b+ee-1]!==0&&(Ee=1),this[b+ee]=(v/le>>0)-Ee&255;return b+C},l.prototype.writeIntBE=function(v,b,C,q){if(v=+v,b=b>>>0,!q){let Ze=Math.pow(2,8*C-1);J(this,v,b,C,Ze-1,-Ze)}let ee=C-1,le=1,Ee=0;for(this[b+ee]=v&255;--ee>=0&&(le*=256);)v<0&&Ee===0&&this[b+ee+1]!==0&&(Ee=1),this[b+ee]=(v/le>>0)-Ee&255;return b+C},l.prototype.writeInt8=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,1,127,-128),v<0&&(v=255+v+1),this[b]=v&255,b+1},l.prototype.writeInt16LE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,2,32767,-32768),this[b]=v&255,this[b+1]=v>>>8,b+2},l.prototype.writeInt16BE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,2,32767,-32768),this[b]=v>>>8,this[b+1]=v&255,b+2},l.prototype.writeInt32LE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,4,2147483647,-2147483648),this[b]=v&255,this[b+1]=v>>>8,this[b+2]=v>>>16,this[b+3]=v>>>24,b+4},l.prototype.writeInt32BE=function(v,b,C){return v=+v,b=b>>>0,C||J(this,v,b,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[b]=v>>>24,this[b+1]=v>>>16,this[b+2]=v>>>8,this[b+3]=v&255,b+4},l.prototype.writeBigInt64LE=ge(function(v,b=0){return z(this,v,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=ge(function(v,b=0){return be(this,v,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Le(v,b,C,q,ee,le){if(C+q>v.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function oe(v,b,C,q,ee){return b=+b,C=C>>>0,ee||Le(v,b,C,4),e.write(v,b,C,q,23,4),C+4}l.prototype.writeFloatLE=function(v,b,C){return oe(this,v,b,!0,C)},l.prototype.writeFloatBE=function(v,b,C){return oe(this,v,b,!1,C)};function We(v,b,C,q,ee){return b=+b,C=C>>>0,ee||Le(v,b,C,8),e.write(v,b,C,q,52,8),C+8}l.prototype.writeDoubleLE=function(v,b,C){return We(this,v,b,!0,C)},l.prototype.writeDoubleBE=function(v,b,C){return We(this,v,b,!1,C)},l.prototype.copy=function(v,b,C,q){if(!l.isBuffer(v))throw new TypeError("argument should be a Buffer");if(C||(C=0),!q&&q!==0&&(q=this.length),b>=v.length&&(b=v.length),b||(b=0),q>0&&q<C&&(q=C),q===C||v.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),v.length-b<q-C&&(q=v.length-b+C);let ee=q-C;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,C,q):Uint8Array.prototype.set.call(v,this.subarray(C,q),b),ee},l.prototype.fill=function(v,b,C,q){if(typeof v=="string"){if(typeof b=="string"?(q=b,b=0,C=this.length):typeof C=="string"&&(q=C,C=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!l.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(v.length===1){let le=v.charCodeAt(0);(q==="utf8"&&le<128||q==="latin1")&&(v=le)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(b<0||this.length<b||this.length<C)throw new RangeError("Out of range index");if(C<=b)return this;b=b>>>0,C=C===void 0?this.length:C>>>0,v||(v=0);let ee;if(typeof v=="number")for(ee=b;ee<C;++ee)this[ee]=v;else{let le=l.isBuffer(v)?v:l.from(v,q),Ee=le.length;if(Ee===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(ee=0;ee<C-b;++ee)this[ee+b]=le[ee%Ee]}return this};let ce={};function te(v,b,C){ce[v]=class extends C{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}te("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),te("ERR_INVALID_ARG_TYPE",function(v,b){return`The "${v}" argument must be of type number. Received type ${typeof b}`},TypeError),te("ERR_OUT_OF_RANGE",function(v,b,C){let q=`The value of "${v}" is out of range.`,ee=C;return Number.isInteger(C)&&Math.abs(C)>2**32?ee=xe(String(C)):typeof C=="bigint"&&(ee=String(C),(C>BigInt(2)**BigInt(32)||C<-(BigInt(2)**BigInt(32)))&&(ee=xe(ee)),ee+="n"),q+=` It must be ${b}. Received ${ee}`,q},RangeError);function xe(v){let b="",C=v.length,q=v[0]==="-"?1:0;for(;C>=q+4;C-=3)b=`_${v.slice(C-3,C)}${b}`;return`${v.slice(0,C)}${b}`}function de(v,b,C){_e(b,"offset"),(v[b]===void 0||v[b+C]===void 0)&&Ve(b,v.length-(C+1))}function me(v,b,C,q,ee,le){if(v>C||v<b){let Ee=typeof b=="bigint"?"n":"",Ze;throw b===0||b===BigInt(0)?Ze=`>= 0${Ee} and < 2${Ee} ** ${(le+1)*8}${Ee}`:Ze=`>= -(2${Ee} ** ${(le+1)*8-1}${Ee}) and < 2 ** ${(le+1)*8-1}${Ee}`,new ce.ERR_OUT_OF_RANGE("value",Ze,v)}de(q,ee,le)}function _e(v,b){if(typeof v!="number")throw new ce.ERR_INVALID_ARG_TYPE(b,"number",v)}function Ve(v,b,C){throw Math.floor(v)!==v?(_e(v,C),new ce.ERR_OUT_OF_RANGE("offset","an integer",v)):b<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${b}`,v)}let Me=/[^+/0-9A-Za-z-_]/g;function se(v){if(v=v.split("=")[0],v=v.trim().replace(Me,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function ue(v,b){b=b||1/0;let C,q=v.length,ee=null,le=[];for(let Ee=0;Ee<q;++Ee){if(C=v.charCodeAt(Ee),C>55295&&C<57344){if(!ee){if(C>56319){(b-=3)>-1&&le.push(239,191,189);continue}else if(Ee+1===q){(b-=3)>-1&&le.push(239,191,189);continue}ee=C;continue}if(C<56320){(b-=3)>-1&&le.push(239,191,189),ee=C;continue}C=(ee-55296<<10|C-56320)+65536}else ee&&(b-=3)>-1&&le.push(239,191,189);if(ee=null,C<128){if((b-=1)<0)break;le.push(C)}else if(C<2048){if((b-=2)<0)break;le.push(C>>6|192,C&63|128)}else if(C<65536){if((b-=3)<0)break;le.push(C>>12|224,C>>6&63|128,C&63|128)}else if(C<1114112){if((b-=4)<0)break;le.push(C>>18|240,C>>12&63|128,C>>6&63|128,C&63|128)}else throw new Error("Invalid code point")}return le}function Ie(v){let b=[];for(let C=0;C<v.length;++C)b.push(v.charCodeAt(C)&255);return b}function Q(v,b){let C,q,ee,le=[];for(let Ee=0;Ee<v.length&&!((b-=2)<0);++Ee)C=v.charCodeAt(Ee),q=C>>8,ee=C%256,le.push(ee),le.push(q);return le}function X(v){return r.toByteArray(se(v))}function ne(v,b,C,q){let ee;for(ee=0;ee<q&&!(ee+C>=b.length||ee>=v.length);++ee)b[ee+C]=v[ee];return ee}function Y(v,b){return v instanceof b||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===b.name}function pe(v){return v!==v}let we=function(){let v="0123456789abcdef",b=new Array(256);for(let C=0;C<16;++C){let q=C*16;for(let ee=0;ee<16;++ee)b[q+ee]=v[C]+v[ee]}return b}();function ge(v){return typeof BigInt>"u"?Xe:v}function Xe(){throw new Error("BigInt not supported")}return ho}var Ol,Hy,lc,Qy,ho,Ky,Es,ud,cx,hx,Qr=Tn(()=>{je(),ze(),$e(),Ol={},Hy=!1,lc={},Qy=!1,ho={},Ky=!1,Es=uL(),Es.Buffer,Es.SlowBuffer,Es.INSPECT_MAX_BYTES,Es.kMaxLength,ud=Es.Buffer,cx=Es.INSPECT_MAX_BYTES,hx=Es.kMaxLength}),ze=Tn(()=>{Qr()}),cL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};r.default=e}),dr=Ke((r,e)=>{je(),ze(),$e();var t=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let s="";for(let o=0;o<n.length;o++)s+=`    ${n[o].stack}
`;super(s),this.name="AggregateError",this.errors=n}};e.exports={AggregateError:t,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,s){return n.includes(s)},ArrayPrototypeIndexOf(n,s){return n.indexOf(s)},ArrayPrototypeJoin(n,s){return n.join(s)},ArrayPrototypeMap(n,s){return n.map(s)},ArrayPrototypePop(n,s){return n.pop(s)},ArrayPrototypePush(n,s){return n.push(s)},ArrayPrototypeSlice(n,s,o){return n.slice(s,o)},Error,FunctionPrototypeCall(n,s,...o){return n.call(s,...o)},FunctionPrototypeSymbolHasInstance(n,s){return Function.prototype[Symbol.hasInstance].call(n,s)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,s){return Object.defineProperties(n,s)},ObjectDefineProperty(n,s,o){return Object.defineProperty(n,s,o)},ObjectGetOwnPropertyDescriptor(n,s){return Object.getOwnPropertyDescriptor(n,s)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,s){return Object.setPrototypeOf(n,s)},Promise,PromisePrototypeCatch(n,s){return n.catch(s)},PromisePrototypeThen(n,s,o){return n.then(s,o)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,s){return n.test(s)},SafeSet:Set,String,StringPrototypeSlice(n,s,o){return n.slice(s,o)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,s,o){return n.set(s,o)},Boolean,Uint8Array}}),fx=Ke((r,e)=>{je(),ze(),$e(),e.exports={format(t,...n){return t.replace(/%([sdifj])/g,function(...[s,o]){let l=n.shift();return o==="f"?l.toFixed(6):o==="j"?JSON.stringify(l):o==="s"&&typeof l=="object"?`${l.constructor!==Object?l.constructor.name:""} {}`.trim():l.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}}),xn=Ke((r,e)=>{je(),ze(),$e();var{format:t,inspect:n}=fx(),{AggregateError:s}=dr(),o=globalThis.AggregateError||s,l=Symbol("kIsNodeError"),u=["string","function","number","object","Function","Object","boolean","bigint","symbol"],c=/^([A-Z][a-z0-9]*)+$/,h="__node_internal_",d={};function m(I,k){if(!I)throw new d.ERR_INTERNAL_ASSERTION(k)}function y(I){let k="",W=I.length,H=I[0]==="-"?1:0;for(;W>=H+4;W-=3)k=`_${I.slice(W-3,W)}${k}`;return`${I.slice(0,W)}${k}`}function _(I,k,W){if(typeof k=="function")return m(k.length<=W.length,`Code: ${I}; The provided arguments length (${W.length}) does not match the required ones (${k.length}).`),k(...W);let H=(k.match(/%[dfijoOs]/g)||[]).length;return m(H===W.length,`Code: ${I}; The provided arguments length (${W.length}) does not match the required ones (${H}).`),W.length===0?k:t(k,...W)}function E(I,k,W){W||(W=Error);class H extends W{constructor(...P){super(_(I,k,P))}toString(){return`${this.name} [${I}]: ${this.message}`}}Object.defineProperties(H.prototype,{name:{value:W.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${I}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),H.prototype.code=I,H.prototype[l]=!0,d[I]=H}function S(I){let k=h+I.name;return Object.defineProperty(I,"name",{value:k}),I}function T(I,k){if(I&&k&&I!==k){if(Array.isArray(k.errors))return k.errors.push(I),k;let W=new o([k,I],k.message);return W.code=k.code,W}return I||k}var V=class extends Error{constructor(I="The operation was aborted",k=void 0){if(k!==void 0&&typeof k!="object")throw new d.ERR_INVALID_ARG_TYPE("options","Object",k);super(I,k),this.code="ABORT_ERR",this.name="AbortError"}};E("ERR_ASSERTION","%s",Error),E("ERR_INVALID_ARG_TYPE",(I,k,W)=>{m(typeof I=="string","'name' must be a string"),Array.isArray(k)||(k=[k]);let H="The ";I.endsWith(" argument")?H+=`${I} `:H+=`"${I}" ${I.includes(".")?"property":"argument"} `,H+="must be ";let j=[],P=[],R=[];for(let F of k)m(typeof F=="string","All expected entries have to be of type string"),u.includes(F)?j.push(F.toLowerCase()):c.test(F)?P.push(F):(m(F!=="object",'The value "object" should be written as "Object"'),R.push(F));if(P.length>0){let F=j.indexOf("object");F!==-1&&(j.splice(j,F,1),P.push("Object"))}if(j.length>0){switch(j.length){case 1:H+=`of type ${j[0]}`;break;case 2:H+=`one of type ${j[0]} or ${j[1]}`;break;default:{let F=j.pop();H+=`one of type ${j.join(", ")}, or ${F}`}}(P.length>0||R.length>0)&&(H+=" or ")}if(P.length>0){switch(P.length){case 1:H+=`an instance of ${P[0]}`;break;case 2:H+=`an instance of ${P[0]} or ${P[1]}`;break;default:{let F=P.pop();H+=`an instance of ${P.join(", ")}, or ${F}`}}R.length>0&&(H+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(H+="an "),H+=`${R[0]}`;break;case 2:H+=`one of ${R[0]} or ${R[1]}`;break;default:{let F=R.pop();H+=`one of ${R.join(", ")}, or ${F}`}}if(W==null)H+=`. Received ${W}`;else if(typeof W=="function"&&W.name)H+=`. Received function ${W.name}`;else if(typeof W=="object"){var M;if((M=W.constructor)!==null&&M!==void 0&&M.name)H+=`. Received an instance of ${W.constructor.name}`;else{let F=n(W,{depth:-1});H+=`. Received ${F}`}}else{let F=n(W,{colors:!1});F.length>25&&(F=`${F.slice(0,25)}...`),H+=`. Received type ${typeof W} (${F})`}return H},TypeError),E("ERR_INVALID_ARG_VALUE",(I,k,W="is invalid")=>{let H=n(k);return H.length>128&&(H=H.slice(0,128)+"..."),`The ${I.includes(".")?"property":"argument"} '${I}' ${W}. Received ${H}`},TypeError),E("ERR_INVALID_RETURN_VALUE",(I,k,W)=>{var H;let j=W!=null&&(H=W.constructor)!==null&&H!==void 0&&H.name?`instance of ${W.constructor.name}`:`type ${typeof W}`;return`Expected ${I} to be returned from the "${k}" function but got ${j}.`},TypeError),E("ERR_MISSING_ARGS",(...I)=>{m(I.length>0,"At least one arg needs to be specified");let k,W=I.length;switch(I=(Array.isArray(I)?I:[I]).map(H=>`"${H}"`).join(" or "),W){case 1:k+=`The ${I[0]} argument`;break;case 2:k+=`The ${I[0]} and ${I[1]} arguments`;break;default:{let H=I.pop();k+=`The ${I.join(", ")}, and ${H} arguments`}break}return`${k} must be specified`},TypeError),E("ERR_OUT_OF_RANGE",(I,k,W)=>{m(k,'Missing "range" argument');let H;if(Number.isInteger(W)&&Math.abs(W)>2**32)H=y(String(W));else if(typeof W=="bigint"){H=String(W);let j=BigInt(2)**BigInt(32);(W>j||W<-j)&&(H=y(H)),H+="n"}else H=n(W);return`The value of "${I}" is out of range. It must be ${k}. Received ${H}`},RangeError),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),E("ERR_STREAM_WRITE_AFTER_END","write after end",Error),E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:V,aggregateTwoErrors:S(T),hideStackFrames:S,codes:d}}),Pc=Ke((r,e)=>{je(),ze(),$e();var{AbortController:t,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t});function Qt(){Qt.init.call(this)}function Nf(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function dx(r){return r._maxListeners===void 0?Qt.defaultMaxListeners:r._maxListeners}function _E(r,e,t,n){var s,o,l,u;if(Nf(t),(o=r._events)===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),l=o[e]),l===void 0)l=o[e]=t,++r._eventsCount;else if(typeof l=="function"?l=o[e]=n?[t,l]:[l,t]:n?l.unshift(t):l.push(t),(s=dx(r))>0&&l.length>s&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=l.length,u=c,console&&console.warn&&console.warn(u)}return r}function hL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wE(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},s=hL.bind(n);return s.listener=t,n.wrapFn=s,s}function bE(r,e,t){var n=r._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?function(o){for(var l=new Array(o.length),u=0;u<l.length;++u)l[u]=o[u].listener||o[u];return l}(s):px(s,s.length)}function EE(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function px(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}var SE,TE,ua,Lm,Mm,Fm,Kn,xE=Tn(()=>{je(),ze(),$e(),ua=typeof Reflect=="object"?Reflect:null,Lm=ua&&typeof ua.apply=="function"?ua.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)},TE=ua&&typeof ua.ownKeys=="function"?ua.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)},Mm=Number.isNaN||function(r){return r!=r},SE=Qt,Qt.EventEmitter=Qt,Qt.prototype._events=void 0,Qt.prototype._eventsCount=0,Qt.prototype._maxListeners=void 0,Fm=10,Object.defineProperty(Qt,"defaultMaxListeners",{enumerable:!0,get:function(){return Fm},set:function(r){if(typeof r!="number"||r<0||Mm(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Fm=r}}),Qt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Qt.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Mm(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},Qt.prototype.getMaxListeners=function(){return dx(this)},Qt.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n=r==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var u=s[r];if(u===void 0)return!1;if(typeof u=="function")Lm(u,this,e);else{var c=u.length,h=px(u,c);for(t=0;t<c;++t)Lm(h[t],this,e)}return!0},Qt.prototype.addListener=function(r,e){return _E(this,r,e,!1)},Qt.prototype.on=Qt.prototype.addListener,Qt.prototype.prependListener=function(r,e){return _E(this,r,e,!0)},Qt.prototype.once=function(r,e){return Nf(e),this.on(r,wE(this,r,e)),this},Qt.prototype.prependOnceListener=function(r,e){return Nf(e),this.prependListener(r,wE(this,r,e)),this},Qt.prototype.removeListener=function(r,e){var t,n,s,o,l;if(Nf(e),(n=this._events)===void 0)return this;if((t=n[r])===void 0)return this;if(t===e||t.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if(typeof t!="function"){for(s=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){l=t[o].listener,s=o;break}if(s<0)return this;s===0?t.shift():function(u,c){for(;c+1<u.length;c++)u[c]=u[c+1];u.pop()}(t,s),t.length===1&&(n[r]=t[0]),n.removeListener!==void 0&&this.emit("removeListener",r,l||e)}return this},Qt.prototype.off=Qt.prototype.removeListener,Qt.prototype.removeAllListeners=function(r){var e,t,n;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[r]),this;if(arguments.length===0){var s,o=Object.keys(t);for(n=0;n<o.length;++n)(s=o[n])!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=t[r])=="function")this.removeListener(r,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},Qt.prototype.listeners=function(r){return bE(this,r,!0)},Qt.prototype.rawListeners=function(r){return bE(this,r,!1)},Qt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):EE.call(r,e)},Qt.prototype.listenerCount=EE,Qt.prototype.eventNames=function(){return this._eventsCount>0?TE(this._events):[]},Kn=SE,Kn.EventEmitter,Kn.defaultMaxListeners,Kn.init,Kn.listenerCount,Kn.EventEmitter,Kn.defaultMaxListeners,Kn.init,Kn.listenerCount}),Uo={};pu(Uo,{EventEmitter:()=>mx,default:()=>Kn,defaultMaxListeners:()=>gx,init:()=>yx,listenerCount:()=>vx,on:()=>_x,once:()=>bx});var mx,gx,yx,vx,_x,bx,qa=Tn(()=>{je(),ze(),$e(),xE(),xE(),Kn.once=function(r,e){return new Promise((t,n)=>{function s(...l){o!==void 0&&r.removeListener("error",o),t(l)}let o;e!=="error"&&(o=l=>{r.removeListener(name,s),n(l)},r.once("error",o)),r.once(e,s)})},Kn.on=function(r,e){let t=[],n=[],s=null,o=!1,l={async next(){let h=t.shift();if(h)return createIterResult(h,!1);if(s){let d=Promise.reject(s);return s=null,d}return o?createIterResult(void 0,!0):new Promise((d,m)=>n.push({resolve:d,reject:m}))},async return(){r.removeListener(e,u),r.removeListener("error",c),o=!0;for(let h of n)h.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(h){s=h,r.removeListener(e,u),r.removeListener("error",c)},[Symbol.asyncIterator](){return this}};return r.on(e,u),r.on("error",c),l;function u(...h){let d=n.shift();d?d.resolve(createIterResult(h,!1)):t.push(h)}function c(h){o=!0;let d=n.shift();d?d.reject(h):s=h,l.return()}},{EventEmitter:mx,defaultMaxListeners:gx,init:yx,listenerCount:vx,on:_x,once:bx}=Kn}),Un=Ke((r,e)=>{je(),ze(),$e();var t=(Qr(),Kt(Hr)),{format:n,inspect:s}=fx(),{codes:{ERR_INVALID_ARG_TYPE:o}}=xn(),{kResistStopPropagation:l,AggregateError:u,SymbolDispose:c}=dr(),h=globalThis.AbortSignal||Pc().AbortSignal,d=globalThis.AbortController||Pc().AbortController,m=Object.getPrototypeOf(async function(){}).constructor,y=globalThis.Blob||t.Blob,_=typeof y<"u"?function(T){return T instanceof y}:function(T){return!1},E=(T,V)=>{if(T!==void 0&&(T===null||typeof T!="object"||!("aborted"in T)))throw new o(V,"AbortSignal",T)},S=(T,V)=>{if(typeof T!="function")throw new o(V,"Function",T)};e.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(T){let V=!1;return function(...I){V||(V=!0,T.apply(this,I))}},createDeferredPromise:function(){let T,V;return{promise:new Promise((I,k)=>{T=I,V=k}),resolve:T,reject:V}},promisify(T){return new Promise((V,I)=>{T((k,...W)=>k?I(k):V(...W))})},debuglog(){return function(){}},format:n,inspect:s,types:{isAsyncFunction(T){return T instanceof m},isArrayBufferView(T){return ArrayBuffer.isView(T)}},isBlob:_,deprecate(T,V){return T},addAbortListener:(qa(),Kt(Uo)).addAbortListener||function(T,V){if(T===void 0)throw new o("signal","AbortSignal",T);E(T,"signal"),S(V,"listener");let I;return T.aborted?queueMicrotask(()=>V()):(T.addEventListener("abort",V,{__proto__:null,once:!0,[l]:!0}),I=()=>{T.removeEventListener("abort",V)}),{__proto__:null,[c](){var k;(k=I)===null||k===void 0||k()}}},AbortSignalAny:h.any||function(T){if(T.length===1)return T[0];let V=new d,I=()=>V.abort();return T.forEach(k=>{E(k,"signals"),k.addEventListener("abort",I,{once:!0})}),V.signal.addEventListener("abort",()=>{T.forEach(k=>k.removeEventListener("abort",I))},{once:!0}),V.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Qc=Ke((r,e)=>{je(),ze(),$e();var{ArrayIsArray:t,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:s,ArrayPrototypeMap:o,NumberIsInteger:l,NumberIsNaN:u,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:h,NumberParseInt:d,ObjectPrototypeHasOwnProperty:m,RegExpPrototypeExec:y,String:_,StringPrototypeToUpperCase:E,StringPrototypeTrim:S}=dr(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:V,ERR_INVALID_ARG_TYPE:I,ERR_INVALID_ARG_VALUE:k,ERR_OUT_OF_RANGE:W,ERR_UNKNOWN_SIGNAL:H}}=xn(),{normalizeEncoding:j}=Un(),{isAsyncFunction:P,isArrayBufferView:R}=Un().types,M={};function F(Y){return Y===(Y|0)}function $(Y){return Y===Y>>>0}var N=/^[0-7]+$/,L="must be a 32-bit unsigned integer or an octal string";function ve(Y,pe,we){if(typeof Y>"u"&&(Y=we),typeof Y=="string"){if(y(N,Y)===null)throw new k(pe,Y,L);Y=d(Y,8)}return Re(Y,pe),Y}var ae=T((Y,pe,we=h,ge=c)=>{if(typeof Y!="number")throw new I(pe,"number",Y);if(!l(Y))throw new W(pe,"an integer",Y);if(Y<we||Y>ge)throw new W(pe,`>= ${we} && <= ${ge}`,Y)}),De=T((Y,pe,we=-2147483648,ge=2147483647)=>{if(typeof Y!="number")throw new I(pe,"number",Y);if(!l(Y))throw new W(pe,"an integer",Y);if(Y<we||Y>ge)throw new W(pe,`>= ${we} && <= ${ge}`,Y)}),Re=T((Y,pe,we=!1)=>{if(typeof Y!="number")throw new I(pe,"number",Y);if(!l(Y))throw new W(pe,"an integer",Y);let ge=we?1:0,Xe=4294967295;if(Y<ge||Y>Xe)throw new W(pe,`>= ${ge} && <= ${Xe}`,Y)});function fe(Y,pe){if(typeof Y!="string")throw new I(pe,"string",Y)}function Ne(Y,pe,we=void 0,ge){if(typeof Y!="number")throw new I(pe,"number",Y);if(we!=null&&Y<we||ge!=null&&Y>ge||(we!=null||ge!=null)&&u(Y))throw new W(pe,`${we!=null?`>= ${we}`:""}${we!=null&&ge!=null?" && ":""}${ge!=null?`<= ${ge}`:""}`,Y)}var ie=T((Y,pe,we)=>{if(!n(we,Y)){let ge="must be one of: "+s(o(we,Xe=>typeof Xe=="string"?`'${Xe}'`:_(Xe)),", ");throw new k(pe,Y,ge)}});function J(Y,pe){if(typeof Y!="boolean")throw new I(pe,"boolean",Y)}function z(Y,pe,we){return Y==null||!m(Y,pe)?we:Y[pe]}var be=T((Y,pe,we=null)=>{let ge=z(we,"allowArray",!1),Xe=z(we,"allowFunction",!1);if(!z(we,"nullable",!1)&&Y===null||!ge&&t(Y)||typeof Y!="object"&&(!Xe||typeof Y!="function"))throw new I(pe,"Object",Y)}),Le=T((Y,pe)=>{if(Y!=null&&typeof Y!="object"&&typeof Y!="function")throw new I(pe,"a dictionary",Y)}),oe=T((Y,pe,we=0)=>{if(!t(Y))throw new I(pe,"Array",Y);if(Y.length<we){let ge=`must be longer than ${we}`;throw new k(pe,Y,ge)}});function We(Y,pe){oe(Y,pe);for(let we=0;we<Y.length;we++)fe(Y[we],`${pe}[${we}]`)}function ce(Y,pe){oe(Y,pe);for(let we=0;we<Y.length;we++)J(Y[we],`${pe}[${we}]`)}function te(Y,pe){oe(Y,pe);for(let we=0;we<Y.length;we++){let ge=Y[we],Xe=`${pe}[${we}]`;if(ge==null)throw new I(Xe,"AbortSignal",ge);Ve(ge,Xe)}}function xe(Y,pe="signal"){if(fe(Y,pe),M[Y]===void 0)throw M[E(Y)]!==void 0?new H(Y+" (signals must use all capital letters)"):new H(Y)}var de=T((Y,pe="buffer")=>{if(!R(Y))throw new I(pe,["Buffer","TypedArray","DataView"],Y)});function me(Y,pe){let we=j(pe),ge=Y.length;if(we==="hex"&&ge%2!==0)throw new k("encoding",pe,`is invalid for data of length ${ge}`)}function _e(Y,pe="Port",we=!0){if(typeof Y!="number"&&typeof Y!="string"||typeof Y=="string"&&S(Y).length===0||+Y!==+Y>>>0||Y>65535||Y===0&&!we)throw new V(pe,Y,we);return Y|0}var Ve=T((Y,pe)=>{if(Y!==void 0&&(Y===null||typeof Y!="object"||!("aborted"in Y)))throw new I(pe,"AbortSignal",Y)}),Me=T((Y,pe)=>{if(typeof Y!="function")throw new I(pe,"Function",Y)}),se=T((Y,pe)=>{if(typeof Y!="function"||P(Y))throw new I(pe,"Function",Y)}),ue=T((Y,pe)=>{if(Y!==void 0)throw new I(pe,"undefined",Y)});function Ie(Y,pe,we){if(!n(we,Y))throw new I(pe,`('${s(we,"|")}')`,Y)}var Q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function X(Y,pe){if(typeof Y>"u"||!y(Q,Y))throw new k(pe,Y,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ne(Y){if(typeof Y=="string")return X(Y,"hints"),Y;if(t(Y)){let pe=Y.length,we="";if(pe===0)return we;for(let ge=0;ge<pe;ge++){let Xe=Y[ge];X(Xe,"hints"),we+=Xe,ge!==pe-1&&(we+=", ")}return we}throw new k("hints",Y,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:F,isUint32:$,parseFileMode:ve,validateArray:oe,validateStringArray:We,validateBooleanArray:ce,validateAbortSignalArray:te,validateBoolean:J,validateBuffer:de,validateDictionary:Le,validateEncoding:me,validateFunction:Me,validateInt32:De,validateInteger:ae,validateNumber:Ne,validateObject:be,validateOneOf:ie,validatePlainFunction:se,validatePort:_e,validateSignalName:xe,validateString:fe,validateUint32:Re,validateUndefined:ue,validateUnion:Ie,validateAbortSignal:Ve,validateLinkHeaderValue:ne}}),Wa=Ke((r,e)=>{je(),ze(),$e();var t=e.exports={},n,s;function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=o}catch{n=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=l}catch{s=l}})();function u(V){if(n===setTimeout)return setTimeout(V,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(V,0);try{return n(V,0)}catch{try{return n.call(null,V,0)}catch{return n.call(this,V,0)}}}function c(V){if(s===clearTimeout)return clearTimeout(V);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(V);try{return s(V)}catch{try{return s.call(null,V)}catch{return s.call(this,V)}}}var h=[],d=!1,m,y=-1;function _(){!d||!m||(d=!1,m.length?h=m.concat(h):y=-1,h.length&&E())}function E(){if(!d){var V=u(_);d=!0;for(var I=h.length;I;){for(m=h,h=[];++y<I;)m&&m[y].run();y=-1,I=h.length}m=null,d=!1,c(V)}}t.nextTick=function(V){var I=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)I[k-1]=arguments[k];h.push(new S(V,I)),h.length===1&&!d&&u(E)};function S(V,I){this.fun=V,this.array=I}S.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function T(){}t.on=T,t.addListener=T,t.once=T,t.off=T,t.removeListener=T,t.removeAllListeners=T,t.emit=T,t.prependListener=T,t.prependOnceListener=T,t.listeners=function(V){return[]},t.binding=function(V){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(V){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Fs=Ke((r,e)=>{je(),ze(),$e();var{SymbolAsyncIterator:t,SymbolIterator:n,SymbolFor:s}=dr(),o=s("nodejs.stream.destroyed"),l=s("nodejs.stream.errored"),u=s("nodejs.stream.readable"),c=s("nodejs.stream.writable"),h=s("nodejs.stream.disturbed"),d=s("nodejs.webstream.isClosedPromise"),m=s("nodejs.webstream.controllerErrorFunction");function y(z,be=!1){var Le;return!!(z&&typeof z.pipe=="function"&&typeof z.on=="function"&&(!be||typeof z.pause=="function"&&typeof z.resume=="function")&&(!z._writableState||((Le=z._readableState)===null||Le===void 0?void 0:Le.readable)!==!1)&&(!z._writableState||z._readableState))}function _(z){var be;return!!(z&&typeof z.write=="function"&&typeof z.on=="function"&&(!z._readableState||((be=z._writableState)===null||be===void 0?void 0:be.writable)!==!1))}function E(z){return!!(z&&typeof z.pipe=="function"&&z._readableState&&typeof z.on=="function"&&typeof z.write=="function")}function S(z){return z&&(z._readableState||z._writableState||typeof z.write=="function"&&typeof z.on=="function"||typeof z.pipe=="function"&&typeof z.on=="function")}function T(z){return!!(z&&!S(z)&&typeof z.pipeThrough=="function"&&typeof z.getReader=="function"&&typeof z.cancel=="function")}function V(z){return!!(z&&!S(z)&&typeof z.getWriter=="function"&&typeof z.abort=="function")}function I(z){return!!(z&&!S(z)&&typeof z.readable=="object"&&typeof z.writable=="object")}function k(z){return T(z)||V(z)||I(z)}function W(z,be){return z==null?!1:be===!0?typeof z[t]=="function":be===!1?typeof z[n]=="function":typeof z[t]=="function"||typeof z[n]=="function"}function H(z){if(!S(z))return null;let be=z._writableState,Le=z._readableState,oe=be||Le;return!!(z.destroyed||z[o]||oe!=null&&oe.destroyed)}function j(z){if(!_(z))return null;if(z.writableEnded===!0)return!0;let be=z._writableState;return be!=null&&be.errored?!1:typeof(be==null?void 0:be.ended)!="boolean"?null:be.ended}function P(z,be){if(!_(z))return null;if(z.writableFinished===!0)return!0;let Le=z._writableState;return Le!=null&&Le.errored?!1:typeof(Le==null?void 0:Le.finished)!="boolean"?null:!!(Le.finished||be===!1&&Le.ended===!0&&Le.length===0)}function R(z){if(!y(z))return null;if(z.readableEnded===!0)return!0;let be=z._readableState;return!be||be.errored?!1:typeof(be==null?void 0:be.ended)!="boolean"?null:be.ended}function M(z,be){if(!y(z))return null;let Le=z._readableState;return Le!=null&&Le.errored?!1:typeof(Le==null?void 0:Le.endEmitted)!="boolean"?null:!!(Le.endEmitted||be===!1&&Le.ended===!0&&Le.length===0)}function F(z){return z&&z[u]!=null?z[u]:typeof(z==null?void 0:z.readable)!="boolean"?null:H(z)?!1:y(z)&&z.readable&&!M(z)}function $(z){return z&&z[c]!=null?z[c]:typeof(z==null?void 0:z.writable)!="boolean"?null:H(z)?!1:_(z)&&z.writable&&!j(z)}function N(z,be){return S(z)?H(z)?!0:!((be==null?void 0:be.readable)!==!1&&F(z)||(be==null?void 0:be.writable)!==!1&&$(z)):null}function L(z){var be,Le;return S(z)?z.writableErrored?z.writableErrored:(be=(Le=z._writableState)===null||Le===void 0?void 0:Le.errored)!==null&&be!==void 0?be:null:null}function ve(z){var be,Le;return S(z)?z.readableErrored?z.readableErrored:(be=(Le=z._readableState)===null||Le===void 0?void 0:Le.errored)!==null&&be!==void 0?be:null:null}function ae(z){if(!S(z))return null;if(typeof z.closed=="boolean")return z.closed;let be=z._writableState,Le=z._readableState;return typeof(be==null?void 0:be.closed)=="boolean"||typeof(Le==null?void 0:Le.closed)=="boolean"?(be==null?void 0:be.closed)||(Le==null?void 0:Le.closed):typeof z._closed=="boolean"&&De(z)?z._closed:null}function De(z){return typeof z._closed=="boolean"&&typeof z._defaultKeepAlive=="boolean"&&typeof z._removedConnection=="boolean"&&typeof z._removedContLen=="boolean"}function Re(z){return typeof z._sent100=="boolean"&&De(z)}function fe(z){var be;return typeof z._consuming=="boolean"&&typeof z._dumped=="boolean"&&((be=z.req)===null||be===void 0?void 0:be.upgradeOrConnect)===void 0}function Ne(z){if(!S(z))return null;let be=z._writableState,Le=z._readableState,oe=be||Le;return!oe&&Re(z)||!!(oe&&oe.autoDestroy&&oe.emitClose&&oe.closed===!1)}function ie(z){var be;return!!(z&&((be=z[h])!==null&&be!==void 0?be:z.readableDidRead||z.readableAborted))}function J(z){var be,Le,oe,We,ce,te,xe,de,me,_e;return!!(z&&((be=(Le=(oe=(We=(ce=(te=z[l])!==null&&te!==void 0?te:z.readableErrored)!==null&&ce!==void 0?ce:z.writableErrored)!==null&&We!==void 0?We:(xe=z._readableState)===null||xe===void 0?void 0:xe.errorEmitted)!==null&&oe!==void 0?oe:(de=z._writableState)===null||de===void 0?void 0:de.errorEmitted)!==null&&Le!==void 0?Le:(me=z._readableState)===null||me===void 0?void 0:me.errored)!==null&&be!==void 0?be:!((_e=z._writableState)===null||_e===void 0)&&_e.errored))}e.exports={isDestroyed:H,kIsDestroyed:o,isDisturbed:ie,kIsDisturbed:h,isErrored:J,kIsErrored:l,isReadable:F,kIsReadable:u,kIsClosedPromise:d,kControllerErrorFunction:m,kIsWritable:c,isClosed:ae,isDuplexNodeStream:E,isFinished:N,isIterable:W,isReadableNodeStream:y,isReadableStream:T,isReadableEnded:R,isReadableFinished:M,isReadableErrored:ve,isNodeStream:S,isWebStream:k,isWritable:$,isWritableNodeStream:_,isWritableStream:V,isWritableEnded:j,isWritableFinished:P,isWritableErrored:L,isServerRequest:fe,isServerResponse:Re,willEmitClose:Ne,isTransformStream:I}}),Bo=Ke((r,e)=>{je(),ze(),$e();var t=Wa(),{AbortError:n,codes:s}=xn(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:l}=s,{kEmptyObject:u,once:c}=Un(),{validateAbortSignal:h,validateFunction:d,validateObject:m,validateBoolean:y}=Qc(),{Promise:_,PromisePrototypeThen:E,SymbolDispose:S}=dr(),{isClosed:T,isReadable:V,isReadableNodeStream:I,isReadableStream:k,isReadableFinished:W,isReadableErrored:H,isWritable:j,isWritableNodeStream:P,isWritableStream:R,isWritableFinished:M,isWritableErrored:F,isNodeStream:$,willEmitClose:N,kIsClosedPromise:L}=Fs(),ve;function ae(ie){return ie.setHeader&&typeof ie.abort=="function"}var De=()=>{};function Re(ie,J,z){var be,Le;if(arguments.length===2?(z=J,J=u):J==null?J=u:m(J,"options"),d(z,"callback"),h(J.signal,"options.signal"),z=c(z),k(ie)||R(ie))return fe(ie,J,z);if(!$(ie))throw new o("stream",["ReadableStream","WritableStream","Stream"],ie);let oe=(be=J.readable)!==null&&be!==void 0?be:I(ie),We=(Le=J.writable)!==null&&Le!==void 0?Le:P(ie),ce=ie._writableState,te=ie._readableState,xe=()=>{ie.writable||_e()},de=N(ie)&&I(ie)===oe&&P(ie)===We,me=M(ie,!1),_e=()=>{me=!0,ie.destroyed&&(de=!1),!(de&&(!ie.readable||oe))&&(!oe||Ve)&&z.call(ie)},Ve=W(ie,!1),Me=()=>{Ve=!0,ie.destroyed&&(de=!1),!(de&&(!ie.writable||We))&&(!We||me)&&z.call(ie)},se=Y=>{z.call(ie,Y)},ue=T(ie),Ie=()=>{ue=!0;let Y=F(ie)||H(ie);if(Y&&typeof Y!="boolean")return z.call(ie,Y);if(oe&&!Ve&&I(ie,!0)&&!W(ie,!1))return z.call(ie,new l);if(We&&!me&&!M(ie,!1))return z.call(ie,new l);z.call(ie)},Q=()=>{ue=!0;let Y=F(ie)||H(ie);if(Y&&typeof Y!="boolean")return z.call(ie,Y);z.call(ie)},X=()=>{ie.req.on("finish",_e)};ae(ie)?(ie.on("complete",_e),de||ie.on("abort",Ie),ie.req?X():ie.on("request",X)):We&&!ce&&(ie.on("end",xe),ie.on("close",xe)),!de&&typeof ie.aborted=="boolean"&&ie.on("aborted",Ie),ie.on("end",Me),ie.on("finish",_e),J.error!==!1&&ie.on("error",se),ie.on("close",Ie),ue?t.nextTick(Ie):ce!=null&&ce.errorEmitted||te!=null&&te.errorEmitted?de||t.nextTick(Q):(!oe&&(!de||V(ie))&&(me||j(ie)===!1)||!We&&(!de||j(ie))&&(Ve||V(ie)===!1)||te&&ie.req&&ie.aborted)&&t.nextTick(Q);let ne=()=>{z=De,ie.removeListener("aborted",Ie),ie.removeListener("complete",_e),ie.removeListener("abort",Ie),ie.removeListener("request",X),ie.req&&ie.req.removeListener("finish",_e),ie.removeListener("end",xe),ie.removeListener("close",xe),ie.removeListener("finish",_e),ie.removeListener("end",Me),ie.removeListener("error",se),ie.removeListener("close",Ie)};if(J.signal&&!ue){let Y=()=>{let pe=z;ne(),pe.call(ie,new n(void 0,{cause:J.signal.reason}))};if(J.signal.aborted)t.nextTick(Y);else{ve=ve||Un().addAbortListener;let pe=ve(J.signal,Y),we=z;z=c((...ge)=>{pe[S](),we.apply(ie,ge)})}}return ne}function fe(ie,J,z){let be=!1,Le=De;if(J.signal)if(Le=()=>{be=!0,z.call(ie,new n(void 0,{cause:J.signal.reason}))},J.signal.aborted)t.nextTick(Le);else{ve=ve||Un().addAbortListener;let We=ve(J.signal,Le),ce=z;z=c((...te)=>{We[S](),ce.apply(ie,te)})}let oe=(...We)=>{be||t.nextTick(()=>z.apply(ie,We))};return E(ie[L].promise,oe,oe),De}function Ne(ie,J){var z;let be=!1;return J===null&&(J=u),(z=J)!==null&&z!==void 0&&z.cleanup&&(y(J.cleanup,"cleanup"),be=J.cleanup),new _((Le,oe)=>{let We=Re(ie,J,ce=>{be&&We(),ce?oe(ce):Le()})})}e.exports=Re,e.exports.finished=Ne}),mu=Ke((r,e)=>{je(),ze(),$e();var t=Wa(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:o}=xn(),{Symbol:l}=dr(),{kIsDestroyed:u,isDestroyed:c,isFinished:h,isServerRequest:d}=Fs(),m=l("kDestroy"),y=l("kConstruct");function _(N,L,ve){N&&(N.stack,L&&!L.errored&&(L.errored=N),ve&&!ve.errored&&(ve.errored=N))}function E(N,L){let ve=this._readableState,ae=this._writableState,De=ae||ve;return ae!=null&&ae.destroyed||ve!=null&&ve.destroyed?(typeof L=="function"&&L(),this):(_(N,ae,ve),ae&&(ae.destroyed=!0),ve&&(ve.destroyed=!0),De.constructed?S(this,N,L):this.once(m,function(Re){S(this,n(Re,N),L)}),this)}function S(N,L,ve){let ae=!1;function De(Re){if(ae)return;ae=!0;let fe=N._readableState,Ne=N._writableState;_(Re,Ne,fe),Ne&&(Ne.closed=!0),fe&&(fe.closed=!0),typeof ve=="function"&&ve(Re),Re?t.nextTick(T,N,Re):t.nextTick(V,N)}try{N._destroy(L||null,De)}catch(Re){De(Re)}}function T(N,L){I(N,L),V(N)}function V(N){let L=N._readableState,ve=N._writableState;ve&&(ve.closeEmitted=!0),L&&(L.closeEmitted=!0),(ve!=null&&ve.emitClose||L!=null&&L.emitClose)&&N.emit("close")}function I(N,L){let ve=N._readableState,ae=N._writableState;ae!=null&&ae.errorEmitted||ve!=null&&ve.errorEmitted||(ae&&(ae.errorEmitted=!0),ve&&(ve.errorEmitted=!0),N.emit("error",L))}function k(){let N=this._readableState,L=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),L&&(L.constructed=!0,L.destroyed=!1,L.closed=!1,L.closeEmitted=!1,L.errored=null,L.errorEmitted=!1,L.finalCalled=!1,L.prefinished=!1,L.ended=L.writable===!1,L.ending=L.writable===!1,L.finished=L.writable===!1)}function W(N,L,ve){let ae=N._readableState,De=N._writableState;if(De!=null&&De.destroyed||ae!=null&&ae.destroyed)return this;ae!=null&&ae.autoDestroy||De!=null&&De.autoDestroy?N.destroy(L):L&&(L.stack,De&&!De.errored&&(De.errored=L),ae&&!ae.errored&&(ae.errored=L),ve?t.nextTick(I,N,L):I(N,L))}function H(N,L){if(typeof N._construct!="function")return;let ve=N._readableState,ae=N._writableState;ve&&(ve.constructed=!1),ae&&(ae.constructed=!1),N.once(y,L),!(N.listenerCount(y)>1)&&t.nextTick(j,N)}function j(N){let L=!1;function ve(ae){if(L){W(N,ae??new s);return}L=!0;let De=N._readableState,Re=N._writableState,fe=Re||De;De&&(De.constructed=!0),Re&&(Re.constructed=!0),fe.destroyed?N.emit(m,ae):ae?W(N,ae,!0):t.nextTick(P,N)}try{N._construct(ae=>{t.nextTick(ve,ae)})}catch(ae){t.nextTick(ve,ae)}}function P(N){N.emit(y)}function R(N){return(N==null?void 0:N.setHeader)&&typeof N.abort=="function"}function M(N){N.emit("close")}function F(N,L){N.emit("error",L),t.nextTick(M,N)}function $(N,L){!N||c(N)||(!L&&!h(N)&&(L=new o),d(N)?(N.socket=null,N.destroy(L)):R(N)?N.abort():R(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(L):typeof N.close=="function"?N.close():L?t.nextTick(F,N,L):t.nextTick(M,N),N.destroyed||(N[u]=!0))}e.exports={construct:H,destroyer:$,destroy:E,undestroy:k,errorOrDestroy:W}}),s0=Ke((r,e)=>{je(),ze(),$e();var{ArrayIsArray:t,ObjectSetPrototypeOf:n}=dr(),{EventEmitter:s}=(qa(),Kt(Uo));function o(u){s.call(this,u)}n(o.prototype,s.prototype),n(o,s),o.prototype.pipe=function(u,c){let h=this;function d(V){u.writable&&u.write(V)===!1&&h.pause&&h.pause()}h.on("data",d);function m(){h.readable&&h.resume&&h.resume()}u.on("drain",m),!u._isStdio&&(!c||c.end!==!1)&&(h.on("end",_),h.on("close",E));let y=!1;function _(){y||(y=!0,u.end())}function E(){y||(y=!0,typeof u.destroy=="function"&&u.destroy())}function S(V){T(),s.listenerCount(this,"error")===0&&this.emit("error",V)}l(h,"error",S),l(u,"error",S);function T(){h.removeListener("data",d),u.removeListener("drain",m),h.removeListener("end",_),h.removeListener("close",E),h.removeListener("error",S),u.removeListener("error",S),h.removeListener("end",T),h.removeListener("close",T),u.removeListener("close",T)}return h.on("end",T),h.on("close",T),u.on("close",T),u.emit("pipe",h),u};function l(u,c,h){if(typeof u.prependListener=="function")return u.prependListener(c,h);!u._events||!u._events[c]?u.on(c,h):t(u._events[c])?u._events[c].unshift(h):u._events[c]=[h,u._events[c]]}e.exports={Stream:o,prependListener:l}}),Vd=Ke((r,e)=>{je(),ze(),$e();var{SymbolDispose:t}=dr(),{AbortError:n,codes:s}=xn(),{isNodeStream:o,isWebStream:l,kControllerErrorFunction:u}=Fs(),c=Bo(),{ERR_INVALID_ARG_TYPE:h}=s,d,m=(y,_)=>{if(typeof y!="object"||!("aborted"in y))throw new h(_,"AbortSignal",y)};e.exports.addAbortSignal=function(y,_){if(m(y,"signal"),!o(_)&&!l(_))throw new h("stream",["ReadableStream","WritableStream","Stream"],_);return e.exports.addAbortSignalNoValidate(y,_)},e.exports.addAbortSignalNoValidate=function(y,_){if(typeof y!="object"||!("aborted"in y))return _;let E=o(_)?()=>{_.destroy(new n(void 0,{cause:y.reason}))}:()=>{_[u](new n(void 0,{cause:y.reason}))};if(y.aborted)E();else{d=d||Un().addAbortListener;let S=d(y,E);c(_,S[t])}return _}}),fL=Ke((r,e)=>{je(),ze(),$e();var{StringPrototypeSlice:t,SymbolIterator:n,TypedArrayPrototypeSet:s,Uint8Array:o}=dr(),{Buffer:l}=(Qr(),Kt(Hr)),{inspect:u}=Un();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(c){let h={data:c,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(c){let h={data:c,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;let c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}clear(){this.head=this.tail=null,this.length=0}join(c){if(this.length===0)return"";let h=this.head,d=""+h.data;for(;(h=h.next)!==null;)d+=c+h.data;return d}concat(c){if(this.length===0)return l.alloc(0);let h=l.allocUnsafe(c>>>0),d=this.head,m=0;for(;d;)s(h,d.data,m),m+=d.data.length,d=d.next;return h}consume(c,h){let d=this.head.data;if(c<d.length){let m=d.slice(0,c);return this.head.data=d.slice(c),m}return c===d.length?this.shift():h?this._getString(c):this._getBuffer(c)}first(){return this.head.data}*[n](){for(let c=this.head;c;c=c.next)yield c.data}_getString(c){let h="",d=this.head,m=0;do{let y=d.data;if(c>y.length)h+=y,c-=y.length;else{c===y.length?(h+=y,++m,d.next?this.head=d.next:this.head=this.tail=null):(h+=t(y,0,c),this.head=d,d.data=t(y,c));break}++m}while((d=d.next)!==null);return this.length-=m,h}_getBuffer(c){let h=l.allocUnsafe(c),d=c,m=this.head,y=0;do{let _=m.data;if(c>_.length)s(h,_,d-c),c-=_.length;else{c===_.length?(s(h,_,d-c),++y,m.next?this.head=m.next:this.head=this.tail=null):(s(h,new o(_.buffer,_.byteOffset,c),d-c),this.head=m,m.data=_.slice(c));break}++y}while((m=m.next)!==null);return this.length-=y,h}[Symbol.for("nodejs.util.inspect.custom")](c,h){return u(this,{...h,depth:0,customInspect:!1})}}}),Ud=Ke((r,e)=>{je(),ze(),$e();var{MathFloor:t,NumberIsInteger:n}=dr(),{validateInteger:s}=Qc(),{ERR_INVALID_ARG_VALUE:o}=xn().codes,l=16*1024,u=16;function c(y,_,E){return y.highWaterMark!=null?y.highWaterMark:_?y[E]:null}function h(y){return y?u:l}function d(y,_){s(_,"value",0),y?u=_:l=_}function m(y,_,E,S){let T=c(_,S,E);if(T!=null){if(!n(T)||T<0){let V=S?`options.${E}`:"options.highWaterMark";throw new o(V,T)}return t(T)}return h(y.objectMode)}e.exports={getHighWaterMark:m,getDefaultHighWaterMark:h,setDefaultHighWaterMark:d}}),dL=Ke((r,e)=>{je(),ze(),$e();var t=(Qr(),Kt(Hr)),n=t.Buffer;function s(l,u){for(var c in l)u[c]=l[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(s(t,r),r.Buffer=o);function o(l,u,c){return n(l,u,c)}o.prototype=Object.create(n.prototype),s(n,o),o.from=function(l,u,c){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,u,c)},o.alloc=function(l,u,c){if(typeof l!="number")throw new TypeError("Argument must be a number");var h=n(l);return u!==void 0?typeof c=="string"?h.fill(u,c):h.fill(u):h.fill(0),h},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(l)}}),pL=Ke(r=>{je(),ze(),$e();var e=dL().Buffer,t=e.isEncoding||function(I){switch(I=""+I,I&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(I){if(!I)return"utf8";for(var k;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(k)return;I=(""+I).toLowerCase(),k=!0}}function s(I){var k=n(I);if(typeof k!="string"&&(e.isEncoding===t||!t(I)))throw new Error("Unknown encoding: "+I);return k||I}r.StringDecoder=o;function o(I){this.encoding=s(I);var k;switch(this.encoding){case"utf16le":this.text=y,this.end=_,k=4;break;case"utf8":this.fillLast=h,k=4;break;case"base64":this.text=E,this.end=S,k=3;break;default:this.write=T,this.end=V;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(k)}o.prototype.write=function(I){if(I.length===0)return"";var k,W;if(this.lastNeed){if(k=this.fillLast(I),k===void 0)return"";W=this.lastNeed,this.lastNeed=0}else W=0;return W<I.length?k?k+this.text(I,W):this.text(I,W):k||""},o.prototype.end=m,o.prototype.text=d,o.prototype.fillLast=function(I){if(this.lastNeed<=I.length)return I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),this.lastNeed-=I.length};function l(I){return I<=127?0:I>>5===6?2:I>>4===14?3:I>>3===30?4:I>>6===2?-1:-2}function u(I,k,W){var H=k.length-1;if(H<W)return 0;var j=l(k[H]);return j>=0?(j>0&&(I.lastNeed=j-1),j):--H<W||j===-2?0:(j=l(k[H]),j>=0?(j>0&&(I.lastNeed=j-2),j):--H<W||j===-2?0:(j=l(k[H]),j>=0?(j>0&&(j===2?j=0:I.lastNeed=j-3),j):0))}function c(I,k,W){if((k[0]&192)!==128)return I.lastNeed=0,"";if(I.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return I.lastNeed=1,"";if(I.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return I.lastNeed=2,""}}function h(I){var k=this.lastTotal-this.lastNeed,W=c(this,I);if(W!==void 0)return W;if(this.lastNeed<=I.length)return I.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,k,0,I.length),this.lastNeed-=I.length}function d(I,k){var W=u(this,I,k);if(!this.lastNeed)return I.toString("utf8",k);this.lastTotal=W;var H=I.length-(W-this.lastNeed);return I.copy(this.lastChar,0,H),I.toString("utf8",k,H)}function m(I){var k=I&&I.length?this.write(I):"";return this.lastNeed?k+"":k}function y(I,k){if((I.length-k)%2===0){var W=I.toString("utf16le",k);if(W){var H=W.charCodeAt(W.length-1);if(H>=55296&&H<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],W.slice(0,-1)}return W}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",k,I.length-1)}function _(I){var k=I&&I.length?this.write(I):"";if(this.lastNeed){var W=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,W)}return k}function E(I,k){var W=(I.length-k)%3;return W===0?I.toString("base64",k):(this.lastNeed=3-W,this.lastTotal=3,W===1?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",k,I.length-W))}function S(I){var k=I&&I.length?this.write(I):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function T(I){return I.toString(this.encoding)}function V(I){return I&&I.length?this.write(I):""}}),Ex=Ke((r,e)=>{je(),ze(),$e();var t=Wa(),{PromisePrototypeThen:n,SymbolAsyncIterator:s,SymbolIterator:o}=dr(),{Buffer:l}=(Qr(),Kt(Hr)),{ERR_INVALID_ARG_TYPE:u,ERR_STREAM_NULL_VALUES:c}=xn().codes;function h(d,m,y){let _;if(typeof m=="string"||m instanceof l)return new d({objectMode:!0,...y,read(){this.push(m),this.push(null)}});let E;if(m&&m[s])E=!0,_=m[s]();else if(m&&m[o])E=!1,_=m[o]();else throw new u("iterable",["Iterable"],m);let S=new d({objectMode:!0,highWaterMark:1,...y}),T=!1;S._read=function(){T||(T=!0,I())},S._destroy=function(k,W){n(V(k),()=>t.nextTick(W,k),H=>t.nextTick(W,H||k))};async function V(k){let W=k!=null,H=typeof _.throw=="function";if(W&&H){let{value:j,done:P}=await _.throw(k);if(await j,P)return}if(typeof _.return=="function"){let{value:j}=await _.return();await j}}async function I(){for(;;){try{let{value:k,done:W}=E?await _.next():_.next();if(W)S.push(null);else{let H=k&&typeof k.then=="function"?await k:k;if(H===null)throw T=!1,new c;if(S.push(H))continue;T=!1}}catch(k){S.destroy(k)}break}}return S}e.exports=h}),Bd=Ke((r,e)=>{je(),ze(),$e();var t=Wa(),{ArrayPrototypeIndexOf:n,NumberIsInteger:s,NumberIsNaN:o,NumberParseInt:l,ObjectDefineProperties:u,ObjectKeys:c,ObjectSetPrototypeOf:h,Promise:d,SafeSet:m,SymbolAsyncDispose:y,SymbolAsyncIterator:_,Symbol:E}=dr();e.exports=ge,ge.ReadableState=we;var{EventEmitter:S}=(qa(),Kt(Uo)),{Stream:T,prependListener:V}=s0(),{Buffer:I}=(Qr(),Kt(Hr)),{addAbortSignal:k}=Vd(),W=Bo(),H=Un().debuglog("stream",G=>{H=G}),j=fL(),P=mu(),{getHighWaterMark:R,getDefaultHighWaterMark:M}=Ud(),{aggregateTwoErrors:F,codes:{ERR_INVALID_ARG_TYPE:$,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:L,ERR_STREAM_PUSH_AFTER_EOF:ve,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:ae},AbortError:De}=xn(),{validateObject:Re}=Qc(),fe=E("kPaused"),{StringDecoder:Ne}=pL(),ie=Ex();h(ge.prototype,T.prototype),h(ge,T);var J=()=>{},{errorOrDestroy:z}=P,be=1,Le=2,oe=4,We=8,ce=16,te=32,xe=64,de=128,me=256,_e=512,Ve=1024,Me=2048,se=4096,ue=8192,Ie=16384,Q=32768,X=65536,ne=1<<17,Y=1<<18;function pe(G){return{enumerable:!1,get(){return(this.state&G)!==0},set(Z){Z?this.state|=G:this.state&=~G}}}u(we.prototype,{objectMode:pe(be),ended:pe(Le),endEmitted:pe(oe),reading:pe(We),constructed:pe(ce),sync:pe(te),needReadable:pe(xe),emittedReadable:pe(de),readableListening:pe(me),resumeScheduled:pe(_e),errorEmitted:pe(Ve),emitClose:pe(Me),autoDestroy:pe(se),destroyed:pe(ue),closed:pe(Ie),closeEmitted:pe(Q),multiAwaitDrain:pe(X),readingMore:pe(ne),dataEmitted:pe(Y)});function we(G,Z,Ge){typeof Ge!="boolean"&&(Ge=Z instanceof Ds()),this.state=Me|se|ce|te,G&&G.objectMode&&(this.state|=be),Ge&&G&&G.readableObjectMode&&(this.state|=be),this.highWaterMark=G?R(this,G,"readableHighWaterMark",Ge):M(!1),this.buffer=new j,this.length=0,this.pipes=[],this.flowing=null,this[fe]=null,G&&G.emitClose===!1&&(this.state&=-2049),G&&G.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=G&&G.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,G&&G.encoding&&(this.decoder=new Ne(G.encoding),this.encoding=G.encoding)}function ge(G){if(!(this instanceof ge))return new ge(G);let Z=this instanceof Ds();this._readableState=new we(G,this,Z),G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.construct=="function"&&(this._construct=G.construct),G.signal&&!Z&&k(G.signal,this)),T.call(this,G),P.construct(this,()=>{this._readableState.needReadable&&Ze(this,this._readableState)})}ge.prototype.destroy=P.destroy,ge.prototype._undestroy=P.undestroy,ge.prototype._destroy=function(G,Z){Z(G)},ge.prototype[S.captureRejectionSymbol]=function(G){this.destroy(G)},ge.prototype[y]=function(){let G;return this.destroyed||(G=this.readableEnded?null:new De,this.destroy(G)),new d((Z,Ge)=>W(this,rt=>rt&&rt!==G?Ge(rt):Z(null)))},ge.prototype.push=function(G,Z){return Xe(this,G,Z,!1)},ge.prototype.unshift=function(G,Z){return Xe(this,G,Z,!0)};function Xe(G,Z,Ge,rt){H("readableAddChunk",Z);let st=G._readableState,nr;if(st.state&be||(typeof Z=="string"?(Ge=Ge||st.defaultEncoding,st.encoding!==Ge&&(rt&&st.encoding?Z=I.from(Z,Ge).toString(st.encoding):(Z=I.from(Z,Ge),Ge=""))):Z instanceof I?Ge="":T._isUint8Array(Z)?(Z=T._uint8ArrayToBuffer(Z),Ge=""):Z!=null&&(nr=new $("chunk",["string","Buffer","Uint8Array"],Z))),nr)z(G,nr);else if(Z===null)st.state&=-9,ee(G,st);else if(st.state&be||Z&&Z.length>0)if(rt)if(st.state&oe)z(G,new ae);else{if(st.destroyed||st.errored)return!1;v(G,st,Z,!0)}else if(st.ended)z(G,new ve);else{if(st.destroyed||st.errored)return!1;st.state&=-9,st.decoder&&!Ge?(Z=st.decoder.write(Z),st.objectMode||Z.length!==0?v(G,st,Z,!1):Ze(G,st)):v(G,st,Z,!1)}else rt||(st.state&=-9,Ze(G,st));return!st.ended&&(st.length<st.highWaterMark||st.length===0)}function v(G,Z,Ge,rt){Z.flowing&&Z.length===0&&!Z.sync&&G.listenerCount("data")>0?(Z.state&X?Z.awaitDrainWriters.clear():Z.awaitDrainWriters=null,Z.dataEmitted=!0,G.emit("data",Ge)):(Z.length+=Z.objectMode?1:Ge.length,rt?Z.buffer.unshift(Ge):Z.buffer.push(Ge),Z.state&xe&&le(G)),Ze(G,Z)}ge.prototype.isPaused=function(){let G=this._readableState;return G[fe]===!0||G.flowing===!1},ge.prototype.setEncoding=function(G){let Z=new Ne(G);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;let Ge=this._readableState.buffer,rt="";for(let st of Ge)rt+=Z.write(st);return Ge.clear(),rt!==""&&Ge.push(rt),this._readableState.length=rt.length,this};var b=1073741824;function C(G){if(G>b)throw new L("size","<= 1GiB",G);return G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++,G}function q(G,Z){return G<=0||Z.length===0&&Z.ended?0:Z.state&be?1:o(G)?Z.flowing&&Z.length?Z.buffer.first().length:Z.length:G<=Z.length?G:Z.ended?Z.length:0}ge.prototype.read=function(G){H("read",G),G===void 0?G=NaN:s(G)||(G=l(G,10));let Z=this._readableState,Ge=G;if(G>Z.highWaterMark&&(Z.highWaterMark=C(G)),G!==0&&(Z.state&=-129),G===0&&Z.needReadable&&((Z.highWaterMark!==0?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return H("read: emitReadable",Z.length,Z.ended),Z.length===0&&Z.ended?Pt(this):le(this),null;if(G=q(G,Z),G===0&&Z.ended)return Z.length===0&&Pt(this),null;let rt=(Z.state&xe)!==0;if(H("need readable",rt),(Z.length===0||Z.length-G<Z.highWaterMark)&&(rt=!0,H("length less than watermark",rt)),Z.ended||Z.reading||Z.destroyed||Z.errored||!Z.constructed)rt=!1,H("reading, ended or constructing",rt);else if(rt){H("do read"),Z.state|=We|te,Z.length===0&&(Z.state|=xe);try{this._read(Z.highWaterMark)}catch(nr){z(this,nr)}Z.state&=-33,Z.reading||(G=q(Ge,Z))}let st;return G>0?st=mt(G,Z):st=null,st===null?(Z.needReadable=Z.length<=Z.highWaterMark,G=0):(Z.length-=G,Z.multiAwaitDrain?Z.awaitDrainWriters.clear():Z.awaitDrainWriters=null),Z.length===0&&(Z.ended||(Z.needReadable=!0),Ge!==G&&Z.ended&&Pt(this)),st!==null&&!Z.errorEmitted&&!Z.closeEmitted&&(Z.dataEmitted=!0,this.emit("data",st)),st};function ee(G,Z){if(H("onEofChunk"),!Z.ended){if(Z.decoder){let Ge=Z.decoder.end();Ge&&Ge.length&&(Z.buffer.push(Ge),Z.length+=Z.objectMode?1:Ge.length)}Z.ended=!0,Z.sync?le(G):(Z.needReadable=!1,Z.emittedReadable=!0,Ee(G))}}function le(G){let Z=G._readableState;H("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(H("emitReadable",Z.flowing),Z.emittedReadable=!0,t.nextTick(Ee,G))}function Ee(G){let Z=G._readableState;H("emitReadable_",Z.destroyed,Z.length,Z.ended),!Z.destroyed&&!Z.errored&&(Z.length||Z.ended)&&(G.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,Tr(G)}function Ze(G,Z){!Z.readingMore&&Z.constructed&&(Z.readingMore=!0,t.nextTick(et,G,Z))}function et(G,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&Z.length===0);){let Ge=Z.length;if(H("maybeReadMore read 0"),G.read(0),Ge===Z.length)break}Z.readingMore=!1}ge.prototype._read=function(G){throw new N("_read()")},ge.prototype.pipe=function(G,Z){let Ge=this,rt=this._readableState;rt.pipes.length===1&&(rt.multiAwaitDrain||(rt.multiAwaitDrain=!0,rt.awaitDrainWriters=new m(rt.awaitDrainWriters?[rt.awaitDrainWriters]:[]))),rt.pipes.push(G),H("pipe count=%d opts=%j",rt.pipes.length,Z);let st=(!Z||Z.end!==!1)&&G!==t.stdout&&G!==t.stderr?Rr:Pi;rt.endEmitted?t.nextTick(st):Ge.once("end",st),G.on("unpipe",nr);function nr(Bn,rn){H("onunpipe"),Bn===Ge&&rn&&rn.hasUnpiped===!1&&(rn.hasUnpiped=!0,yu())}function Rr(){H("onend"),G.end()}let kr,Bs=!1;function yu(){H("cleanup"),G.removeListener("close",hi),G.removeListener("finish",mn),kr&&G.removeListener("drain",kr),G.removeListener("error",pn),G.removeListener("unpipe",nr),Ge.removeListener("end",Rr),Ge.removeListener("end",Pi),Ge.removeListener("data",jo),Bs=!0,kr&&rt.awaitDrainWriters&&(!G._writableState||G._writableState.needDrain)&&kr()}function is(){Bs||(rt.pipes.length===1&&rt.pipes[0]===G?(H("false write response, pause",0),rt.awaitDrainWriters=G,rt.multiAwaitDrain=!1):rt.pipes.length>1&&rt.pipes.includes(G)&&(H("false write response, pause",rt.awaitDrainWriters.size),rt.awaitDrainWriters.add(G)),Ge.pause()),kr||(kr=ft(Ge,G),G.on("drain",kr))}Ge.on("data",jo);function jo(Bn){H("ondata");let rn=G.write(Bn);H("dest.write",rn),rn===!1&&is()}function pn(Bn){if(H("onerror",Bn),Pi(),G.removeListener("error",pn),G.listenerCount("error")===0){let rn=G._writableState||G._readableState;rn&&!rn.errorEmitted?z(G,Bn):G.emit("error",Bn)}}V(G,"error",pn);function hi(){G.removeListener("finish",mn),Pi()}G.once("close",hi);function mn(){H("onfinish"),G.removeListener("close",hi),Pi()}G.once("finish",mn);function Pi(){H("unpipe"),Ge.unpipe(G)}return G.emit("pipe",Ge),G.writableNeedDrain===!0?is():rt.flowing||(H("pipe resume"),Ge.resume()),G};function ft(G,Z){return function(){let Ge=G._readableState;Ge.awaitDrainWriters===Z?(H("pipeOnDrain",1),Ge.awaitDrainWriters=null):Ge.multiAwaitDrain&&(H("pipeOnDrain",Ge.awaitDrainWriters.size),Ge.awaitDrainWriters.delete(Z)),(!Ge.awaitDrainWriters||Ge.awaitDrainWriters.size===0)&&G.listenerCount("data")&&G.resume()}}ge.prototype.unpipe=function(G){let Z=this._readableState,Ge={hasUnpiped:!1};if(Z.pipes.length===0)return this;if(!G){let st=Z.pipes;Z.pipes=[],this.pause();for(let nr=0;nr<st.length;nr++)st[nr].emit("unpipe",this,{hasUnpiped:!1});return this}let rt=n(Z.pipes,G);return rt===-1?this:(Z.pipes.splice(rt,1),Z.pipes.length===0&&this.pause(),G.emit("unpipe",this,Ge),this)},ge.prototype.on=function(G,Z){let Ge=T.prototype.on.call(this,G,Z),rt=this._readableState;return G==="data"?(rt.readableListening=this.listenerCount("readable")>0,rt.flowing!==!1&&this.resume()):G==="readable"&&!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.flowing=!1,rt.emittedReadable=!1,H("on readable",rt.length,rt.reading),rt.length?le(this):rt.reading||t.nextTick(gt,this)),Ge},ge.prototype.addListener=ge.prototype.on,ge.prototype.removeListener=function(G,Z){let Ge=T.prototype.removeListener.call(this,G,Z);return G==="readable"&&t.nextTick(bt,this),Ge},ge.prototype.off=ge.prototype.removeListener,ge.prototype.removeAllListeners=function(G){let Z=T.prototype.removeAllListeners.apply(this,arguments);return(G==="readable"||G===void 0)&&t.nextTick(bt,this),Z};function bt(G){let Z=G._readableState;Z.readableListening=G.listenerCount("readable")>0,Z.resumeScheduled&&Z[fe]===!1?Z.flowing=!0:G.listenerCount("data")>0?G.resume():Z.readableListening||(Z.flowing=null)}function gt(G){H("readable nexttick read 0"),G.read(0)}ge.prototype.resume=function(){let G=this._readableState;return G.flowing||(H("resume"),G.flowing=!G.readableListening,Ur(this,G)),G[fe]=!1,this};function Ur(G,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,t.nextTick(_r,G,Z))}function _r(G,Z){H("resume",Z.reading),Z.reading||G.read(0),Z.resumeScheduled=!1,G.emit("resume"),Tr(G),Z.flowing&&!Z.reading&&G.read(0)}ge.prototype.pause=function(){return H("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(H("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[fe]=!0,this};function Tr(G){let Z=G._readableState;for(H("flow",Z.flowing);Z.flowing&&G.read()!==null;);}ge.prototype.wrap=function(G){let Z=!1;G.on("data",rt=>{!this.push(rt)&&G.pause&&(Z=!0,G.pause())}),G.on("end",()=>{this.push(null)}),G.on("error",rt=>{z(this,rt)}),G.on("close",()=>{this.destroy()}),G.on("destroy",()=>{this.destroy()}),this._read=()=>{Z&&G.resume&&(Z=!1,G.resume())};let Ge=c(G);for(let rt=1;rt<Ge.length;rt++){let st=Ge[rt];this[st]===void 0&&typeof G[st]=="function"&&(this[st]=G[st].bind(G))}return this},ge.prototype[_]=function(){return kt(this)},ge.prototype.iterator=function(G){return G!==void 0&&Re(G,"options"),kt(this,G)};function kt(G,Z){typeof G.read!="function"&&(G=ge.wrap(G,{objectMode:!0}));let Ge=qt(G,Z);return Ge.stream=G,Ge}async function*qt(G,Z){let Ge=J;function rt(Rr){this===G?(Ge(),Ge=J):Ge=Rr}G.on("readable",rt);let st,nr=W(G,{writable:!1},Rr=>{st=Rr?F(st,Rr):null,Ge(),Ge=J});try{for(;;){let Rr=G.destroyed?null:G.read();if(Rr!==null)yield Rr;else{if(st)throw st;if(st===null)return;await new d(rt)}}}catch(Rr){throw st=F(st,Rr),st}finally{(st||(Z==null?void 0:Z.destroyOnReturn)!==!1)&&(st===void 0||G._readableState.autoDestroy)?P.destroyer(G,null):(G.off("readable",rt),nr())}}u(ge.prototype,{readable:{__proto__:null,get(){let G=this._readableState;return!!G&&G.readable!==!1&&!G.destroyed&&!G.errorEmitted&&!G.endEmitted},set(G){this._readableState&&(this._readableState.readable=!!G)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(G){this._readableState&&(this._readableState.destroyed=G)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),u(we.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[fe]!==!1},set(G){this[fe]=!!G}}}),ge._fromList=mt;function mt(G,Z){if(Z.length===0)return null;let Ge;return Z.objectMode?Ge=Z.buffer.shift():!G||G>=Z.length?(Z.decoder?Ge=Z.buffer.join(""):Z.buffer.length===1?Ge=Z.buffer.first():Ge=Z.buffer.concat(Z.length),Z.buffer.clear()):Ge=Z.buffer.consume(G,Z.decoder),Ge}function Pt(G){let Z=G._readableState;H("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,t.nextTick(mr,Z,G))}function mr(G,Z){if(H("endReadableNT",G.endEmitted,G.length),!G.errored&&!G.closeEmitted&&!G.endEmitted&&G.length===0){if(G.endEmitted=!0,Z.emit("end"),Z.writable&&Z.allowHalfOpen===!1)t.nextTick(Gt,Z);else if(G.autoDestroy){let Ge=Z._writableState;(!Ge||Ge.autoDestroy&&(Ge.finished||Ge.writable===!1))&&Z.destroy()}}}function Gt(G){G.writable&&!G.writableEnded&&!G.destroyed&&G.end()}ge.from=function(G,Z){return ie(ge,G,Z)};var wr;function Br(){return wr===void 0&&(wr={}),wr}ge.fromWeb=function(G,Z){return Br().newStreamReadableFromReadableStream(G,Z)},ge.toWeb=function(G,Z){return Br().newReadableStreamFromStreamReadable(G,Z)},ge.wrap=function(G,Z){var Ge,rt;return new ge({objectMode:(Ge=(rt=G.readableObjectMode)!==null&&rt!==void 0?rt:G.objectMode)!==null&&Ge!==void 0?Ge:!0,...Z,destroy(st,nr){P.destroyer(G,st),nr(st)}}).wrap(G)}}),o0=Ke((r,e)=>{je(),ze(),$e();var t=Wa(),{ArrayPrototypeSlice:n,Error:s,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:l,ObjectDefineProperties:u,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:h,Symbol:d,SymbolHasInstance:m}=dr();e.exports=Re,Re.WritableState=ae;var{EventEmitter:y}=(qa(),Kt(Uo)),_=s0().Stream,{Buffer:E}=(Qr(),Kt(Hr)),S=mu(),{addAbortSignal:T}=Vd(),{getHighWaterMark:V,getDefaultHighWaterMark:I}=Ud(),{ERR_INVALID_ARG_TYPE:k,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_MULTIPLE_CALLBACK:H,ERR_STREAM_CANNOT_PIPE:j,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:M,ERR_STREAM_WRITE_AFTER_END:F,ERR_UNKNOWN_ENCODING:$}=xn().codes,{errorOrDestroy:N}=S;c(Re.prototype,_.prototype),c(Re,_);function L(){}var ve=d("kOnFinished");function ae(se,ue,Ie){typeof Ie!="boolean"&&(Ie=ue instanceof Ds()),this.objectMode=!!(se&&se.objectMode),Ie&&(this.objectMode=this.objectMode||!!(se&&se.writableObjectMode)),this.highWaterMark=se?V(this,se,"writableHighWaterMark",Ie):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Q=!!(se&&se.decodeStrings===!1);this.decodeStrings=!Q,this.defaultEncoding=se&&se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=z.bind(void 0,ue),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,De(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!se||se.emitClose!==!1,this.autoDestroy=!se||se.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ve]=[]}function De(se){se.buffered=[],se.bufferedIndex=0,se.allBuffers=!0,se.allNoop=!0}ae.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},l(ae.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Re(se){let ue=this instanceof Ds();if(!ue&&!o(Re,this))return new Re(se);this._writableState=new ae(se,this,ue),se&&(typeof se.write=="function"&&(this._write=se.write),typeof se.writev=="function"&&(this._writev=se.writev),typeof se.destroy=="function"&&(this._destroy=se.destroy),typeof se.final=="function"&&(this._final=se.final),typeof se.construct=="function"&&(this._construct=se.construct),se.signal&&T(se.signal,this)),_.call(this,se),S.construct(this,()=>{let Ie=this._writableState;Ie.writing||We(this,Ie),de(this,Ie)})}l(Re,m,{__proto__:null,value:function(se){return o(this,se)?!0:this!==Re?!1:se&&se._writableState instanceof ae}}),Re.prototype.pipe=function(){N(this,new j)};function fe(se,ue,Ie,Q){let X=se._writableState;if(typeof Ie=="function")Q=Ie,Ie=X.defaultEncoding;else{if(!Ie)Ie=X.defaultEncoding;else if(Ie!=="buffer"&&!E.isEncoding(Ie))throw new $(Ie);typeof Q!="function"&&(Q=L)}if(ue===null)throw new M;if(!X.objectMode)if(typeof ue=="string")X.decodeStrings!==!1&&(ue=E.from(ue,Ie),Ie="buffer");else if(ue instanceof E)Ie="buffer";else if(_._isUint8Array(ue))ue=_._uint8ArrayToBuffer(ue),Ie="buffer";else throw new k("chunk",["string","Buffer","Uint8Array"],ue);let ne;return X.ending?ne=new F:X.destroyed&&(ne=new P("write")),ne?(t.nextTick(Q,ne),N(se,ne,!0),ne):(X.pendingcb++,Ne(se,X,ue,Ie,Q))}Re.prototype.write=function(se,ue,Ie){return fe(this,se,ue,Ie)===!0},Re.prototype.cork=function(){this._writableState.corked++},Re.prototype.uncork=function(){let se=this._writableState;se.corked&&(se.corked--,se.writing||We(this,se))},Re.prototype.setDefaultEncoding=function(se){if(typeof se=="string"&&(se=h(se)),!E.isEncoding(se))throw new $(se);return this._writableState.defaultEncoding=se,this};function Ne(se,ue,Ie,Q,X){let ne=ue.objectMode?1:Ie.length;ue.length+=ne;let Y=ue.length<ue.highWaterMark;return Y||(ue.needDrain=!0),ue.writing||ue.corked||ue.errored||!ue.constructed?(ue.buffered.push({chunk:Ie,encoding:Q,callback:X}),ue.allBuffers&&Q!=="buffer"&&(ue.allBuffers=!1),ue.allNoop&&X!==L&&(ue.allNoop=!1)):(ue.writelen=ne,ue.writecb=X,ue.writing=!0,ue.sync=!0,se._write(Ie,Q,ue.onwrite),ue.sync=!1),Y&&!ue.errored&&!ue.destroyed}function ie(se,ue,Ie,Q,X,ne,Y){ue.writelen=Q,ue.writecb=Y,ue.writing=!0,ue.sync=!0,ue.destroyed?ue.onwrite(new P("write")):Ie?se._writev(X,ue.onwrite):se._write(X,ne,ue.onwrite),ue.sync=!1}function J(se,ue,Ie,Q){--ue.pendingcb,Q(Ie),oe(ue),N(se,Ie)}function z(se,ue){let Ie=se._writableState,Q=Ie.sync,X=Ie.writecb;if(typeof X!="function"){N(se,new H);return}Ie.writing=!1,Ie.writecb=null,Ie.length-=Ie.writelen,Ie.writelen=0,ue?(ue.stack,Ie.errored||(Ie.errored=ue),se._readableState&&!se._readableState.errored&&(se._readableState.errored=ue),Q?t.nextTick(J,se,Ie,ue,X):J(se,Ie,ue,X)):(Ie.buffered.length>Ie.bufferedIndex&&We(se,Ie),Q?Ie.afterWriteTickInfo!==null&&Ie.afterWriteTickInfo.cb===X?Ie.afterWriteTickInfo.count++:(Ie.afterWriteTickInfo={count:1,cb:X,stream:se,state:Ie},t.nextTick(be,Ie.afterWriteTickInfo)):Le(se,Ie,1,X))}function be({stream:se,state:ue,count:Ie,cb:Q}){return ue.afterWriteTickInfo=null,Le(se,ue,Ie,Q)}function Le(se,ue,Ie,Q){for(!ue.ending&&!se.destroyed&&ue.length===0&&ue.needDrain&&(ue.needDrain=!1,se.emit("drain"));Ie-- >0;)ue.pendingcb--,Q();ue.destroyed&&oe(ue),de(se,ue)}function oe(se){if(se.writing)return;for(let X=se.bufferedIndex;X<se.buffered.length;++X){var ue;let{chunk:ne,callback:Y}=se.buffered[X],pe=se.objectMode?1:ne.length;se.length-=pe,Y((ue=se.errored)!==null&&ue!==void 0?ue:new P("write"))}let Ie=se[ve].splice(0);for(let X=0;X<Ie.length;X++){var Q;Ie[X]((Q=se.errored)!==null&&Q!==void 0?Q:new P("end"))}De(se)}function We(se,ue){if(ue.corked||ue.bufferProcessing||ue.destroyed||!ue.constructed)return;let{buffered:Ie,bufferedIndex:Q,objectMode:X}=ue,ne=Ie.length-Q;if(!ne)return;let Y=Q;if(ue.bufferProcessing=!0,ne>1&&se._writev){ue.pendingcb-=ne-1;let pe=ue.allNoop?L:ge=>{for(let Xe=Y;Xe<Ie.length;++Xe)Ie[Xe].callback(ge)},we=ue.allNoop&&Y===0?Ie:n(Ie,Y);we.allBuffers=ue.allBuffers,ie(se,ue,!0,ue.length,we,"",pe),De(ue)}else{do{let{chunk:pe,encoding:we,callback:ge}=Ie[Y];Ie[Y++]=null;let Xe=X?1:pe.length;ie(se,ue,!1,Xe,pe,we,ge)}while(Y<Ie.length&&!ue.writing);Y===Ie.length?De(ue):Y>256?(Ie.splice(0,Y),ue.bufferedIndex=0):ue.bufferedIndex=Y}ue.bufferProcessing=!1}Re.prototype._write=function(se,ue,Ie){if(this._writev)this._writev([{chunk:se,encoding:ue}],Ie);else throw new W("_write()")},Re.prototype._writev=null,Re.prototype.end=function(se,ue,Ie){let Q=this._writableState;typeof se=="function"?(Ie=se,se=null,ue=null):typeof ue=="function"&&(Ie=ue,ue=null);let X;if(se!=null){let ne=fe(this,se,ue);ne instanceof s&&(X=ne)}return Q.corked&&(Q.corked=1,this.uncork()),X||(!Q.errored&&!Q.ending?(Q.ending=!0,de(this,Q,!0),Q.ended=!0):Q.finished?X=new R("end"):Q.destroyed&&(X=new P("end"))),typeof Ie=="function"&&(X||Q.finished?t.nextTick(Ie,X):Q[ve].push(Ie)),this};function ce(se){return se.ending&&!se.destroyed&&se.constructed&&se.length===0&&!se.errored&&se.buffered.length===0&&!se.finished&&!se.writing&&!se.errorEmitted&&!se.closeEmitted}function te(se,ue){let Ie=!1;function Q(X){if(Ie){N(se,X??H());return}if(Ie=!0,ue.pendingcb--,X){let ne=ue[ve].splice(0);for(let Y=0;Y<ne.length;Y++)ne[Y](X);N(se,X,ue.sync)}else ce(ue)&&(ue.prefinished=!0,se.emit("prefinish"),ue.pendingcb++,t.nextTick(me,se,ue))}ue.sync=!0,ue.pendingcb++;try{se._final(Q)}catch(X){Q(X)}ue.sync=!1}function xe(se,ue){!ue.prefinished&&!ue.finalCalled&&(typeof se._final=="function"&&!ue.destroyed?(ue.finalCalled=!0,te(se,ue)):(ue.prefinished=!0,se.emit("prefinish")))}function de(se,ue,Ie){ce(ue)&&(xe(se,ue),ue.pendingcb===0&&(Ie?(ue.pendingcb++,t.nextTick((Q,X)=>{ce(X)?me(Q,X):X.pendingcb--},se,ue)):ce(ue)&&(ue.pendingcb++,me(se,ue))))}function me(se,ue){ue.pendingcb--,ue.finished=!0;let Ie=ue[ve].splice(0);for(let Q=0;Q<Ie.length;Q++)Ie[Q]();if(se.emit("finish"),ue.autoDestroy){let Q=se._readableState;(!Q||Q.autoDestroy&&(Q.endEmitted||Q.readable===!1))&&se.destroy()}}u(Re.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(se){this._writableState&&(this._writableState.destroyed=se)}},writable:{__proto__:null,get(){let se=this._writableState;return!!se&&se.writable!==!1&&!se.destroyed&&!se.errored&&!se.ending&&!se.ended},set(se){this._writableState&&(this._writableState.writable=!!se)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let se=this._writableState;return se?!se.destroyed&&!se.ending&&se.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var _e=S.destroy;Re.prototype.destroy=function(se,ue){let Ie=this._writableState;return!Ie.destroyed&&(Ie.bufferedIndex<Ie.buffered.length||Ie[ve].length)&&t.nextTick(oe,Ie),_e.call(this,se,ue),this},Re.prototype._undestroy=S.undestroy,Re.prototype._destroy=function(se,ue){ue(se)},Re.prototype[y.captureRejectionSymbol]=function(se){this.destroy(se)};var Ve;function Me(){return Ve===void 0&&(Ve={}),Ve}Re.fromWeb=function(se,ue){return Me().newStreamWritableFromWritableStream(se,ue)},Re.toWeb=function(se){return Me().newWritableStreamFromStreamWritable(se)}}),mL=Ke((r,e)=>{je(),ze(),$e();var t=Wa(),n=(Qr(),Kt(Hr)),{isReadable:s,isWritable:o,isIterable:l,isNodeStream:u,isReadableNodeStream:c,isWritableNodeStream:h,isDuplexNodeStream:d,isReadableStream:m,isWritableStream:y}=Fs(),_=Bo(),{AbortError:E,codes:{ERR_INVALID_ARG_TYPE:S,ERR_INVALID_RETURN_VALUE:T}}=xn(),{destroyer:V}=mu(),I=Ds(),k=Bd(),W=o0(),{createDeferredPromise:H}=Un(),j=Ex(),P=globalThis.Blob||n.Blob,R=typeof P<"u"?function(ve){return ve instanceof P}:function(ve){return!1},M=globalThis.AbortController||Pc().AbortController,{FunctionPrototypeCall:F}=dr(),$=class extends I{constructor(ve){super(ve),(ve==null?void 0:ve.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(ve==null?void 0:ve.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function ve(ae,De){if(d(ae))return ae;if(c(ae))return L({readable:ae});if(h(ae))return L({writable:ae});if(u(ae))return L({writable:!1,readable:!1});if(m(ae))return L({readable:k.fromWeb(ae)});if(y(ae))return L({writable:W.fromWeb(ae)});if(typeof ae=="function"){let{value:fe,write:Ne,final:ie,destroy:J}=N(ae);if(l(fe))return j($,fe,{objectMode:!0,write:Ne,final:ie,destroy:J});let z=fe==null?void 0:fe.then;if(typeof z=="function"){let be,Le=F(z,fe,oe=>{if(oe!=null)throw new T("nully","body",oe)},oe=>{V(be,oe)});return be=new $({objectMode:!0,readable:!1,write:Ne,final(oe){ie(async()=>{try{await Le,t.nextTick(oe,null)}catch(We){t.nextTick(oe,We)}})},destroy:J})}throw new T("Iterable, AsyncIterable or AsyncFunction",De,fe)}if(R(ae))return ve(ae.arrayBuffer());if(l(ae))return j($,ae,{objectMode:!0,writable:!1});if(m(ae==null?void 0:ae.readable)&&y(ae==null?void 0:ae.writable))return $.fromWeb(ae);if(typeof(ae==null?void 0:ae.writable)=="object"||typeof(ae==null?void 0:ae.readable)=="object"){let fe=ae!=null&&ae.readable?c(ae==null?void 0:ae.readable)?ae==null?void 0:ae.readable:ve(ae.readable):void 0,Ne=ae!=null&&ae.writable?h(ae==null?void 0:ae.writable)?ae==null?void 0:ae.writable:ve(ae.writable):void 0;return L({readable:fe,writable:Ne})}let Re=ae==null?void 0:ae.then;if(typeof Re=="function"){let fe;return F(Re,ae,Ne=>{Ne!=null&&fe.push(Ne),fe.push(null)},Ne=>{V(fe,Ne)}),fe=new $({objectMode:!0,writable:!1,read(){}})}throw new S(De,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],ae)};function N(ve){let{promise:ae,resolve:De}=H(),Re=new M,fe=Re.signal;return{value:ve(async function*(){for(;;){let Ne=ae;ae=null;let{chunk:ie,done:J,cb:z}=await Ne;if(t.nextTick(z),J)return;if(fe.aborted)throw new E(void 0,{cause:fe.reason});({promise:ae,resolve:De}=H()),yield ie}}(),{signal:fe}),write(Ne,ie,J){let z=De;De=null,z({chunk:Ne,done:!1,cb:J})},final(Ne){let ie=De;De=null,ie({done:!0,cb:Ne})},destroy(Ne,ie){Re.abort(),ie(Ne)}}}function L(ve){let ae=ve.readable&&typeof ve.readable.read!="function"?k.wrap(ve.readable):ve.readable,De=ve.writable,Re=!!s(ae),fe=!!o(De),Ne,ie,J,z,be;function Le(oe){let We=z;z=null,We?We(oe):oe&&be.destroy(oe)}return be=new $({readableObjectMode:!!(ae!=null&&ae.readableObjectMode),writableObjectMode:!!(De!=null&&De.writableObjectMode),readable:Re,writable:fe}),fe&&(_(De,oe=>{fe=!1,oe&&V(ae,oe),Le(oe)}),be._write=function(oe,We,ce){De.write(oe,We)?ce():Ne=ce},be._final=function(oe){De.end(),ie=oe},De.on("drain",function(){if(Ne){let oe=Ne;Ne=null,oe()}}),De.on("finish",function(){if(ie){let oe=ie;ie=null,oe()}})),Re&&(_(ae,oe=>{Re=!1,oe&&V(ae,oe),Le(oe)}),ae.on("readable",function(){if(J){let oe=J;J=null,oe()}}),ae.on("end",function(){be.push(null)}),be._read=function(){for(;;){let oe=ae.read();if(oe===null){J=be._read;return}if(!be.push(oe))return}}),be._destroy=function(oe,We){!oe&&z!==null&&(oe=new E),J=null,Ne=null,ie=null,z===null?We(oe):(z=We,V(De,oe),V(ae,oe))},be}}),Ds=Ke((r,e)=>{je(),ze(),$e();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:s,ObjectSetPrototypeOf:o}=dr();e.exports=c;var l=Bd(),u=o0();o(c.prototype,l.prototype),o(c,l);{let y=s(u.prototype);for(let _=0;_<y.length;_++){let E=y[_];c.prototype[E]||(c.prototype[E]=u.prototype[E])}}function c(y){if(!(this instanceof c))return new c(y);l.call(this,y),u.call(this,y),y?(this.allowHalfOpen=y.allowHalfOpen!==!1,y.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),y.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(c.prototype,{writable:{__proto__:null,...n(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(u.prototype,"writableLength")},writableFinished:{__proto__:null,...n(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(y){this._readableState&&this._writableState&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}}});var h;function d(){return h===void 0&&(h={}),h}c.fromWeb=function(y,_){return d().newStreamDuplexFromReadableWritablePair(y,_)},c.toWeb=function(y){return d().newReadableWritablePairFromDuplex(y)};var m;c.from=function(y){return m||(m=mL()),m(y,"body")}}),Sx=Ke((r,e)=>{je(),ze(),$e();var{ObjectSetPrototypeOf:t,Symbol:n}=dr();e.exports=c;var{ERR_METHOD_NOT_IMPLEMENTED:s}=xn().codes,o=Ds(),{getHighWaterMark:l}=Ud();t(c.prototype,o.prototype),t(c,o);var u=n("kCallback");function c(m){if(!(this instanceof c))return new c(m);let y=m?l(this,m,"readableHighWaterMark",!0):null;y===0&&(m={...m,highWaterMark:null,readableHighWaterMark:y,writableHighWaterMark:m.writableHighWaterMark||0}),o.call(this,m),this._readableState.sync=!1,this[u]=null,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",d)}function h(m){typeof this._flush=="function"&&!this.destroyed?this._flush((y,_)=>{if(y){m?m(y):this.destroy(y);return}_!=null&&this.push(_),this.push(null),m&&m()}):(this.push(null),m&&m())}function d(){this._final!==h&&h.call(this)}c.prototype._final=h,c.prototype._transform=function(m,y,_){throw new s("_transform()")},c.prototype._write=function(m,y,_){let E=this._readableState,S=this._writableState,T=E.length;this._transform(m,y,(V,I)=>{if(V){_(V);return}I!=null&&this.push(I),S.ended||T===E.length||E.length<E.highWaterMark?_():this[u]=_})},c.prototype._read=function(){if(this[u]){let m=this[u];this[u]=null,m()}}}),Tx=Ke((r,e)=>{je(),ze(),$e();var{ObjectSetPrototypeOf:t}=dr();e.exports=s;var n=Sx();t(s.prototype,n.prototype),t(s,n);function s(o){if(!(this instanceof s))return new s(o);n.call(this,o)}s.prototype._transform=function(o,l,u){u(null,o)}}),a0=Ke((r,e)=>{je(),ze(),$e();var t=Wa(),{ArrayIsArray:n,Promise:s,SymbolAsyncIterator:o,SymbolDispose:l}=dr(),u=Bo(),{once:c}=Un(),h=mu(),d=Ds(),{aggregateTwoErrors:m,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:_,ERR_MISSING_ARGS:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:T},AbortError:V}=xn(),{validateFunction:I,validateAbortSignal:k}=Qc(),{isIterable:W,isReadable:H,isReadableNodeStream:j,isNodeStream:P,isTransformStream:R,isWebStream:M,isReadableStream:F,isReadableFinished:$}=Fs(),N=globalThis.AbortController||Pc().AbortController,L,ve,ae;function De(oe,We,ce){let te=!1;oe.on("close",()=>{te=!0});let xe=u(oe,{readable:We,writable:ce},de=>{te=!de});return{destroy:de=>{te||(te=!0,h.destroyer(oe,de||new S("pipe")))},cleanup:xe}}function Re(oe){return I(oe[oe.length-1],"streams[stream.length - 1]"),oe.pop()}function fe(oe){if(W(oe))return oe;if(j(oe))return Ne(oe);throw new y("val",["Readable","Iterable","AsyncIterable"],oe)}async function*Ne(oe){ve||(ve=Bd()),yield*ve.prototype[o].call(oe)}async function ie(oe,We,ce,{end:te}){let xe,de=null,me=Me=>{if(Me&&(xe=Me),de){let se=de;de=null,se()}},_e=()=>new s((Me,se)=>{xe?se(xe):de=()=>{xe?se(xe):Me()}});We.on("drain",me);let Ve=u(We,{readable:!1},me);try{We.writableNeedDrain&&await _e();for await(let Me of oe)We.write(Me)||await _e();te&&(We.end(),await _e()),ce()}catch(Me){ce(xe!==Me?m(xe,Me):Me)}finally{Ve(),We.off("drain",me)}}async function J(oe,We,ce,{end:te}){R(We)&&(We=We.writable);let xe=We.getWriter();try{for await(let de of oe)await xe.ready,xe.write(de).catch(()=>{});await xe.ready,te&&await xe.close(),ce()}catch(de){try{await xe.abort(de),ce(de)}catch(me){ce(me)}}}function z(...oe){return be(oe,c(Re(oe)))}function be(oe,We,ce){if(oe.length===1&&n(oe[0])&&(oe=oe[0]),oe.length<2)throw new E("streams");let te=new N,xe=te.signal,de=ce==null?void 0:ce.signal,me=[];k(de,"options.signal");function _e(){X(new V)}ae=ae||Un().addAbortListener;let Ve;de&&(Ve=ae(de,_e));let Me,se,ue=[],Ie=0;function Q(we){X(we,--Ie===0)}function X(we,ge){var Xe;if(we&&(!Me||Me.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Me=we),!(!Me&&!ge)){for(;ue.length;)ue.shift()(Me);(Xe=Ve)===null||Xe===void 0||Xe[l](),te.abort(),ge&&(Me||me.forEach(v=>v()),t.nextTick(We,Me,se))}}let ne;for(let we=0;we<oe.length;we++){let ge=oe[we],Xe=we<oe.length-1,v=we>0,b=Xe||(ce==null?void 0:ce.end)!==!1,C=we===oe.length-1;if(P(ge)){let q=function(ee){ee&&ee.name!=="AbortError"&&ee.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Q(ee)};if(b){let{destroy:ee,cleanup:le}=De(ge,Xe,v);ue.push(ee),H(ge)&&C&&me.push(le)}ge.on("error",q),H(ge)&&C&&me.push(()=>{ge.removeListener("error",q)})}if(we===0)if(typeof ge=="function"){if(ne=ge({signal:xe}),!W(ne))throw new _("Iterable, AsyncIterable or Stream","source",ne)}else W(ge)||j(ge)||R(ge)?ne=ge:ne=d.from(ge);else if(typeof ge=="function"){if(R(ne)){var Y;ne=fe((Y=ne)===null||Y===void 0?void 0:Y.readable)}else ne=fe(ne);if(ne=ge(ne,{signal:xe}),Xe){if(!W(ne,!0))throw new _("AsyncIterable",`transform[${we-1}]`,ne)}else{var pe;L||(L=Tx());let q=new L({objectMode:!0}),ee=(pe=ne)===null||pe===void 0?void 0:pe.then;if(typeof ee=="function")Ie++,ee.call(ne,Ze=>{se=Ze,Ze!=null&&q.write(Ze),b&&q.end(),t.nextTick(Q)},Ze=>{q.destroy(Ze),t.nextTick(Q,Ze)});else if(W(ne,!0))Ie++,ie(ne,q,Q,{end:b});else if(F(ne)||R(ne)){let Ze=ne.readable||ne;Ie++,ie(Ze,q,Q,{end:b})}else throw new _("AsyncIterable or Promise","destination",ne);ne=q;let{destroy:le,cleanup:Ee}=De(ne,!1,!0);ue.push(le),C&&me.push(Ee)}}else if(P(ge)){if(j(ne)){Ie+=2;let q=Le(ne,ge,Q,{end:b});H(ge)&&C&&me.push(q)}else if(R(ne)||F(ne)){let q=ne.readable||ne;Ie++,ie(q,ge,Q,{end:b})}else if(W(ne))Ie++,ie(ne,ge,Q,{end:b});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ne);ne=ge}else if(M(ge)){if(j(ne))Ie++,J(fe(ne),ge,Q,{end:b});else if(F(ne)||W(ne))Ie++,J(ne,ge,Q,{end:b});else if(R(ne))Ie++,J(ne.readable,ge,Q,{end:b});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ne);ne=ge}else ne=d.from(ge)}return(xe!=null&&xe.aborted||de!=null&&de.aborted)&&t.nextTick(_e),ne}function Le(oe,We,ce,{end:te}){let xe=!1;if(We.on("close",()=>{xe||ce(new T)}),oe.pipe(We,{end:!1}),te){let de=function(){xe=!0,We.end()};$(oe)?t.nextTick(de):oe.once("end",de)}else ce();return u(oe,{readable:!0,writable:!1},de=>{let me=oe._readableState;de&&de.code==="ERR_STREAM_PREMATURE_CLOSE"&&me&&me.ended&&!me.errored&&!me.errorEmitted?oe.once("end",ce).once("error",ce):ce(de)}),u(We,{readable:!1,writable:!0},ce)}e.exports={pipelineImpl:be,pipeline:z}}),xx=Ke((r,e)=>{je(),ze(),$e();var{pipeline:t}=a0(),n=Ds(),{destroyer:s}=mu(),{isNodeStream:o,isReadable:l,isWritable:u,isWebStream:c,isTransformStream:h,isWritableStream:d,isReadableStream:m}=Fs(),{AbortError:y,codes:{ERR_INVALID_ARG_VALUE:_,ERR_MISSING_ARGS:E}}=xn(),S=Bo();e.exports=function(...T){if(T.length===0)throw new E("streams");if(T.length===1)return n.from(T[0]);let V=[...T];if(typeof T[0]=="function"&&(T[0]=n.from(T[0])),typeof T[T.length-1]=="function"){let N=T.length-1;T[N]=n.from(T[N])}for(let N=0;N<T.length;++N)if(!(!o(T[N])&&!c(T[N]))){if(N<T.length-1&&!(l(T[N])||m(T[N])||h(T[N])))throw new _(`streams[${N}]`,V[N],"must be readable");if(N>0&&!(u(T[N])||d(T[N])||h(T[N])))throw new _(`streams[${N}]`,V[N],"must be writable")}let I,k,W,H,j;function P(N){let L=H;H=null,L?L(N):N?j.destroy(N):!$&&!F&&j.destroy()}let R=T[0],M=t(T,P),F=!!(u(R)||d(R)||h(R)),$=!!(l(M)||m(M)||h(M));if(j=new n({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(M!=null&&M.readableObjectMode),writable:F,readable:$}),F){if(o(R))j._write=function(L,ve,ae){R.write(L,ve)?ae():I=ae},j._final=function(L){R.end(),k=L},R.on("drain",function(){if(I){let L=I;I=null,L()}});else if(c(R)){let L=(h(R)?R.writable:R).getWriter();j._write=async function(ve,ae,De){try{await L.ready,L.write(ve).catch(()=>{}),De()}catch(Re){De(Re)}},j._final=async function(ve){try{await L.ready,L.close().catch(()=>{}),k=ve}catch(ae){ve(ae)}}}let N=h(M)?M.readable:M;S(N,()=>{if(k){let L=k;k=null,L()}})}if($){if(o(M))M.on("readable",function(){if(W){let N=W;W=null,N()}}),M.on("end",function(){j.push(null)}),j._read=function(){for(;;){let N=M.read();if(N===null){W=j._read;return}if(!j.push(N))return}};else if(c(M)){let N=(h(M)?M.readable:M).getReader();j._read=async function(){for(;;)try{let{value:L,done:ve}=await N.read();if(!j.push(L))return;if(ve){j.push(null);return}}catch{return}}}}return j._destroy=function(N,L){!N&&H!==null&&(N=new y),W=null,I=null,k=null,H===null?L(N):(H=L,o(M)&&s(M,N))},j}}),gL=Ke((r,e)=>{je(),ze(),$e();var t=globalThis.AbortController||Pc().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:l},AbortError:u}=xn(),{validateAbortSignal:c,validateInteger:h,validateObject:d}=Qc(),m=dr().Symbol("kWeak"),y=dr().Symbol("kResistStopPropagation"),{finished:_}=Bo(),E=xx(),{addAbortSignalNoValidate:S}=Vd(),{isWritable:T,isNodeStream:V}=Fs(),{deprecate:I}=Un(),{ArrayPrototypePush:k,Boolean:W,MathFloor:H,Number:j,NumberIsNaN:P,Promise:R,PromiseReject:M,PromiseResolve:F,PromisePrototypeThen:$,Symbol:N}=dr(),L=N("kEmpty"),ve=N("kEof");function ae(de,me){if(me!=null&&d(me,"options"),(me==null?void 0:me.signal)!=null&&c(me.signal,"options.signal"),V(de)&&!T(de))throw new n("stream",de,"must be writable");let _e=E(this,de);return me!=null&&me.signal&&S(me.signal,_e),_e}function De(de,me){if(typeof de!="function")throw new s("fn",["Function","AsyncFunction"],de);me!=null&&d(me,"options"),(me==null?void 0:me.signal)!=null&&c(me.signal,"options.signal");let _e=1;(me==null?void 0:me.concurrency)!=null&&(_e=H(me.concurrency));let Ve=_e-1;return(me==null?void 0:me.highWaterMark)!=null&&(Ve=H(me.highWaterMark)),h(_e,"options.concurrency",1),h(Ve,"options.highWaterMark",0),Ve+=_e,(async function*(){let Me=Un().AbortSignalAny([me==null?void 0:me.signal].filter(W)),se=this,ue=[],Ie={signal:Me},Q,X,ne=!1,Y=0;function pe(){ne=!0,we()}function we(){Y-=1,ge()}function ge(){X&&!ne&&Y<_e&&ue.length<Ve&&(X(),X=null)}async function Xe(){try{for await(let v of se){if(ne)return;if(Me.aborted)throw new u;try{if(v=de(v,Ie),v===L)continue;v=F(v)}catch(b){v=M(b)}Y+=1,$(v,we,pe),ue.push(v),Q&&(Q(),Q=null),!ne&&(ue.length>=Ve||Y>=_e)&&await new R(b=>{X=b})}ue.push(ve)}catch(v){let b=M(v);$(b,we,pe),ue.push(b)}finally{ne=!0,Q&&(Q(),Q=null)}}Xe();try{for(;;){for(;ue.length>0;){let v=await ue[0];if(v===ve)return;if(Me.aborted)throw new u;v!==L&&(yield v),ue.shift(),ge()}await new R(v=>{Q=v})}}finally{ne=!0,X&&(X(),X=null)}}).call(this)}function Re(de=void 0){return de!=null&&d(de,"options"),(de==null?void 0:de.signal)!=null&&c(de.signal,"options.signal"),(async function*(){let me=0;for await(let Ve of this){var _e;if(de!=null&&(_e=de.signal)!==null&&_e!==void 0&&_e.aborted)throw new u({cause:de.signal.reason});yield[me++,Ve]}}).call(this)}async function fe(de,me=void 0){for await(let _e of z.call(this,de,me))return!0;return!1}async function Ne(de,me=void 0){if(typeof de!="function")throw new s("fn",["Function","AsyncFunction"],de);return!await fe.call(this,async(..._e)=>!await de(..._e),me)}async function ie(de,me){for await(let _e of z.call(this,de,me))return _e}async function J(de,me){if(typeof de!="function")throw new s("fn",["Function","AsyncFunction"],de);async function _e(Ve,Me){return await de(Ve,Me),L}for await(let Ve of De.call(this,_e,me));}function z(de,me){if(typeof de!="function")throw new s("fn",["Function","AsyncFunction"],de);async function _e(Ve,Me){return await de(Ve,Me)?Ve:L}return De.call(this,_e,me)}var be=class extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Le(de,me,_e){var Ve;if(typeof de!="function")throw new s("reducer",["Function","AsyncFunction"],de);_e!=null&&d(_e,"options"),(_e==null?void 0:_e.signal)!=null&&c(_e.signal,"options.signal");let Me=arguments.length>1;if(_e!=null&&(Ve=_e.signal)!==null&&Ve!==void 0&&Ve.aborted){let X=new u(void 0,{cause:_e.signal.reason});throw this.once("error",()=>{}),await _(this.destroy(X)),X}let se=new t,ue=se.signal;if(_e!=null&&_e.signal){let X={once:!0,[m]:this,[y]:!0};_e.signal.addEventListener("abort",()=>se.abort(),X)}let Ie=!1;try{for await(let X of this){var Q;if(Ie=!0,_e!=null&&(Q=_e.signal)!==null&&Q!==void 0&&Q.aborted)throw new u;Me?me=await de(me,X,{signal:ue}):(me=X,Me=!0)}if(!Ie&&!Me)throw new be}finally{se.abort()}return me}async function oe(de){de!=null&&d(de,"options"),(de==null?void 0:de.signal)!=null&&c(de.signal,"options.signal");let me=[];for await(let Ve of this){var _e;if(de!=null&&(_e=de.signal)!==null&&_e!==void 0&&_e.aborted)throw new u(void 0,{cause:de.signal.reason});k(me,Ve)}return me}function We(de,me){let _e=De.call(this,de,me);return(async function*(){for await(let Ve of _e)yield*Ve}).call(this)}function ce(de){if(de=j(de),P(de))return 0;if(de<0)throw new l("number",">= 0",de);return de}function te(de,me=void 0){return me!=null&&d(me,"options"),(me==null?void 0:me.signal)!=null&&c(me.signal,"options.signal"),de=ce(de),(async function*(){var _e;if(me!=null&&(_e=me.signal)!==null&&_e!==void 0&&_e.aborted)throw new u;for await(let Me of this){var Ve;if(me!=null&&(Ve=me.signal)!==null&&Ve!==void 0&&Ve.aborted)throw new u;de--<=0&&(yield Me)}}).call(this)}function xe(de,me=void 0){return me!=null&&d(me,"options"),(me==null?void 0:me.signal)!=null&&c(me.signal,"options.signal"),de=ce(de),(async function*(){var _e;if(me!=null&&(_e=me.signal)!==null&&_e!==void 0&&_e.aborted)throw new u;for await(let Me of this){var Ve;if(me!=null&&(Ve=me.signal)!==null&&Ve!==void 0&&Ve.aborted)throw new u;if(de-- >0&&(yield Me),de<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:I(Re,"readable.asIndexedPairs will be removed in a future version."),drop:te,filter:z,flatMap:We,map:De,take:xe,compose:ae},e.exports.promiseReturningOperators={every:Ne,forEach:J,reduce:Le,toArray:oe,some:fe,find:ie}}),Ix=Ke((r,e)=>{je(),ze(),$e();var{ArrayPrototypePop:t,Promise:n}=dr(),{isIterable:s,isNodeStream:o,isWebStream:l}=Fs(),{pipelineImpl:u}=a0(),{finished:c}=Bo();Ax();function h(...d){return new n((m,y)=>{let _,E,S=d[d.length-1];if(S&&typeof S=="object"&&!o(S)&&!s(S)&&!l(S)){let T=t(d);_=T.signal,E=T.end}u(d,(T,V)=>{T?y(T):m(V)},{signal:_,end:E})})}e.exports={finished:c,pipeline:h}}),Ax=Ke((r,e)=>{je(),ze(),$e();var{Buffer:t}=(Qr(),Kt(Hr)),{ObjectDefineProperty:n,ObjectKeys:s,ReflectApply:o}=dr(),{promisify:{custom:l}}=Un(),{streamReturningOperators:u,promiseReturningOperators:c}=gL(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:h}}=xn(),d=xx(),{setDefaultHighWaterMark:m,getDefaultHighWaterMark:y}=Ud(),{pipeline:_}=a0(),{destroyer:E}=mu(),S=Bo(),T=Ix(),V=Fs(),I=e.exports=s0().Stream;I.isDestroyed=V.isDestroyed,I.isDisturbed=V.isDisturbed,I.isErrored=V.isErrored,I.isReadable=V.isReadable,I.isWritable=V.isWritable,I.Readable=Bd();for(let W of s(u)){let H=function(...P){if(new.target)throw h();return I.Readable.from(o(j,this,P))},j=u[W];n(H,"name",{__proto__:null,value:j.name}),n(H,"length",{__proto__:null,value:j.length}),n(I.Readable.prototype,W,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}for(let W of s(c)){let H=function(...P){if(new.target)throw h();return o(j,this,P)},j=c[W];n(H,"name",{__proto__:null,value:j.name}),n(H,"length",{__proto__:null,value:j.length}),n(I.Readable.prototype,W,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}I.Writable=o0(),I.Duplex=Ds(),I.Transform=Sx(),I.PassThrough=Tx(),I.pipeline=_;var{addAbortSignal:k}=Vd();I.addAbortSignal=k,I.finished=S,I.destroy=E,I.compose=d,I.setDefaultHighWaterMark=m,I.getDefaultHighWaterMark=y,n(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return T}}),n(_,l,{__proto__:null,enumerable:!0,get(){return T.pipeline}}),n(S,l,{__proto__:null,enumerable:!0,get(){return T.finished}}),I.Stream=I,I._isUint8Array=function(W){return W instanceof Uint8Array},I._uint8ArrayToBuffer=function(W){return t.from(W.buffer,W.byteOffset,W.byteLength)}}),Ha=Ke((r,e)=>{je(),ze(),$e();var t=Ax(),n=Ix(),s=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=s,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}),yL=Ke((r,e)=>{je(),ze(),$e(),typeof Object.create=="function"?e.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,n){if(n){t.super_=n;var s=function(){};s.prototype=n.prototype,t.prototype=new s,t.prototype.constructor=t}}}),vL=Ke((r,e)=>{je(),ze(),$e();var{Buffer:t}=(Qr(),Kt(Hr)),n=Symbol.for("BufferList");function s(o){if(!(this instanceof s))return new s(o);s._init.call(this,o)}s._init=function(o){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,o&&this.append(o)},s.prototype._new=function(o){return new s(o)},s.prototype._offset=function(o){if(o===0)return[0,0];let l=0;for(let u=0;u<this._bufs.length;u++){let c=l+this._bufs[u].length;if(o<c||u===this._bufs.length-1)return[u,o-l];l=c}},s.prototype._reverseOffset=function(o){let l=o[0],u=o[1];for(let c=0;c<l;c++)u+=this._bufs[c].length;return u},s.prototype.get=function(o){if(o>this.length||o<0)return;let l=this._offset(o);return this._bufs[l[0]][l[1]]},s.prototype.slice=function(o,l){return typeof o=="number"&&o<0&&(o+=this.length),typeof l=="number"&&l<0&&(l+=this.length),this.copy(null,0,o,l)},s.prototype.copy=function(o,l,u,c){if((typeof u!="number"||u<0)&&(u=0),(typeof c!="number"||c>this.length)&&(c=this.length),u>=this.length||c<=0)return o||t.alloc(0);let h=!!o,d=this._offset(u),m=c-u,y=m,_=h&&l||0,E=d[1];if(u===0&&c===this.length){if(!h)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let S=0;S<this._bufs.length;S++)this._bufs[S].copy(o,_),_+=this._bufs[S].length;return o}if(y<=this._bufs[d[0]].length-E)return h?this._bufs[d[0]].copy(o,l,E,E+y):this._bufs[d[0]].slice(E,E+y);h||(o=t.allocUnsafe(m));for(let S=d[0];S<this._bufs.length;S++){let T=this._bufs[S].length-E;if(y>T)this._bufs[S].copy(o,_,E),_+=T;else{this._bufs[S].copy(o,_,E,E+y),_+=T;break}y-=T,E&&(E=0)}return o.length>_?o.slice(0,_):o},s.prototype.shallowSlice=function(o,l){if(o=o||0,l=typeof l!="number"?this.length:l,o<0&&(o+=this.length),l<0&&(l+=this.length),o===l)return this._new();let u=this._offset(o),c=this._offset(l),h=this._bufs.slice(u[0],c[0]+1);return c[1]===0?h.pop():h[h.length-1]=h[h.length-1].slice(0,c[1]),u[1]!==0&&(h[0]=h[0].slice(u[1])),this._new(h)},s.prototype.toString=function(o,l,u){return this.slice(l,u).toString(o)},s.prototype.consume=function(o){if(o=Math.trunc(o),Number.isNaN(o)||o<=0)return this;for(;this._bufs.length;)if(o>=this._bufs[0].length)o-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(o),this.length-=o;break}return this},s.prototype.duplicate=function(){let o=this._new();for(let l=0;l<this._bufs.length;l++)o.append(this._bufs[l]);return o},s.prototype.append=function(o){if(o==null)return this;if(o.buffer)this._appendBuffer(t.from(o.buffer,o.byteOffset,o.byteLength));else if(Array.isArray(o))for(let l=0;l<o.length;l++)this.append(o[l]);else if(this._isBufferList(o))for(let l=0;l<o._bufs.length;l++)this.append(o._bufs[l]);else typeof o=="number"&&(o=o.toString()),this._appendBuffer(t.from(o));return this},s.prototype._appendBuffer=function(o){this._bufs.push(o),this.length+=o.length},s.prototype.indexOf=function(o,l,u){if(u===void 0&&typeof l=="string"&&(u=l,l=void 0),typeof o=="function"||Array.isArray(o))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof o=="number"?o=t.from([o]):typeof o=="string"?o=t.from(o,u):this._isBufferList(o)?o=o.slice():Array.isArray(o.buffer)?o=t.from(o.buffer,o.byteOffset,o.byteLength):t.isBuffer(o)||(o=t.from(o)),l=Number(l||0),isNaN(l)&&(l=0),l<0&&(l=this.length+l),l<0&&(l=0),o.length===0)return l>this.length?this.length:l;let c=this._offset(l),h=c[0],d=c[1];for(;h<this._bufs.length;h++){let m=this._bufs[h];for(;d<m.length;)if(m.length-d>=o.length){let y=m.indexOf(o,d);if(y!==-1)return this._reverseOffset([h,y]);d=m.length-o.length+1}else{let y=this._reverseOffset([h,d]);if(this._match(y,o))return y;d++}d=0}return-1},s.prototype._match=function(o,l){if(this.length-o<l.length)return!1;for(let u=0;u<l.length;u++)if(this.get(o+u)!==l[u])return!1;return!0},function(){let o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let l in o)(function(u){o[u]===null?s.prototype[u]=function(c,h){return this.slice(c,c+h)[u](0,h)}:s.prototype[u]=function(c=0){return this.slice(c,c+o[u])[u](0)}})(l)}(),s.prototype._isBufferList=function(o){return o instanceof s||s.isBufferList(o)},s.isBufferList=function(o){return o!=null&&o[n]},e.exports=s}),_L=Ke((r,e)=>{je(),ze(),$e();var t=Ha().Duplex,n=yL(),s=vL();function o(l){if(!(this instanceof o))return new o(l);if(typeof l=="function"){this._callback=l;let u=(function(c){this._callback&&(this._callback(c),this._callback=null)}).bind(this);this.on("pipe",function(c){c.on("error",u)}),this.on("unpipe",function(c){c.removeListener("error",u)}),l=null}s._init.call(this,l),t.call(this)}n(o,t),Object.assign(o.prototype,s.prototype),o.prototype._new=function(l){return new o(l)},o.prototype._write=function(l,u,c){this._appendBuffer(l),typeof c=="function"&&c()},o.prototype._read=function(l){if(!this.length)return this.push(null);l=Math.min(l,this.length),this.push(this.slice(0,l)),this.consume(l)},o.prototype.end=function(l){t.prototype.end.call(this,l),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(l,u){this._bufs.length=0,this.length=0,u(l)},o.prototype._isBufferList=function(l){return l instanceof o||l instanceof s||o.isBufferList(l)},o.isBufferList=s.isBufferList,e.exports=o,e.exports.BufferListStream=o,e.exports.BufferList=s}),wL=Ke((r,e)=>{je(),ze(),$e();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=t}),Cx=Ke((r,e)=>{je(),ze(),$e();var t=e.exports,{Buffer:n}=(Qr(),Kt(Hr));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let o in t.requiredHeaderFlags){let l=t.requiredHeaderFlags[o];t.requiredHeaderFlagsErrors[o]="Invalid header flag bits, must be 0x"+l.toString(16)+" for "+t.types[o]+" packet"}t.codes={};for(let o in t.types){let l=t.types[o];t.codes[l]=o}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=n.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=n.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=n.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let o in t.properties){let l=t.properties[o];t.propertiesCodes[l]=o}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function s(o){return[0,1,2].map(l=>[0,1].map(u=>[0,1].map(c=>{let h=n.alloc(1);return h.writeUInt8(t.codes[o]<<t.CMD_SHIFT|(u?t.DUP_MASK:0)|l<<t.QOS_SHIFT|c,0,!0),h})))}t.PUBLISH_HEADER=s("publish"),t.SUBSCRIBE_HEADER=s("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=s("unsubscribe"),t.ACKS={unsuback:s("unsuback"),puback:s("puback"),pubcomp:s("pubcomp"),pubrel:s("pubrel"),pubrec:s("pubrec")},t.SUBACK_HEADER=n.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=n.from([3]),t.VERSION4=n.from([4]),t.VERSION5=n.from([5]),t.VERSION131=n.from([131]),t.VERSION132=n.from([132]),t.QOS=[0,1,2].map(o=>n.from([o])),t.EMPTY={pingreq:n.from([t.codes.pingreq<<4,0]),pingresp:n.from([t.codes.pingresp<<4,0]),disconnect:n.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),bL=Ke((r,e)=>{je(),ze(),$e();var t=1e3,n=t*60,s=n*60,o=s*24,l=o*7,u=o*365.25;e.exports=function(y,_){_=_||{};var E=typeof y;if(E==="string"&&y.length>0)return c(y);if(E==="number"&&isFinite(y))return _.long?d(y):h(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function c(y){if(y=String(y),!(y.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(_){var E=parseFloat(_[1]),S=(_[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return E*u;case"weeks":case"week":case"w":return E*l;case"days":case"day":case"d":return E*o;case"hours":case"hour":case"hrs":case"hr":case"h":return E*s;case"minutes":case"minute":case"mins":case"min":case"m":return E*n;case"seconds":case"second":case"secs":case"sec":case"s":return E*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}}function h(y){var _=Math.abs(y);return _>=o?Math.round(y/o)+"d":_>=s?Math.round(y/s)+"h":_>=n?Math.round(y/n)+"m":_>=t?Math.round(y/t)+"s":y+"ms"}function d(y){var _=Math.abs(y);return _>=o?m(y,_,o,"day"):_>=s?m(y,_,s,"hour"):_>=n?m(y,_,n,"minute"):_>=t?m(y,_,t,"second"):y+" ms"}function m(y,_,E,S){var T=_>=E*1.5;return Math.round(y/E)+" "+S+(T?"s":"")}}),EL=Ke((r,e)=>{je(),ze(),$e();function t(n){o.debug=o,o.default=o,o.coerce=m,o.disable=h,o.enable=u,o.enabled=d,o.humanize=bL(),o.destroy=y,Object.keys(n).forEach(_=>{o[_]=n[_]}),o.names=[],o.skips=[],o.formatters={};function s(_){let E=0;for(let S=0;S<_.length;S++)E=(E<<5)-E+_.charCodeAt(S),E|=0;return o.colors[Math.abs(E)%o.colors.length]}o.selectColor=s;function o(_){let E,S=null,T,V;function I(...k){if(!I.enabled)return;let W=I,H=Number(new Date),j=H-(E||H);W.diff=j,W.prev=E,W.curr=H,E=H,k[0]=o.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let P=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(R,M)=>{if(R==="%%")return"%";P++;let F=o.formatters[M];if(typeof F=="function"){let $=k[P];R=F.call(W,$),k.splice(P,1),P--}return R}),o.formatArgs.call(W,k),(W.log||o.log).apply(W,k)}return I.namespace=_,I.useColors=o.useColors(),I.color=o.selectColor(_),I.extend=l,I.destroy=o.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(T!==o.namespaces&&(T=o.namespaces,V=o.enabled(_)),V),set:k=>{S=k}}),typeof o.init=="function"&&o.init(I),I}function l(_,E){let S=o(this.namespace+(typeof E>"u"?":":E)+_);return S.log=this.log,S}function u(_){o.save(_),o.namespaces=_,o.names=[],o.skips=[];let E=(typeof _=="string"?_:"").trim().replace(" ",",").split(",").filter(Boolean);for(let S of E)S[0]==="-"?o.skips.push(S.slice(1)):o.names.push(S)}function c(_,E){let S=0,T=0,V=-1,I=0;for(;S<_.length;)if(T<E.length&&(E[T]===_[S]||E[T]==="*"))E[T]==="*"?(V=T,I=S,T++):(S++,T++);else if(V!==-1)T=V+1,I++,S=I;else return!1;for(;T<E.length&&E[T]==="*";)T++;return T===E.length}function h(){let _=[...o.names,...o.skips.map(E=>"-"+E)].join(",");return o.enable(""),_}function d(_){for(let E of o.skips)if(c(_,E))return!1;for(let E of o.names)if(c(_,E))return!0;return!1}function m(_){return _ instanceof Error?_.stack||_.message:_}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}e.exports=t}),Ls=Ke((r,e)=>{je(),ze(),$e(),r.formatArgs=n,r.save=s,r.load=o,r.useColors=t,r.storage=l(),r.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let h="color: "+this.color;c.splice(1,0,h,"color: inherit");let d=0,m=0;c[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(d++,y==="%c"&&(m=d))}),c.splice(m,0,h)}r.log=console.debug||console.log||(()=>{});function s(c){try{c?r.storage.setItem("debug",c):r.storage.removeItem("debug")}catch{}}function o(){let c;try{c=r.storage.getItem("debug")}catch{}return!c&&typeof jt<"u"&&"env"in jt&&(c=jt.env.DEBUG),c}function l(){try{return localStorage}catch{}}e.exports=EL()(r);var{formatters:u}=e.exports;u.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}),SL=Ke((r,e)=>{je(),ze(),$e();var t=_L(),{EventEmitter:n}=(qa(),Kt(Uo)),s=wL(),o=Cx(),l=Ls()("mqtt-packet:parser"),u=class Gy extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(h){return this instanceof Gy?(this.settings=h||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Gy().parser(h)}_resetState(){l("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=t(),this._stateCounter=0}parse(h){for(this.error&&this._resetState(),this._list.append(h),l("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,l("parse: state complete. _stateCounter is now: %d",this._stateCounter),l("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return l("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let h=this._list.readUInt8(0),d=h>>o.CMD_SHIFT;this.packet.cmd=o.types[d];let m=h&15,y=o.requiredHeaderFlags[d];return y!=null&&m!==y?this._emitError(new Error(o.requiredHeaderFlagsErrors[d])):(this.packet.retain=(h&o.RETAIN_MASK)!==0,this.packet.qos=h>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(h&o.DUP_MASK)!==0,l("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let h=this._parseVarByteNum(!0);return h&&(this.packet.length=h.value,this._list.consume(h.bytes)),l("_parseLength %d",h.value),!!h}_parsePayload(){l("_parsePayload: payload %O",this._list);let h=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}h=!0}return l("_parsePayload complete result: %s",h),h}_parseConnect(){l("_parseConnect");let h,d,m,y,_={},E=this.packet,S=this._parseString();if(S===null)return this._emitError(new Error("Cannot parse protocolId"));if(S!=="MQTT"&&S!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(E.protocolId=S,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(E.protocolVersion=this._list.readUInt8(this._pos),E.protocolVersion>=128&&(E.bridgeMode=!0,E.protocolVersion=E.protocolVersion-128),E.protocolVersion!==3&&E.protocolVersion!==4&&E.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));_.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,_.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,_.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let T=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),V=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(_.will)E.will={},E.will.retain=T,E.will.qos=V;else{if(T)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(V)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(E.clean=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK)!==0,this._pos++,E.keepalive=this._parseNum(),E.keepalive===-1)return this._emitError(new Error("Packet too short"));if(E.protocolVersion===5){let k=this._parseProperties();Object.getOwnPropertyNames(k).length&&(E.properties=k)}let I=this._parseString();if(I===null)return this._emitError(new Error("Packet too short"));if(E.clientId=I,l("_parseConnect: packet.clientId: %s",E.clientId),_.will){if(E.protocolVersion===5){let k=this._parseProperties();Object.getOwnPropertyNames(k).length&&(E.will.properties=k)}if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse will topic"));if(E.will.topic=h,l("_parseConnect: packet.will.topic: %s",E.will.topic),d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse will payload"));E.will.payload=d,l("_parseConnect: packet.will.paylaod: %s",E.will.payload)}if(_.username){if(y=this._parseString(),y===null)return this._emitError(new Error("Cannot parse username"));E.username=y,l("_parseConnect: packet.username: %s",E.username)}if(_.password){if(m=this._parseBuffer(),m===null)return this._emitError(new Error("Cannot parse password"));E.password=m}return this.settings=E,l("_parseConnect: complete"),E}_parseConnack(){l("_parseConnack");let h=this.packet;if(this._list.length<1)return null;let d=this._list.readUInt8(this._pos++);if(d>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(h.sessionPresent=!!(d&o.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?h.reasonCode=this._list.readUInt8(this._pos++):h.reasonCode=0;else{if(this._list.length<2)return null;h.returnCode=this._list.readUInt8(this._pos++)}if(h.returnCode===-1||h.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let m=this._parseProperties();Object.getOwnPropertyNames(m).length&&(h.properties=m)}l("_parseConnack: complete")}_parsePublish(){l("_parsePublish");let h=this.packet;if(h.topic=this._parseString(),h.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(h.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}h.payload=this._list.slice(this._pos,h.length),l("_parsePublish: payload from buffer list: %o",h.payload)}}_parseSubscribe(){l("_parseSubscribe");let h=this.packet,d,m,y,_,E,S,T;if(h.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let V=this._parseProperties();Object.getOwnPropertyNames(V).length&&(h.properties=V)}if(h.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<h.length;){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(m=this._parseByte(),this.settings.protocolVersion===5){if(m&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(m&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(y=m&o.SUBSCRIBE_OPTIONS_QOS_MASK,y>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(S=(m>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK)!==0,E=(m>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,_=m>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,_>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));T={topic:d,qos:y},this.settings.protocolVersion===5?(T.nl=S,T.rap=E,T.rh=_):this.settings.bridgeMode&&(T.rh=0,T.rap=!0,T.nl=!0),l("_parseSubscribe: push subscription `%s` to subscription",T),h.subscriptions.push(T)}}}_parseSuback(){l("_parseSuback");let h=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}if(h.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!o.MQTT5_SUBACK_CODES[d])return this._emitError(new Error("Invalid suback code"))}else if(d>2&&d!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(d)}}}_parseUnsubscribe(){l("_parseUnsubscribe");let h=this.packet;if(h.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}if(h.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<h.length;){let d=this._parseString();if(d===null)return this._emitError(new Error("Cannot parse topic"));l("_parseUnsubscribe: push topic `%s` to unsubscriptions",d),h.unsubscriptions.push(d)}}}_parseUnsuback(){l("_parseUnsuback");let h=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&h.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(h.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let d=this._parseProperties();for(Object.getOwnPropertyNames(d).length&&(h.properties=d),h.granted=[];this._pos<this.packet.length;){let m=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[m])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(m)}}}_parseConfirmation(){l("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let h=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(h.length>2){switch(h.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}l("_parseConfirmation: packet.reasonCode `%d`",h.reasonCode)}else h.reasonCode=0;if(h.length>3){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}}return!0}_parseDisconnect(){let h=this.packet;if(l("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(h.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[h.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):h.reasonCode=0;let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(h.properties=d)}return l("_parseDisconnect result: true"),!0}_parseAuth(){l("_parseAuth");let h=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(h.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[h.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let d=this._parseProperties();return Object.getOwnPropertyNames(d).length&&(h.properties=d),l("_parseAuth: result: true"),!0}_parseMessageId(){let h=this.packet;return h.messageId=this._parseNum(),h.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(l("_parseMessageId: packet.messageId %d",h.messageId),!0)}_parseString(h){let d=this._parseNum(),m=d+this._pos;if(d===-1||m>this._list.length||m>this.packet.length)return null;let y=this._list.toString("utf8",this._pos,m);return this._pos+=d,l("_parseString: result: %s",y),y}_parseStringPair(){return l("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let h=this._parseNum(),d=h+this._pos;if(h===-1||d>this._list.length||d>this.packet.length)return null;let m=this._list.slice(this._pos,d);return this._pos+=h,l("_parseBuffer: result: %o",m),m}_parseNum(){if(this._list.length-this._pos<2)return-1;let h=this._list.readUInt16BE(this._pos);return this._pos+=2,l("_parseNum: result: %s",h),h}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let h=this._list.readUInt32BE(this._pos);return this._pos+=4,l("_parse4ByteNum: result: %s",h),h}_parseVarByteNum(h){l("_parseVarByteNum");let d=4,m=0,y=1,_=0,E=!1,S,T=this._pos?this._pos:0;for(;m<d&&T+m<this._list.length;){if(S=this._list.readUInt8(T+m++),_+=y*(S&o.VARBYTEINT_MASK),y*=128,!(S&o.VARBYTEINT_FIN_MASK)){E=!0;break}if(this._list.length<=m)break}return!E&&m===d&&this._list.length>=m&&this._emitError(new Error("Invalid variable byte integer")),T&&(this._pos+=m),E?h?E={bytes:m,value:_}:E=_:E=!1,l("_parseVarByteNum: result: %o",E),E}_parseByte(){let h;return this._pos<this._list.length&&(h=this._list.readUInt8(this._pos),this._pos++),l("_parseByte: result: %o",h),h}_parseByType(h){switch(l("_parseByType: type: %s",h),h){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){l("_parseProperties");let h=this._parseVarByteNum(),d=this._pos+h,m={};for(;this._pos<d;){let y=this._parseByte();if(!y)return this._emitError(new Error("Cannot parse property code type")),!1;let _=o.propertiesCodes[y];if(!_)return this._emitError(new Error("Unknown property")),!1;if(_==="userProperties"){m[_]||(m[_]=Object.create(null));let E=this._parseByType(o.propertiesTypes[_]);if(m[_][E.name])if(Array.isArray(m[_][E.name]))m[_][E.name].push(E.value);else{let S=m[_][E.name];m[_][E.name]=[S],m[_][E.name].push(E.value)}else m[_][E.name]=E.value;continue}m[_]?Array.isArray(m[_])?m[_].push(this._parseByType(o.propertiesTypes[_])):(m[_]=[m[_]],m[_].push(this._parseByType(o.propertiesTypes[_]))):m[_]=this._parseByType(o.propertiesTypes[_])}return m}_newPacket(){return l("_newPacket"),this.packet&&(this._list.consume(this.packet.length),l("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),l("_newPacket: new packet"),this.packet=new s,this._pos=0,!0}_emitError(h){l("_emitError",h),this.error=h,this.emit("error",h)}};e.exports=u}),TL=Ke((r,e)=>{je(),ze(),$e();var{Buffer:t}=(Qr(),Kt(Hr)),n=65536,s={},o=t.isBuffer(t.from([1,2]).subarray(0,1));function l(d){let m=t.allocUnsafe(2);return m.writeUInt8(d>>8,0),m.writeUInt8(d&255,1),m}function u(){for(let d=0;d<n;d++)s[d]=l(d)}function c(d){let m=0,y=0,_=t.allocUnsafe(4);do m=d%128|0,d=d/128|0,d>0&&(m=m|128),_.writeUInt8(m,y++);while(d>0&&y<4);return d>0&&(y=0),o?_.subarray(0,y):_.slice(0,y)}function h(d){let m=t.allocUnsafe(4);return m.writeUInt32BE(d,0),m}e.exports={cache:s,generateCache:u,generateNumber:l,genBufVariableByteInt:c,generate4ByteBuffer:h}}),xL=Ke((r,e)=>{je(),ze(),$e(),typeof jt>"u"||!jt.version||jt.version.indexOf("v0.")===0||jt.version.indexOf("v1.")===0&&jt.version.indexOf("v1.8.")!==0?e.exports={nextTick:t}:e.exports=jt;function t(n,s,o,l){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var u=arguments.length,c,h;switch(u){case 0:case 1:return jt.nextTick(n);case 2:return jt.nextTick(function(){n.call(null,s)});case 3:return jt.nextTick(function(){n.call(null,s,o)});case 4:return jt.nextTick(function(){n.call(null,s,o,l)});default:for(c=new Array(u-1),h=0;h<c.length;)c[h++]=arguments[h];return jt.nextTick(function(){n.apply(null,c)})}}}),Rx=Ke((r,e)=>{je(),ze(),$e();var t=Cx(),{Buffer:n}=(Qr(),Kt(Hr)),s=n.allocUnsafe(0),o=n.from([0]),l=TL(),u=xL().nextTick,c=Ls()("mqtt-packet:writeToStream"),h=l.cache,d=l.generateNumber,m=l.generateCache,y=l.genBufVariableByteInt,_=l.generate4ByteBuffer,E=Re,S=!0;function T(ce,te,xe){switch(c("generate called"),te.cork&&(te.cork(),u(V,te)),S&&(S=!1,m()),c("generate: packet.cmd: %s",ce.cmd),ce.cmd){case"connect":return I(ce,te);case"connack":return k(ce,te,xe);case"publish":return W(ce,te,xe);case"puback":case"pubrec":case"pubrel":case"pubcomp":return H(ce,te,xe);case"subscribe":return j(ce,te,xe);case"suback":return P(ce,te,xe);case"unsubscribe":return R(ce,te,xe);case"unsuback":return M(ce,te,xe);case"pingreq":case"pingresp":return F(ce,te);case"disconnect":return $(ce,te,xe);case"auth":return N(ce,te,xe);default:return te.destroy(new Error("Unknown command")),!1}}Object.defineProperty(T,"cacheNumbers",{get(){return E===Re},set(ce){ce?((!h||Object.keys(h).length===0)&&(S=!0),E=Re):(S=!1,E=fe)}});function V(ce){ce.uncork()}function I(ce,te,xe){let de=ce||{},me=de.protocolId||"MQTT",_e=de.protocolVersion||4,Ve=de.will,Me=de.clean,se=de.keepalive||0,ue=de.clientId||"",Ie=de.username,Q=de.password,X=de.properties;Me===void 0&&(Me=!0);let ne=0;if(typeof me!="string"&&!n.isBuffer(me))return te.destroy(new Error("Invalid protocolId")),!1;if(ne+=me.length+2,_e!==3&&_e!==4&&_e!==5)return te.destroy(new Error("Invalid protocol version")),!1;if(ne+=1,(typeof ue=="string"||n.isBuffer(ue))&&(ue||_e>=4)&&(ue||Me))ne+=n.byteLength(ue)+2;else{if(_e<4)return te.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(Me*1===0)return te.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof se!="number"||se<0||se>65535||se%1!==0)return te.destroy(new Error("Invalid keepalive")),!1;ne+=2,ne+=1;let Y,pe;if(_e===5){if(Y=J(te,X),!Y)return!1;ne+=Y.length}if(Ve){if(typeof Ve!="object")return te.destroy(new Error("Invalid will")),!1;if(!Ve.topic||typeof Ve.topic!="string")return te.destroy(new Error("Invalid will topic")),!1;if(ne+=n.byteLength(Ve.topic)+2,ne+=2,Ve.payload)if(Ve.payload.length>=0)typeof Ve.payload=="string"?ne+=n.byteLength(Ve.payload):ne+=Ve.payload.length;else return te.destroy(new Error("Invalid will payload")),!1;if(pe={},_e===5){if(pe=J(te,Ve.properties),!pe)return!1;ne+=pe.length}}let we=!1;if(Ie!=null)if(We(Ie))we=!0,ne+=n.byteLength(Ie)+2;else return te.destroy(new Error("Invalid username")),!1;if(Q!=null){if(!we)return te.destroy(new Error("Username is required to use password")),!1;if(We(Q))ne+=oe(Q)+2;else return te.destroy(new Error("Invalid password")),!1}te.write(t.CONNECT_HEADER),ve(te,ne),ie(te,me),de.bridgeMode&&(_e+=128),te.write(_e===131?t.VERSION131:_e===132?t.VERSION132:_e===4?t.VERSION4:_e===5?t.VERSION5:t.VERSION3);let ge=0;return ge|=Ie!=null?t.USERNAME_MASK:0,ge|=Q!=null?t.PASSWORD_MASK:0,ge|=Ve&&Ve.retain?t.WILL_RETAIN_MASK:0,ge|=Ve&&Ve.qos?Ve.qos<<t.WILL_QOS_SHIFT:0,ge|=Ve?t.WILL_FLAG_MASK:0,ge|=Me?t.CLEAN_SESSION_MASK:0,te.write(n.from([ge])),E(te,se),_e===5&&Y.write(),ie(te,ue),Ve&&(_e===5&&pe.write(),ae(te,Ve.topic),ie(te,Ve.payload)),Ie!=null&&ie(te,Ie),Q!=null&&ie(te,Q),!0}function k(ce,te,xe){let de=xe?xe.protocolVersion:4,me=ce||{},_e=de===5?me.reasonCode:me.returnCode,Ve=me.properties,Me=2;if(typeof _e!="number")return te.destroy(new Error("Invalid return code")),!1;let se=null;if(de===5){if(se=J(te,Ve),!se)return!1;Me+=se.length}return te.write(t.CONNACK_HEADER),ve(te,Me),te.write(me.sessionPresent?t.SESSIONPRESENT_HEADER:o),te.write(n.from([_e])),se==null||se.write(),!0}function W(ce,te,xe){c("publish: packet: %o",ce);let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.qos||0,Ve=me.retain?t.RETAIN_MASK:0,Me=me.topic,se=me.payload||s,ue=me.messageId,Ie=me.properties,Q=0;if(typeof Me=="string")Q+=n.byteLength(Me)+2;else if(n.isBuffer(Me))Q+=Me.length+2;else return te.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(se)?Q+=se.length:Q+=n.byteLength(se),_e&&typeof ue!="number")return te.destroy(new Error("Invalid messageId")),!1;_e&&(Q+=2);let X=null;if(de===5){if(X=J(te,Ie),!X)return!1;Q+=X.length}return te.write(t.PUBLISH_HEADER[_e][me.dup?1:0][Ve?1:0]),ve(te,Q),E(te,oe(Me)),te.write(Me),_e>0&&E(te,ue),X==null||X.write(),c("publish: payload: %o",se),te.write(se)}function H(ce,te,xe){let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.cmd||"puback",Ve=me.messageId,Me=me.dup&&_e==="pubrel"?t.DUP_MASK:0,se=0,ue=me.reasonCode,Ie=me.properties,Q=de===5?3:2;if(_e==="pubrel"&&(se=1),typeof Ve!="number")return te.destroy(new Error("Invalid messageId")),!1;let X=null;if(de===5&&typeof Ie=="object"){if(X=z(te,Ie,xe,Q),!X)return!1;Q+=X.length}return te.write(t.ACKS[_e][se][Me][0]),Q===3&&(Q+=ue!==0?1:-1),ve(te,Q),E(te,Ve),de===5&&Q!==2&&te.write(n.from([ue])),X!==null?X.write():Q===4&&te.write(n.from([0])),!0}function j(ce,te,xe){c("subscribe: packet: ");let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.dup?t.DUP_MASK:0,Ve=me.messageId,Me=me.subscriptions,se=me.properties,ue=0;if(typeof Ve!="number")return te.destroy(new Error("Invalid messageId")),!1;ue+=2;let Ie=null;if(de===5){if(Ie=J(te,se),!Ie)return!1;ue+=Ie.length}if(typeof Me=="object"&&Me.length)for(let X=0;X<Me.length;X+=1){let ne=Me[X].topic,Y=Me[X].qos;if(typeof ne!="string")return te.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof Y!="number")return te.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(de===5){if(typeof(Me[X].nl||!1)!="boolean")return te.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Me[X].rap||!1)!="boolean")return te.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let pe=Me[X].rh||0;if(typeof pe!="number"||pe>2)return te.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}ue+=n.byteLength(ne)+2+1}else return te.destroy(new Error("Invalid subscriptions")),!1;c("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),te.write(t.SUBSCRIBE_HEADER[1][_e?1:0][0]),ve(te,ue),E(te,Ve),Ie!==null&&Ie.write();let Q=!0;for(let X of Me){let ne=X.topic,Y=X.qos,pe=+X.nl,we=+X.rap,ge=X.rh,Xe;ae(te,ne),Xe=t.SUBSCRIBE_OPTIONS_QOS[Y],de===5&&(Xe|=pe?t.SUBSCRIBE_OPTIONS_NL:0,Xe|=we?t.SUBSCRIBE_OPTIONS_RAP:0,Xe|=ge?t.SUBSCRIBE_OPTIONS_RH[ge]:0),Q=te.write(n.from([Xe]))}return Q}function P(ce,te,xe){let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.messageId,Ve=me.granted,Me=me.properties,se=0;if(typeof _e!="number")return te.destroy(new Error("Invalid messageId")),!1;if(se+=2,typeof Ve=="object"&&Ve.length)for(let Ie=0;Ie<Ve.length;Ie+=1){if(typeof Ve[Ie]!="number")return te.destroy(new Error("Invalid qos vector")),!1;se+=1}else return te.destroy(new Error("Invalid qos vector")),!1;let ue=null;if(de===5){if(ue=z(te,Me,xe,se),!ue)return!1;se+=ue.length}return te.write(t.SUBACK_HEADER),ve(te,se),E(te,_e),ue!==null&&ue.write(),te.write(n.from(Ve))}function R(ce,te,xe){let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.messageId,Ve=me.dup?t.DUP_MASK:0,Me=me.unsubscriptions,se=me.properties,ue=0;if(typeof _e!="number")return te.destroy(new Error("Invalid messageId")),!1;if(ue+=2,typeof Me=="object"&&Me.length)for(let X=0;X<Me.length;X+=1){if(typeof Me[X]!="string")return te.destroy(new Error("Invalid unsubscriptions")),!1;ue+=n.byteLength(Me[X])+2}else return te.destroy(new Error("Invalid unsubscriptions")),!1;let Ie=null;if(de===5){if(Ie=J(te,se),!Ie)return!1;ue+=Ie.length}te.write(t.UNSUBSCRIBE_HEADER[1][Ve?1:0][0]),ve(te,ue),E(te,_e),Ie!==null&&Ie.write();let Q=!0;for(let X=0;X<Me.length;X++)Q=ae(te,Me[X]);return Q}function M(ce,te,xe){let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.messageId,Ve=me.dup?t.DUP_MASK:0,Me=me.granted,se=me.properties,ue=me.cmd,Ie=0,Q=2;if(typeof _e!="number")return te.destroy(new Error("Invalid messageId")),!1;if(de===5)if(typeof Me=="object"&&Me.length)for(let ne=0;ne<Me.length;ne+=1){if(typeof Me[ne]!="number")return te.destroy(new Error("Invalid qos vector")),!1;Q+=1}else return te.destroy(new Error("Invalid qos vector")),!1;let X=null;if(de===5){if(X=z(te,se,xe,Q),!X)return!1;Q+=X.length}return te.write(t.ACKS[ue][Ie][Ve][0]),ve(te,Q),E(te,_e),X!==null&&X.write(),de===5&&te.write(n.from(Me)),!0}function F(ce,te,xe){return te.write(t.EMPTY[ce.cmd])}function $(ce,te,xe){let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.reasonCode,Ve=me.properties,Me=de===5?1:0,se=null;if(de===5){if(se=z(te,Ve,xe,Me),!se)return!1;Me+=se.length}return te.write(n.from([t.codes.disconnect<<4])),ve(te,Me),de===5&&te.write(n.from([_e])),se!==null&&se.write(),!0}function N(ce,te,xe){let de=xe?xe.protocolVersion:4,me=ce||{},_e=me.reasonCode,Ve=me.properties,Me=de===5?1:0;de!==5&&te.destroy(new Error("Invalid mqtt version for auth packet"));let se=z(te,Ve,xe,Me);return se?(Me+=se.length,te.write(n.from([t.codes.auth<<4])),ve(te,Me),te.write(n.from([_e])),se!==null&&se.write(),!0):!1}var L={};function ve(ce,te){if(te>t.VARBYTEINT_MAX)return ce.destroy(new Error(`Invalid variable byte integer: ${te}`)),!1;let xe=L[te];return xe||(xe=y(te),te<16384&&(L[te]=xe)),c("writeVarByteInt: writing to stream: %o",xe),ce.write(xe)}function ae(ce,te){let xe=n.byteLength(te);return E(ce,xe),c("writeString: %s",te),ce.write(te,"utf8")}function De(ce,te,xe){ae(ce,te),ae(ce,xe)}function Re(ce,te){return c("writeNumberCached: number: %d",te),c("writeNumberCached: %o",h[te]),ce.write(h[te])}function fe(ce,te){let xe=d(te);return c("writeNumberGenerated: %o",xe),ce.write(xe)}function Ne(ce,te){let xe=_(te);return c("write4ByteNumber: %o",xe),ce.write(xe)}function ie(ce,te){typeof te=="string"?ae(ce,te):te?(E(ce,te.length),ce.write(te)):E(ce,0)}function J(ce,te){if(typeof te!="object"||te.length!=null)return{length:1,write(){Le(ce,{},0)}};let xe=0;function de(me,_e){let Ve=t.propertiesTypes[me],Me=0;switch(Ve){case"byte":{if(typeof _e!="boolean")return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=2;break}case"int8":{if(typeof _e!="number"||_e<0||_e>255)return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=2;break}case"binary":{if(_e&&_e===null)return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=1+n.byteLength(_e)+2;break}case"int16":{if(typeof _e!="number"||_e<0||_e>65535)return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=3;break}case"int32":{if(typeof _e!="number"||_e<0||_e>4294967295)return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=5;break}case"var":{if(typeof _e!="number"||_e<0||_e>268435455)return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=1+n.byteLength(y(_e));break}case"string":{if(typeof _e!="string")return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=3+n.byteLength(_e.toString());break}case"pair":{if(typeof _e!="object")return ce.destroy(new Error(`Invalid ${me}: ${_e}`)),!1;Me+=Object.getOwnPropertyNames(_e).reduce((se,ue)=>{let Ie=_e[ue];return Array.isArray(Ie)?se+=Ie.reduce((Q,X)=>(Q+=3+n.byteLength(ue.toString())+2+n.byteLength(X.toString()),Q),0):se+=3+n.byteLength(ue.toString())+2+n.byteLength(_e[ue].toString()),se},0);break}default:return ce.destroy(new Error(`Invalid property ${me}: ${_e}`)),!1}return Me}if(te)for(let me in te){let _e=0,Ve=0,Me=te[me];if(Array.isArray(Me))for(let se=0;se<Me.length;se++){if(Ve=de(me,Me[se]),!Ve)return!1;_e+=Ve}else{if(Ve=de(me,Me),!Ve)return!1;_e=Ve}if(!_e)return!1;xe+=_e}return{length:n.byteLength(y(xe))+xe,write(){Le(ce,te,xe)}}}function z(ce,te,xe,de){let me=["reasonString","userProperties"],_e=xe&&xe.properties&&xe.properties.maximumPacketSize?xe.properties.maximumPacketSize:0,Ve=J(ce,te);if(_e)for(;de+Ve.length>_e;){let Me=me.shift();if(Me&&te[Me])delete te[Me],Ve=J(ce,te);else return!1}return Ve}function be(ce,te,xe){switch(t.propertiesTypes[te]){case"byte":{ce.write(n.from([t.properties[te]])),ce.write(n.from([+xe]));break}case"int8":{ce.write(n.from([t.properties[te]])),ce.write(n.from([xe]));break}case"binary":{ce.write(n.from([t.properties[te]])),ie(ce,xe);break}case"int16":{ce.write(n.from([t.properties[te]])),E(ce,xe);break}case"int32":{ce.write(n.from([t.properties[te]])),Ne(ce,xe);break}case"var":{ce.write(n.from([t.properties[te]])),ve(ce,xe);break}case"string":{ce.write(n.from([t.properties[te]])),ae(ce,xe);break}case"pair":{Object.getOwnPropertyNames(xe).forEach(de=>{let me=xe[de];Array.isArray(me)?me.forEach(_e=>{ce.write(n.from([t.properties[te]])),De(ce,de.toString(),_e.toString())}):(ce.write(n.from([t.properties[te]])),De(ce,de.toString(),me.toString()))});break}default:return ce.destroy(new Error(`Invalid property ${te} value: ${xe}`)),!1}}function Le(ce,te,xe){ve(ce,xe);for(let de in te)if(Object.prototype.hasOwnProperty.call(te,de)&&te[de]!==null){let me=te[de];if(Array.isArray(me))for(let _e=0;_e<me.length;_e++)be(ce,de,me[_e]);else be(ce,de,me)}}function oe(ce){return ce?ce instanceof n?ce.length:n.byteLength(ce):0}function We(ce){return typeof ce=="string"||ce instanceof n}e.exports=T}),IL=Ke((r,e)=>{je(),ze(),$e();var t=Rx(),{EventEmitter:n}=(qa(),Kt(Uo)),{Buffer:s}=(Qr(),Kt(Hr));function o(u,c){let h=new l;return t(u,h,c),h.concat()}var l=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(u){return this._array[this._i++]=u,!0}concat(){let u=0,c=new Array(this._array.length),h=this._array,d=0,m;for(m=0;m<h.length&&h[m]!==void 0;m++)typeof h[m]!="string"?c[m]=h[m].length:c[m]=s.byteLength(h[m]),u+=c[m];let y=s.allocUnsafe(u);for(m=0;m<h.length&&h[m]!==void 0;m++)typeof h[m]!="string"?(h[m].copy(y,d),d+=c[m]):(y.write(h[m],d),d+=c[m]);return y}destroy(u){u&&this.emit("error",u)}};e.exports=o}),AL=Ke(r=>{je(),ze(),$e(),r.parser=SL().parser,r.generate=IL(),r.writeToStream=Rx()}),kx=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};r.default=e}),CL=Ke((r,e)=>{je(),ze(),$e(),e.exports=n;function t(o){return o instanceof ud?ud.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}function n(o){if(o=o||{},o.circles)return s(o);let l=new Map;if(l.set(Date,m=>new Date(m)),l.set(Map,(m,y)=>new Map(c(Array.from(m),y))),l.set(Set,(m,y)=>new Set(c(Array.from(m),y))),o.constructorHandlers)for(let m of o.constructorHandlers)l.set(m[0],m[1]);let u=null;return o.proto?d:h;function c(m,y){let _=Object.keys(m),E=new Array(_.length);for(let S=0;S<_.length;S++){let T=_[S],V=m[T];typeof V!="object"||V===null?E[T]=V:V.constructor!==Object&&(u=l.get(V.constructor))?E[T]=u(V,y):ArrayBuffer.isView(V)?E[T]=t(V):E[T]=y(V)}return E}function h(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,h);if(m.constructor!==Object&&(u=l.get(m.constructor)))return u(m,h);let y={};for(let _ in m){if(Object.hasOwnProperty.call(m,_)===!1)continue;let E=m[_];typeof E!="object"||E===null?y[_]=E:E.constructor!==Object&&(u=l.get(E.constructor))?y[_]=u(E,h):ArrayBuffer.isView(E)?y[_]=t(E):y[_]=h(E)}return y}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,d);if(m.constructor!==Object&&(u=l.get(m.constructor)))return u(m,d);let y={};for(let _ in m){let E=m[_];typeof E!="object"||E===null?y[_]=E:E.constructor!==Object&&(u=l.get(E.constructor))?y[_]=u(E,d):ArrayBuffer.isView(E)?y[_]=t(E):y[_]=d(E)}return y}}function s(o){let l=[],u=[],c=new Map;if(c.set(Date,_=>new Date(_)),c.set(Map,(_,E)=>new Map(d(Array.from(_),E))),c.set(Set,(_,E)=>new Set(d(Array.from(_),E))),o.constructorHandlers)for(let _ of o.constructorHandlers)c.set(_[0],_[1]);let h=null;return o.proto?y:m;function d(_,E){let S=Object.keys(_),T=new Array(S.length);for(let V=0;V<S.length;V++){let I=S[V],k=_[I];if(typeof k!="object"||k===null)T[I]=k;else if(k.constructor!==Object&&(h=c.get(k.constructor)))T[I]=h(k,E);else if(ArrayBuffer.isView(k))T[I]=t(k);else{let W=l.indexOf(k);W!==-1?T[I]=u[W]:T[I]=E(k)}}return T}function m(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return d(_,m);if(_.constructor!==Object&&(h=c.get(_.constructor)))return h(_,m);let E={};l.push(_),u.push(E);for(let S in _){if(Object.hasOwnProperty.call(_,S)===!1)continue;let T=_[S];if(typeof T!="object"||T===null)E[S]=T;else if(T.constructor!==Object&&(h=c.get(T.constructor)))E[S]=h(T,m);else if(ArrayBuffer.isView(T))E[S]=t(T);else{let V=l.indexOf(T);V!==-1?E[S]=u[V]:E[S]=m(T)}}return l.pop(),u.pop(),E}function y(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return d(_,y);if(_.constructor!==Object&&(h=c.get(_.constructor)))return h(_,y);let E={};l.push(_),u.push(E);for(let S in _){let T=_[S];if(typeof T!="object"||T===null)E[S]=T;else if(T.constructor!==Object&&(h=c.get(T.constructor)))E[S]=h(T,y);else if(ArrayBuffer.isView(T))E[S]=t(T);else{let V=l.indexOf(T);V!==-1?E[S]=u[V]:E[S]=y(T)}}return l.pop(),u.pop(),E}}}),RL=Ke((r,e)=>{je(),ze(),$e(),e.exports=CL()()}),kL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=e,r.validateTopics=t;function e(n){let s=n.split("/");for(let o=0;o<s.length;o++)if(s[o]!=="+"){if(s[o]==="#")return o===s.length-1;if(s[o].indexOf("+")!==-1||s[o].indexOf("#")!==-1)return!1}return!0}function t(n){if(n.length===0)return"empty_topic_list";for(let s=0;s<n.length;s++)if(!e(n[s]))return n[s];return null}}),Px=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=Ha(),t={objectMode:!0},n={clean:!0},s=class{constructor(o){this.options=o||{},this.options=Object.assign(Object.assign({},n),o),this._inflights=new Map}put(o,l){return this._inflights.set(o.messageId,o),l&&l(),this}createStream(){let o=new e.Readable(t),l=[],u=!1,c=0;return this._inflights.forEach((h,d)=>{l.push(h)}),o._read=()=>{!u&&c<l.length?o.push(l[c++]):o.push(null)},o.destroy=h=>{if(!u)return u=!0,setTimeout(()=>{o.emit("close")},0),o},o}del(o,l){let u=this._inflights.get(o.messageId);return u?(this._inflights.delete(o.messageId),l(null,u)):l&&l(new Error("missing packet")),this}get(o,l){let u=this._inflights.get(o.messageId);return u?l(null,u):l&&l(new Error("missing packet")),this}close(o){this.options.clean&&(this._inflights=null),o&&o()}};r.default=s}),PL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],t=(n,s,o)=>{n.log("handlePublish: packet %o",s),o=typeof o<"u"?o:n.noop;let l=s.topic.toString(),u=s.payload,{qos:c}=s,{messageId:h}=s,{options:d}=n;if(n.options.protocolVersion===5){let m;if(s.properties&&(m=s.properties.topicAlias),typeof m<"u")if(l.length===0)if(m>0&&m<=65535){let y=n.topicAliasRecv.getTopicByAlias(m);if(y)l=y,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",l,m);else{n.log("handlePublish :: unregistered topic alias. alias: %d",m),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",m),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(l,m))n.log("handlePublish :: registered topic: %s - alias: %d",l,m);else{n.log("handlePublish :: topic alias out of range. alias: %d",m),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",c),c){case 2:{d.customHandleAcks(l,u,s,(m,y)=>{if(typeof m=="number"&&(y=m,m=null),m)return n.emit("error",m);if(e.indexOf(y)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));y?n._sendPacket({cmd:"pubrec",messageId:h,reasonCode:y},o):n.incomingStore.put(s,()=>{n._sendPacket({cmd:"pubrec",messageId:h},o)})});break}case 1:{d.customHandleAcks(l,u,s,(m,y)=>{if(typeof m=="number"&&(y=m,m=null),m)return n.emit("error",m);if(e.indexOf(y)===-1)return n.emit("error",new Error("Wrong reason code for puback"));y||n.emit("message",l,u,s),n.handleMessage(s,_=>{if(_)return o&&o(_);n._sendPacket({cmd:"puback",messageId:h,reasonCode:y},o)})});break}case 0:n.emit("message",l,u,s),n.handleMessage(s,o);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=t}),NL=Ke((r,e)=>{e.exports={version:"5.10.4"}}),gu=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithReasonCode=void 0,r.applyMixin=t;var e=class Nx extends Error{constructor(s,o){super(s),this.code=o,Object.setPrototypeOf(this,Nx.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=e;function t(n,s,o=!1){var l;let u=[s];for(;;){let c=u[0],h=Object.getPrototypeOf(c);if(h!=null&&h.prototype)u.unshift(h);else break}for(let c of u)for(let h of Object.getOwnPropertyNames(c.prototype))(o||h!=="constructor")&&Object.defineProperty(n.prototype,h,(l=Object.getOwnPropertyDescriptor(c.prototype,h))!==null&&l!==void 0?l:Object.create(null))}r.nextTick=typeof(jt==null?void 0:jt.nextTick)=="function"?jt.nextTick:n=>{setTimeout(n,0)},r.MQTTJS_VERSION=NL().version}),jd=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var e=gu();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(n,s)=>{let{messageId:o}=s,l=s.cmd,u=null,c=n.outgoing[o]?n.outgoing[o].cb:null,h=null;if(!c){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",l),l){case"pubcomp":case"puback":{let d=s.reasonCode;d&&d>0&&d!==16?(h=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[d]}`,d),n._removeOutgoingAndStoreMessage(o,()=>{c(h,s)})):n._removeOutgoingAndStoreMessage(o,c);break}case"pubrec":{u={cmd:"pubrel",qos:2,messageId:o};let d=s.reasonCode;d&&d>0&&d!==16?(h=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[d]}`,d),n._removeOutgoingAndStoreMessage(o,()=>{c(h,s)})):n._sendPacket(u);break}case"suback":{delete n.outgoing[o],n.messageIdProvider.deallocate(o);let d=s.granted;for(let m=0;m<d.length;m++){let y=d[m];if(y&128){h=new Error(`Subscribe error: ${r.ReasonCodes[y]}`),h.code=y;let _=n.messageIdToTopic[o];_&&_.forEach(E=>{delete n._resubscribeTopics[E]})}}delete n.messageIdToTopic[o],n._invokeStoreProcessingQueue(),c(h,s);break}case"unsuback":{delete n.outgoing[o],n.messageIdProvider.deallocate(o),n._invokeStoreProcessingQueue(),c(null,s);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};r.default=t}),OL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=gu(),t=jd(),n=(s,o)=>{let{options:l}=s,u=l.protocolVersion,c=u===5?o.reasonCode:o.returnCode;if(u!==5){let h=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${u}`,c);s.emit("error",h);return}s.handleAuth(o,(h,d)=>{if(h){s.emit("error",h);return}if(c===24)s.reconnecting=!1,s._sendPacket(d);else{let m=new e.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);s.emit("error",m)}})};r.default=n}),DL=Ke(r=>{var _,E,S,T,V,I,k,W,H,j,P,R,M,F,$,N,L,ve,ae,De,Re,fe,Ne,ie,J,z,be,Le,oe,Yy,ce,te,xe,de,Ox,_e,Ve,Me,fo,po,Jy,Of,Df,tr,Xy,uc,mo,Zy,Xe;je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,n=typeof jt=="object"&&jt?jt:{},s=(v,b,C,q)=>{typeof n.emitWarning=="function"?n.emitWarning(v,b,C,q):console.error(`[${C}] ${b}: ${v}`)},o=globalThis.AbortController,l=globalThis.AbortSignal;if(typeof o>"u"){l=class{constructor(){or(this,"onabort");or(this,"_onabort",[]);or(this,"reason");or(this,"aborted",!1)}addEventListener(C,q){this._onabort.push(q)}},o=class{constructor(){or(this,"signal",new l);b()}abort(C){var q,ee;if(!this.signal.aborted){this.signal.reason=C,this.signal.aborted=!0;for(let le of this.signal._onabort)le(C);(ee=(q=this.signal).onabort)==null||ee.call(q,C)}}};let v=((_=n.env)==null?void 0:_.LRU_CACHE_IGNORE_AC_WARNING)!=="1",b=()=>{v&&(v=!1,s("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",b))}}var u=v=>!t.has(v),c=v=>v&&v===Math.floor(v)&&v>0&&isFinite(v),h=v=>c(v)?v<=Math.pow(2,8)?Uint8Array:v<=Math.pow(2,16)?Uint16Array:v<=Math.pow(2,32)?Uint32Array:v<=Number.MAX_SAFE_INTEGER?d:null:null,d=class extends Array{constructor(v){super(v),this.fill(0)}},m=(E=class{constructor(b,C){or(this,"heap");or(this,"length");if(!D(E,S))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new C(b),this.length=0}static create(b){let C=h(b);if(!C)return[];Ue(E,S,!0);let q=new E(b,C);return Ue(E,S,!1),q}push(b){this.heap[this.length++]=b}pop(){return this.heap[--this.length]}},S=new WeakMap,nt(E,S,!1),E),y=(Xe=class{constructor(b){nt(this,oe);nt(this,I);nt(this,k);nt(this,W);nt(this,H);nt(this,j);nt(this,P);or(this,"ttl");or(this,"ttlResolution");or(this,"ttlAutopurge");or(this,"updateAgeOnGet");or(this,"updateAgeOnHas");or(this,"allowStale");or(this,"noDisposeOnSet");or(this,"noUpdateTTL");or(this,"maxEntrySize");or(this,"sizeCalculation");or(this,"noDeleteOnFetchRejection");or(this,"noDeleteOnStaleGet");or(this,"allowStaleOnFetchAbort");or(this,"allowStaleOnFetchRejection");or(this,"ignoreFetchAbort");nt(this,R);nt(this,M);nt(this,F);nt(this,$);nt(this,N);nt(this,L);nt(this,ve);nt(this,ae);nt(this,De);nt(this,Re);nt(this,fe);nt(this,Ne);nt(this,ie);nt(this,J);nt(this,z);nt(this,be);nt(this,Le);nt(this,ce,()=>{});nt(this,te,()=>{});nt(this,xe,()=>{});nt(this,de,()=>!1);nt(this,_e,b=>{});nt(this,Ve,(b,C,q)=>{});nt(this,Me,(b,C,q,ee)=>{if(q||ee)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});or(this,T,"LRUCache");let{max:C=0,ttl:q,ttlResolution:ee=1,ttlAutopurge:le,updateAgeOnGet:Ee,updateAgeOnHas:Ze,allowStale:et,dispose:ft,disposeAfter:bt,noDisposeOnSet:gt,noUpdateTTL:Ur,maxSize:_r=0,maxEntrySize:Tr=0,sizeCalculation:kt,fetchMethod:qt,memoMethod:mt,noDeleteOnFetchRejection:Pt,noDeleteOnStaleGet:mr,allowStaleOnFetchRejection:Gt,allowStaleOnFetchAbort:wr,ignoreFetchAbort:Br}=b;if(C!==0&&!c(C))throw new TypeError("max option must be a nonnegative integer");let G=C?h(C):Array;if(!G)throw new Error("invalid max value: "+C);if(Ue(this,I,C),Ue(this,k,_r),this.maxEntrySize=Tr||D(this,k),this.sizeCalculation=kt,this.sizeCalculation){if(!D(this,k)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(mt!==void 0&&typeof mt!="function")throw new TypeError("memoMethod must be a function if defined");if(Ue(this,P,mt),qt!==void 0&&typeof qt!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ue(this,j,qt),Ue(this,be,!!qt),Ue(this,F,new Map),Ue(this,$,new Array(C).fill(void 0)),Ue(this,N,new Array(C).fill(void 0)),Ue(this,L,new G(C)),Ue(this,ve,new G(C)),Ue(this,ae,0),Ue(this,De,0),Ue(this,Re,m.create(C)),Ue(this,R,0),Ue(this,M,0),typeof ft=="function"&&Ue(this,W,ft),typeof bt=="function"?(Ue(this,H,bt),Ue(this,fe,[])):(Ue(this,H,void 0),Ue(this,fe,void 0)),Ue(this,z,!!D(this,W)),Ue(this,Le,!!D(this,H)),this.noDisposeOnSet=!!gt,this.noUpdateTTL=!!Ur,this.noDeleteOnFetchRejection=!!Pt,this.allowStaleOnFetchRejection=!!Gt,this.allowStaleOnFetchAbort=!!wr,this.ignoreFetchAbort=!!Br,this.maxEntrySize!==0){if(D(this,k)!==0&&!c(D(this,k)))throw new TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");qe(this,oe,Ox).call(this)}if(this.allowStale=!!et,this.noDeleteOnStaleGet=!!mr,this.updateAgeOnGet=!!Ee,this.updateAgeOnHas=!!Ze,this.ttlResolution=c(ee)||ee===0?ee:1,this.ttlAutopurge=!!le,this.ttl=q||0,this.ttl){if(!c(this.ttl))throw new TypeError("ttl must be a positive integer if specified");qe(this,oe,Yy).call(this)}if(D(this,I)===0&&this.ttl===0&&D(this,k)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!D(this,I)&&!D(this,k)){let Z="LRU_CACHE_UNBOUNDED";u(Z)&&(t.add(Z),s("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Z,Xe))}}static unsafeExposeInternals(b){return{starts:D(b,ie),ttls:D(b,J),sizes:D(b,Ne),keyMap:D(b,F),keyList:D(b,$),valList:D(b,N),next:D(b,L),prev:D(b,ve),get head(){return D(b,ae)},get tail(){return D(b,De)},free:D(b,Re),isBackgroundFetch:C=>{var q;return qe(q=b,oe,tr).call(q,C)},backgroundFetch:(C,q,ee,le)=>{var Ee;return qe(Ee=b,oe,Df).call(Ee,C,q,ee,le)},moveToTail:C=>{var q;return qe(q=b,oe,uc).call(q,C)},indexes:C=>{var q;return qe(q=b,oe,fo).call(q,C)},rindexes:C=>{var q;return qe(q=b,oe,po).call(q,C)},isStale:C=>{var q;return D(q=b,de).call(q,C)}}}get max(){return D(this,I)}get maxSize(){return D(this,k)}get calculatedSize(){return D(this,M)}get size(){return D(this,R)}get fetchMethod(){return D(this,j)}get memoMethod(){return D(this,P)}get dispose(){return D(this,W)}get disposeAfter(){return D(this,H)}getRemainingTTL(b){return D(this,F).has(b)?1/0:0}*entries(){for(let b of qe(this,oe,fo).call(this))D(this,N)[b]!==void 0&&D(this,$)[b]!==void 0&&!qe(this,oe,tr).call(this,D(this,N)[b])&&(yield[D(this,$)[b],D(this,N)[b]])}*rentries(){for(let b of qe(this,oe,po).call(this))D(this,N)[b]!==void 0&&D(this,$)[b]!==void 0&&!qe(this,oe,tr).call(this,D(this,N)[b])&&(yield[D(this,$)[b],D(this,N)[b]])}*keys(){for(let b of qe(this,oe,fo).call(this)){let C=D(this,$)[b];C!==void 0&&!qe(this,oe,tr).call(this,D(this,N)[b])&&(yield C)}}*rkeys(){for(let b of qe(this,oe,po).call(this)){let C=D(this,$)[b];C!==void 0&&!qe(this,oe,tr).call(this,D(this,N)[b])&&(yield C)}}*values(){for(let b of qe(this,oe,fo).call(this))D(this,N)[b]!==void 0&&!qe(this,oe,tr).call(this,D(this,N)[b])&&(yield D(this,N)[b])}*rvalues(){for(let b of qe(this,oe,po).call(this))D(this,N)[b]!==void 0&&!qe(this,oe,tr).call(this,D(this,N)[b])&&(yield D(this,N)[b])}[(V=Symbol.iterator,T=Symbol.toStringTag,V)](){return this.entries()}find(b,C={}){for(let q of qe(this,oe,fo).call(this)){let ee=D(this,N)[q],le=qe(this,oe,tr).call(this,ee)?ee.__staleWhileFetching:ee;if(le!==void 0&&b(le,D(this,$)[q],this))return this.get(D(this,$)[q],C)}}forEach(b,C=this){for(let q of qe(this,oe,fo).call(this)){let ee=D(this,N)[q],le=qe(this,oe,tr).call(this,ee)?ee.__staleWhileFetching:ee;le!==void 0&&b.call(C,le,D(this,$)[q],this)}}rforEach(b,C=this){for(let q of qe(this,oe,po).call(this)){let ee=D(this,N)[q],le=qe(this,oe,tr).call(this,ee)?ee.__staleWhileFetching:ee;le!==void 0&&b.call(C,le,D(this,$)[q],this)}}purgeStale(){let b=!1;for(let C of qe(this,oe,po).call(this,{allowStale:!0}))D(this,de).call(this,C)&&(qe(this,oe,mo).call(this,D(this,$)[C],"expire"),b=!0);return b}info(b){let C=D(this,F).get(b);if(C===void 0)return;let q=D(this,N)[C],ee=qe(this,oe,tr).call(this,q)?q.__staleWhileFetching:q;if(ee===void 0)return;let le={value:ee};if(D(this,J)&&D(this,ie)){let Ee=D(this,J)[C],Ze=D(this,ie)[C];if(Ee&&Ze){let et=Ee-(e.now()-Ze);le.ttl=et,le.start=Date.now()}}return D(this,Ne)&&(le.size=D(this,Ne)[C]),le}dump(){let b=[];for(let C of qe(this,oe,fo).call(this,{allowStale:!0})){let q=D(this,$)[C],ee=D(this,N)[C],le=qe(this,oe,tr).call(this,ee)?ee.__staleWhileFetching:ee;if(le===void 0||q===void 0)continue;let Ee={value:le};if(D(this,J)&&D(this,ie)){Ee.ttl=D(this,J)[C];let Ze=e.now()-D(this,ie)[C];Ee.start=Math.floor(Date.now()-Ze)}D(this,Ne)&&(Ee.size=D(this,Ne)[C]),b.unshift([q,Ee])}return b}load(b){this.clear();for(let[C,q]of b){if(q.start){let ee=Date.now()-q.start;q.start=e.now()-ee}this.set(C,q.value,q)}}set(b,C,q={}){var Ur,_r,Tr,kt,qt;if(C===void 0)return this.delete(b),this;let{ttl:ee=this.ttl,start:le,noDisposeOnSet:Ee=this.noDisposeOnSet,sizeCalculation:Ze=this.sizeCalculation,status:et}=q,{noUpdateTTL:ft=this.noUpdateTTL}=q,bt=D(this,Me).call(this,b,C,q.size||0,Ze);if(this.maxEntrySize&&bt>this.maxEntrySize)return et&&(et.set="miss",et.maxEntrySizeExceeded=!0),qe(this,oe,mo).call(this,b,"set"),this;let gt=D(this,R)===0?void 0:D(this,F).get(b);if(gt===void 0)gt=D(this,R)===0?D(this,De):D(this,Re).length!==0?D(this,Re).pop():D(this,R)===D(this,I)?qe(this,oe,Of).call(this,!1):D(this,R),D(this,$)[gt]=b,D(this,N)[gt]=C,D(this,F).set(b,gt),D(this,L)[D(this,De)]=gt,D(this,ve)[gt]=D(this,De),Ue(this,De,gt),la(this,R)._++,D(this,Ve).call(this,gt,bt,et),et&&(et.set="add"),ft=!1;else{qe(this,oe,uc).call(this,gt);let mt=D(this,N)[gt];if(C!==mt){if(D(this,be)&&qe(this,oe,tr).call(this,mt)){mt.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Pt}=mt;Pt!==void 0&&!Ee&&(D(this,z)&&((Ur=D(this,W))==null||Ur.call(this,Pt,b,"set")),D(this,Le)&&((_r=D(this,fe))==null||_r.push([Pt,b,"set"])))}else Ee||(D(this,z)&&((Tr=D(this,W))==null||Tr.call(this,mt,b,"set")),D(this,Le)&&((kt=D(this,fe))==null||kt.push([mt,b,"set"])));if(D(this,_e).call(this,gt),D(this,Ve).call(this,gt,bt,et),D(this,N)[gt]=C,et){et.set="replace";let Pt=mt&&qe(this,oe,tr).call(this,mt)?mt.__staleWhileFetching:mt;Pt!==void 0&&(et.oldValue=Pt)}}else et&&(et.set="update")}if(ee!==0&&!D(this,J)&&qe(this,oe,Yy).call(this),D(this,J)&&(ft||D(this,xe).call(this,gt,ee,le),et&&D(this,te).call(this,et,gt)),!Ee&&D(this,Le)&&D(this,fe)){let mt=D(this,fe),Pt;for(;Pt=mt==null?void 0:mt.shift();)(qt=D(this,H))==null||qt.call(this,...Pt)}return this}pop(){var b;try{for(;D(this,R);){let C=D(this,N)[D(this,ae)];if(qe(this,oe,Of).call(this,!0),qe(this,oe,tr).call(this,C)){if(C.__staleWhileFetching)return C.__staleWhileFetching}else if(C!==void 0)return C}}finally{if(D(this,Le)&&D(this,fe)){let C=D(this,fe),q;for(;q=C==null?void 0:C.shift();)(b=D(this,H))==null||b.call(this,...q)}}}has(b,C={}){let{updateAgeOnHas:q=this.updateAgeOnHas,status:ee}=C,le=D(this,F).get(b);if(le!==void 0){let Ee=D(this,N)[le];if(qe(this,oe,tr).call(this,Ee)&&Ee.__staleWhileFetching===void 0)return!1;if(D(this,de).call(this,le))ee&&(ee.has="stale",D(this,te).call(this,ee,le));else return q&&D(this,ce).call(this,le),ee&&(ee.has="hit",D(this,te).call(this,ee,le)),!0}else ee&&(ee.has="miss");return!1}peek(b,C={}){let{allowStale:q=this.allowStale}=C,ee=D(this,F).get(b);if(ee===void 0||!q&&D(this,de).call(this,ee))return;let le=D(this,N)[ee];return qe(this,oe,tr).call(this,le)?le.__staleWhileFetching:le}async fetch(b,C={}){let{allowStale:q=this.allowStale,updateAgeOnGet:ee=this.updateAgeOnGet,noDeleteOnStaleGet:le=this.noDeleteOnStaleGet,ttl:Ee=this.ttl,noDisposeOnSet:Ze=this.noDisposeOnSet,size:et=0,sizeCalculation:ft=this.sizeCalculation,noUpdateTTL:bt=this.noUpdateTTL,noDeleteOnFetchRejection:gt=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ur=this.allowStaleOnFetchRejection,ignoreFetchAbort:_r=this.ignoreFetchAbort,allowStaleOnFetchAbort:Tr=this.allowStaleOnFetchAbort,context:kt,forceRefresh:qt=!1,status:mt,signal:Pt}=C;if(!D(this,be))return mt&&(mt.fetch="get"),this.get(b,{allowStale:q,updateAgeOnGet:ee,noDeleteOnStaleGet:le,status:mt});let mr={allowStale:q,updateAgeOnGet:ee,noDeleteOnStaleGet:le,ttl:Ee,noDisposeOnSet:Ze,size:et,sizeCalculation:ft,noUpdateTTL:bt,noDeleteOnFetchRejection:gt,allowStaleOnFetchRejection:Ur,allowStaleOnFetchAbort:Tr,ignoreFetchAbort:_r,status:mt,signal:Pt},Gt=D(this,F).get(b);if(Gt===void 0){mt&&(mt.fetch="miss");let wr=qe(this,oe,Df).call(this,b,Gt,mr,kt);return wr.__returned=wr}else{let wr=D(this,N)[Gt];if(qe(this,oe,tr).call(this,wr)){let Ge=q&&wr.__staleWhileFetching!==void 0;return mt&&(mt.fetch="inflight",Ge&&(mt.returnedStale=!0)),Ge?wr.__staleWhileFetching:wr.__returned=wr}let Br=D(this,de).call(this,Gt);if(!qt&&!Br)return mt&&(mt.fetch="hit"),qe(this,oe,uc).call(this,Gt),ee&&D(this,ce).call(this,Gt),mt&&D(this,te).call(this,mt,Gt),wr;let G=qe(this,oe,Df).call(this,b,Gt,mr,kt),Z=G.__staleWhileFetching!==void 0&&q;return mt&&(mt.fetch=Br?"stale":"refresh",Z&&Br&&(mt.returnedStale=!0)),Z?G.__staleWhileFetching:G.__returned=G}}async forceFetch(b,C={}){let q=await this.fetch(b,C);if(q===void 0)throw new Error("fetch() returned undefined");return q}memo(b,C={}){let q=D(this,P);if(!q)throw new Error("no memoMethod provided to constructor");let{context:ee,forceRefresh:le,...Ee}=C,Ze=this.get(b,Ee);if(!le&&Ze!==void 0)return Ze;let et=q(b,Ze,{options:Ee,context:ee});return this.set(b,et,Ee),et}get(b,C={}){let{allowStale:q=this.allowStale,updateAgeOnGet:ee=this.updateAgeOnGet,noDeleteOnStaleGet:le=this.noDeleteOnStaleGet,status:Ee}=C,Ze=D(this,F).get(b);if(Ze!==void 0){let et=D(this,N)[Ze],ft=qe(this,oe,tr).call(this,et);return Ee&&D(this,te).call(this,Ee,Ze),D(this,de).call(this,Ze)?(Ee&&(Ee.get="stale"),ft?(Ee&&q&&et.__staleWhileFetching!==void 0&&(Ee.returnedStale=!0),q?et.__staleWhileFetching:void 0):(le||qe(this,oe,mo).call(this,b,"expire"),Ee&&q&&(Ee.returnedStale=!0),q?et:void 0)):(Ee&&(Ee.get="hit"),ft?et.__staleWhileFetching:(qe(this,oe,uc).call(this,Ze),ee&&D(this,ce).call(this,Ze),et))}else Ee&&(Ee.get="miss")}delete(b){return qe(this,oe,mo).call(this,b,"delete")}clear(){return qe(this,oe,Zy).call(this,"delete")}},I=new WeakMap,k=new WeakMap,W=new WeakMap,H=new WeakMap,j=new WeakMap,P=new WeakMap,R=new WeakMap,M=new WeakMap,F=new WeakMap,$=new WeakMap,N=new WeakMap,L=new WeakMap,ve=new WeakMap,ae=new WeakMap,De=new WeakMap,Re=new WeakMap,fe=new WeakMap,Ne=new WeakMap,ie=new WeakMap,J=new WeakMap,z=new WeakMap,be=new WeakMap,Le=new WeakMap,oe=new WeakSet,Yy=function(){let b=new d(D(this,I)),C=new d(D(this,I));Ue(this,J,b),Ue(this,ie,C),Ue(this,xe,(le,Ee,Ze=e.now())=>{if(C[le]=Ee!==0?Ze:0,b[le]=Ee,Ee!==0&&this.ttlAutopurge){let et=setTimeout(()=>{D(this,de).call(this,le)&&qe(this,oe,mo).call(this,D(this,$)[le],"expire")},Ee+1);et.unref&&et.unref()}}),Ue(this,ce,le=>{C[le]=b[le]!==0?e.now():0}),Ue(this,te,(le,Ee)=>{if(b[Ee]){let Ze=b[Ee],et=C[Ee];if(!Ze||!et)return;le.ttl=Ze,le.start=et,le.now=q||ee();let ft=le.now-et;le.remainingTTL=Ze-ft}});let q=0,ee=()=>{let le=e.now();if(this.ttlResolution>0){q=le;let Ee=setTimeout(()=>q=0,this.ttlResolution);Ee.unref&&Ee.unref()}return le};this.getRemainingTTL=le=>{let Ee=D(this,F).get(le);if(Ee===void 0)return 0;let Ze=b[Ee],et=C[Ee];if(!Ze||!et)return 1/0;let ft=(q||ee())-et;return Ze-ft},Ue(this,de,le=>{let Ee=C[le],Ze=b[le];return!!Ze&&!!Ee&&(q||ee())-Ee>Ze})},ce=new WeakMap,te=new WeakMap,xe=new WeakMap,de=new WeakMap,Ox=function(){let b=new d(D(this,I));Ue(this,M,0),Ue(this,Ne,b),Ue(this,_e,C=>{Ue(this,M,D(this,M)-b[C]),b[C]=0}),Ue(this,Me,(C,q,ee,le)=>{if(qe(this,oe,tr).call(this,q))return 0;if(!c(ee))if(le){if(typeof le!="function")throw new TypeError("sizeCalculation must be a function");if(ee=le(q,C),!c(ee))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return ee}),Ue(this,Ve,(C,q,ee)=>{if(b[C]=q,D(this,k)){let le=D(this,k)-b[C];for(;D(this,M)>le;)qe(this,oe,Of).call(this,!0)}Ue(this,M,D(this,M)+b[C]),ee&&(ee.entrySize=q,ee.totalCalculatedSize=D(this,M))})},_e=new WeakMap,Ve=new WeakMap,Me=new WeakMap,fo=function*({allowStale:b=this.allowStale}={}){if(D(this,R))for(let C=D(this,De);!(!qe(this,oe,Jy).call(this,C)||((b||!D(this,de).call(this,C))&&(yield C),C===D(this,ae)));)C=D(this,ve)[C]},po=function*({allowStale:b=this.allowStale}={}){if(D(this,R))for(let C=D(this,ae);!(!qe(this,oe,Jy).call(this,C)||((b||!D(this,de).call(this,C))&&(yield C),C===D(this,De)));)C=D(this,L)[C]},Jy=function(b){return b!==void 0&&D(this,F).get(D(this,$)[b])===b},Of=function(b){var le,Ee;let C=D(this,ae),q=D(this,$)[C],ee=D(this,N)[C];return D(this,be)&&qe(this,oe,tr).call(this,ee)?ee.__abortController.abort(new Error("evicted")):(D(this,z)||D(this,Le))&&(D(this,z)&&((le=D(this,W))==null||le.call(this,ee,q,"evict")),D(this,Le)&&((Ee=D(this,fe))==null||Ee.push([ee,q,"evict"]))),D(this,_e).call(this,C),b&&(D(this,$)[C]=void 0,D(this,N)[C]=void 0,D(this,Re).push(C)),D(this,R)===1?(Ue(this,ae,Ue(this,De,0)),D(this,Re).length=0):Ue(this,ae,D(this,L)[C]),D(this,F).delete(q),la(this,R)._--,C},Df=function(b,C,q,ee){let le=C===void 0?void 0:D(this,N)[C];if(qe(this,oe,tr).call(this,le))return le;let Ee=new o,{signal:Ze}=q;Ze==null||Ze.addEventListener("abort",()=>Ee.abort(Ze.reason),{signal:Ee.signal});let et={signal:Ee.signal,options:q,context:ee},ft=(kt,qt=!1)=>{let{aborted:mt}=Ee.signal,Pt=q.ignoreFetchAbort&&kt!==void 0;if(q.status&&(mt&&!qt?(q.status.fetchAborted=!0,q.status.fetchError=Ee.signal.reason,Pt&&(q.status.fetchAbortIgnored=!0)):q.status.fetchResolved=!0),mt&&!Pt&&!qt)return gt(Ee.signal.reason);let mr=_r;return D(this,N)[C]===_r&&(kt===void 0?mr.__staleWhileFetching?D(this,N)[C]=mr.__staleWhileFetching:qe(this,oe,mo).call(this,b,"fetch"):(q.status&&(q.status.fetchUpdated=!0),this.set(b,kt,et.options))),kt},bt=kt=>(q.status&&(q.status.fetchRejected=!0,q.status.fetchError=kt),gt(kt)),gt=kt=>{let{aborted:qt}=Ee.signal,mt=qt&&q.allowStaleOnFetchAbort,Pt=mt||q.allowStaleOnFetchRejection,mr=Pt||q.noDeleteOnFetchRejection,Gt=_r;if(D(this,N)[C]===_r&&(!mr||Gt.__staleWhileFetching===void 0?qe(this,oe,mo).call(this,b,"fetch"):mt||(D(this,N)[C]=Gt.__staleWhileFetching)),Pt)return q.status&&Gt.__staleWhileFetching!==void 0&&(q.status.returnedStale=!0),Gt.__staleWhileFetching;if(Gt.__returned===Gt)throw kt},Ur=(kt,qt)=>{var Pt;let mt=(Pt=D(this,j))==null?void 0:Pt.call(this,b,le,et);mt&&mt instanceof Promise&&mt.then(mr=>kt(mr===void 0?void 0:mr),qt),Ee.signal.addEventListener("abort",()=>{(!q.ignoreFetchAbort||q.allowStaleOnFetchAbort)&&(kt(void 0),q.allowStaleOnFetchAbort&&(kt=mr=>ft(mr,!0)))})};q.status&&(q.status.fetchDispatched=!0);let _r=new Promise(Ur).then(ft,bt),Tr=Object.assign(_r,{__abortController:Ee,__staleWhileFetching:le,__returned:void 0});return C===void 0?(this.set(b,Tr,{...et.options,status:void 0}),C=D(this,F).get(b)):D(this,N)[C]=Tr,Tr},tr=function(b){if(!D(this,be))return!1;let C=b;return!!C&&C instanceof Promise&&C.hasOwnProperty("__staleWhileFetching")&&C.__abortController instanceof o},Xy=function(b,C){D(this,ve)[C]=b,D(this,L)[b]=C},uc=function(b){b!==D(this,De)&&(b===D(this,ae)?Ue(this,ae,D(this,L)[b]):qe(this,oe,Xy).call(this,D(this,ve)[b],D(this,L)[b]),qe(this,oe,Xy).call(this,D(this,De),b),Ue(this,De,b))},mo=function(b,C){var ee,le,Ee,Ze;let q=!1;if(D(this,R)!==0){let et=D(this,F).get(b);if(et!==void 0)if(q=!0,D(this,R)===1)qe(this,oe,Zy).call(this,C);else{D(this,_e).call(this,et);let ft=D(this,N)[et];if(qe(this,oe,tr).call(this,ft)?ft.__abortController.abort(new Error("deleted")):(D(this,z)||D(this,Le))&&(D(this,z)&&((ee=D(this,W))==null||ee.call(this,ft,b,C)),D(this,Le)&&((le=D(this,fe))==null||le.push([ft,b,C]))),D(this,F).delete(b),D(this,$)[et]=void 0,D(this,N)[et]=void 0,et===D(this,De))Ue(this,De,D(this,ve)[et]);else if(et===D(this,ae))Ue(this,ae,D(this,L)[et]);else{let bt=D(this,ve)[et];D(this,L)[bt]=D(this,L)[et];let gt=D(this,L)[et];D(this,ve)[gt]=D(this,ve)[et]}la(this,R)._--,D(this,Re).push(et)}}if(D(this,Le)&&((Ee=D(this,fe))!=null&&Ee.length)){let et=D(this,fe),ft;for(;ft=et==null?void 0:et.shift();)(Ze=D(this,H))==null||Ze.call(this,...ft)}return q},Zy=function(b){var C,q,ee;for(let le of qe(this,oe,po).call(this,{allowStale:!0})){let Ee=D(this,N)[le];if(qe(this,oe,tr).call(this,Ee))Ee.__abortController.abort(new Error("deleted"));else{let Ze=D(this,$)[le];D(this,z)&&((C=D(this,W))==null||C.call(this,Ee,Ze,b)),D(this,Le)&&((q=D(this,fe))==null||q.push([Ee,Ze,b]))}}if(D(this,F).clear(),D(this,N).fill(void 0),D(this,$).fill(void 0),D(this,J)&&D(this,ie)&&(D(this,J).fill(0),D(this,ie).fill(0)),D(this,Ne)&&D(this,Ne).fill(0),Ue(this,ae,0),Ue(this,De,0),D(this,Re).length=0,Ue(this,M,0),Ue(this,R,0),D(this,Le)&&D(this,fe)){let le=D(this,fe),Ee;for(;Ee=le==null?void 0:le.shift();)(ee=D(this,H))==null||ee.call(this,...Ee)}},Xe);r.LRUCache=y}),Vs=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var e=class{constructor(s=0){this.iteratorType=s}equals(s){return this.o===s.o}};r.ContainerIterator=e;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=t;var n=class extends t{};r.Container=n}),LL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=Vs(),t=class extends e.Base{constructor(s=[]){super(),this.S=[];let o=this;s.forEach(function(l){o.push(l)})}clear(){this.i=0,this.S=[]}push(s){return this.S.push(s),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=t;r.default=n}),ML=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=Vs(),t=class extends e.Base{constructor(s=[]){super(),this.j=0,this.q=[];let o=this;s.forEach(function(l){o.push(l)})}clear(){this.q=[],this.i=this.j=0}push(s){let o=this.q.length;if(this.j/o>.5&&this.j+this.i>=o&&o>4096){let l=this.i;for(let u=0;u<l;++u)this.q[u]=this.q[this.j+u];this.j=0,this.q[this.i]=s}else this.q[this.j+this.i]=s;return++this.i}pop(){if(this.i===0)return;let s=this.q[this.j++];return this.i-=1,s}front(){if(this.i!==0)return this.q[this.j]}},n=t;r.default=n}),FL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=Vs(),t=class extends e.Base{constructor(s=[],o=function(u,c){return u>c?-1:u<c?1:0},l=!0){if(super(),this.v=o,Array.isArray(s))this.C=l?[...s]:s;else{this.C=[];let c=this;s.forEach(function(h){c.C.push(h)})}this.i=this.C.length;let u=this.i>>1;for(let c=this.i-1>>1;c>=0;--c)this.k(c,u)}m(s){let o=this.C[s];for(;s>0;){let l=s-1>>1,u=this.C[l];if(this.v(u,o)<=0)break;this.C[s]=u,s=l}this.C[s]=o}k(s,o){let l=this.C[s];for(;s<o;){let u=s<<1|1,c=u+1,h=this.C[u];if(c<this.i&&this.v(h,this.C[c])>0&&(u=c,h=this.C[c]),this.v(h,l)>=0)break;this.C[s]=h,s=u}this.C[s]=l}clear(){this.i=0,this.C.length=0}push(s){this.C.push(s),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let s=this.C[0],o=this.C.pop();return this.i-=1,this.i&&(this.C[0]=o,this.k(0,this.i>>1)),s}top(){return this.C[0]}find(s){return this.C.indexOf(s)>=0}remove(s){let o=this.C.indexOf(s);return o<0?!1:(o===0?this.pop():o===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(o,1,this.C.pop()),this.i-=1,this.m(o),this.k(o,this.i>>1)),!0)}updateItem(s){let o=this.C.indexOf(s);return o<0?!1:(this.m(o),this.k(o,this.i>>1),!0)}toArray(){return[...this.C]}},n=t;r.default=n}),l0=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=Vs(),t=class extends e.Container{},n=t;r.default=n}),Us=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),Dx=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var e=Vs(),t=Us(),n=class extends e.ContainerIterator{constructor(s,o){super(o),this.o=s,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(s){this.container.setElementByPos(this.o,s)}};r.RandomIterator=n}),VL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(l0()),t=Dx();function n(u){return u&&u.t?u:{default:u}}var s=class Lx extends t.RandomIterator{constructor(c,h,d){super(c,d),this.container=h}copy(){return new Lx(this.o,this.container,this.iteratorType)}},o=class extends e.default{constructor(u=[],c=!0){if(super(),Array.isArray(u))this.J=c?[...u]:u,this.i=u.length;else{this.J=[];let h=this;u.forEach(function(d){h.pushBack(d)})}}clear(){this.i=0,this.J.length=0}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;return this.J[u]}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;return this.J.splice(u,1),this.i-=1,this.i}eraseElementByValue(u){let c=0;for(let h=0;h<this.i;++h)this.J[h]!==u&&(this.J[c++]=this.J[h]);return this.i=this.J.length=c,this.i}eraseElementByIterator(u){let c=u.o;return u=u.next(),this.eraseElementByPos(c),u}pushBack(u){return this.J.push(u),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(u,c){if(u<0||u>this.i-1)throw new RangeError;this.J[u]=c}insert(u,c,h=1){if(u<0||u>this.i)throw new RangeError;return this.J.splice(u,0,...new Array(h).fill(c)),this.i+=h,this.i}find(u){for(let c=0;c<this.i;++c)if(this.J[c]===u)return new s(c,this);return this.end()}reverse(){this.J.reverse()}unique(){let u=1;for(let c=1;c<this.i;++c)this.J[c]!==this.J[c-1]&&(this.J[u++]=this.J[c]);return this.i=this.J.length=u,this.i}sort(u){this.J.sort(u)}forEach(u){for(let c=0;c<this.i;++c)u(this.J[c],c,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},l=o;r.default=l}),UL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=s(l0()),t=Vs(),n=Us();function s(c){return c&&c.t?c:{default:c}}var o=class Mx extends t.ContainerIterator{constructor(h,d,m,y){super(y),this.o=h,this.h=d,this.container=m,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(h){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=h}copy(){return new Mx(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.default{constructor(c=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let h=this;c.forEach(function(d){h.pushBack(d)})}V(c){let{L:h,B:d}=c;h.B=d,d.L=h,c===this.p&&(this.p=d),c===this._&&(this._=h),this.i-=1}G(c,h){let d=h.B,m={l:c,L:h,B:d};h.B=m,d.L=m,h===this.h&&(this.p=m),d===this.h&&(this._=m),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(c){if(c<0||c>this.i-1)throw new RangeError;let h=this.p;for(;c--;)h=h.B;return h.l}eraseElementByPos(c){if(c<0||c>this.i-1)throw new RangeError;let h=this.p;for(;c--;)h=h.B;return this.V(h),this.i}eraseElementByValue(c){let h=this.p;for(;h!==this.h;)h.l===c&&this.V(h),h=h.B;return this.i}eraseElementByIterator(c){let h=c.o;return h===this.h&&(0,n.throwIteratorAccessError)(),c=c.next(),this.V(h),c}pushBack(c){return this.G(c,this._),this.i}popBack(){if(this.i===0)return;let c=this._.l;return this.V(this._),c}pushFront(c){return this.G(c,this.h),this.i}popFront(){if(this.i===0)return;let c=this.p.l;return this.V(this.p),c}setElementByPos(c,h){if(c<0||c>this.i-1)throw new RangeError;let d=this.p;for(;c--;)d=d.B;d.l=h}insert(c,h,d=1){if(c<0||c>this.i)throw new RangeError;if(d<=0)return this.i;if(c===0)for(;d--;)this.pushFront(h);else if(c===this.i)for(;d--;)this.pushBack(h);else{let m=this.p;for(let _=1;_<c;++_)m=m.B;let y=m.B;for(this.i+=d;d--;)m.B={l:h,L:m},m.B.L=m,m=m.B;m.B=y,y.L=m}return this.i}find(c){let h=this.p;for(;h!==this.h;){if(h.l===c)return new o(h,this.h,this);h=h.B}return this.end()}reverse(){if(this.i<=1)return;let c=this.p,h=this._,d=0;for(;d<<1<this.i;){let m=c.l;c.l=h.l,h.l=m,c=c.B,h=h.L,d+=1}}unique(){if(this.i<=1)return this.i;let c=this.p;for(;c!==this.h;){let h=c;for(;h.B!==this.h&&h.l===h.B.l;)h=h.B,this.i-=1;c.B=h.B,c.B.L=c,c=c.B}return this.i}sort(c){if(this.i<=1)return;let h=[];this.forEach(function(m){h.push(m)}),h.sort(c);let d=this.p;h.forEach(function(m){d.l=m,d=d.B})}merge(c){let h=this;if(this.i===0)c.forEach(function(d){h.pushBack(d)});else{let d=this.p;c.forEach(function(m){for(;d!==h.h&&d.l<=m;)d=d.B;h.G(m,d.L)})}return this.i}forEach(c){let h=this.p,d=0;for(;h!==this.h;)c(h.l,d++,this),h=h.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let c=this.p;for(;c!==this.h;)yield c.l,c=c.B}).bind(this)()}},u=l;r.default=u}),BL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(l0()),t=Dx();function n(u){return u&&u.t?u:{default:u}}var s=class Fx extends t.RandomIterator{constructor(c,h,d){super(c,d),this.container=h}copy(){return new Fx(this.o,this.container,this.iteratorType)}},o=class extends e.default{constructor(u=[],c=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let h=(()=>{if(typeof u.length=="number")return u.length;if(typeof u.size=="number")return u.size;if(typeof u.size=="function")return u.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=c,this.P=Math.max(Math.ceil(h/this.F),1);for(let y=0;y<this.P;++y)this.A.push(new Array(this.F));let d=Math.ceil(h/this.F);this.j=this.R=(this.P>>1)-(d>>1),this.D=this.N=this.F-h%this.F>>1;let m=this;u.forEach(function(y){m.pushBack(y)})}T(){let u=[],c=Math.max(this.P>>1,1);for(let h=0;h<c;++h)u[h]=new Array(this.F);for(let h=this.j;h<this.P;++h)u[u.length]=this.A[h];for(let h=0;h<this.R;++h)u[u.length]=this.A[h];u[u.length]=[...this.A[this.R]],this.j=c,this.R=u.length-1;for(let h=0;h<c;++h)u[u.length]=new Array(this.F);this.A=u,this.P=u.length}O(u){let c=this.D+u+1,h=c%this.F,d=h-1,m=this.j+(c-h)/this.F;return h===0&&(m-=1),m%=this.P,d<0&&(d+=this.F),{curNodeBucketIndex:m,curNodePointerIndex:d}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(u){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=u,this.i}popBack(){if(this.i===0)return;let u=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,u}pushFront(u){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=u,this.i}popFront(){if(this.i===0)return;let u=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,u}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:h}=this.O(u);return this.A[c][h]}setElementByPos(u,c){if(u<0||u>this.i-1)throw new RangeError;let{curNodeBucketIndex:h,curNodePointerIndex:d}=this.O(u);this.A[h][d]=c}insert(u,c,h=1){if(u<0||u>this.i)throw new RangeError;if(u===0)for(;h--;)this.pushFront(c);else if(u===this.i)for(;h--;)this.pushBack(c);else{let d=[];for(let m=u;m<this.i;++m)d.push(this.getElementByPos(m));this.cut(u-1);for(let m=0;m<h;++m)this.pushBack(c);for(let m=0;m<d.length;++m)this.pushBack(d[m])}return this.i}cut(u){if(u<0)return this.clear(),0;let{curNodeBucketIndex:c,curNodePointerIndex:h}=this.O(u);return this.R=c,this.N=h,this.i=u+1,this.i}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;if(u===0)this.popFront();else if(u===this.i-1)this.popBack();else{let c=[];for(let d=u+1;d<this.i;++d)c.push(this.getElementByPos(d));this.cut(u),this.popBack();let h=this;c.forEach(function(d){h.pushBack(d)})}return this.i}eraseElementByValue(u){if(this.i===0)return 0;let c=[];for(let d=0;d<this.i;++d){let m=this.getElementByPos(d);m!==u&&c.push(m)}let h=c.length;for(let d=0;d<h;++d)this.setElementByPos(d,c[d]);return this.cut(h-1)}eraseElementByIterator(u){let c=u.o;return this.eraseElementByPos(c),u=u.next(),u}find(u){for(let c=0;c<this.i;++c)if(this.getElementByPos(c)===u)return new s(c,this);return this.end()}reverse(){let u=0,c=this.i-1;for(;u<c;){let h=this.getElementByPos(u);this.setElementByPos(u,this.getElementByPos(c)),this.setElementByPos(c,h),u+=1,c-=1}}unique(){if(this.i<=1)return this.i;let u=1,c=this.getElementByPos(0);for(let h=1;h<this.i;++h){let d=this.getElementByPos(h);d!==c&&(c=d,this.setElementByPos(u++,d))}for(;this.i>u;)this.popBack();return this.i}sort(u){let c=[];for(let h=0;h<this.i;++h)c.push(this.getElementByPos(h));c.sort(u);for(let h=0;h<this.i;++h)this.setElementByPos(h,c[h])}shrinkToFit(){if(this.i===0)return;let u=[];this.forEach(function(c){u.push(c)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let c=0;c<this.P;++c)this.A.push(new Array(this.F));for(let c=0;c<u.length;++c)this.pushBack(u[c])}forEach(u){for(let c=0;c<this.i;++c)u(this.getElementByPos(c),c,this)}[Symbol.iterator](){return(function*(){for(let u=0;u<this.i;++u)yield this.getElementByPos(u)}).bind(this)()}},l=o;r.default=l}),jL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var e=class{constructor(n,s){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=s}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let s=n.tt;for(;s.U===n;)n=s,s=n.tt;n=s}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let s=n.tt;for(;s.W===n;)n=s,s=n.tt;return n.W!==s?s:n}}te(){let n=this.tt,s=this.W,o=s.U;return n.tt===this?n.tt=s:n.U===this?n.U=s:n.W=s,s.tt=n,s.U=this,this.tt=s,this.W=o,o&&(o.tt=this),s}se(){let n=this.tt,s=this.U,o=s.W;return n.tt===this?n.tt=s:n.U===this?n.U=s:n.W=s,s.tt=n,s.W=this,this.tt=s,this.U=o,o&&(o.tt=this),s}};r.TreeNode=e;var t=class extends e{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=t}),Vx=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=jL(),t=Vs(),n=Us(),s=class extends t.Container{constructor(l=function(c,h){return c<h?-1:c>h?1:0},u=!1){super(),this.Y=void 0,this.v=l,u?(this.re=e.TreeNodeEnableIndex,this.M=function(c,h,d){let m=this.ne(c,h,d);if(m){let y=m.tt;for(;y!==this.h;)y.rt+=1,y=y.tt;let _=this.he(m);if(_){let{parentNode:E,grandParent:S,curNode:T}=_;E.ie(),S.ie(),T.ie()}}return this.i},this.V=function(c){let h=this.fe(c);for(;h!==this.h;)h.rt-=1,h=h.tt}):(this.re=e.TreeNode,this.M=function(c,h,d){let m=this.ne(c,h,d);return m&&this.he(m),this.i},this.V=this.fe),this.h=new this.re}X(l,u){let c=this.h;for(;l;){let h=this.v(l.u,u);if(h<0)l=l.W;else if(h>0)c=l,l=l.U;else return l}return c}Z(l,u){let c=this.h;for(;l;)this.v(l.u,u)<=0?l=l.W:(c=l,l=l.U);return c}$(l,u){let c=this.h;for(;l;){let h=this.v(l.u,u);if(h<0)c=l,l=l.W;else if(h>0)l=l.U;else return l}return c}rr(l,u){let c=this.h;for(;l;)this.v(l.u,u)<0?(c=l,l=l.W):l=l.U;return c}ue(l){for(;;){let u=l.tt;if(u===this.h)return;if(l.ee===1){l.ee=0;return}if(l===u.U){let c=u.W;if(c.ee===1)c.ee=0,u.ee=1,u===this.Y?this.Y=u.te():u.te();else if(c.W&&c.W.ee===1){c.ee=u.ee,u.ee=0,c.W.ee=0,u===this.Y?this.Y=u.te():u.te();return}else c.U&&c.U.ee===1?(c.ee=1,c.U.ee=0,c.se()):(c.ee=1,l=u)}else{let c=u.U;if(c.ee===1)c.ee=0,u.ee=1,u===this.Y?this.Y=u.se():u.se();else if(c.U&&c.U.ee===1){c.ee=u.ee,u.ee=0,c.U.ee=0,u===this.Y?this.Y=u.se():u.se();return}else c.W&&c.W.ee===1?(c.ee=1,c.W.ee=0,c.te()):(c.ee=1,l=u)}}}fe(l){if(this.i===1)return this.clear(),this.h;let u=l;for(;u.U||u.W;){if(u.W)for(u=u.W;u.U;)u=u.U;else u=u.U;[l.u,u.u]=[u.u,l.u],[l.l,u.l]=[u.l,l.l],l=u}this.h.U===u?this.h.U=u.tt:this.h.W===u&&(this.h.W=u.tt),this.ue(u);let c=u.tt;return u===c.U?c.U=void 0:c.W=void 0,this.i-=1,this.Y.ee=0,c}oe(l,u){return l===void 0?!1:this.oe(l.U,u)||u(l)?!0:this.oe(l.W,u)}he(l){for(;;){let u=l.tt;if(u.ee===0)return;let c=u.tt;if(u===c.U){let h=c.W;if(h&&h.ee===1){if(h.ee=u.ee=0,c===this.Y)return;c.ee=1,l=c;continue}else if(l===u.W){if(l.ee=0,l.U&&(l.U.tt=u),l.W&&(l.W.tt=c),u.W=l.U,c.U=l.W,l.U=u,l.W=c,c===this.Y)this.Y=l,this.h.tt=l;else{let d=c.tt;d.U===c?d.U=l:d.W=l}return l.tt=c.tt,u.tt=l,c.tt=l,c.ee=1,{parentNode:u,grandParent:c,curNode:l}}else u.ee=0,c===this.Y?this.Y=c.se():c.se(),c.ee=1}else{let h=c.U;if(h&&h.ee===1){if(h.ee=u.ee=0,c===this.Y)return;c.ee=1,l=c;continue}else if(l===u.U){if(l.ee=0,l.U&&(l.U.tt=c),l.W&&(l.W.tt=u),c.W=l.U,u.U=l.W,l.U=c,l.W=u,c===this.Y)this.Y=l,this.h.tt=l;else{let d=c.tt;d.U===c?d.U=l:d.W=l}return l.tt=c.tt,u.tt=l,c.tt=l,c.ee=1,{parentNode:u,grandParent:c,curNode:l}}else u.ee=0,c===this.Y?this.Y=c.te():c.te(),c.ee=1}return}}ne(l,u,c){if(this.Y===void 0){this.i+=1,this.Y=new this.re(l,u),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let h,d=this.h.U,m=this.v(d.u,l);if(m===0){d.l=u;return}else if(m>0)d.U=new this.re(l,u),d.U.tt=d,h=d.U,this.h.U=h;else{let y=this.h.W,_=this.v(y.u,l);if(_===0){y.l=u;return}else if(_<0)y.W=new this.re(l,u),y.W.tt=y,h=y.W,this.h.W=h;else{if(c!==void 0){let E=c.o;if(E!==this.h){let S=this.v(E.u,l);if(S===0){E.l=u;return}else if(S>0){let T=E.L(),V=this.v(T.u,l);if(V===0){T.l=u;return}else V<0&&(h=new this.re(l,u),T.W===void 0?(T.W=h,h.tt=T):(E.U=h,h.tt=E))}}}if(h===void 0)for(h=this.Y;;){let E=this.v(h.u,l);if(E>0){if(h.U===void 0){h.U=new this.re(l,u),h.U.tt=h,h=h.U;break}h=h.U}else if(E<0){if(h.W===void 0){h.W=new this.re(l,u),h.W.tt=h,h=h.W;break}h=h.W}else{h.l=u;return}}}}return this.i+=1,h}I(l,u){for(;l;){let c=this.v(l.u,u);if(c<0)l=l.W;else if(c>0)l=l.U;else return l}return l||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(l,u){let c=l.o;if(c===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return c.u=u,!0;if(c===this.h.U)return this.v(c.B().u,u)>0?(c.u=u,!0):!1;if(c===this.h.W)return this.v(c.L().u,u)<0?(c.u=u,!0):!1;let h=c.L().u;if(this.v(h,u)>=0)return!1;let d=c.B().u;return this.v(d,u)<=0?!1:(c.u=u,!0)}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u=0,c=this;return this.oe(this.Y,function(h){return l===u?(c.V(h),!0):(u+=1,!1)}),this.i}eraseElementByKey(l){if(this.i===0)return!1;let u=this.I(this.Y,l);return u===this.h?!1:(this.V(u),!0)}eraseElementByIterator(l){let u=l.o;u===this.h&&(0,n.throwIteratorAccessError)();let c=u.W===void 0;return l.iteratorType===0?c&&l.next():(!c||u.U===void 0)&&l.next(),this.V(u),l}forEach(l){let u=0;for(let c of this)l(c,u++,this)}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u,c=0;for(let h of this){if(c===l){u=h;break}c+=1}return u}getHeight(){if(this.i===0)return 0;let l=function(u){return u?Math.max(l(u.U),l(u.W))+1:0};return l(this.Y)}},o=s;r.default=o}),Ux=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=Vs(),t=Us(),n=class extends e.ContainerIterator{constructor(o,l,u){super(u),this.o=o,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let o=this.o,l=this.h.tt;if(o===this.h)return l?l.rt-1:0;let u=0;for(o.U&&(u+=o.U.rt);o!==l;){let c=o.tt;o===c.W&&(u+=1,c.U&&(u+=c.U.rt)),o=c}return u}},s=n;r.default=s}),$L=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=s(Vx()),t=s(Ux()),n=Us();function s(c){return c&&c.t?c:{default:c}}var o=class Bx extends t.default{constructor(h,d,m,y){super(h,d,y),this.container=m}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new Bx(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.default{constructor(c=[],h,d){super(h,d);let m=this;c.forEach(function(y){m.insert(y)})}*K(c){c!==void 0&&(yield*this.K(c.U),yield c.u,yield*this.K(c.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(c,h){return this.M(c,void 0,h)}find(c){let h=this.I(this.Y,c);return new o(h,this.h,this)}lowerBound(c){let h=this.X(this.Y,c);return new o(h,this.h,this)}upperBound(c){let h=this.Z(this.Y,c);return new o(h,this.h,this)}reverseLowerBound(c){let h=this.$(this.Y,c);return new o(h,this.h,this)}reverseUpperBound(c){let h=this.rr(this.Y,c);return new o(h,this.h,this)}union(c){let h=this;return c.forEach(function(d){h.insert(d)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},u=l;r.default=u}),zL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=s(Vx()),t=s(Ux()),n=Us();function s(c){return c&&c.t?c:{default:c}}var o=class jx extends t.default{constructor(h,d,m,y){super(h,d,y),this.container=m}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(d,m){if(m==="0")return h.o.u;if(m==="1")return h.o.l},set(d,m,y){if(m!=="1")throw new TypeError("props must be 1");return h.o.l=y,!0}})}copy(){return new jx(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.default{constructor(c=[],h,d){super(h,d);let m=this;c.forEach(function(y){m.setElement(y[0],y[1])})}*K(c){c!==void 0&&(yield*this.K(c.U),yield[c.u,c.l],yield*this.K(c.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i===0)return;let c=this.h.U;return[c.u,c.l]}back(){if(this.i===0)return;let c=this.h.W;return[c.u,c.l]}lowerBound(c){let h=this.X(this.Y,c);return new o(h,this.h,this)}upperBound(c){let h=this.Z(this.Y,c);return new o(h,this.h,this)}reverseLowerBound(c){let h=this.$(this.Y,c);return new o(h,this.h,this)}reverseUpperBound(c){let h=this.rr(this.Y,c);return new o(h,this.h,this)}setElement(c,h,d){return this.M(c,h,d)}find(c){let h=this.I(this.Y,c);return new o(h,this.h,this)}getElementByKey(c){return this.I(this.Y,c).l}union(c){let h=this;return c.forEach(function(d){h.setElement(d[0],d[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},u=l;r.default=u}),$x=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=e;function e(t){let n=typeof t;return n==="object"&&t!==null||n==="function"}}),zx=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var e=Vs(),t=s($x()),n=Us();function s(u){return u&&u.t?u:{default:u}}var o=class extends e.ContainerIterator{constructor(u,c,h){super(h),this.o=u,this.h=c,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=o;var l=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(u){let{L:c,B:h}=u;c.B=h,h.L=c,u===this.p&&(this.p=h),u===this._&&(this._=c),this.i-=1}M(u,c,h){h===void 0&&(h=(0,t.default)(u));let d;if(h){let m=u[this.HASH_TAG];if(m!==void 0)return this.H[m].l=c,this.i;Object.defineProperty(u,this.HASH_TAG,{value:this.H.length,configurable:!0}),d={u,l:c,L:this._,B:this.h},this.H.push(d)}else{let m=this.g[u];if(m)return m.l=c,this.i;d={u,l:c,L:this._,B:this.h},this.g[u]=d}return this.i===0?(this.p=d,this.h.B=d):this._.B=d,this._=d,this.h.L=d,++this.i}I(u,c){if(c===void 0&&(c=(0,t.default)(u)),c){let h=u[this.HASH_TAG];return h===void 0?this.h:this.H[h]}else return this.g[u]||this.h}clear(){let u=this.HASH_TAG;this.H.forEach(function(c){delete c.u[u]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(u,c){let h;if(c===void 0&&(c=(0,t.default)(u)),c){let d=u[this.HASH_TAG];if(d===void 0)return!1;delete u[this.HASH_TAG],h=this.H[d],delete this.H[d]}else{if(h=this.g[u],h===void 0)return!1;delete this.g[u]}return this.V(h),!0}eraseElementByIterator(u){let c=u.o;return c===this.h&&(0,n.throwIteratorAccessError)(),this.V(c),u.next()}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return this.V(c),this.i}};r.HashContainer=l}),qL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=zx(),t=Us(),n=class qx extends e.HashContainerIterator{constructor(u,c,h,d){super(u,c,d),this.container=h}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new qx(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.HashContainer{constructor(l=[]){super();let u=this;l.forEach(function(c){u.insert(c)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(l,u){return this.M(l,void 0,u)}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u=this.p;for(;l--;)u=u.B;return u.u}find(l,u){let c=this.I(l,u);return new n(c,this.h,this)}forEach(l){let u=0,c=this.p;for(;c!==this.h;)l(c.u,u++,this),c=c.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield l.u,l=l.B}).bind(this)()}},o=s;r.default=o}),WL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=zx(),t=s($x()),n=Us();function s(c){return c&&c.t?c:{default:c}}var o=class Wx extends e.HashContainerIterator{constructor(h,d,m,y){super(h,d,y),this.container=m}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(d,m){if(m==="0")return h.o.u;if(m==="1")return h.o.l},set(d,m,y){if(m!=="1")throw new TypeError("props must be 1");return h.o.l=y,!0}})}copy(){return new Wx(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.HashContainer{constructor(c=[]){super();let h=this;c.forEach(function(d){h.setElement(d[0],d[1])})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(c,h,d){return this.M(c,h,d)}getElementByKey(c,h){if(h===void 0&&(h=(0,t.default)(c)),h){let m=c[this.HASH_TAG];return m!==void 0?this.H[m].l:void 0}let d=this.g[c];return d?d.l:void 0}getElementByPos(c){if(c<0||c>this.i-1)throw new RangeError;let h=this.p;for(;c--;)h=h.B;return[h.u,h.l]}find(c,h){let d=this.I(c,h);return new o(d,this.h,this)}forEach(c){let h=0,d=this.p;for(;d!==this.h;)c([d.u,d.l],h++,this),d=d.B}[Symbol.iterator](){return(function*(){let c=this.p;for(;c!==this.h;)yield[c.u,c.l],c=c.B}).bind(this)()}},u=l;r.default=u}),HL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return s.default}});var e=m(LL()),t=m(ML()),n=m(FL()),s=m(VL()),o=m(UL()),l=m(BL()),u=m($L()),c=m(zL()),h=m(qL()),d=m(WL());function m(y){return y&&y.t?y:{default:y}}}),QL=Ke((r,e)=>{je(),ze(),$e();var t=HL().OrderedSet,n=Ls()("number-allocator:trace"),s=Ls()("number-allocator:error");function o(u,c){this.low=u,this.high=c}o.prototype.equals=function(u){return this.low===u.low&&this.high===u.high},o.prototype.compare=function(u){return this.low<u.low&&this.high<u.low?-1:u.low<this.low&&u.high<this.low?1:0};function l(u,c){if(!(this instanceof l))return new l(u,c);this.min=u,this.max=c,this.ss=new t([],(h,d)=>h.compare(d)),n("Create"),this.clear()}l.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},l.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let u=this.ss.begin(),c=u.pointer.low,h=u.pointer.high,d=c;return d+1<=h?this.ss.updateKeyByIterator(u,new o(c+1,h)):this.ss.eraseElementByPos(0),n("alloc():"+d),d},l.prototype.use=function(u){let c=new o(u,u),h=this.ss.lowerBound(c);if(!h.equals(this.ss.end())){let d=h.pointer.low,m=h.pointer.high;return h.pointer.equals(c)?(this.ss.eraseElementByIterator(h),n("use():"+u),!0):d>u?!1:d===u?(this.ss.updateKeyByIterator(h,new o(d+1,m)),n("use():"+u),!0):m===u?(this.ss.updateKeyByIterator(h,new o(d,m-1)),n("use():"+u),!0):(this.ss.updateKeyByIterator(h,new o(u+1,m)),this.ss.insert(new o(d,u-1)),n("use():"+u),!0)}return n("use():failed"),!1},l.prototype.free=function(u){if(u<this.min||u>this.max){s("free():"+u+" is out of range");return}let c=new o(u,u),h=this.ss.upperBound(c);if(h.equals(this.ss.end())){if(h.equals(this.ss.begin())){this.ss.insert(c);return}h.pre();let d=h.pointer.high;h.pointer.high+1===u?this.ss.updateKeyByIterator(h,new o(d,u)):this.ss.insert(c)}else if(h.equals(this.ss.begin()))if(u+1===h.pointer.low){let d=h.pointer.high;this.ss.updateKeyByIterator(h,new o(u,d))}else this.ss.insert(c);else{let d=h.pointer.low,m=h.pointer.high;h.pre();let y=h.pointer.low;h.pointer.high+1===u?u+1===d?(this.ss.eraseElementByIterator(h),this.ss.updateKeyByIterator(h,new o(y,m))):this.ss.updateKeyByIterator(h,new o(y,u)):u+1===d?(this.ss.eraseElementByIterator(h.next()),this.ss.insert(new o(u,m))):this.ss.insert(c)}n("free():"+u)},l.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},l.prototype.intervalCount=function(){return this.ss.size()},l.prototype.dump=function(){console.log("length:"+this.ss.size());for(let u of this.ss)console.log(u)},e.exports=l}),Hx=Ke((r,e)=>{je(),ze(),$e();var t=QL();e.exports.NumberAllocator=t}),KL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=DL(),t=Hx(),n=class{constructor(s){s>0&&(this.aliasToTopic=new e.LRUCache({max:s}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,s),this.max=s,this.length=0)}put(s,o){if(o===0||o>this.max)return!1;let l=this.aliasToTopic.get(o);return l&&delete this.topicToAlias[l],this.aliasToTopic.set(o,s),this.topicToAlias[s]=o,this.numberAllocator.use(o),this.length=this.aliasToTopic.size,!0}getTopicByAlias(s){return this.aliasToTopic.get(s)}getAliasByTopic(s){let o=this.topicToAlias[s];return typeof o<"u"&&this.aliasToTopic.get(o),o}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=n}),GL=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,"__esModule",{value:!0});var t=jd(),n=e(KL()),s=gu(),o=(l,u)=>{l.log("_handleConnack");let{options:c}=l,h=c.protocolVersion===5?u.reasonCode:u.returnCode;if(clearTimeout(l.connackTimer),delete l.topicAliasSend,u.properties){if(u.properties.topicAliasMaximum){if(u.properties.topicAliasMaximum>65535){l.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}u.properties.topicAliasMaximum>0&&(l.topicAliasSend=new n.default(u.properties.topicAliasMaximum))}u.properties.serverKeepAlive&&c.keepalive&&(c.keepalive=u.properties.serverKeepAlive),u.properties.maximumPacketSize&&(c.properties||(c.properties={}),c.properties.maximumPacketSize=u.properties.maximumPacketSize)}if(h===0)l.reconnecting=!1,l._onConnect(u);else if(h>0){let d=new s.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[h]}`,h);l.emit("error",d),l.options.reconnectOnConnackError&&l._cleanUp(!0)}};r.default=o}),YL=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=(t,n,s)=>{t.log("handling pubrel packet");let o=typeof s<"u"?s:t.noop,{messageId:l}=n,u={cmd:"pubcomp",messageId:l};t.incomingStore.get(n,(c,h)=>{c?t._sendPacket(u,o):(t.emit("message",h.topic,h.payload,h),t.handleMessage(h,d=>{if(d)return o(d);t.incomingStore.del(h,t.noop),t._sendPacket(u,o)}))})};r.default=e}),JL=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(PL()),n=e(OL()),s=e(GL()),o=e(jd()),l=e(YL()),u=(c,h,d)=>{let{options:m}=c;if(m.protocolVersion===5&&m.properties&&m.properties.maximumPacketSize&&m.properties.maximumPacketSize<h.length)return c.emit("error",new Error(`exceeding packets size ${h.cmd}`)),c.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),c;switch(c.log("_handlePacket :: emitting packetreceive"),c.emit("packetreceive",h),h.cmd){case"publish":(0,t.default)(c,h,d);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":c.reschedulePing(),(0,o.default)(c,h),d();break;case"pubrel":c.reschedulePing(),(0,l.default)(c,h,d);break;case"connack":(0,s.default)(c,h),d();break;case"auth":c.reschedulePing(),(0,n.default)(c,h),d();break;case"pingresp":c.log("_handlePacket :: received pingresp"),c.reschedulePing(!0),d();break;case"disconnect":c.emit("disconnect",h),d();break;default:c.log("_handlePacket :: unknown command"),d();break}};r.default=u}),XL=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var t=e((qa(),Kt(Uo))),n=gu(),s=class{};r.TypedEventEmitter=s,(0,n.applyMixin)(s,t.default)}),$d=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var e=()=>{var o;return typeof window<"u"?typeof navigator<"u"&&((o=navigator.userAgent)===null||o===void 0?void 0:o.toLowerCase().indexOf(" electron/"))>-1&&jt!=null&&jt.versions?!Object.prototype.hasOwnProperty.call(jt.versions,"electron"):typeof window.document<"u":!1},t=()=>{var o,l;return!!(typeof self=="object"&&!((l=(o=self==null?void 0:self.constructor)===null||o===void 0?void 0:o.name)===null||l===void 0)&&l.includes("WorkerGlobalScope"))},n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",s=e()||t()||n();r.isWebWorker=t(),r.isReactNativeBrowser=n(),r.default=s}),ZL=Ke((r,e)=>{je(),ze(),$e(),function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.fastUniqueNumbers={}))}(r,function(t){var n=function(_){return function(E){var S=_(E);return E.add(S),S}},s=function(_){return function(E,S){return _.set(E,S),S}},o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,l=536870912,u=l*2,c=function(_,E){return function(S){var T=E.get(S),V=T===void 0?S.size:T<u?T+1:0;if(!S.has(V))return _(S,V);if(S.size<l){for(;S.has(V);)V=Math.floor(Math.random()*u);return _(S,V)}if(S.size>o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;S.has(V);)V=Math.floor(Math.random()*o);return _(S,V)}},h=new WeakMap,d=s(h),m=c(d,h),y=n(m);t.addUniqueNumber=y,t.generateUniqueNumber=m})}),eM=Ke((r,e)=>{je(),ze(),$e(),function(t,n){typeof r=="object"&&typeof e<"u"?n(r,ZL()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimersBroker={},t.fastUniqueNumbers))}(r,function(t,n){var s=function(u){return u.method!==void 0&&u.method==="call"},o=function(u){return u.error===null&&typeof u.id=="number"},l=function(u){var c=new Map([[0,function(){}]]),h=new Map([[0,function(){}]]),d=new Map,m=new Worker(u);m.addEventListener("message",function(T){var V=T.data;if(s(V)){var I=V.params,k=I.timerId,W=I.timerType;if(W==="interval"){var H=c.get(k);if(typeof H=="number"){var j=d.get(H);if(j===void 0||j.timerId!==k||j.timerType!==W)throw new Error("The timer is in an undefined state.")}else if(typeof H<"u")H();else throw new Error("The timer is in an undefined state.")}else if(W==="timeout"){var P=h.get(k);if(typeof P=="number"){var R=d.get(P);if(R===void 0||R.timerId!==k||R.timerType!==W)throw new Error("The timer is in an undefined state.")}else if(typeof P<"u")P(),h.delete(k);else throw new Error("The timer is in an undefined state.")}}else if(o(V)){var M=V.id,F=d.get(M);if(F===void 0)throw new Error("The timer is in an undefined state.");var $=F.timerId,N=F.timerType;d.delete(M),N==="interval"?c.delete($):h.delete($)}else{var L=V.error.message;throw new Error(L)}});var y=function(T){var V=n.generateUniqueNumber(d);d.set(V,{timerId:T,timerType:"interval"}),c.set(T,V),m.postMessage({id:V,method:"clear",params:{timerId:T,timerType:"interval"}})},_=function(T){var V=n.generateUniqueNumber(d);d.set(V,{timerId:T,timerType:"timeout"}),h.set(T,V),m.postMessage({id:V,method:"clear",params:{timerId:T,timerType:"timeout"}})},E=function(T){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=n.generateUniqueNumber(c);return c.set(I,function(){T(),typeof c.get(I)=="function"&&m.postMessage({id:null,method:"set",params:{delay:V,now:performance.now(),timerId:I,timerType:"interval"}})}),m.postMessage({id:null,method:"set",params:{delay:V,now:performance.now(),timerId:I,timerType:"interval"}}),I},S=function(T){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=n.generateUniqueNumber(h);return h.set(I,T),m.postMessage({id:null,method:"set",params:{delay:V,now:performance.now(),timerId:I,timerType:"timeout"}}),I};return{clearInterval:y,clearTimeout:_,setInterval:E,setTimeout:S}};t.load=l})}),tM=Ke((r,e)=>{je(),ze(),$e(),function(t,n){typeof r=="object"&&typeof e<"u"?n(r,eM()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimers={},t.workerTimersBroker))}(r,function(t,n){var s=function(m,y){var _=null;return function(){if(_!==null)return _;var E=new Blob([y],{type:"application/javascript; charset=utf-8"}),S=URL.createObjectURL(E);return _=m(S),setTimeout(function(){return URL.revokeObjectURL(S)}),_}},o=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,l=s(n.load,o),u=function(m){return l().clearInterval(m)},c=function(m){return l().clearTimeout(m)},h=function(){var m;return(m=l()).setInterval.apply(m,arguments)},d=function(){var m;return(m=l()).setTimeout.apply(m,arguments)};t.clearInterval=u,t.clearTimeout=c,t.setInterval=h,t.setTimeout=d})}),rM=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(h,d,m,y){y===void 0&&(y=m);var _=Object.getOwnPropertyDescriptor(d,m);(!_||("get"in _?!d.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return d[m]}}),Object.defineProperty(h,y,_)}:function(h,d,m,y){y===void 0&&(y=m),h[y]=d[m]}),t=r&&r.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),n=r&&r.__importStar||function(){var h=function(d){return h=Object.getOwnPropertyNames||function(m){var y=[];for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(y[y.length]=_);return y},h(d)};return function(d){if(d&&d.__esModule)return d;var m={};if(d!=null)for(var y=h(d),_=0;_<y.length;_++)y[_]!=="default"&&e(m,d,y[_]);return t(m,d),m}}();Object.defineProperty(r,"__esModule",{value:!0});var s=n($d()),o=tM(),l={set:o.setInterval,clear:o.clearInterval},u={set:(h,d)=>setInterval(h,d),clear:h=>clearInterval(h)},c=h=>{switch(h){case"native":return u;case"worker":return l;case"auto":default:return s.default&&!s.isWebWorker&&!s.isReactNativeBrowser?l:u}};r.default=c}),Qx=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(rM()),n=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(s,o){this.destroyed=!1,this.client=s,this.timer=typeof o=="object"&&"set"in o&&"clear"in o?o:(0,t.default)(o),this.setKeepalive(s.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(s){if(s*=1e3,isNaN(s)||s<=0||s>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${s}`);this._keepalive=s,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${s}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let s=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+s,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=n}),ev=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(H,j,P,R){R===void 0&&(R=P);var M=Object.getOwnPropertyDescriptor(j,P);(!M||("get"in M?!j.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return j[P]}}),Object.defineProperty(H,R,M)}:function(H,j,P,R){R===void 0&&(R=P),H[R]=j[P]}),t=r&&r.__setModuleDefault||(Object.create?function(H,j){Object.defineProperty(H,"default",{enumerable:!0,value:j})}:function(H,j){H.default=j}),n=r&&r.__importStar||function(){var H=function(j){return H=Object.getOwnPropertyNames||function(P){var R=[];for(var M in P)Object.prototype.hasOwnProperty.call(P,M)&&(R[R.length]=M);return R},H(j)};return function(j){if(j&&j.__esModule)return j;var P={};if(j!=null)for(var R=H(j),M=0;M<R.length;M++)R[M]!=="default"&&e(P,j,R[M]);return t(P,j),P}}(),s=r&&r.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(r,"__esModule",{value:!0});var o=s(cL()),l=s(AL()),u=s(kx()),c=Ha(),h=s(RL()),d=n(kL()),m=s(Ls()),y=s(Px()),_=s(JL()),E=gu(),S=XL(),T=s(Qx()),V=n($d()),I=globalThis.setImmediate||((...H)=>{let j=H.shift();(0,E.nextTick)(()=>{j(...H)})}),k={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},W=class tv extends S.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(j,P){super(),this.options=P||{};for(let R in k)typeof this.options[R]>"u"?this.options[R]=k[R]:this.options[R]=P[R];this.log=this.options.log||(0,m.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",tv.VERSION),V.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",V.default?"browser":"node"),this.log("MqttClient :: options.protocol",P.protocol),this.log("MqttClient :: options.protocolVersion",P.protocolVersion),this.log("MqttClient :: options.username",P.username),this.log("MqttClient :: options.keepalive",P.keepalive),this.log("MqttClient :: options.reconnectPeriod",P.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",P.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",P.properties?P.properties.topicAliasMaximum:void 0),this.options.clientId=typeof P.clientId=="string"?P.clientId:tv.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=P.protocolVersion===5&&P.customHandleAcks?P.customHandleAcks:(...R)=>{R[3](null,0)},this.options.writeCache||(l.default.writeToStream.cacheNumbers=!1),this.streamBuilder=j,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new u.default:this.options.messageIdProvider,this.outgoingStore=P.outgoingStore||new y.default,this.incomingStore=P.incomingStore||new y.default,this.queueQoSZero=P.queueQoSZero===void 0?!0:P.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,P.properties&&P.properties.topicAliasMaximum>0&&(P.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new o.default(P.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:R}=this,M=()=>{let F=R.shift();this.log("deliver :: entry %o",F);let $=null;if(!F){this._resubscribe();return}$=F.packet,this.log("deliver :: call _sendPacket for %o",$);let N=!0;$.messageId&&$.messageId!==0&&(this.messageIdProvider.register($.messageId)||(N=!1)),N?this._sendPacket($,L=>{F.cb&&F.cb(L),M()}):(this.log("messageId: %d has already used. The message is skipped and removed.",$.messageId),M())};this.log("connect :: sending queued packets"),M()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(j,P){P()}handleMessage(j,P){P()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var j;let P=new c.Writable,R=l.default.parser(this.options),M=null,F=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new y.default,this.outgoingStore=this.options.outgoingStore||new y.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),R.on("packet",ae=>{this.log("parser :: on packet push to packets array."),F.push(ae)});let $=()=>{this.log("work :: getting next packet in queue");let ae=F.shift();if(ae)this.log("work :: packet pulled from queue"),(0,_.default)(this,ae,N);else{this.log("work :: no packets in queue");let De=M;M=null,this.log("work :: done flag is %s",!!De),De&&De()}},N=()=>{if(F.length)(0,E.nextTick)($);else{let ae=M;M=null,ae()}};P._write=(ae,De,Re)=>{M=Re,this.log("writable stream :: parsing buffer"),R.parse(ae),$()};let L=ae=>{this.log("streamErrorHandler :: error",ae.message),ae.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",ae)):this.noop(ae)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(P),this.stream.on("error",L),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let ve={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(ve.will=Object.assign(Object.assign({},this.options.will),{payload:(j=this.options.will)===null||j===void 0?void 0:j.payload})),this.topicAliasRecv&&(ve.properties||(ve.properties={}),this.topicAliasRecv&&(ve.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(ve),R.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let ae=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(ae)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(j,P,R,M){this.log("publish :: message `%s` to topic `%s`",P,j);let{options:F}=this;typeof R=="function"&&(M=R,R=null),R=R||{},R=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),R);let{qos:$,retain:N,dup:L,properties:ve,cbStorePut:ae}=R;if(this._checkDisconnecting(M))return this;let De=()=>{let Re=0;if(($===1||$===2)&&(Re=this._nextId(),Re===null))return this.log("No messageId left"),!1;let fe={cmd:"publish",topic:j,payload:P,qos:$,retain:N,messageId:Re,dup:L};switch(F.protocolVersion===5&&(fe.properties=ve),this.log("publish :: qos",$),$){case 1:case 2:this.outgoing[fe.messageId]={volatile:!1,cb:M||this.noop},this.log("MqttClient:publish: packet cmd: %s",fe.cmd),this._sendPacket(fe,void 0,ae);break;default:this.log("MqttClient:publish: packet cmd: %s",fe.cmd),this._sendPacket(fe,M,ae);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!De())&&this._storeProcessingQueue.push({invoke:De,cbStorePut:R.cbStorePut,callback:M}),this}publishAsync(j,P,R){return new Promise((M,F)=>{this.publish(j,P,R,($,N)=>{$?F($):M(N)})})}subscribe(j,P,R){let M=this.options.protocolVersion;typeof P=="function"&&(R=P),R=R||this.noop;let F=!1,$=[];typeof j=="string"?(j=[j],$=j):Array.isArray(j)?$=j:typeof j=="object"&&(F=j.resubscribe,delete j.resubscribe,$=Object.keys(j));let N=d.validateTopics($);if(N!==null)return I(R,new Error(`Invalid topic ${N}`)),this;if(this._checkDisconnecting(R))return this.log("subscribe: discconecting true"),this;let L={qos:0};M===5&&(L.nl=!1,L.rap=!1,L.rh=0),P=Object.assign(Object.assign({},L),P);let ve=P.properties,ae=[],De=(fe,Ne)=>{if(Ne=Ne||P,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,fe)||this._resubscribeTopics[fe].qos<Ne.qos||F){let ie={topic:fe,qos:Ne.qos};M===5&&(ie.nl=Ne.nl,ie.rap=Ne.rap,ie.rh=Ne.rh,ie.properties=ve),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",ie.topic,ie.qos),ae.push(ie)}};if(Array.isArray(j)?j.forEach(fe=>{this.log("subscribe: array topic %s",fe),De(fe)}):Object.keys(j).forEach(fe=>{this.log("subscribe: object topic %s, %o",fe,j[fe]),De(fe,j[fe])}),!ae.length)return R(null,[]),this;let Re=()=>{let fe=this._nextId();if(fe===null)return this.log("No messageId left"),!1;let Ne={cmd:"subscribe",subscriptions:ae,messageId:fe};if(ve&&(Ne.properties=ve),this.options.resubscribe){this.log("subscribe :: resubscribe true");let ie=[];ae.forEach(J=>{if(this.options.reconnectPeriod>0){let z={qos:J.qos};M===5&&(z.nl=J.nl||!1,z.rap=J.rap||!1,z.rh=J.rh||0,z.properties=J.properties),this._resubscribeTopics[J.topic]=z,ie.push(J.topic)}}),this.messageIdToTopic[Ne.messageId]=ie}return this.outgoing[Ne.messageId]={volatile:!0,cb(ie,J){if(!ie){let{granted:z}=J;for(let be=0;be<z.length;be+=1)ae[be].qos=z[be]}R(ie,ae,J)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(Ne),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Re())&&this._storeProcessingQueue.push({invoke:Re,callback:R}),this}subscribeAsync(j,P){return new Promise((R,M)=>{this.subscribe(j,P,(F,$)=>{F?M(F):R($)})})}unsubscribe(j,P,R){typeof j=="string"&&(j=[j]),typeof P=="function"&&(R=P),R=R||this.noop;let M=d.validateTopics(j);if(M!==null)return I(R,new Error(`Invalid topic ${M}`)),this;if(this._checkDisconnecting(R))return this;let F=()=>{let $=this._nextId();if($===null)return this.log("No messageId left"),!1;let N={cmd:"unsubscribe",messageId:$,unsubscriptions:[]};return typeof j=="string"?N.unsubscriptions=[j]:Array.isArray(j)&&(N.unsubscriptions=j),this.options.resubscribe&&N.unsubscriptions.forEach(L=>{delete this._resubscribeTopics[L]}),typeof P=="object"&&P.properties&&(N.properties=P.properties),this.outgoing[N.messageId]={volatile:!0,cb:R},this.log("unsubscribe: call _sendPacket"),this._sendPacket(N),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!F())&&this._storeProcessingQueue.push({invoke:F,callback:R}),this}unsubscribeAsync(j,P){return new Promise((R,M)=>{this.unsubscribe(j,P,(F,$)=>{F?M(F):R($)})})}end(j,P,R){this.log("end :: (%s)",this.options.clientId),(j==null||typeof j!="boolean")&&(R=R||P,P=j,j=!1),typeof P!="object"&&(R=R||P,P=null),this.log("end :: cb? %s",!!R),(!R||typeof R!="function")&&(R=this.noop);let M=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close($=>{this.outgoingStore.close(N=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),R){let L=$||N;this.log("end :: closeStores: invoking callback with args"),R(L)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},F=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,j),this._cleanUp(j,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,E.nextTick)(M)},P)};return this.disconnecting?(R(),this):(this._clearReconnect(),this.disconnecting=!0,!j&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,F,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),F()),this)}endAsync(j,P){return new Promise((R,M)=>{this.end(j,P,F=>{F?M(F):R()})})}removeOutgoingMessage(j){if(this.outgoing[j]){let{cb:P}=this.outgoing[j];this._removeOutgoingAndStoreMessage(j,()=>{P(new Error("Message removed"))})}return this}reconnect(j){this.log("client reconnect");let P=()=>{j?(this.options.incomingStore=j.incomingStore,this.options.outgoingStore=j.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new y.default,this.outgoingStore=this.options.outgoingStore||new y.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=P:P(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(j=>{this.outgoing[j].volatile&&typeof this.outgoing[j].cb=="function"&&(this.outgoing[j].cb(new Error("Connection closed")),delete this.outgoing[j])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(j=>{typeof this.outgoing[j].cb=="function"&&(this.outgoing[j].cb(new Error("Connection closed")),delete this.outgoing[j])}))}_removeTopicAliasAndRecoverTopicName(j){let P;j.properties&&(P=j.properties.topicAlias);let R=j.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",P,R),R.length===0){if(typeof P>"u")return new Error("Unregistered Topic Alias");if(R=this.topicAliasSend.getTopicByAlias(P),typeof R>"u")return new Error("Unregistered Topic Alias");j.topic=R}P&&delete j.properties.topicAlias}_checkDisconnecting(j){return this.disconnecting&&(j&&j!==this.noop?j(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(j,P,R={}){if(P&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",P)),this.log("_cleanUp :: forced? %s",j),j)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let M=Object.assign({cmd:"disconnect"},R);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(M,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),I(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),P&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",P),P())}_storeAndSend(j,P,R){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",j.cmd);let M=j,F;if(M.cmd==="publish"&&(M=(0,h.default)(j),F=this._removeTopicAliasAndRecoverTopicName(M),F))return P&&P(F);this.outgoingStore.put(M,$=>{if($)return P&&P($);R(),this._writePacket(j,P)})}_applyTopicAlias(j){if(this.options.protocolVersion===5&&j.cmd==="publish"){let P;j.properties&&(P=j.properties.topicAlias);let R=j.topic.toString();if(this.topicAliasSend)if(P){if(R.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",R,P),!this.topicAliasSend.put(R,P)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",R,P),new Error("Sending Topic Alias out of range")}else R.length!==0&&(this.options.autoAssignTopicAlias?(P=this.topicAliasSend.getAliasByTopic(R),P?(j.topic="",j.properties=Object.assign(Object.assign({},j.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",R,P)):(P=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(R,P),j.properties=Object.assign(Object.assign({},j.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",R,P))):this.options.autoUseTopicAlias&&(P=this.topicAliasSend.getAliasByTopic(R),P&&(j.topic="",j.properties=Object.assign(Object.assign({},j.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",R,P))));else if(P)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",R,P),new Error("Sending Topic Alias out of range")}}_noop(j){this.log("noop ::",j)}_writePacket(j,P){this.log("_writePacket :: packet: %O",j),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",j),this.log("_writePacket :: writing to stream");let R=l.default.writeToStream(j,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",R),!R&&P&&P!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",P)):P&&(this.log("_writePacket :: invoking cb"),P())}_sendPacket(j,P,R,M){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),R=R||this.noop,P=P||this.noop;let F=this._applyTopicAlias(j);if(F){P(F);return}if(!this.connected){if(j.cmd==="auth"){this._writePacket(j,P);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(j,P,R);return}if(M){this._writePacket(j,P);return}switch(j.cmd){case"publish":break;case"pubrel":this._storeAndSend(j,P,R);return;default:this._writePacket(j,P);return}switch(j.qos){case 2:case 1:this._storeAndSend(j,P,R);break;case 0:default:this._writePacket(j,P);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(j,P,R){this.log("_storePacket :: packet: %o",j),this.log("_storePacket :: cb? %s",!!P),R=R||this.noop;let M=j;if(M.cmd==="publish"){M=(0,h.default)(j);let $=this._removeTopicAliasAndRecoverTopicName(M);if($)return P&&P($)}let F=M.qos||0;F===0&&this.queueQoSZero||M.cmd!=="publish"?this.queue.push({packet:M,cb:P}):F>0?(P=this.outgoing[M.messageId]?this.outgoing[M.messageId].cb:null,this.outgoingStore.put(M,$=>{if($)return P&&P($);R()})):P&&P(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new T.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(j=!1){this.keepaliveManager&&this.options.keepalive&&(j||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let j=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&j.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let P=0;P<j.length;P++){let R={};R[j[P]]=this._resubscribeTopics[j[P]],R.resubscribe=!0,this.subscribe(R,{properties:R[j[P]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(j){if(this.disconnected){this.emit("connect",j);return}this.connackPacket=j,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let P=()=>{let R=this.outgoingStore.createStream(),M=()=>{R.destroy(),R=null,this._flushStoreProcessingQueue(),F()},F=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",M),R.on("error",N=>{F(),this._flushStoreProcessingQueue(),this.removeListener("close",M),this.emit("error",N)});let $=()=>{if(!R)return;let N=R.read(1),L;if(!N){R.once("readable",$);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[N.messageId]){$();return}!this.disconnecting&&!this.reconnectTimer?(L=this.outgoing[N.messageId]?this.outgoing[N.messageId].cb:null,this.outgoing[N.messageId]={volatile:!1,cb(ve,ae){L&&L(ve,ae),$()}},this._packetIdsDuringStoreProcessing[N.messageId]=!0,this.messageIdProvider.register(N.messageId)?this._sendPacket(N,void 0,void 0,!0):this.log("messageId: %d has already used.",N.messageId)):R.destroy&&R.destroy()};R.on("end",()=>{let N=!0;for(let L in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[L]){N=!1;break}this.removeListener("close",M),N?(F(),this._invokeAllStoreProcessingQueue(),this.emit("connect",j)):P()}),$()};P()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let j=this._storeProcessingQueue[0];if(j&&j.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let j of this._storeProcessingQueue)j.cbStorePut&&j.cbStorePut(new Error("Connection closed")),j.callback&&j.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(j,P){delete this.outgoing[j],this.outgoingStore.del({messageId:j},(R,M)=>{P(R,M),this.messageIdProvider.deallocate(j),this._invokeStoreProcessingQueue()})}};W.VERSION=E.MQTTJS_VERSION,r.default=W}),nM=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=Hx(),t=class{constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};r.default=t});function ca(r){throw new RangeError(Gx[r])}function IE(r,e){let t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]);let s=function(o,l){let u=[],c=o.length;for(;c--;)u[c]=l(o[c]);return u}((r=r.replace(Kx,".")).split("."),e).join(".");return n+s}function AE(r){let e=[],t=0,n=r.length;for(;t<n;){let s=r.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){let o=r.charCodeAt(t++);(64512&o)==56320?e.push(((1023&s)<<10)+(1023&o)+65536):(e.push(s),t--)}else e.push(s)}return e}var CE,RE,Kx,Gx,Si,mf,Vm,Um,Bm,jm,go,iM=Tn(()=>{je(),ze(),$e(),CE=/^xn--/,RE=/[^\0-\x7E]/,Kx=/[\x2E\u3002\uFF0E\uFF61]/g,Gx={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Si=Math.floor,mf=String.fromCharCode,Vm=function(r,e){return r+22+75*(r<26)-((e!=0)<<5)},Um=function(r,e,t){let n=0;for(r=t?Si(r/700):r>>1,r+=Si(r/e);r>455;n+=36)r=Si(r/35);return Si(n+36*r/(r+38))},Bm=function(r){let e=[],t=r.length,n=0,s=128,o=72,l=r.lastIndexOf("-");l<0&&(l=0);for(let c=0;c<l;++c)r.charCodeAt(c)>=128&&ca("not-basic"),e.push(r.charCodeAt(c));for(let c=l>0?l+1:0;c<t;){let h=n;for(let m=1,y=36;;y+=36){c>=t&&ca("invalid-input");let _=(u=r.charCodeAt(c++))-48<10?u-22:u-65<26?u-65:u-97<26?u-97:36;(_>=36||_>Si((2147483647-n)/m))&&ca("overflow"),n+=_*m;let E=y<=o?1:y>=o+26?26:y-o;if(_<E)break;let S=36-E;m>Si(2147483647/S)&&ca("overflow"),m*=S}let d=e.length+1;o=Um(n-h,d,h==0),Si(n/d)>2147483647-s&&ca("overflow"),s+=Si(n/d),n%=d,e.splice(n++,0,s)}var u;return String.fromCodePoint(...e)},jm=function(r){let e=[],t=(r=AE(r)).length,n=128,s=0,o=72;for(let c of r)c<128&&e.push(mf(c));let l=e.length,u=l;for(l&&e.push("-");u<t;){let c=2147483647;for(let d of r)d>=n&&d<c&&(c=d);let h=u+1;c-n>Si((2147483647-s)/h)&&ca("overflow"),s+=(c-n)*h,n=c;for(let d of r)if(d<n&&++s>2147483647&&ca("overflow"),d==n){let m=s;for(let y=36;;y+=36){let _=y<=o?1:y>=o+26?26:y-o;if(m<_)break;let E=m-_,S=36-_;e.push(mf(Vm(_+E%S,0))),m=Si(E/S)}e.push(mf(Vm(m,0))),o=Um(s,h,u==l),s=0,++u}++s,++n}return e.join("")},go={version:"2.1.0",ucs2:{decode:AE,encode:r=>String.fromCodePoint(...r)},decode:Bm,encode:jm,toASCII:function(r){return IE(r,function(e){return RE.test(e)?"xn--"+jm(e):e})},toUnicode:function(r){return IE(r,function(e){return CE.test(e)?Bm(e.slice(4).toLowerCase()):e})}},go.decode,go.encode,go.toASCII,go.toUnicode,go.ucs2,go.version});function sM(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var kE,Al,PE,$i,oM=Tn(()=>{je(),ze(),$e(),kE=function(r,e,t,n){e=e||"&",t=t||"=";var s={};if(typeof r!="string"||r.length===0)return s;var o=/\+/g;r=r.split(e);var l=1e3;n&&typeof n.maxKeys=="number"&&(l=n.maxKeys);var u=r.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var h,d,m,y,_=r[c].replace(o,"%20"),E=_.indexOf(t);E>=0?(h=_.substr(0,E),d=_.substr(E+1)):(h=_,d=""),m=decodeURIComponent(h),y=decodeURIComponent(d),sM(s,m)?Array.isArray(s[m])?s[m].push(y):s[m]=[s[m],y]:s[m]=y}return s},Al=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},PE=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(s){var o=encodeURIComponent(Al(s))+t;return Array.isArray(r[s])?r[s].map(function(l){return o+encodeURIComponent(Al(l))}).join(e):o+encodeURIComponent(Al(r[s]))}).join(e):n?encodeURIComponent(Al(n))+t+encodeURIComponent(Al(r)):""},$i={},$i.decode=$i.parse=kE,$i.encode=$i.stringify=PE,$i.decode,$i.encode,$i.parse,$i.stringify});function rv(){throw new Error("setTimeout has not been defined")}function nv(){throw new Error("clearTimeout has not been defined")}function Yx(r){if(Ss===setTimeout)return setTimeout(r,0);if((Ss===rv||!Ss)&&setTimeout)return Ss=setTimeout,setTimeout(r,0);try{return Ss(r,0)}catch{try{return Ss.call(null,r,0)}catch{return Ss.call(this||Na,r,0)}}}function aM(){Oa&&va&&(Oa=!1,va.length?Ji=va.concat(Ji):gc=-1,Ji.length&&Jx())}function Jx(){if(!Oa){var r=Yx(aM);Oa=!0;for(var e=Ji.length;e;){for(va=Ji,Ji=[];++gc<e;)va&&va[gc].run();gc=-1,e=Ji.length}va=null,Oa=!1,function(t){if(Ts===clearTimeout)return clearTimeout(t);if((Ts===nv||!Ts)&&clearTimeout)return Ts=clearTimeout,clearTimeout(t);try{Ts(t)}catch{try{return Ts.call(null,t)}catch{return Ts.call(this||Na,t)}}}(r)}}function NE(r,e){(this||Na).fun=r,(this||Na).array=e}function vs(){}var OE,Ss,Ts,Na,yr,va,Ji,Oa,gc,fr,lM=Tn(()=>{je(),ze(),$e(),Na=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,yr=OE={},function(){try{Ss=typeof setTimeout=="function"?setTimeout:rv}catch{Ss=rv}try{Ts=typeof clearTimeout=="function"?clearTimeout:nv}catch{Ts=nv}}(),Ji=[],Oa=!1,gc=-1,yr.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ji.push(new NE(r,e)),Ji.length!==1||Oa||Yx(Jx)},NE.prototype.run=function(){(this||Na).fun.apply(null,(this||Na).array)},yr.title="browser",yr.browser=!0,yr.env={},yr.argv=[],yr.version="",yr.versions={},yr.on=vs,yr.addListener=vs,yr.once=vs,yr.off=vs,yr.removeListener=vs,yr.removeAllListeners=vs,yr.emit=vs,yr.prependListener=vs,yr.prependOnceListener=vs,yr.listeners=function(r){return[]},yr.binding=function(r){throw new Error("process.binding is not supported")},yr.cwd=function(){return"/"},yr.chdir=function(r){throw new Error("process.chdir is not supported")},yr.umask=function(){return 0},fr=OE,fr.addListener,fr.argv,fr.binding,fr.browser,fr.chdir,fr.cwd,fr.emit,fr.env,fr.listeners,fr.nextTick,fr.off,fr.on,fr.once,fr.prependListener,fr.prependOnceListener,fr.removeAllListeners,fr.removeListener,fr.title,fr.umask,fr.version,fr.versions});function uM(){if(iv)return Lf;iv=!0;var r=Lf={},e,t;function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=s}catch{t=s}})();function o(S){if(e===setTimeout)return setTimeout(S,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(S,0);try{return e(S,0)}catch{try{return e.call(null,S,0)}catch{return e.call(this||da,S,0)}}}function l(S){if(t===clearTimeout)return clearTimeout(S);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(S);try{return t(S)}catch{try{return t.call(null,S)}catch{return t.call(this||da,S)}}}var u=[],c=!1,h,d=-1;function m(){!c||!h||(c=!1,h.length?u=h.concat(u):d=-1,u.length&&y())}function y(){if(!c){var S=o(m);c=!0;for(var T=u.length;T;){for(h=u,u=[];++d<T;)h&&h[d].run();d=-1,T=u.length}h=null,c=!1,l(S)}}r.nextTick=function(S){var T=new Array(arguments.length-1);if(arguments.length>1)for(var V=1;V<arguments.length;V++)T[V-1]=arguments[V];u.push(new _(S,T)),u.length===1&&!c&&o(y)};function _(S,T){(this||da).fun=S,(this||da).array=T}_.prototype.run=function(){(this||da).fun.apply(null,(this||da).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function E(){}return r.on=E,r.addListener=E,r.once=E,r.off=E,r.removeListener=E,r.removeAllListeners=E,r.emit=E,r.prependListener=E,r.prependOnceListener=E,r.listeners=function(S){return[]},r.binding=function(S){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(S){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},Lf}var Lf,iv,da,ar,Xx=Tn(()=>{je(),ze(),$e(),Lf={},iv=!1,da=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,ar=uM(),ar.platform="browser",ar.addListener,ar.argv,ar.binding,ar.browser,ar.chdir,ar.cwd,ar.emit,ar.env,ar.listeners,ar.nextTick,ar.off,ar.on,ar.once,ar.prependListener,ar.prependOnceListener,ar.removeAllListeners,ar.removeListener,ar.title,ar.umask,ar.version,ar.versions});function cM(){if(sv)return Mf;sv=!0;var r=ar;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,l){for(var u="",c=0,h=-1,d=0,m,y=0;y<=o.length;++y){if(y<o.length)m=o.charCodeAt(y);else{if(m===47)break;m=47}if(m===47){if(!(h===y-1||d===1))if(h!==y-1&&d===2){if(u.length<2||c!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var _=u.lastIndexOf("/");if(_!==u.length-1){_===-1?(u="",c=0):(u=u.slice(0,_),c=u.length-1-u.lastIndexOf("/")),h=y,d=0;continue}}else if(u.length===2||u.length===1){u="",c=0,h=y,d=0;continue}}l&&(u.length>0?u+="/..":u="..",c=2)}else u.length>0?u+="/"+o.slice(h+1,y):u=o.slice(h+1,y),c=y-h-1;h=y,d=0}else m===46&&d!==-1?++d:d=-1}return u}function n(o,l){var u=l.dir||l.root,c=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+c:u+o+c:c}var s={resolve:function(){for(var o="",l=!1,u,c=arguments.length-1;c>=-1&&!l;c--){var h;c>=0?h=arguments[c]:(u===void 0&&(u=r.cwd()),h=u),e(h),h.length!==0&&(o=h+"/"+o,l=h.charCodeAt(0)===47)}return o=t(o,!l),l?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(e(o),o.length===0)return".";var l=o.charCodeAt(0)===47,u=o.charCodeAt(o.length-1)===47;return o=t(o,!l),o.length===0&&!l&&(o="."),o.length>0&&u&&(o+="/"),l?"/"+o:o},isAbsolute:function(o){return e(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,l=0;l<arguments.length;++l){var u=arguments[l];e(u),u.length>0&&(o===void 0?o=u:o+="/"+u)}return o===void 0?".":s.normalize(o)},relative:function(o,l){if(e(o),e(l),o===l||(o=s.resolve(o),l=s.resolve(l),o===l))return"";for(var u=1;u<o.length&&o.charCodeAt(u)===47;++u);for(var c=o.length,h=c-u,d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var m=l.length,y=m-d,_=h<y?h:y,E=-1,S=0;S<=_;++S){if(S===_){if(y>_){if(l.charCodeAt(d+S)===47)return l.slice(d+S+1);if(S===0)return l.slice(d+S)}else h>_&&(o.charCodeAt(u+S)===47?E=S:S===0&&(E=0));break}var T=o.charCodeAt(u+S),V=l.charCodeAt(d+S);if(T!==V)break;T===47&&(E=S)}var I="";for(S=u+E+1;S<=c;++S)(S===c||o.charCodeAt(S)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+l.slice(d+E):(d+=E,l.charCodeAt(d)===47&&++d,l.slice(d))},_makeLong:function(o){return o},dirname:function(o){if(e(o),o.length===0)return".";for(var l=o.charCodeAt(0),u=l===47,c=-1,h=!0,d=o.length-1;d>=1;--d)if(l=o.charCodeAt(d),l===47){if(!h){c=d;break}}else h=!1;return c===-1?u?"/":".":u&&c===1?"//":o.slice(0,c)},basename:function(o,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');e(o);var u=0,c=-1,h=!0,d;if(l!==void 0&&l.length>0&&l.length<=o.length){if(l.length===o.length&&l===o)return"";var m=l.length-1,y=-1;for(d=o.length-1;d>=0;--d){var _=o.charCodeAt(d);if(_===47){if(!h){u=d+1;break}}else y===-1&&(h=!1,y=d+1),m>=0&&(_===l.charCodeAt(m)?--m===-1&&(c=d):(m=-1,c=y))}return u===c?c=y:c===-1&&(c=o.length),o.slice(u,c)}else{for(d=o.length-1;d>=0;--d)if(o.charCodeAt(d)===47){if(!h){u=d+1;break}}else c===-1&&(h=!1,c=d+1);return c===-1?"":o.slice(u,c)}},extname:function(o){e(o);for(var l=-1,u=0,c=-1,h=!0,d=0,m=o.length-1;m>=0;--m){var y=o.charCodeAt(m);if(y===47){if(!h){u=m+1;break}continue}c===-1&&(h=!1,c=m+1),y===46?l===-1?l=m:d!==1&&(d=1):l!==-1&&(d=-1)}return l===-1||c===-1||d===0||d===1&&l===c-1&&l===u+1?"":o.slice(l,c)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return n("/",o)},parse:function(o){e(o);var l={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return l;var u=o.charCodeAt(0),c=u===47,h;c?(l.root="/",h=1):h=0;for(var d=-1,m=0,y=-1,_=!0,E=o.length-1,S=0;E>=h;--E){if(u=o.charCodeAt(E),u===47){if(!_){m=E+1;break}continue}y===-1&&(_=!1,y=E+1),u===46?d===-1?d=E:S!==1&&(S=1):d!==-1&&(S=-1)}return d===-1||y===-1||S===0||S===1&&d===y-1&&d===m+1?y!==-1&&(m===0&&c?l.base=l.name=o.slice(1,y):l.base=l.name=o.slice(m,y)):(m===0&&c?(l.name=o.slice(1,d),l.base=o.slice(1,y)):(l.name=o.slice(m,d),l.base=o.slice(m,y)),l.ext=o.slice(d,y)),m>0?l.dir=o.slice(0,m-1):c&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,Mf=s,Mf}var Mf,sv,ov,hM=Tn(()=>{je(),ze(),$e(),Xx(),Mf={},sv=!1,ov=cM()}),Zx={};pu(Zx,{URL:()=>yI,Url:()=>fI,default:()=>Ht,fileURLToPath:()=>eI,format:()=>dI,parse:()=>gI,pathToFileURL:()=>tI,resolve:()=>pI,resolveObject:()=>mI});function oi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Zu(r,e,t){if(r&&Ti.isObject(r)&&r instanceof oi)return r;var n=new oi;return n.parse(r,e,t),n}function fM(){if(av)return Ff;av=!0;var r=fr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,l){for(var u="",c=0,h=-1,d=0,m,y=0;y<=o.length;++y){if(y<o.length)m=o.charCodeAt(y);else{if(m===47)break;m=47}if(m===47){if(!(h===y-1||d===1))if(h!==y-1&&d===2){if(u.length<2||c!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var _=u.lastIndexOf("/");if(_!==u.length-1){_===-1?(u="",c=0):(u=u.slice(0,_),c=u.length-1-u.lastIndexOf("/")),h=y,d=0;continue}}else if(u.length===2||u.length===1){u="",c=0,h=y,d=0;continue}}l&&(u.length>0?u+="/..":u="..",c=2)}else u.length>0?u+="/"+o.slice(h+1,y):u=o.slice(h+1,y),c=y-h-1;h=y,d=0}else m===46&&d!==-1?++d:d=-1}return u}function n(o,l){var u=l.dir||l.root,c=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+c:u+o+c:c}var s={resolve:function(){for(var o="",l=!1,u,c=arguments.length-1;c>=-1&&!l;c--){var h;c>=0?h=arguments[c]:(u===void 0&&(u=r.cwd()),h=u),e(h),h.length!==0&&(o=h+"/"+o,l=h.charCodeAt(0)===47)}return o=t(o,!l),l?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(e(o),o.length===0)return".";var l=o.charCodeAt(0)===47,u=o.charCodeAt(o.length-1)===47;return o=t(o,!l),o.length===0&&!l&&(o="."),o.length>0&&u&&(o+="/"),l?"/"+o:o},isAbsolute:function(o){return e(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,l=0;l<arguments.length;++l){var u=arguments[l];e(u),u.length>0&&(o===void 0?o=u:o+="/"+u)}return o===void 0?".":s.normalize(o)},relative:function(o,l){if(e(o),e(l),o===l||(o=s.resolve(o),l=s.resolve(l),o===l))return"";for(var u=1;u<o.length&&o.charCodeAt(u)===47;++u);for(var c=o.length,h=c-u,d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var m=l.length,y=m-d,_=h<y?h:y,E=-1,S=0;S<=_;++S){if(S===_){if(y>_){if(l.charCodeAt(d+S)===47)return l.slice(d+S+1);if(S===0)return l.slice(d+S)}else h>_&&(o.charCodeAt(u+S)===47?E=S:S===0&&(E=0));break}var T=o.charCodeAt(u+S),V=l.charCodeAt(d+S);if(T!==V)break;T===47&&(E=S)}var I="";for(S=u+E+1;S<=c;++S)(S===c||o.charCodeAt(S)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+l.slice(d+E):(d+=E,l.charCodeAt(d)===47&&++d,l.slice(d))},_makeLong:function(o){return o},dirname:function(o){if(e(o),o.length===0)return".";for(var l=o.charCodeAt(0),u=l===47,c=-1,h=!0,d=o.length-1;d>=1;--d)if(l=o.charCodeAt(d),l===47){if(!h){c=d;break}}else h=!1;return c===-1?u?"/":".":u&&c===1?"//":o.slice(0,c)},basename:function(o,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');e(o);var u=0,c=-1,h=!0,d;if(l!==void 0&&l.length>0&&l.length<=o.length){if(l.length===o.length&&l===o)return"";var m=l.length-1,y=-1;for(d=o.length-1;d>=0;--d){var _=o.charCodeAt(d);if(_===47){if(!h){u=d+1;break}}else y===-1&&(h=!1,y=d+1),m>=0&&(_===l.charCodeAt(m)?--m===-1&&(c=d):(m=-1,c=y))}return u===c?c=y:c===-1&&(c=o.length),o.slice(u,c)}else{for(d=o.length-1;d>=0;--d)if(o.charCodeAt(d)===47){if(!h){u=d+1;break}}else c===-1&&(h=!1,c=d+1);return c===-1?"":o.slice(u,c)}},extname:function(o){e(o);for(var l=-1,u=0,c=-1,h=!0,d=0,m=o.length-1;m>=0;--m){var y=o.charCodeAt(m);if(y===47){if(!h){u=m+1;break}continue}c===-1&&(h=!1,c=m+1),y===46?l===-1?l=m:d!==1&&(d=1):l!==-1&&(d=-1)}return l===-1||c===-1||d===0||d===1&&l===c-1&&l===u+1?"":o.slice(l,c)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return n("/",o)},parse:function(o){e(o);var l={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return l;var u=o.charCodeAt(0),c=u===47,h;c?(l.root="/",h=1):h=0;for(var d=-1,m=0,y=-1,_=!0,E=o.length-1,S=0;E>=h;--E){if(u=o.charCodeAt(E),u===47){if(!_){m=E+1;break}continue}y===-1&&(_=!1,y=E+1),u===46?d===-1?d=E:S!==1&&(S=1):d!==-1&&(S=-1)}return d===-1||y===-1||S===0||S===1&&d===y-1&&d===m+1?y!==-1&&(m===0&&c?l.base=l.name=o.slice(1,y):l.base=l.name=o.slice(m,y)):(m===0&&c?(l.name=o.slice(1,d),l.base=o.slice(1,y)):(l.name=o.slice(m,d),l.base=o.slice(m,y)),l.ext=o.slice(d,y)),m>0?l.dir=o.slice(0,m-1):c&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,Ff=s,Ff}function dM(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return cd?pM(r):mM(r)}function pM(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let s=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&s===102||t[n+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(oI,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,s=t[2];if(n<iI||n>sI||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function mM(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function gM(r){let e=lv.resolve(r),t=r.charCodeAt(r.length-1);(t===nI||cd&&t===rI)&&e[e.length-1]!==lv.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(aI,"%25")),!cd&&e.includes("\\")&&(e=e.replace(lI,"%5C")),e.includes(`
`)&&(e=e.replace(uI,"%0A")),e.includes("\r")&&(e=e.replace(cI,"%0D")),e.includes("	")&&(e=e.replace(hI,"%09")),n.pathname=e,n}function eI(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return hd?yM(r):vM(r)}function yM(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let s=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&s===102||t[n+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(EI,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,s=t[2];if(n<wI||n>bI||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function vM(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function tI(r){let e=ov.resolve(r),t=r.charCodeAt(r.length-1);(t===_I||hd&&t===vI)&&e[e.length-1]!==ov.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(SI,"%25")),!hd&&e.includes("\\")&&(e=e.replace(TI,"%5C")),e.includes(`
`)&&(e=e.replace(xI,"%0A")),e.includes("\r")&&(e=e.replace(II,"%0D")),e.includes("	")&&(e=e.replace(AI,"%09")),n.pathname=e,n}var Ht,DE,Ti,LE,ME,FE,VE,gf,$m,zm,qm,UE,BE,yf,ha,vf,Ff,av,lv,jE,rI,nI,iI,sI,cd,oI,aI,lI,uI,cI,hI,$E,fI,dI,pI,mI,gI,yI,vI,_I,wI,bI,hd,EI,SI,TI,xI,II,AI,_M=Tn(()=>{je(),ze(),$e(),iM(),oM(),lM(),hM(),Xx(),Ht={},DE=go,Ti={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Ht.parse=Zu,Ht.resolve=function(r,e){return Zu(r,!1,!0).resolve(e)},Ht.resolveObject=function(r,e){return r?Zu(r,!1,!0).resolveObject(e):e},Ht.format=function(r){return Ti.isString(r)&&(r=Zu(r)),r instanceof oi?r.format():oi.prototype.format.call(r)},Ht.Url=oi,LE=/^([a-z0-9.+-]+:)/i,ME=/:[0-9]*$/,FE=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,VE=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),gf=["'"].concat(VE),$m=["%","/","?",";","#"].concat(gf),zm=["/","?","#"],qm=/^[+a-z0-9A-Z_-]{0,63}$/,UE=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,BE={javascript:!0,"javascript:":!0},yf={javascript:!0,"javascript:":!0},ha={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vf=$i,oi.prototype.parse=function(r,e,t){if(!Ti.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),s=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(s);o[0]=o[0].replace(/\\/g,"/");var l=r=o.join(s);if(l=l.trim(),!t&&r.split("#").length===1){var u=FE.exec(l);if(u)return this.path=l,this.href=l,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?vf.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=LE.exec(l);if(c){var h=(c=c[0]).toLowerCase();this.protocol=h,l=l.substr(c.length)}if(t||c||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=l.substr(0,2)==="//";!d||c&&yf[c]||(l=l.substr(2),this.slashes=!0)}if(!yf[c]&&(d||c&&!ha[c])){for(var m,y,_=-1,E=0;E<zm.length;E++)(S=l.indexOf(zm[E]))!==-1&&(_===-1||S<_)&&(_=S);for((y=_===-1?l.lastIndexOf("@"):l.lastIndexOf("@",_))!==-1&&(m=l.slice(0,y),l=l.slice(y+1),this.auth=decodeURIComponent(m)),_=-1,E=0;E<$m.length;E++){var S;(S=l.indexOf($m[E]))!==-1&&(_===-1||S<_)&&(_=S)}_===-1&&(_=l.length),this.host=l.slice(0,_),l=l.slice(_),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var V=this.hostname.split(/\./),I=(E=0,V.length);E<I;E++){var k=V[E];if(k&&!k.match(qm)){for(var W="",H=0,j=k.length;H<j;H++)k.charCodeAt(H)>127?W+="x":W+=k[H];if(!W.match(qm)){var P=V.slice(0,E),R=V.slice(E+1),M=k.match(UE);M&&(P.push(M[1]),R.unshift(M[2])),R.length&&(l="/"+R.join(".")+l),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=DE.toASCII(this.hostname));var F=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+F,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!BE[h])for(E=0,I=gf.length;E<I;E++){var N=gf[E];if(l.indexOf(N)!==-1){var L=encodeURIComponent(N);L===N&&(L=escape(N)),l=l.split(N).join(L)}}var ve=l.indexOf("#");ve!==-1&&(this.hash=l.substr(ve),l=l.slice(0,ve));var ae=l.indexOf("?");if(ae!==-1?(this.search=l.substr(ae),this.query=l.substr(ae+1),e&&(this.query=vf.parse(this.query)),l=l.slice(0,ae)):e&&(this.search="",this.query={}),l&&(this.pathname=l),ha[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var De=this.search||"";this.path=F+De}return this.href=this.format(),this},oi.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&Ti.isObject(this.query)&&Object.keys(this.query).length&&(o=vf.stringify(this.query));var l=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ha[e])&&s!==!1?(s="//"+(s||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),l&&l.charAt(0)!=="?"&&(l="?"+l),e+s+(t=t.replace(/[?#]/g,function(u){return encodeURIComponent(u)}))+(l=l.replace("#","%23"))+n},oi.prototype.resolve=function(r){return this.resolveObject(Zu(r,!1,!0)).format()},oi.prototype.resolveObject=function(r){if(Ti.isString(r)){var e=new oi;e.parse(r,!1,!0),r=e}for(var t=new oi,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var l=Object.keys(r),u=0;u<l.length;u++){var c=l[u];c!=="protocol"&&(t[c]=r[c])}return ha[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!ha[r.protocol]){for(var h=Object.keys(r),d=0;d<h.length;d++){var m=h[d];t[m]=r[m]}return t.href=t.format(),t}if(t.protocol=r.protocol,r.host||yf[r.protocol])t.pathname=r.pathname;else{for(var y=(r.pathname||"").split("/");y.length&&!(r.host=y.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var _=t.pathname||"",E=t.search||"";t.path=_+E}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var S=t.pathname&&t.pathname.charAt(0)==="/",T=r.host||r.pathname&&r.pathname.charAt(0)==="/",V=T||S||t.host&&r.pathname,I=V,k=t.pathname&&t.pathname.split("/")||[],W=(y=r.pathname&&r.pathname.split("/")||[],t.protocol&&!ha[t.protocol]);if(W&&(t.hostname="",t.port=null,t.host&&(k[0]===""?k[0]=t.host:k.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host=null),V=V&&(y[0]===""||k[0]==="")),T)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,k=y;else if(y.length)k||(k=[]),k.pop(),k=k.concat(y),t.search=r.search,t.query=r.query;else if(!Ti.isNullOrUndefined(r.search))return W&&(t.hostname=t.host=k.shift(),(M=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=M.shift(),t.host=t.hostname=M.shift())),t.search=r.search,t.query=r.query,Ti.isNull(t.pathname)&&Ti.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!k.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var H=k.slice(-1)[0],j=(t.host||r.host||k.length>1)&&(H==="."||H==="..")||H==="",P=0,R=k.length;R>=0;R--)(H=k[R])==="."?k.splice(R,1):H===".."?(k.splice(R,1),P++):P&&(k.splice(R,1),P--);if(!V&&!I)for(;P--;P)k.unshift("..");!V||k[0]===""||k[0]&&k[0].charAt(0)==="/"||k.unshift(""),j&&k.join("/").substr(-1)!=="/"&&k.push("");var M,F=k[0]===""||k[0]&&k[0].charAt(0)==="/";return W&&(t.hostname=t.host=F?"":k.length?k.shift():"",(M=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=M.shift(),t.host=t.hostname=M.shift())),(V=V||t.host&&k.length)&&!F&&k.unshift(""),k.length?t.pathname=k.join("/"):(t.pathname=null,t.path=null),Ti.isNull(t.pathname)&&Ti.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t},oi.prototype.parseHost=function(){var r=this.host,e=ME.exec(r);e&&((e=e[0])!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)},Ht.Url,Ht.format,Ht.resolve,Ht.resolveObject,Ff={},av=!1,lv=fM(),jE=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ht.URL=typeof URL<"u"?URL:null,Ht.pathToFileURL=gM,Ht.fileURLToPath=dM,Ht.Url,Ht.format,Ht.resolve,Ht.resolveObject,Ht.URL,rI=92,nI=47,iI=97,sI=122,cd=jE==="win32",oI=/\//g,aI=/%/g,lI=/\\/g,uI=/\n/g,cI=/\r/g,hI=/\t/g,$E=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ht.URL=typeof URL<"u"?URL:null,Ht.pathToFileURL=tI,Ht.fileURLToPath=eI,fI=Ht.Url,dI=Ht.format,pI=Ht.resolve,mI=Ht.resolveObject,gI=Ht.parse,yI=Ht.URL,vI=92,_I=47,wI=97,bI=122,hd=$E==="win32",EI=/\//g,SI=/%/g,TI=/\\/g,xI=/\n/g,II=/\r/g,AI=/\t/g}),wM=Ke((r,e)=>{je(),ze(),$e(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),u0=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=n;var e=Ha(),t=(Qr(),Kt(Hr));function n(o,l){let u=new Array(o.length);for(let c=0;c<o.length;c++)typeof o[c].chunk=="string"?u[c]=t.Buffer.from(o[c].chunk,"utf8"):u[c]=o[c].chunk;this._write(t.Buffer.concat(u),"binary",l)}var s=class extends e.Duplex{constructor(o,l,u){super({objectMode:!0}),this.proxy=l,this.socket=u,this.writeQueue=[],o.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",c=>{!this.destroyed&&this.readable&&this.push(c)})}_read(o){this.proxy.read(o)}_write(o,l,u){this.isSocketOpen?this.writeToProxy(o,l,u):this.writeQueue.push({chunk:o,encoding:l,cb:u})}_final(o){this.writeQueue=[],this.proxy.end(o)}_destroy(o,l){this.writeQueue=[],this.proxy.destroy(),l(o)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(o,l,u){this.proxy.write(o,l)===!1?this.proxy.once("drain",u):u()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:o,encoding:l,cb:u}=this.writeQueue.shift();this.writeToProxy(o,l,u)}}};r.BufferedDuplex=s}),_f=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var t=(Qr(),Kt(Hr)),n=e(wM()),s=e(Ls()),o=Ha(),l=e($d()),u=u0(),c=(0,s.default)("mqttjs:ws"),h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function d(V,I){let k=`${V.protocol}://${V.hostname}:${V.port}${V.path}`;return typeof V.transformWsUrl=="function"&&(k=V.transformWsUrl(k,V,I)),k}function m(V){let I=V;return V.port||(V.protocol==="wss"?I.port=443:I.port=80),V.path||(I.path="/"),V.wsOptions||(I.wsOptions={}),!l.default&&!V.forceNativeWebSocket&&V.protocol==="wss"&&h.forEach(k=>{Object.prototype.hasOwnProperty.call(V,k)&&!Object.prototype.hasOwnProperty.call(V.wsOptions,k)&&(I.wsOptions[k]=V[k])}),I}function y(V){let I=m(V);if(I.hostname||(I.hostname=I.host),!I.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let k=new URL(document.URL);I.hostname=k.hostname,I.port||(I.port=Number(k.port))}return I.objectMode===void 0&&(I.objectMode=!(I.binary===!0||I.binary===void 0)),I}function _(V,I,k){c("createWebSocket"),c(`protocol: ${k.protocolId} ${k.protocolVersion}`);let W=k.protocolId==="MQIsdp"&&k.protocolVersion===3?"mqttv3.1":"mqtt";c(`creating new Websocket for url: ${I} and protocol: ${W}`);let H;return k.createWebsocket?H=k.createWebsocket(I,[W],k):H=new n.default(I,[W],k.wsOptions),H}function E(V,I){let k=I.protocolId==="MQIsdp"&&I.protocolVersion===3?"mqttv3.1":"mqtt",W=d(I,V),H;return I.createWebsocket?H=I.createWebsocket(W,[k],I):H=new WebSocket(W,[k]),H.binaryType="arraybuffer",H}var S=(V,I)=>{c("streamBuilder");let k=m(I);k.hostname=k.hostname||k.host||"localhost";let W=d(k,V),H=_(V,W,k),j=n.default.createWebSocketStream(H,k.wsOptions);return j.url=W,H.on("close",()=>{j.destroy()}),j};r.streamBuilder=S;var T=(V,I)=>{c("browserStreamBuilder");let k,W=y(I).browserBufferSize||1024*512,H=I.browserBufferTimeout||1e3,j=!I.objectMode,P=E(V,I),R=F(I,ae,De);I.objectMode||(R._writev=u.writev.bind(R)),R.on("close",()=>{P.close()});let M=typeof P.addEventListener<"u";P.readyState===P.OPEN?(k=R,k.socket=P):(k=new u.BufferedDuplex(I,R,P),M?P.addEventListener("open",$):P.onopen=$),M?(P.addEventListener("close",N),P.addEventListener("error",L),P.addEventListener("message",ve)):(P.onclose=N,P.onerror=L,P.onmessage=ve);function F(Re,fe,Ne){let ie=new o.Transform({objectMode:Re.objectMode});return ie._write=fe,ie._flush=Ne,ie}function $(){c("WebSocket onOpen"),k instanceof u.BufferedDuplex&&k.socketReady()}function N(Re){c("WebSocket onClose",Re),k.end(),k.destroy()}function L(Re){c("WebSocket onError",Re);let fe=new Error("WebSocket error");fe.event=Re,k.destroy(fe)}async function ve(Re){if(!R||R.destroyed||!R.readable)return;let{data:fe}=Re;fe instanceof ArrayBuffer?fe=t.Buffer.from(fe):fe instanceof Blob?fe=t.Buffer.from(await new Response(fe).arrayBuffer()):fe=t.Buffer.from(fe,"utf8"),R.push(fe)}function ae(Re,fe,Ne){if(P.bufferedAmount>W){setTimeout(ae,H,Re,fe,Ne);return}j&&typeof Re=="string"&&(Re=t.Buffer.from(Re,"utf8"));try{P.send(Re)}catch(ie){return Ne(ie)}Ne()}function De(Re){P.close(),Re()}return k};r.browserStreamBuilder=T}),c0={};pu(c0,{Server:()=>lr,Socket:()=>lr,Stream:()=>lr,_createServerHandle:()=>lr,_normalizeArgs:()=>lr,_setSimultaneousAccepts:()=>lr,connect:()=>lr,createConnection:()=>lr,createServer:()=>lr,default:()=>CI,isIP:()=>lr,isIPv4:()=>lr,isIPv6:()=>lr});function lr(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var CI,RI=Tn(()=>{je(),ze(),$e(),CI={_createServerHandle:lr,_normalizeArgs:lr,_setSimultaneousAccepts:lr,connect:lr,createConnection:lr,createServer:lr,isIP:lr,isIPv4:lr,isIPv6:lr,Server:lr,Socket:lr,Stream:lr}}),zE=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,"__esModule",{value:!0});var t=e((RI(),Kt(c0))),n=e(Ls()),s=(0,n.default)("mqttjs:tcp"),o=(l,u)=>{u.port=u.port||1883,u.hostname=u.hostname||u.host||"localhost";let{port:c,path:h}=u,d=u.hostname;return s("port %d and host %s",c,d),t.default.createConnection({port:c,host:d,path:h})};r.default=o}),kI={};pu(kI,{default:()=>PI});var PI,bM=Tn(()=>{je(),ze(),$e(),PI={}}),qE=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0});var t=e((bM(),Kt(kI))),n=e((RI(),Kt(c0))),s=e(Ls()),o=(0,s.default)("mqttjs:tls"),l=(u,c)=>{c.port=c.port||8883,c.host=c.hostname||c.host||"localhost",n.default.isIP(c.host)===0&&(c.servername=c.host),c.rejectUnauthorized=c.rejectUnauthorized!==!1,delete c.path,o("port %d host %s rejectUnauthorized %b",c.port,c.host,c.rejectUnauthorized);let h=t.default.connect(c);h.on("secureConnect",()=>{c.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",d)});function d(m){c.rejectUnauthorized&&u.emit("error",m),h.end()}return h.on("error",d),h};r.default=l}),WE=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=(Qr(),Kt(Hr)),t=Ha(),n=u0(),s,o,l;function u(){let y=new t.Transform;return y._write=(_,E,S)=>{s.send({data:_.buffer,success(){S()},fail(T){S(new Error(T))}})},y._flush=_=>{s.close({success(){_()}})},y}function c(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function h(y,_){let E=y.protocol==="wxs"?"wss":"ws",S=`${E}://${y.hostname}${y.path}`;return y.port&&y.port!==80&&y.port!==443&&(S=`${E}://${y.hostname}:${y.port}${y.path}`),typeof y.transformWsUrl=="function"&&(S=y.transformWsUrl(S,y,_)),S}function d(){s.onOpen(()=>{l.socketReady()}),s.onMessage(y=>{let{data:_}=y;_ instanceof ArrayBuffer?_=e.Buffer.from(_):_=e.Buffer.from(_,"utf8"),o.push(_)}),s.onClose(()=>{l.emit("close"),l.end(),l.destroy()}),s.onError(y=>{let _=new Error(y.errMsg);l.destroy(_)})}var m=(y,_)=>{if(_.hostname=_.hostname||_.host,!_.hostname)throw new Error("Could not determine host. Specify host manually.");let E=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";c(_);let S=h(_,y);s=wx.connectSocket({url:S,protocols:[E]}),o=u(),l=new n.BufferedDuplex(_,o,s),l._destroy=(V,I)=>{s.close({success(){I&&I(V)}})};let T=l.destroy;return l.destroy=(V,I)=>(l.destroy=T,setTimeout(()=>{s.close({fail(){l._destroy(V,I)}})},0),l),d(),l};r.default=m}),HE=Ke(r=>{je(),ze(),$e(),Object.defineProperty(r,"__esModule",{value:!0});var e=(Qr(),Kt(Hr)),t=Ha(),n=u0(),s,o,l,u=!1;function c(){let _=new t.Transform;return _._write=(E,S,T)=>{s.sendSocketMessage({data:E.buffer,success(){T()},fail(){T(new Error)}})},_._flush=E=>{s.closeSocket({success(){E()}})},_}function h(_){_.hostname||(_.hostname="localhost"),_.path||(_.path="/"),_.wsOptions||(_.wsOptions={})}function d(_,E){let S=_.protocol==="alis"?"wss":"ws",T=`${S}://${_.hostname}${_.path}`;return _.port&&_.port!==80&&_.port!==443&&(T=`${S}://${_.hostname}:${_.port}${_.path}`),typeof _.transformWsUrl=="function"&&(T=_.transformWsUrl(T,_,E)),T}function m(){u||(u=!0,s.onSocketOpen(()=>{l.socketReady()}),s.onSocketMessage(_=>{if(typeof _.data=="string"){let E=e.Buffer.from(_.data,"base64");o.push(E)}else{let E=new FileReader;E.addEventListener("load",()=>{let S=E.result;S instanceof ArrayBuffer?S=e.Buffer.from(S):S=e.Buffer.from(S,"utf8"),o.push(S)}),E.readAsArrayBuffer(_.data)}}),s.onSocketClose(()=>{l.end(),l.destroy()}),s.onSocketError(_=>{l.destroy(_)}))}var y=(_,E)=>{if(E.hostname=E.hostname||E.host,!E.hostname)throw new Error("Could not determine host. Specify host manually.");let S=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt";h(E);let T=d(E,_);return s=E.my,s.connectSocket({url:T,protocols:S}),o=c(),l=new n.BufferedDuplex(E,o,s),m(),l};r.default=y}),EM=Ke(r=>{je(),ze(),$e();var e=r&&r.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=d;var t=e(Ls()),n=e((_M(),Kt(Zx))),s=e(ev()),o=e($d());typeof(jt==null?void 0:jt.nextTick)!="function"&&(jt.nextTick=setImmediate);var l=(0,t.default)("mqttjs"),u=null;function c(m){let y;m.auth&&(y=m.auth.match(/^(.+):(.+)$/),y?(m.username=y[1],m.password=y[2]):m.username=m.auth)}function h(m,y){var _,E,S;if(l("connecting to an MQTT broker..."),typeof m=="object"&&!y&&(y=m,m=""),y=y||{},m&&typeof m=="string"){let I=n.default.parse(m,!0),k={};if(I.port!=null&&(k.port=Number(I.port)),k.host=I.hostname,k.query=I.query,k.auth=I.auth,k.protocol=I.protocol,k.path=I.path,y=Object.assign(Object.assign({},k),y),!y.protocol)throw new Error("Missing protocol");y.protocol=y.protocol.replace(/:$/,"")}if(y.unixSocket=y.unixSocket||((_=y.protocol)===null||_===void 0?void 0:_.includes("+unix")),y.unixSocket?y.protocol=y.protocol.replace("+unix",""):!(!((E=y.protocol)===null||E===void 0)&&E.startsWith("ws"))&&!(!((S=y.protocol)===null||S===void 0)&&S.startsWith("wx"))&&delete y.path,c(y),y.query&&typeof y.query.clientId=="string"&&(y.clientId=y.query.clientId),y.cert&&y.key)if(y.protocol){if(["mqtts","wss","wxs","alis"].indexOf(y.protocol)===-1)switch(y.protocol){case"mqtt":y.protocol="mqtts";break;case"ws":y.protocol="wss";break;case"wx":y.protocol="wxs";break;case"ali":y.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${y.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(u||(u={},!o.default&&!y.forceNativeWebSocket?(u.ws=_f().streamBuilder,u.wss=_f().streamBuilder,u.mqtt=zE().default,u.tcp=zE().default,u.ssl=qE().default,u.tls=u.ssl,u.mqtts=qE().default):(u.ws=_f().browserStreamBuilder,u.wss=_f().browserStreamBuilder,u.wx=WE().default,u.wxs=WE().default,u.ali=HE().default,u.alis=HE().default)),!u[y.protocol]){let I=["mqtts","wss"].indexOf(y.protocol)!==-1;y.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((k,W)=>I&&W%2===0?!1:typeof u[k]=="function")[0]}if(y.clean===!1&&!y.clientId)throw new Error("Missing clientId for unclean clients");y.protocol&&(y.defaultProtocol=y.protocol);function T(I){return y.servers&&((!I._reconnectCount||I._reconnectCount===y.servers.length)&&(I._reconnectCount=0),y.host=y.servers[I._reconnectCount].host,y.port=y.servers[I._reconnectCount].port,y.protocol=y.servers[I._reconnectCount].protocol?y.servers[I._reconnectCount].protocol:y.defaultProtocol,y.hostname=y.host,I._reconnectCount++),l("calling streambuilder for",y.protocol),u[y.protocol](I,y)}let V=new s.default(T,y);return V.on("error",()=>{}),V}function d(m,y,_=!0){return new Promise((E,S)=>{let T=h(m,y),V={connect:k=>{I(),E(T)},end:()=>{I(),E(T)},error:k=>{I(),T.end(),S(k)}};_===!1&&(V.close=()=>{V.error(new Error("Couldn't connect to server"))});function I(){Object.keys(V).forEach(k=>{T.off(k,V[k])})}Object.keys(V).forEach(k=>{T.on(k,V[k])})})}r.default=h}),QE=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(_,E,S,T){T===void 0&&(T=S);var V=Object.getOwnPropertyDescriptor(E,S);(!V||("get"in V?!E.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(_,T,V)}:function(_,E,S,T){T===void 0&&(T=S),_[T]=E[S]}),t=r&&r.__setModuleDefault||(Object.create?function(_,E){Object.defineProperty(_,"default",{enumerable:!0,value:E})}:function(_,E){_.default=E}),n=r&&r.__importStar||function(){var _=function(E){return _=Object.getOwnPropertyNames||function(S){var T=[];for(var V in S)Object.prototype.hasOwnProperty.call(S,V)&&(T[T.length]=V);return T},_(E)};return function(E){if(E&&E.__esModule)return E;var S={};if(E!=null)for(var T=_(E),V=0;V<T.length;V++)T[V]!=="default"&&e(S,E,T[V]);return t(S,E),S}}(),s=r&&r.__exportStar||function(_,E){for(var S in _)S!=="default"&&!Object.prototype.hasOwnProperty.call(E,S)&&e(E,_,S)},o=r&&r.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var l=o(ev());r.MqttClient=l.default;var u=o(kx());r.DefaultMessageIdProvider=u.default;var c=o(nM());r.UniqueMessageIdProvider=c.default;var h=o(Px());r.Store=h.default;var d=n(EM());r.connect=d.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return d.connectAsync}});var m=o(Qx());r.KeepaliveManager=m.default,r.Client=l.default,s(ev(),r),s(gu(),r);var y=jd();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return y.ReasonCodes}})}),SM=Ke(r=>{je(),ze(),$e();var e=r&&r.__createBinding||(Object.create?function(l,u,c,h){h===void 0&&(h=c);var d=Object.getOwnPropertyDescriptor(u,c);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(l,h,d)}:function(l,u,c,h){h===void 0&&(h=c),l[h]=u[c]}),t=r&&r.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),n=r&&r.__importStar||function(){var l=function(u){return l=Object.getOwnPropertyNames||function(c){var h=[];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(h[h.length]=d);return h},l(u)};return function(u){if(u&&u.__esModule)return u;var c={};if(u!=null)for(var h=l(u),d=0;d<h.length;d++)h[d]!=="default"&&e(c,u,h[d]);return t(c,u),c}}(),s=r&&r.__exportStar||function(l,u){for(var c in l)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&e(u,l,c)};Object.defineProperty(r,"__esModule",{value:!0});var o=n(QE());r.default=o,s(QE(),r)});const TM=SM();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/function xM(){const[r,e]=Pe.useState([]),[t,n]=Pe.useState(""),s=Pe.useRef(null),o=Pe.useRef("client-"+Math.random().toString(16).substr(2,8)),l=Pe.useRef(new Set),u=Pe.useRef(null),c="r2s",h="wss://devapi.uniscore.vn:443/mqtt",[d,m]=Pe.useState(null),[y,_]=Pe.useState(!1);Pe.useEffect(()=>{const S=JSON.parse(localStorage.getItem("user")||"null");S&&(m(S),S.roles&&S.roles[0]==="ADMIN"&&_(!0))},[]),Pe.useEffect(()=>{if(!d)return;const S=Y4(pE(vE,"messages"),T=>{const I=T.docs.map(k=>{const W=k.data();return{text:W.text,sender:W.sender,isMine:W.sender===d.email,beAdmin:W.beAdmin,timestamp:W.timestamp.toDate()}}).sort((k,W)=>k.timestamp.getTime()-W.timestamp.getTime());e(I)});return()=>S()},[d]),Pe.useEffect(()=>{if(!d||s.current)return;const S=TM.connect(h,{clientId:o.current,username:"football",password:"football123"});return s.current=S,S.on("connect",()=>{console.log("Connected to MQTT broker"),S.subscribe(c,T=>{T&&console.error("Subscribe error:",T)})}),S.on("message",async(T,V)=>{const I=V.toString(),[k,W,H]=I.split("::");var j;if(H==="true"?j=!0:j=!1,d!=null&&d.email){const P=k===d.email;(!P||!l.current.has(W))&&e(R=>[...R,{text:W,isMine:P,beAdmin:j,sender:k,timestamp:new Date}])}else console.log("User is not loaded yet")}),()=>{var T;(T=s.current)!=null&&T.connected&&(s.current.end(),s.current=null)}},[d]),Pe.useEffect(()=>{u.current&&setTimeout(()=>{var S;(S=u.current)==null||S.scrollIntoView({behavior:"smooth",block:"end"})},100)},[r]);const E=async()=>{var T;if((T=s.current)!=null&&T.connected&&t.trim()){var S;y?S=(d==null?void 0:d.email)+"::"+t+"::true":S=(d==null?void 0:d.email)+"::"+t+"::false",s.current.publish(c,S,{qos:0,retain:!1}),e(V=>[...V,{text:t,isMine:!0,beAdmin:y,sender:(d==null?void 0:d.email)||"unknown",timestamp:new Date}]),l.current.add(t),n(""),await G4(pE(vE,"messages"),{sender:d==null?void 0:d.email,text:t,beAdmin:y,timestamp:new Date})}};return Se("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",minHeight:"90vh"},children:[B("h1",{className:"text-[36px] font-semibold mb-4 mt-4",children:"Community Chat"}),B("div",{style:{width:"100%",backgroundColor:"white",boxShadow:"0px 2px 10px rgba(0, 0, 0, 0.1)",borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",gap:"8px",overflowY:"auto",height:"350px"},children:Se("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[r.map((S,T)=>Se("div",{style:{display:"flex",flexDirection:"column",alignItems:S.isMine?"flex-end":"flex-start",maxWidth:"100%"},className:`px-4 ${S.isMine?"pl-28 sm:pl-60 md:pl-80 lg:pl-[30rem] xl:pl-[40rem] pr-0":"pl-0 pr-28 sm:pr-60 md:pr-80 lg:pr-[30rem] xl:pr-[40rem]"}`,children:[!S.isMine&&S.beAdmin&&B("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px",marginTop:"4px",color:"black"},children:"ADMIN"}),!S.isMine&&!S.beAdmin&&B("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px",marginTop:"4px",color:"black"},children:S.sender}),B("div",{style:{backgroundColor:S.isMine?"#3b82f6":"#f472b6",color:"white",padding:"10px",borderRadius:"8px",maxWidth:"100%"},children:S.text})]},T)),B("div",{ref:u})]})}),Se("div",{style:{width:"100%",marginTop:"16px"},children:[B("textarea",{value:t,onChange:S=>n(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),E())},placeholder:"Enter message...",rows:1,className:"w-full resize-none border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{overflow:"hidden"},ref:S=>{S&&(S.style.height="auto",S.style.height=S.scrollHeight+"px")}}),B("div",{style:{textAlign:"center",marginTop:"0px"},children:B("button",{onClick:E,style:{backgroundColor:"#3b82f6",color:"white",padding:"8px 16px",borderRadius:"4px",marginTop:"12px",cursor:"pointer",border:"none"},children:"Send"})})]})]})}var Kc=r=>r.type==="checkbox",_a=r=>r instanceof Date,En=r=>r==null;const NI=r=>typeof r=="object";var Sr=r=>!En(r)&&!Array.isArray(r)&&NI(r)&&!_a(r),IM=r=>Sr(r)&&r.target?Kc(r.target)?r.target.checked:r.target.value:r,AM=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,CM=(r,e)=>r.has(AM(e)),RM=r=>{const e=r.constructor&&r.constructor.prototype;return Sr(e)&&e.hasOwnProperty("isPrototypeOf")},h0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function si(r){let e;const t=Array.isArray(r),n=typeof FileList<"u"?r instanceof FileList:!1;if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(h0&&(r instanceof Blob||n))&&(t||Sr(r)))if(e=t?[]:{},!t&&!RM(r))e=r;else for(const s in r)r.hasOwnProperty(s)&&(e[s]=si(r[s]));else return r;return e}var zd=r=>Array.isArray(r)?r.filter(Boolean):[],Cr=r=>r===void 0,ct=(r,e,t)=>{if(!e||!Sr(r))return t;const n=zd(e.split(/[,[\].]+?/)).reduce((s,o)=>En(s)?s:s[o],r);return Cr(n)||n===r?Cr(r[e])?t:r[e]:n},qi=r=>typeof r=="boolean",f0=r=>/^\w*$/.test(r),OI=r=>zd(r.replace(/["|']|\]/g,"").split(/\.|\[/)),rr=(r,e,t)=>{let n=-1;const s=f0(e)?[e]:OI(e),o=s.length,l=o-1;for(;++n<o;){const u=s[n];let c=t;if(n!==l){const h=r[u];c=Sr(h)||Array.isArray(h)?h:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;r[u]=c,r=r[u]}return r};const KE={BLUR:"blur",FOCUS_OUT:"focusout"},Ci={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_s={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Rt.createContext(null);var kM=(r,e,t,n=!0)=>{const s={defaultValues:e._defaultValues};for(const o in r)Object.defineProperty(s,o,{get:()=>{const l=o;return e._proxyFormState[l]!==Ci.all&&(e._proxyFormState[l]=!n||Ci.all),r[l]}});return s},Mn=r=>Sr(r)&&!Object.keys(r).length,PM=(r,e,t,n)=>{t(r);const{name:s,...o}=r;return Mn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===Ci.all)},Vf=r=>Array.isArray(r)?r:[r];function NM(r){const e=Rt.useRef(r);e.current=r,Rt.useEffect(()=>{const t=!r.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[r.disabled])}var Xi=r=>typeof r=="string",OM=(r,e,t,n,s)=>Xi(r)?(n&&e.watch.add(r),ct(t,r,s)):Array.isArray(r)?r.map(o=>(n&&e.watch.add(o),ct(t,o))):(n&&(e.watchAll=!0),t),DM=(r,e,t,n,s)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:s||!0}}:{},GE=r=>({isOnSubmit:!r||r===Ci.onSubmit,isOnBlur:r===Ci.onBlur,isOnChange:r===Ci.onChange,isOnAll:r===Ci.all,isOnTouch:r===Ci.onTouched}),YE=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const yc=(r,e,t,n)=>{for(const s of t||Object.keys(r)){const o=ct(r,s);if(o){const{_f:l,...u}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],s)&&!n)return!0;if(l.ref&&e(l.ref,l.name)&&!n)return!0;if(yc(u,e))break}else if(Sr(u)&&yc(u,e))break}}};var LM=(r,e,t)=>{const n=Vf(ct(r,t));return rr(n,"root",e[t]),rr(r,t,n),r},d0=r=>r.type==="file",Gi=r=>typeof r=="function",fd=r=>{if(!h0)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Uf=r=>Xi(r),p0=r=>r.type==="radio",dd=r=>r instanceof RegExp;const JE={value:!1,isValid:!1},XE={value:!0,isValid:!0};var DI=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!Cr(r[0].attributes.value)?Cr(r[0].value)||r[0].value===""?XE:{value:r[0].value,isValid:!0}:XE:JE}return JE};const ZE={isValid:!1,value:null};var LI=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ZE):ZE;function e1(r,e,t="validate"){if(Uf(r)||Array.isArray(r)&&r.every(Uf)||qi(r)&&!r)return{type:t,message:Uf(r)?r:"",ref:e}}var Cl=r=>Sr(r)&&!dd(r)?r:{value:r,message:""},t1=async(r,e,t,n,s,o)=>{const{ref:l,refs:u,required:c,maxLength:h,minLength:d,min:m,max:y,pattern:_,validate:E,name:S,valueAsNumber:T,mount:V}=r._f,I=ct(t,S);if(!V||e.has(S))return{};const k=u?u[0]:l,W=N=>{s&&k.reportValidity&&(k.setCustomValidity(qi(N)?"":N||""),k.reportValidity())},H={},j=p0(l),P=Kc(l),R=j||P,M=(T||d0(l))&&Cr(l.value)&&Cr(I)||fd(l)&&l.value===""||I===""||Array.isArray(I)&&!I.length,F=DM.bind(null,S,n,H),$=(N,L,ve,ae=_s.maxLength,De=_s.minLength)=>{const Re=N?L:ve;H[S]={type:N?ae:De,message:Re,ref:l,...F(N?ae:De,Re)}};if(o?!Array.isArray(I)||!I.length:c&&(!R&&(M||En(I))||qi(I)&&!I||P&&!DI(u).isValid||j&&!LI(u).isValid)){const{value:N,message:L}=Uf(c)?{value:!!c,message:c}:Cl(c);if(N&&(H[S]={type:_s.required,message:L,ref:k,...F(_s.required,L)},!n))return W(L),H}if(!M&&(!En(m)||!En(y))){let N,L;const ve=Cl(y),ae=Cl(m);if(!En(I)&&!isNaN(I)){const De=l.valueAsNumber||I&&+I;En(ve.value)||(N=De>ve.value),En(ae.value)||(L=De<ae.value)}else{const De=l.valueAsDate||new Date(I),Re=ie=>new Date(new Date().toDateString()+" "+ie),fe=l.type=="time",Ne=l.type=="week";Xi(ve.value)&&I&&(N=fe?Re(I)>Re(ve.value):Ne?I>ve.value:De>new Date(ve.value)),Xi(ae.value)&&I&&(L=fe?Re(I)<Re(ae.value):Ne?I<ae.value:De<new Date(ae.value))}if((N||L)&&($(!!N,ve.message,ae.message,_s.max,_s.min),!n))return W(H[S].message),H}if((h||d)&&!M&&(Xi(I)||o&&Array.isArray(I))){const N=Cl(h),L=Cl(d),ve=!En(N.value)&&I.length>+N.value,ae=!En(L.value)&&I.length<+L.value;if((ve||ae)&&($(ve,N.message,L.message),!n))return W(H[S].message),H}if(_&&!M&&Xi(I)){const{value:N,message:L}=Cl(_);if(dd(N)&&!I.match(N)&&(H[S]={type:_s.pattern,message:L,ref:l,...F(_s.pattern,L)},!n))return W(L),H}if(E){if(Gi(E)){const N=await E(I,t),L=e1(N,k);if(L&&(H[S]={...L,...F(_s.validate,L.message)},!n))return W(L.message),H}else if(Sr(E)){let N={};for(const L in E){if(!Mn(N)&&!n)break;const ve=e1(await E[L](I,t),k,L);ve&&(N={...ve,...F(L,ve.message)},W(ve.message),n&&(H[S]=N))}if(!Mn(N)&&(H[S]={ref:k,...N},!n))return H}}return W(!0),H};function MM(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=Cr(r)?n++:r[e[n++]];return r}function FM(r){for(const e in r)if(r.hasOwnProperty(e)&&!Cr(r[e]))return!1;return!0}function Dr(r,e){const t=Array.isArray(e)?e:f0(e)?[e]:OI(e),n=t.length===1?r:MM(r,t),s=t.length-1,o=t[s];return n&&delete n[o],s!==0&&(Sr(n)&&Mn(n)||Array.isArray(n)&&FM(n))&&Dr(r,t.slice(0,-1)),r}var Wm=()=>{let r=[];return{get observers(){return r},next:s=>{for(const o of r)o.next&&o.next(s)},subscribe:s=>(r.push(s),{unsubscribe:()=>{r=r.filter(o=>o!==s)}}),unsubscribe:()=>{r=[]}}},uv=r=>En(r)||!NI(r);function yo(r,e){if(uv(r)||uv(e))return r===e;if(_a(r)&&_a(e))return r.getTime()===e.getTime();const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t){const o=r[s];if(!n.includes(s))return!1;if(s!=="ref"){const l=e[s];if(_a(o)&&_a(l)||Sr(o)&&Sr(l)||Array.isArray(o)&&Array.isArray(l)?!yo(o,l):o!==l)return!1}}return!0}var MI=r=>r.type==="select-multiple",VM=r=>p0(r)||Kc(r),Hm=r=>fd(r)&&r.isConnected,FI=r=>{for(const e in r)if(Gi(r[e]))return!0;return!1};function pd(r,e={}){const t=Array.isArray(r);if(Sr(r)||t)for(const n in r)Array.isArray(r[n])||Sr(r[n])&&!FI(r[n])?(e[n]=Array.isArray(r[n])?[]:{},pd(r[n],e[n])):En(r[n])||(e[n]=!0);return e}function VI(r,e,t){const n=Array.isArray(r);if(Sr(r)||n)for(const s in r)Array.isArray(r[s])||Sr(r[s])&&!FI(r[s])?Cr(e)||uv(t[s])?t[s]=Array.isArray(r[s])?pd(r[s],[]):{...pd(r[s])}:VI(r[s],En(e)?{}:e[s],t[s]):t[s]=!yo(r[s],e[s]);return t}var ec=(r,e)=>VI(r,e,pd(e)),UI=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>Cr(r)?r:e?r===""?NaN:r&&+r:t&&Xi(r)?new Date(r):n?n(r):r;function Qm(r){const e=r.ref;return d0(e)?e.files:p0(e)?LI(r.refs).value:MI(e)?[...e.selectedOptions].map(({value:t})=>t):Kc(e)?DI(r.refs).value:UI(Cr(e.value)?r.ref.value:e.value,r)}var UM=(r,e,t,n)=>{const s={};for(const o of r){const l=ct(e,o);l&&rr(s,o,l._f)}return{criteriaMode:t,names:[...r],fields:s,shouldUseNativeValidation:n}},tc=r=>Cr(r)?r:dd(r)?r.source:Sr(r)?dd(r.value)?r.value.source:r.value:r;const r1="AsyncFunction";var BM=r=>!!r&&!!r.validate&&!!(Gi(r.validate)&&r.validate.constructor.name===r1||Sr(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===r1)),jM=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate);function n1(r,e,t){const n=ct(r,t);if(n||f0(t))return{error:n,name:t};const s=t.split(".");for(;s.length;){const o=s.join("."),l=ct(e,o),u=ct(r,o);if(l&&!Array.isArray(l)&&t!==o)return{name:t};if(u&&u.type)return{name:o,error:u};s.pop()}return{name:t}}var $M=(r,e,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||r):(t?n.isOnBlur:s.isOnBlur)?!r:(t?n.isOnChange:s.isOnChange)?r:!0,zM=(r,e)=>!zd(ct(r,e)).length&&Dr(r,e);const qM={mode:Ci.onSubmit,reValidateMode:Ci.onChange,shouldFocusError:!0};function WM(r={}){let e={...qM,...r},t={submitCount:0,isDirty:!1,isLoading:Gi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=Sr(e.defaultValues)||Sr(e.values)?si(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:si(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,h=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:Wm(),array:Wm(),state:Wm()},y=GE(e.mode),_=GE(e.reValidateMode),E=e.criteriaMode===Ci.all,S=Q=>X=>{clearTimeout(h),h=setTimeout(Q,X)},T=async Q=>{if(!e.disabled&&(d.isValid||Q)){const X=e.resolver?Mn((await R()).errors):await F(n,!0);X!==t.isValid&&m.state.next({isValid:X})}},V=(Q,X)=>{!e.disabled&&(d.isValidating||d.validatingFields)&&((Q||Array.from(u.mount)).forEach(ne=>{ne&&(X?rr(t.validatingFields,ne,X):Dr(t.validatingFields,ne))}),m.state.next({validatingFields:t.validatingFields,isValidating:!Mn(t.validatingFields)}))},I=(Q,X=[],ne,Y,pe=!0,we=!0)=>{if(Y&&ne&&!e.disabled){if(l.action=!0,we&&Array.isArray(ct(n,Q))){const ge=ne(ct(n,Q),Y.argA,Y.argB);pe&&rr(n,Q,ge)}if(we&&Array.isArray(ct(t.errors,Q))){const ge=ne(ct(t.errors,Q),Y.argA,Y.argB);pe&&rr(t.errors,Q,ge),zM(t.errors,Q)}if(d.touchedFields&&we&&Array.isArray(ct(t.touchedFields,Q))){const ge=ne(ct(t.touchedFields,Q),Y.argA,Y.argB);pe&&rr(t.touchedFields,Q,ge)}d.dirtyFields&&(t.dirtyFields=ec(s,o)),m.state.next({name:Q,isDirty:N(Q,X),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else rr(o,Q,X)},k=(Q,X)=>{rr(t.errors,Q,X),m.state.next({errors:t.errors})},W=Q=>{t.errors=Q,m.state.next({errors:t.errors,isValid:!1})},H=(Q,X,ne,Y)=>{const pe=ct(n,Q);if(pe){const we=ct(o,Q,Cr(ne)?ct(s,Q):ne);Cr(we)||Y&&Y.defaultChecked||X?rr(o,Q,X?we:Qm(pe._f)):ae(Q,we),l.mount&&T()}},j=(Q,X,ne,Y,pe)=>{let we=!1,ge=!1;const Xe={name:Q};if(!e.disabled){const v=!!(ct(n,Q)&&ct(n,Q)._f&&ct(n,Q)._f.disabled);if(!ne||Y){d.isDirty&&(ge=t.isDirty,t.isDirty=Xe.isDirty=N(),we=ge!==Xe.isDirty);const b=v||yo(ct(s,Q),X);ge=!!(!v&&ct(t.dirtyFields,Q)),b||v?Dr(t.dirtyFields,Q):rr(t.dirtyFields,Q,!0),Xe.dirtyFields=t.dirtyFields,we=we||d.dirtyFields&&ge!==!b}if(ne){const b=ct(t.touchedFields,Q);b||(rr(t.touchedFields,Q,ne),Xe.touchedFields=t.touchedFields,we=we||d.touchedFields&&b!==ne)}we&&pe&&m.state.next(Xe)}return we?Xe:{}},P=(Q,X,ne,Y)=>{const pe=ct(t.errors,Q),we=d.isValid&&qi(X)&&t.isValid!==X;if(e.delayError&&ne?(c=S(()=>k(Q,ne)),c(e.delayError)):(clearTimeout(h),c=null,ne?rr(t.errors,Q,ne):Dr(t.errors,Q)),(ne?!yo(pe,ne):pe)||!Mn(Y)||we){const ge={...Y,...we&&qi(X)?{isValid:X}:{},errors:t.errors,name:Q};t={...t,...ge},m.state.next(ge)}},R=async Q=>{V(Q,!0);const X=await e.resolver(o,e.context,UM(Q||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return V(Q),X},M=async Q=>{const{errors:X}=await R(Q);if(Q)for(const ne of Q){const Y=ct(X,ne);Y?rr(t.errors,ne,Y):Dr(t.errors,ne)}else t.errors=X;return X},F=async(Q,X,ne={valid:!0})=>{for(const Y in Q){const pe=Q[Y];if(pe){const{_f:we,...ge}=pe;if(we){const Xe=u.array.has(we.name),v=pe._f&&BM(pe._f);v&&d.validatingFields&&V([Y],!0);const b=await t1(pe,u.disabled,o,E,e.shouldUseNativeValidation&&!X,Xe);if(v&&d.validatingFields&&V([Y]),b[we.name]&&(ne.valid=!1,X))break;!X&&(ct(b,we.name)?Xe?LM(t.errors,b,we.name):rr(t.errors,we.name,b[we.name]):Dr(t.errors,we.name))}!Mn(ge)&&await F(ge,X,ne)}}return ne.valid},$=()=>{for(const Q of u.unMount){const X=ct(n,Q);X&&(X._f.refs?X._f.refs.every(ne=>!Hm(ne)):!Hm(X._f.ref))&&We(Q)}u.unMount=new Set},N=(Q,X)=>!e.disabled&&(Q&&X&&rr(o,Q,X),!yo(J(),s)),L=(Q,X,ne)=>OM(Q,u,{...l.mount?o:Cr(X)?s:Xi(Q)?{[Q]:X}:X},ne,X),ve=Q=>zd(ct(l.mount?o:s,Q,e.shouldUnregister?ct(s,Q,[]):[])),ae=(Q,X,ne={})=>{const Y=ct(n,Q);let pe=X;if(Y){const we=Y._f;we&&(!we.disabled&&rr(o,Q,UI(X,we)),pe=fd(we.ref)&&En(X)?"":X,MI(we.ref)?[...we.ref.options].forEach(ge=>ge.selected=pe.includes(ge.value)):we.refs?Kc(we.ref)?we.refs.length>1?we.refs.forEach(ge=>(!ge.defaultChecked||!ge.disabled)&&(ge.checked=Array.isArray(pe)?!!pe.find(Xe=>Xe===ge.value):pe===ge.value)):we.refs[0]&&(we.refs[0].checked=!!pe):we.refs.forEach(ge=>ge.checked=ge.value===pe):d0(we.ref)?we.ref.value="":(we.ref.value=pe,we.ref.type||m.values.next({name:Q,values:{...o}})))}(ne.shouldDirty||ne.shouldTouch)&&j(Q,pe,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&ie(Q)},De=(Q,X,ne)=>{for(const Y in X){const pe=X[Y],we=`${Q}.${Y}`,ge=ct(n,we);(u.array.has(Q)||Sr(pe)||ge&&!ge._f)&&!_a(pe)?De(we,pe,ne):ae(we,pe,ne)}},Re=(Q,X,ne={})=>{const Y=ct(n,Q),pe=u.array.has(Q),we=si(X);rr(o,Q,we),pe?(m.array.next({name:Q,values:{...o}}),(d.isDirty||d.dirtyFields)&&ne.shouldDirty&&m.state.next({name:Q,dirtyFields:ec(s,o),isDirty:N(Q,we)})):Y&&!Y._f&&!En(we)?De(Q,we,ne):ae(Q,we,ne),YE(Q,u)&&m.state.next({...t}),m.values.next({name:l.mount?Q:void 0,values:{...o}})},fe=async Q=>{l.mount=!0;const X=Q.target;let ne=X.name,Y=!0;const pe=ct(n,ne),we=()=>X.type?Qm(pe._f):IM(Q),ge=Xe=>{Y=Number.isNaN(Xe)||_a(Xe)&&isNaN(Xe.getTime())||yo(Xe,ct(o,ne,Xe))};if(pe){let Xe,v;const b=we(),C=Q.type===KE.BLUR||Q.type===KE.FOCUS_OUT,q=!jM(pe._f)&&!e.resolver&&!ct(t.errors,ne)&&!pe._f.deps||$M(C,ct(t.touchedFields,ne),t.isSubmitted,_,y),ee=YE(ne,u,C);rr(o,ne,b),C?(pe._f.onBlur&&pe._f.onBlur(Q),c&&c(0)):pe._f.onChange&&pe._f.onChange(Q);const le=j(ne,b,C,!1),Ee=!Mn(le)||ee;if(!C&&m.values.next({name:ne,type:Q.type,values:{...o}}),q)return d.isValid&&(e.mode==="onBlur"&&C?T():C||T()),Ee&&m.state.next({name:ne,...ee?{}:le});if(!C&&ee&&m.state.next({...t}),e.resolver){const{errors:Ze}=await R([ne]);if(ge(b),Y){const et=n1(t.errors,n,ne),ft=n1(Ze,n,et.name||ne);Xe=ft.error,ne=ft.name,v=Mn(Ze)}}else V([ne],!0),Xe=(await t1(pe,u.disabled,o,E,e.shouldUseNativeValidation))[ne],V([ne]),ge(b),Y&&(Xe?v=!1:d.isValid&&(v=await F(n,!0)));Y&&(pe._f.deps&&ie(pe._f.deps),P(ne,v,Xe,le))}},Ne=(Q,X)=>{if(ct(t.errors,X)&&Q.focus)return Q.focus(),1},ie=async(Q,X={})=>{let ne,Y;const pe=Vf(Q);if(e.resolver){const we=await M(Cr(Q)?Q:pe);ne=Mn(we),Y=Q?!pe.some(ge=>ct(we,ge)):ne}else Q?(Y=(await Promise.all(pe.map(async we=>{const ge=ct(n,we);return await F(ge&&ge._f?{[we]:ge}:ge)}))).every(Boolean),!(!Y&&!t.isValid)&&T()):Y=ne=await F(n);return m.state.next({...!Xi(Q)||d.isValid&&ne!==t.isValid?{}:{name:Q},...e.resolver||!Q?{isValid:ne}:{},errors:t.errors}),X.shouldFocus&&!Y&&yc(n,Ne,Q?pe:u.mount),Y},J=Q=>{const X={...l.mount?o:s};return Cr(Q)?X:Xi(Q)?ct(X,Q):Q.map(ne=>ct(X,ne))},z=(Q,X)=>({invalid:!!ct((X||t).errors,Q),isDirty:!!ct((X||t).dirtyFields,Q),error:ct((X||t).errors,Q),isValidating:!!ct(t.validatingFields,Q),isTouched:!!ct((X||t).touchedFields,Q)}),be=Q=>{Q&&Vf(Q).forEach(X=>Dr(t.errors,X)),m.state.next({errors:Q?t.errors:{}})},Le=(Q,X,ne)=>{const Y=(ct(n,Q,{_f:{}})._f||{}).ref,pe=ct(t.errors,Q)||{},{ref:we,message:ge,type:Xe,...v}=pe;rr(t.errors,Q,{...v,...X,ref:Y}),m.state.next({name:Q,errors:t.errors,isValid:!1}),ne&&ne.shouldFocus&&Y&&Y.focus&&Y.focus()},oe=(Q,X)=>Gi(Q)?m.values.subscribe({next:ne=>Q(L(void 0,X),ne)}):L(Q,X,!0),We=(Q,X={})=>{for(const ne of Q?Vf(Q):u.mount)u.mount.delete(ne),u.array.delete(ne),X.keepValue||(Dr(n,ne),Dr(o,ne)),!X.keepError&&Dr(t.errors,ne),!X.keepDirty&&Dr(t.dirtyFields,ne),!X.keepTouched&&Dr(t.touchedFields,ne),!X.keepIsValidating&&Dr(t.validatingFields,ne),!e.shouldUnregister&&!X.keepDefaultValue&&Dr(s,ne);m.values.next({values:{...o}}),m.state.next({...t,...X.keepDirty?{isDirty:N()}:{}}),!X.keepIsValid&&T()},ce=({disabled:Q,name:X,field:ne,fields:Y})=>{(qi(Q)&&l.mount||Q||u.disabled.has(X))&&(Q?u.disabled.add(X):u.disabled.delete(X),j(X,Qm(ne?ne._f:ct(Y,X)._f),!1,!1,!0))},te=(Q,X={})=>{let ne=ct(n,Q);const Y=qi(X.disabled)||qi(e.disabled);return rr(n,Q,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:Q}},name:Q,mount:!0,...X}}),u.mount.add(Q),ne?ce({field:ne,disabled:qi(X.disabled)?X.disabled:e.disabled,name:Q}):H(Q,!0,X.value),{...Y?{disabled:X.disabled||e.disabled}:{},...e.progressive?{required:!!X.required,min:tc(X.min),max:tc(X.max),minLength:tc(X.minLength),maxLength:tc(X.maxLength),pattern:tc(X.pattern)}:{},name:Q,onChange:fe,onBlur:fe,ref:pe=>{if(pe){te(Q,X),ne=ct(n,Q);const we=Cr(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,ge=VM(we),Xe=ne._f.refs||[];if(ge?Xe.find(v=>v===we):we===ne._f.ref)return;rr(n,Q,{_f:{...ne._f,...ge?{refs:[...Xe.filter(Hm),we,...Array.isArray(ct(s,Q))?[{}]:[]],ref:{type:we.type,name:Q}}:{ref:we}}}),H(Q,!1,void 0,we)}else ne=ct(n,Q,{}),ne._f&&(ne._f.mount=!1),(e.shouldUnregister||X.shouldUnregister)&&!(CM(u.array,Q)&&l.action)&&u.unMount.add(Q)}}},xe=()=>e.shouldFocusError&&yc(n,Ne,u.mount),de=Q=>{qi(Q)&&(m.state.next({disabled:Q}),yc(n,(X,ne)=>{const Y=ct(n,ne);Y&&(X.disabled=Y._f.disabled||Q,Array.isArray(Y._f.refs)&&Y._f.refs.forEach(pe=>{pe.disabled=Y._f.disabled||Q}))},0,!1))},me=(Q,X)=>async ne=>{let Y;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let pe=si(o);if(u.disabled.size)for(const we of u.disabled)rr(pe,we,void 0);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:we,values:ge}=await R();t.errors=we,pe=ge}else await F(n);if(Dr(t.errors,"root"),Mn(t.errors)){m.state.next({errors:{}});try{await Q(pe,ne)}catch(we){Y=we}}else X&&await X({...t.errors},ne),xe(),setTimeout(xe);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(t.errors)&&!Y,submitCount:t.submitCount+1,errors:t.errors}),Y)throw Y},_e=(Q,X={})=>{ct(n,Q)&&(Cr(X.defaultValue)?Re(Q,si(ct(s,Q))):(Re(Q,X.defaultValue),rr(s,Q,si(X.defaultValue))),X.keepTouched||Dr(t.touchedFields,Q),X.keepDirty||(Dr(t.dirtyFields,Q),t.isDirty=X.defaultValue?N(Q,si(ct(s,Q))):N()),X.keepError||(Dr(t.errors,Q),d.isValid&&T()),m.state.next({...t}))},Ve=(Q,X={})=>{const ne=Q?si(Q):s,Y=si(ne),pe=Mn(Q),we=pe?s:Y;if(X.keepDefaultValues||(s=ne),!X.keepValues){if(X.keepDirtyValues){const ge=new Set([...u.mount,...Object.keys(ec(s,o))]);for(const Xe of Array.from(ge))ct(t.dirtyFields,Xe)?rr(we,Xe,ct(o,Xe)):Re(Xe,ct(we,Xe))}else{if(h0&&Cr(Q))for(const ge of u.mount){const Xe=ct(n,ge);if(Xe&&Xe._f){const v=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(fd(v)){const b=v.closest("form");if(b){b.reset();break}}}}n={}}o=e.shouldUnregister?X.keepDefaultValues?si(s):{}:si(we),m.array.next({values:{...we}}),m.values.next({values:{...we}})}u={mount:X.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!d.isValid||!!X.keepIsValid||!!X.keepDirtyValues,l.watch=!!e.shouldUnregister,m.state.next({submitCount:X.keepSubmitCount?t.submitCount:0,isDirty:pe?!1:X.keepDirty?t.isDirty:!!(X.keepDefaultValues&&!yo(Q,s)),isSubmitted:X.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:pe?{}:X.keepDirtyValues?X.keepDefaultValues&&o?ec(s,o):t.dirtyFields:X.keepDefaultValues&&Q?ec(s,Q):X.keepDirty?t.dirtyFields:{},touchedFields:X.keepTouched?t.touchedFields:{},errors:X.keepErrors?t.errors:{},isSubmitSuccessful:X.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Me=(Q,X)=>Ve(Gi(Q)?Q(o):Q,X);return{control:{register:te,unregister:We,getFieldState:z,handleSubmit:me,setError:Le,_executeSchema:R,_getWatch:L,_getDirty:N,_updateValid:T,_removeUnmounted:$,_updateFieldArray:I,_updateDisabledField:ce,_getFieldArray:ve,_reset:Ve,_resetDefaultValues:()=>Gi(e.defaultValues)&&e.defaultValues().then(Q=>{Me(Q,e.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:Q=>{t={...t,...Q}},_disableForm:de,_subjects:m,_proxyFormState:d,_setErrors:W,get _fields(){return n},get _formValues(){return o},get _state(){return l},set _state(Q){l=Q},get _defaultValues(){return s},get _names(){return u},set _names(Q){u=Q},get _formState(){return t},set _formState(Q){t=Q},get _options(){return e},set _options(Q){e={...e,...Q}}},trigger:ie,register:te,handleSubmit:me,watch:oe,setValue:Re,getValues:J,reset:Me,resetField:_e,clearErrors:be,unregister:We,setError:Le,setFocus:(Q,X={})=>{const ne=ct(n,Q),Y=ne&&ne._f;if(Y){const pe=Y.refs?Y.refs[0]:Y.ref;pe.focus&&(pe.focus(),X.shouldSelect&&Gi(pe.select)&&pe.select())}},getFieldState:z}}function HM(r={}){const e=Rt.useRef(void 0),t=Rt.useRef(void 0),[n,s]=Rt.useState({isDirty:!1,isValidating:!1,isLoading:Gi(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,defaultValues:Gi(r.defaultValues)?void 0:r.defaultValues});e.current||(e.current={...WM(r),formState:n});const o=e.current.control;return o._options=r,NM({subject:o._subjects.state,next:l=>{PM(l,o._proxyFormState,o._updateFormState)&&s({...o._formState})}}),Rt.useEffect(()=>o._disableForm(r.disabled),[o,r.disabled]),Rt.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==n.isDirty&&o._subjects.state.next({isDirty:l})}},[o,n.isDirty]),Rt.useEffect(()=>{r.values&&!yo(r.values,t.current)?(o._reset(r.values,o._options.resetOptions),t.current=r.values,s(l=>({...l}))):o._resetDefaultValues()},[r.values,o]),Rt.useEffect(()=>{r.errors&&o._setErrors(r.errors)},[r.errors,o]),Rt.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),Rt.useEffect(()=>{r.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[r.shouldUnregister,o]),e.current.formState=kM(n,o),e.current}const QM=()=>{var E,S,T,V,I;const[r,e]=Pe.useState([]),[t,n]=Pe.useState("cash"),[s,o]=Pe.useState(!1),[l,u]=Pe.useState(!1),c=ns();Pe.useEffect(()=>{const k=JSON.parse(localStorage.getItem("cart")||"[]");e(k);const W=JSON.parse(localStorage.getItem("checkoutInfo")||"{}");Object.keys(W).length>0&&(y(W),o(!0));const H=localStorage.getItem("user");if(H){const j=JSON.parse(H);j.roles&&j.roles[0]==="ADMIN"&&u(!0)}},[]);const{register:h,handleSubmit:d,formState:{errors:m},reset:y}=HM();return Se("div",{className:"container mx-auto py-12",children:[Se("div",{className:"flex items-center space-x-2 text-gray-500 text-[14px] mb-8",children:[B("a",{href:l?"/productmanage":"/",className:"hover:underline",children:"Home"}),B("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),B("a",{href:"/cart",className:"hover:underline",children:"Cart"}),B("img",{src:"/R2S-Client/CrossLine.svg",alt:"CrossLine",className:"w-[7px]"}),B("span",{className:"font-normal text-black",children:"CheckOut"})]}),B("form",{onSubmit:d(async k=>{try{const H={userId:JSON.parse(localStorage.getItem("user")||"{}").id,name:k.fullName,address:k.stAddress+", "+k.townCity,items:r.map(R=>({productId:R.id,quantity:R.quantity}))},j=localStorage.getItem("accessToken");if(console.log("Token:",j),!j){pt.error("You need to log in first!");return}if(!(await fetch("https://devapi.uniscore.vn/uri/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`},body:JSON.stringify(H)})).ok)throw new Error("Failed to place order");pt.success("Order placed successfully!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),e([]),localStorage.removeItem("cart"),s?localStorage.setItem("checkoutInfo",JSON.stringify(k)):localStorage.removeItem("checkoutInfo"),c("/cart"),setTimeout(()=>{window.location.reload()},1500)}catch(W){pt.error(W.message)}}),className:"space-y-4",children:Se("div",{className:"sm:grid grid-cols-2 gap-10 lg:ml-14 ml-4 mr-4 xl:ml-32",children:[Se("div",{children:[B("h2",{className:"text-[36px] font-medium mb-6 font-[Inter]",children:"Billing Details"}),Se("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins]",children:[Se("label",{children:["Full Name",B("a",{className:"text-red-500",children:"*"})]}),B("input",{...h("fullName",{required:"Full Name is required"}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.fullName&&B("p",{className:"text-red-500 text-sm",children:typeof((E=m.fullName)==null?void 0:E.message)=="string"?m.fullName.message:""})]}),Se("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[B("label",{children:"Company Name"}),B("input",{...h("companyName"),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"})]}),Se("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[Se("label",{children:["Street Address",B("a",{className:"text-red-500",children:"*"})]}),B("input",{...h("stAddress",{required:"Street Address is required"}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.stAddress&&B("p",{className:"text-red-500 text-sm",children:typeof((S=m.stAddress)==null?void 0:S.message)=="string"?m.stAddress.message:""})]}),Se("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[B("label",{children:"Apartment, floor, etc. (optional)"}),B("input",{...h("apartment"),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"})]}),Se("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[Se("label",{children:["Town/City",B("a",{className:"text-red-500",children:"*"})]}),B("input",{...h("townCity",{required:"Town or City is required"}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.townCity&&B("p",{className:"text-red-500 text-sm",children:typeof((T=m.townCity)==null?void 0:T.message)=="string"?m.townCity.message:""})]}),Se("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[Se("label",{children:["Phone Number",B("a",{className:"text-red-500",children:"*"})]}),B("input",{...h("phone",{required:"Phone number is required",pattern:{value:/^[0-9]{10}$/,message:"Enter a valid 10-digit phone number"}}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.phone&&B("p",{className:"text-red-500 text-sm",children:typeof((V=m.phone)==null?void 0:V.message)=="string"?m.phone.message:""})]}),Se("div",{className:"flex flex-col text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[Se("label",{children:["Email Address",B("a",{className:"text-red-500",children:"*"})]}),B("input",{...h("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email"}}),className:"rounded bg-[#F5F5F5] p-2 w-full sm:max-w-[470px] mt-2"}),m.email&&B("p",{className:"text-red-500 text-sm",children:typeof((I=m.email)==null?void 0:I.message)=="string"?m.email.message:""})]}),Se("div",{className:"flex items-center text-[15px] sm:text-[16px] font-[Poppins] mt-4",children:[B("input",{type:"checkbox",checked:s,onChange:k=>o(k.target.checked),className:"w-6 h-6 accent-red-500 rounded-lg border-gray-400 cursor-pointer mr-2"}),B("label",{className:"text-gray-700 text-[15px] sm:text-[16px] font-[Poppins]",children:"Save this information for faster checkout next time"})]})]}),Se("div",{className:"rounded w-full sd:max-w-[400px] w-full mt-10 sm:mt-28",children:[r.map(k=>Se("div",{className:"flex items-center justify-between mb-2 text-[16px] font-[Poppins]",children:[B("img",{src:k.image,alt:k.name,className:"flex sm:hidden md:flex w-32 h-32 md:w-16 md:h-16"}),B("span",{className:"flex-1 text-left ml-4 sm:ml-0 md:ml-4",children:k.name}),Se("span",{className:"ml-4",children:["$",(k.price*k.quantity).toFixed(2)]})]},k.id)),Se("div",{className:"flex justify-between mt-4 mb-3 pt-2 text-[16px] font-[Poppins]",children:[B("span",{children:"Subtotal:"}),Se("span",{children:["$",r.reduce((k,W)=>k+W.price*W.quantity,0).toFixed(2)]})]}),Se("div",{className:"flex justify-between border-t border-black mb-3 pt-2 text-[16px] font-[Poppins]",children:[B("span",{children:"Shipping:"}),B("span",{children:"Free"})]}),Se("div",{className:"flex justify-between border-t border-black  pt-2 text-[16px] font-[Poppins]",children:[B("span",{children:"Total:"}),Se("span",{children:["$",r.reduce((k,W)=>k+W.price*W.quantity,0).toFixed(2)]})]}),B("div",{className:"mt-4 text-[16px] font-[Poppins]",children:Se("div",{className:"flex flex-col",children:[Se("div",{className:"flex items-center justify-between w-full",children:[Se("label",{className:"flex items-center mb-4",children:[B("input",{type:"radio",name:"payment",value:"bank",checked:t==="bank",onChange:()=>n("bank"),className:"mr-2 w-5 h-5 accent-black"}),"Bank"]}),B("img",{src:"/R2S-Client/Bank.svg",alt:"Bank SVG",className:"sm:hidden md:flex w-full max-w-[192px] mb-4"})]}),Se("label",{className:"flex items-center",children:[B("input",{type:"radio",name:"payment",value:"cash",checked:t==="cash",onChange:()=>n("cash"),className:"mr-2 w-5 h-5 accent-black"}),"Cash on delivery"]})]})}),Se("div",{className:"mt-8 text-[16px] font-[Poppins] flex gap-4",children:[B("input",{type:"text",placeholder:"Coupon Code",className:"border border-black rounded p-4 w-full max-w-[300px] h-[56px] sm:text-[12px] md:text-[16px]"}),B("button",{className:"bg-red-500 border-red-500 border rounded text-white sm:text-[12px] md:text-[16px] w-full max-w-[211px] h-[56px]",children:"Apply Coupon"})]}),B("button",{type:"submit",className:"w-full max-w-[190px] h-[56px] mt-8 bg-red-500 text-white py-2 rounded",children:"Place Order"})]})]})})]})},KM=async r=>{const e=r?`https://devapi.uniscore.vn/uri/api/products/search?name=${r}`:"https://devapi.uniscore.vn/uri/api/products",{data:t}=await Bt.get(e);return Array.isArray(t.data)?t.data:[]},GM=()=>{const r=ns(),[e,t]=Pe.useState(""),[n,s]=Pe.useState(!1),{data:o=[],isLoading:l,error:u,refetch:c}=Bc({queryKey:["products",e],queryFn:()=>KM(e)}),[h,d]=Pe.useState(null),[m,y]=Pe.useState(null),_={id:0,name:"",price:0,description:"",images:[],category:"",brand:"",stock:0,rate:0,is_active:!0},E=F=>{const $=JSON.parse(localStorage.getItem("cart")||"[]"),N=$.find(L=>L.id===F.id);N?N.quantity+=1:$.push({id:F.id,name:F.name,price:F.price,image:F.images[0],quantity:1,color:"red",size:null}),localStorage.setItem("cart",JSON.stringify($)),pt.success("Product added to cart!",{position:"top-right",autoClose:1500}),setTimeout(()=>window.location.reload(),1500)},S=F=>{d(F)},T=F=>{y(F)},[V,I]=Pe.useState(null),k=F=>{F.target.files&&I(F.target.files)},[W,H]=Pe.useState(null),j=F=>{F.target.files&&H(F.target.files)},P=async()=>{if(!h)return;const{name:F,price:$,description:N}=h;if(!F.trim()||!N.trim()||!$){pt.error("All fields are required!");return}try{const L=new FormData;L.append("name",F.trim()),L.append("price",$.toString()),L.append("description",N.trim()),V&&Array.from(V).forEach(ve=>{L.append("images",ve)}),console.log("form data:",L),await Bt.put(`https://devapi.uniscore.vn/uri/api/products/${h.id}`,L,{headers:{"Content-Type":"multipart/form-data"}}),pt.success("Product updated successfully!",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light"}),d(null),c()}catch(L){console.error("Error updating product:",L),pt.error("Failed to update product")}},R=async()=>{if(!m)return;const{name:F,price:$,description:N,category:L,brand:ve}=m;if(!F.trim()||!N.trim()||!$||!L.trim()||!ve.trim()){pt.error("All fields are required!");return}try{const ae=new FormData;ae.append("name",F.trim()),ae.append("price",$.toString()),ae.append("description",N.trim()),ae.append("category",L.trim()),ae.append("brand",ve.trim()),W&&Array.from(W).forEach(De=>{ae.append("images",De)}),await Bt.post("https://devapi.uniscore.vn/uri/api/products",ae,{headers:{"Content-Type":"multipart/form-data"}}),pt.success("Product created successfully!",{position:"top-right",autoClose:1500}),y(null),c()}catch(ae){console.error("Error creating product:",ae),pt.error("Failed to create product")}},M=async F=>{try{const $=`https://devapi.uniscore.vn/uri/api/products/${F}`;console.log("Deleting product at:",$);const N=await fetch(`https://devapi.uniscore.vn/uri/api/products/${F}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDeleted:!0})});if(!N.ok){const L=await N.text();throw new Error(`Error ${N.status}: ${L}`)}pt.success("Product deleted successfully!"),c()}catch($){pt.error("Failed to delete product!"),console.error("Delete error:",$)}};return Array.isArray(o)?Se("div",{className:"mx-auto py-12 w-full px-4",children:[B("h2",{className:"text-[36px] font-semibold mb-8 font-[Inter]",children:"Manage Products"}),B("button",{className:"bg-yellow-300 text-[16px] text-black px-3 py-1 rounded mb-6",onClick:()=>T(_),children:"+ Create Product"}),Se("div",{className:"relative w-full max-w-md mb-6",children:[Se("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden shadow-sm",children:[B("span",{className:"px-3",children:B("img",{src:"/R2S-Client/SearchIcon.svg",alt:"Search",className:"w-4 h-4 cursor-pointer"})}),B("input",{type:"text",placeholder:"Search products...",value:e,onChange:F=>{t(F.target.value),s(F.target.value.length>0)},onBlur:()=>setTimeout(()=>s(!1),200),className:"w-full p-2 outline-none"})]}),n&&e.length>0&&o.length>0&&B("ul",{className:"absolute w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-10",children:o.map(F=>B("li",{onClick:()=>{t(F.name),s(!1)},className:"p-3 hover:bg-gray-100 cursor-pointer transition",children:F.name},F.id))})]}),B("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 min-h-[100px]",children:l?B("p",{className:"col-span-4 text-center",children:"Loading..."}):u?B("p",{className:"col-span-4 text-center text-red-500",children:"Error loading products"}):o.length>0?o.slice().sort((F,$)=>F.id-$.id).map(F=>Se("div",{className:"group rounded-lg bg-white transition duration-300 sm:w-full md:max-w-[270px] lg:max-w-[270px] xl:max-w-[270px] 2xl:max-w-[270px]",children:[B("div",{className:"w-full h-[250px] bg-[#F5F5F5] flex flex-col items-center overflow-hidden rounded-md relative",children:Se("div",{className:"w-full h-full flex items-center justify-center relative",onMouseEnter:$=>{var N;return(N=$.currentTarget.querySelector("button"))==null?void 0:N.classList.add("opacity-100","translate-y-0")},onMouseLeave:$=>{var N;return(N=$.currentTarget.querySelector("button"))==null?void 0:N.classList.remove("opacity-100","translate-y-0")},children:[B("img",{src:F.images[0],alt:F.name,className:"max-h-[180px] object-contain"}),B("button",{onClick:$=>{$.stopPropagation(),E(F)},className:"absolute bottom-0 left-0 w-full bg-black text-white py-3 text-center opacity-0 translate-y-2 transition-all duration-300",children:"Add To Cart"})]})}),B("h3",{className:"text-[16px] font-medium mt-3",children:F.name}),Se("div",{className:"flex items-center gap-3",children:[Se("a",{className:"text-red-500 text-[16px] font-medium",children:["$",F.price]}),Se("div",{className:"flex items-center gap-1",children:[[...Array(5)].map(($,N)=>N<(F.rate||4)?B("img",{src:"/R2S-Client/Star.svg",alt:"Star",className:"w-[20px] h-[20px]"},N):B("img",{src:"/R2S-Client/GrayStar.svg",alt:"Star",className:"w-[20px] h-[20px]"},N)),Se("span",{className:"text-gray-500 text-[14px] font-medium",children:["(",F.stock||50,")"]})]})]}),Se("div",{className:"flex gap-2 mt-2",children:[B("button",{className:"bg-green-500 text-white px-3 py-1 rounded",onClick:()=>r(`/detail/${F.id}`),children:"View"}),B("button",{className:"bg-blue-500 text-white px-3 py-1 rounded",onClick:()=>S(F),children:"Edit"}),B("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:()=>M(F.id),children:"Delete"})]})]},F.id)):B("div",{className:"col-span-4 flex items-center justify-center",children:"No products found"})}),h&&B("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:Se("div",{className:"bg-white p-6 rounded-lg",children:[B("h3",{className:"text-xl font-bold mb-4",children:"Edit Product"}),B("label",{className:"block mb-2",children:"Current Image:"}),B("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:h.images.filter(F=>F).map((F,$)=>B("img",{src:F,alt:`Product ${$+1}`,className:"w-[200px] h-[150px] object-contain border rounded-md"},$))}),B("label",{className:"block mb-2",children:"New Image:"}),B("input",{type:"file",multiple:!0,className:"border p-2 w-full mb-4",onChange:k}),B("a",{children:"Name:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(h==null?void 0:h.name)||"",onChange:F=>d($=>$?{...$,name:F.target.value}:null)}),B("a",{children:"Price:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"number",value:(h==null?void 0:h.price)||"",min:1,onChange:F=>{const $=Math.max(1,Number(F.target.value));d(N=>N?{...N,price:$}:null)}}),B("a",{children:"Description:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(h==null?void 0:h.description)||"",onChange:F=>{d($=>$?{...$,description:F.target.value}:null)},required:!0}),Se("div",{className:"flex justify-end gap-2",children:[B("button",{className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>d(null),children:"Cancel"}),B("button",{className:"bg-green-500 text-white px-4 py-2 rounded",onClick:P,children:"Save"})]})]})}),m&&B("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:Se("div",{className:"bg-white p-6 rounded-lg",children:[B("h3",{className:"text-xl font-bold mb-4",children:"Create Product"}),B("label",{className:"block mb-2",children:"Image:"}),B("input",{type:"file",multiple:!0,className:"border p-2 w-full mb-4",onChange:j}),B("a",{children:"Name:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.name)||"",onChange:F=>y($=>$?{...$,name:F.target.value}:null)}),B("a",{children:"Price:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"number",value:(m==null?void 0:m.price)||"",min:1,onChange:F=>{const $=Math.max(1,Number(F.target.value));y(N=>N?{...N,price:$}:null)}}),B("a",{children:"Description:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.description)||"",onChange:F=>{y($=>$?{...$,description:F.target.value}:null)},required:!0}),B("a",{children:"Category:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.category)||"",onChange:F=>{y($=>$?{...$,category:F.target.value}:null)},required:!0}),B("a",{children:"Brand:"}),B("input",{className:"border p-2 w-full mb-4 mt-2",type:"text",value:(m==null?void 0:m.brand)||"",onChange:F=>{y($=>$?{...$,brand:F.target.value}:null)},required:!0}),Se("div",{className:"flex justify-end gap-2",children:[B("button",{className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>y(null),children:"Cancel"}),B("button",{className:"bg-green-500 text-white px-4 py-2 rounded",onClick:R,children:"Save"})]})]})})]}):B("p",{children:"No products available"})},m0="https://devapi.uniscore.vn/uri/api/orders",g0=()=>{const r=localStorage.getItem("accessToken");return r?{Authorization:`Bearer ${r}`}:{}},YM=async()=>{const{data:r}=await Bt.get(m0,{headers:g0()});return r??[]},JM=async({orderId:r,status:e})=>{await Bt.put(`${m0}/${r}`,{status:e},{headers:g0()})},XM=async r=>{await Bt.delete(`${m0}/${r}`,{headers:g0()})},ZM=()=>{const r=bv(),[e,t]=Pe.useState(null),{data:n=[],isLoading:s,error:o}=Bc({queryKey:["orders"],queryFn:YM}),l=zf({mutationFn:JM,onMutate:async({orderId:c,status:h})=>{t(c),await r.cancelQueries({queryKey:["orders"]});const d=r.getQueryData(["orders"]);return d&&r.setQueryData(["orders"],d.map(m=>m.id===c?{...m,status:h}:m)),{previousOrders:d}},onSuccess:()=>{pt.success("Order updated successfully",{autoClose:1500})},onError:(c,h,d)=>{pt.error("Failed to update order"),d!=null&&d.previousOrders&&r.setQueryData(["orders"],d.previousOrders)},onSettled:()=>{t(null)}}),u=zf({mutationFn:XM,onMutate:c=>t(c),onSuccess:()=>{window.location.reload()},onError:()=>{pt.error("Failed to delete order"),t(null)}});return Se("div",{className:"container mx-auto py-12",children:[B("h2",{className:"text-[36px] font-semibold mb-8 font-[Inter]",children:"Order Management"}),s?B("p",{className:"col-span-4 text-center text-[12px] md:text-[16px]",children:"Loading..."}):o?B("p",{className:"col-span-4 text-center text-red-500",children:"Error loading orders"}):Se("table",{className:"min-w-full border-separate border-spacing-y-4",children:[B("thead",{className:"shadow-md rounded",children:Se("tr",{children:[B("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"ID"}),B("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"User"}),B("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Name"}),B("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Address"}),B("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-left",children:"Total Amount"}),B("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Status"}),B("th",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:"Actions"})]})}),B("tbody",{children:n.length===0?B("tr",{children:B("td",{colSpan:5,className:"border p-2 text-center",children:"No orders available"})}):n.sort((c,h)=>c.status==="pending"&&h.status!=="pending"?-1:c.status!=="pending"&&h.status==="pending"?1:h.id-c.id).map(c=>Se("tr",{className:"shadow-md rounded",children:[B("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-center",children:c.id}),B("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-center",children:c.user_id}),B("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:c.name}),B("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:c.address}),Se("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px]",children:["$",c.total_amount]}),B("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] text-center",children:c.status}),Se("td",{className:"p-2 md:p-4 w-fit text-[12px] md:text-[16px] space-x-2",children:[c.status==="pending"&&B("button",{className:"bg-green-500 text-white px-3 py-1 rounded",onClick:()=>l.mutate({orderId:c.id,status:"done"}),children:"Approve"}),B("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:()=>u.mutate(c.id),children:"Delete"})]})]},c.id))})]})]})},i1=({children:r})=>{const e=localStorage.getItem("isLoggedIn"),t=JSON.parse(localStorage.getItem("user")||"{}");return e&&t.roles[0]==="ADMIN"?r:B($C,{to:"/login"})},eF=[{path:"/",element:B(zP,{})},{path:"/signup",element:B(qP,{})},{path:"/login",element:B(WP,{})},{path:"/detail/:id",element:B(JP,{})},{path:"/cart",element:B(XP,{})},{path:"/profile",element:B(ZP,{})},{path:"/chat",element:B(xM,{})},{path:"/checkout",element:B(QM,{})},{path:"/productmanage",element:B(i1,{children:B(GM,{})})},{path:"/ordermanage",element:B(i1,{children:B(ZM,{})})}],tF=()=>kC(eF),rF=()=>B(KC,{basename:"/R2S-Client",children:B(tF,{})}),nF=()=>{const[r,e]=Pe.useState(0),[t,n]=Pe.useState(!1),[s,o]=Pe.useState(!1),[l,u]=Pe.useState(!1),c=Pe.useRef(null);let h;const d=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("user"),localStorage.removeItem("checkoutInfo"),window.location.href="/R2S-Client/login",window.location.reload(),window.scrollTo(0,0)};return Pe.useEffect(()=>{const m=localStorage.getItem("isLoggedIn")==="true";n(m);const y=localStorage.getItem("user");if(y){const S=JSON.parse(y);S.roles&&S.roles[0]==="ADMIN"&&o(!0)}const _=JSON.parse(localStorage.getItem("cart")||"[]");e(_.length);const E=S=>{c.current&&c.current instanceof Node&&!c.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),Se("header",{className:"w-full border-b top-0 left-0 bg-white z-50",children:[Se("div",{className:"bg-black text-white flex justify-between items-center py-2 px-8 text-sm h-12 gap-x-16",children:[Se("span",{className:"font-[Poppins] text-[14px] flex-1 text-center text-gray-300",children:["Summer Sale For All Swim Suits And Free Express Delivery - OFF 50%!"," ",B("a",{href:"#",className:"font-semibold hover:border-b-2 hover:border-white",children:"ShopNow"})]}),Se("div",{className:"flex sm:flex items-center gap-2 cursor-pointer text-gray-300",children:[B("span",{children:"English"}),B("img",{src:"/R2S-Client/DropDown.svg",alt:"Search",className:"w-3.5 h-3.5 cursor-pointer"})]})]}),Se("nav",{className:"flex items-center justify-between max-w-7xl mx-auto p-4",children:[B("h1",{className:"text-[24px] font-bold",children:"Exclusive"}),Se("div",{className:"hidden md:flex md:space-x-4 md:text-sm lg:text-[16px] lg:space-x-12 space-x-8 text-[16px]",children:[B("a",{href:s?"/R2S-Client/productmanage":"/R2S-Client/",className:"hover:border-b-2 hover:border-black",children:"Home"}),s?B("a",{href:"/R2S-Client/ordermanage",className:"hover:border-b-2 hover:border-black",children:"Orders"}):B("a",{href:"#",className:"hover:border-b-2 hover:border-black",children:"About"}),t?B("a",{href:"/R2S-Client/chat",className:"hover:border-b-2 hover:border-black",children:"Contact"}):B(JC,{to:"/R2S-Client/login",className:"hover:border-b-2 hover:border-black",children:"Sign In"}),t?B("a",{href:"/R2S-Client/profile",className:"hover:border-b-2 hover:border-black",children:"Account"}):B("a",{href:"/R2S-Client/signup",className:"hover:border-b-2 hover:border-black",children:"Sign Up"})]}),Se("div",{className:"flex items-center space-x-4",children:[Se("div",{className:"flex sm:w-[243px] md:w-[195px] lg:w-[243px] xl:w-[243px] 2xl:w-[243px] items-center bg-gray-100 px-4 py-2 rounded-lg text-[12px] w-[180px] h-[38px]",children:[B("input",{type:"text",placeholder:"What are you looking for?",className:"bg-transparent outline-none cursor-pointer text-[10px] sm:text-[12px] md:text-[11px] lg:text-[12px] xl:text-[12px] 2xl:text-[12px] flex-1","aria-label":"Search"}),B("img",{src:"/R2S-Client/SearchIcon.svg",alt:"Search",className:"w-3 h-3 sm:w-4 sm:h-4 cursor-pointer"})]}),Se("div",{className:"flex items-center space-x-4 relative",children:[B("img",{src:"/R2S-Client/Wishlist.svg",alt:"Favorite",className:"w-[32px] h-[32px] cursor-pointer",tabIndex:0}),Se("a",{href:"/cart",className:"relative",children:[B("img",{src:"/R2S-Client/Cart1.svg",alt:"Cart",className:"w-[32px] h-[32px] cursor-pointer",tabIndex:0}),r>0&&B("span",{className:"absolute -top-1 -right-2 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:r})]}),Se("div",{className:"relative inline-block",onMouseEnter:()=>{clearTimeout(h),u(!0)},onMouseLeave:()=>{h=setTimeout(()=>u(!1),200)},children:[B("a",{href:t?"/profile":"/login",className:"flex items-center",children:B("img",{src:t?"/R2S-Client/userlogged.svg":"/R2S-Client/user.svg",alt:"User",className:"w-[32px] h-[32px] cursor-pointer"})}),t&&l&&Se("div",{className:"absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg py-2 border z-50",style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",minWidth:"200px"},children:[B("a",{href:"/profile",className:"block px-4 py-2 hover:bg-gray-100",children:"My Profile"}),B("a",{href:"#",className:"block px-4 py-2 hover:bg-gray-100",children:"My Order"}),B("a",{href:"#",className:"block px-4 py-2 hover:bg-gray-100",children:"My Cancellations"}),B("a",{href:"/login",onClick:d,className:"block px-4 py-2 hover:bg-gray-100",children:"Log Out"})]})]})]})]})]}),B("nav",{className:"md:hidden flex items-center justify-center max-w-7xl mx-auto p-2",children:Se("div",{className:"space-x-8 text-[16px]",children:[B("a",{href:s?"/R2S-Client/productmanage":"/R2S-Client/",className:"hover:border-b-2 hover:border-black",children:"Home"}),s?B("a",{href:"/R2S-Client/ordermanage",className:"hover:border-b-2 hover:border-black",children:"Orders"}):B("a",{href:"#",className:"hover:border-b-2 hover:border-black",children:"About"}),t?B("a",{href:"/R2S-Client/chat",className:"hover:border-b-2 hover:border-black",children:"Contact"}):B("a",{href:"/R2S-Client/login",className:"hover:border-b-2 hover:border-black",children:"Sign In"}),t?B("a",{href:"/R2S-Client/profile",className:"hover:border-b-2 hover:border-black",children:"Account"}):B("a",{href:"/R2S-Client/signup",className:"hover:border-b-2 hover:border-black",children:"Sign Up"})]})})]})},iF=()=>Se("footer",{className:"bg-black text-white py-10",children:[Se("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-5 gap-8",children:[Se("div",{children:[B("h2",{className:"text-[24px] font-semibold",children:"Exclusive"}),B("p",{className:"mt-3 text-[20px] py-4",children:"Subscribe"}),B("p",{className:"text-[16px] text-gray-300",children:"Get 10% off your first order"}),Se("div",{className:"hidden lg:flex items-center mt-3 border border-white rounded px-3 py-2 relative w-full max-w-[300px]",children:[B("input",{type:"email",placeholder:"Enter your email",className:"bg-transparent outline-none flex-1 text-sm pr-10"}),B("button",{className:"text-white absolute right-3 top-1/2 -translate-y-1/2",children:""})]})]}),Se("div",{className:"space-y-4",children:[B("h2",{className:"text-[20px]",children:"Support"}),B("p",{className:"mt-3 text-[16px] text-gray-300",children:"111 Bijoy sarani, Dhaka, DH 1515, Bangladesh."}),B("p",{className:"hidden lg:flex text-[16px] mt-2 text-gray-300",children:"exclusive@gmail.com"}),B("p",{className:"text-[16px] mt-2 text-gray-300",children:"+88015-88888-9999"})]}),Se("div",{children:[B("h2",{className:"text-[20px]",children:"Account"}),Se("ul",{className:"mt-3 space-y-4 text-[16px] text-gray-300",children:[B("li",{children:"My Account"}),B("li",{children:"Login / Register"}),B("li",{children:"Cart"}),B("li",{children:"Wishlist"}),B("li",{children:"Shop"})]})]}),Se("div",{children:[B("h2",{className:"text-[20px]",children:"Quick Link"}),Se("ul",{className:"mt-3 space-y-4 text-[16px] text-gray-300",children:[B("li",{children:"Privacy Policy"}),B("li",{children:"Terms Of Use"}),B("li",{children:"FAQ"}),B("li",{children:"Contact"})]})]}),Se("div",{children:[B("h2",{className:"text-[20px]",children:"Download App"}),B("p",{className:"mt-3 text-[12px] text-gray-300",children:"Save $3 with App New User Only"}),Se("div",{className:"mt-3 flex items-center space-x-2",children:[B("img",{src:"/R2S-Client/QRCode.svg",alt:"QR Code",className:"w-[76px] h-[76px]"}),Se("div",{className:"flex flex-col space-y-2",children:[B("img",{src:"/R2S-Client/GGPlay.svg",alt:"Google Play",className:"w-28"}),B("img",{src:"/R2S-Client/AppStore.svg",alt:"App Store",className:"w-28"})]})]}),Se("div",{className:"hidden lg:flex justify-left space-x-7 ml-2 mt-6",children:[B("img",{src:"/R2S-Client/Facebook.svg",alt:"Facebook",className:"w-[10.5px] h-[18px] cursor-pointer"}),B("img",{src:"/R2S-Client/Twitter.svg",alt:"Twitter",className:"h-[19px] cursor-pointer"}),B("img",{src:"/R2S-Client/Instagram.svg",alt:"Instagram",className:"w-[18px] h-[18px] cursor-pointer"}),B("img",{src:"/R2S-Client/Linkedin.svg",alt:"Facebook",className:"w-[17.5px] h-[17.5px] cursor-pointer"})]})]})]}),B("div",{className:"mt-10 pt-6 text-center text-sm text-gray-500",children:B("p",{children:" Copyright Rimel 2022. All rights reserved"})})]}),sF=({children:r})=>Se("div",{className:"min-h-screen w-full bg-white",children:[B(nF,{}),B("main",{className:"flex-grow max-w-7xl mx-auto pl-4 pr-4",children:r}),B(iF,{})]});var oF=function(){return null};const aF=new GR;eC.createRoot(document.getElementById("root")).render(B(Rt.StrictMode,{children:Se(ek,{client:aF,children:[B(oF,{initialIsOpen:!1}),B(sF,{children:B(rF,{})}),B(OR,{})]})}));
